[{"title":"基于Fresco的大图浏览","url":"https://idisfkj.github.io/2017/03/05/基于Fresco的大图浏览/","content":"<p>&#x4E0A;&#x4E2A;&#x661F;&#x671F;&#x662F;&#x4E2A;&#x5FD9;&#x788C;&#x7684;&#x4E00;&#x5468;&#xFF0C;&#x5168;&#x5468;&#x90FD;&#x5728;&#x8D76;&#x8FDB;&#x5EA6;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x8FC7;&#x5E74;&#x8FC7;&#x7684;&#x592A;&#x8212;&#x7545;&#x4E86;&#x5427;&#x3002;&#x73B0;&#x5728;&#x7EC8;&#x4E8E;&#x6709;&#x7A7A;&#x6765;&#x5750;&#x4E0B;&#x6765;&#xFF0C;&#x5B89;&#x5B89;&#x9759;&#x9759;&#x7684;&#x601D;&#x8003;&#x4E0B;&#x8FD9;&#x5FD9;&#x788C;&#x540E;&#x7684;&#x6536;&#x83B7;&#x3002;&#x5728;&#x6B64;&#x4E5F;&#x56DE;&#x987E;&#x4E00;&#x4E0B;&#xFF0C;&#x505A;&#x4E2A;&#x5206;&#x4EAB;&#xFF01;</p>\n<p>&#x4ECA;&#x5929;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x5173;&#x4E8E;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x5404;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x90FD;&#x5F88;&#x591A;&#xFF0C;&#x4F46;&#x6211;&#x8FD9;&#x91CC;&#x8981;&#x8BF4;&#x7684;&#x662F;&#x57FA;&#x4E8E;<code>Fresco</code>&#x6765;&#x5B9E;&#x73B0;&#x3002;&#xFF08;&#x5176;&#x5B9E;&#x4E3B;&#x8981;&#x662F;&#x9879;&#x76EE;&#x4E2D;&#x7528;&#x7684;&#x5C31;&#x662F;<code>Fresco</code>&#xFF09;</p>\n<h1 id=\"Fresco\"><a href=\"#Fresco\" class=\"headerlink\" title=\"Fresco\"></a>Fresco</h1><p>&#x53EF;&#x80FD;&#x8FD8;&#x6709;&#x4EBA;&#x4E0D;&#x4E86;&#x89E3;<code>Fresco</code>&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x6765;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x3002;</p>\n<p><code>Fresco</code>&#x662F;<code>facebook</code>&#x63A8;&#x51FA;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x8BE5;&#x9879;&#x76EE;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x89E3;&#x51B3;<code>Android</code>&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7684;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5F3A;&#x5927;&#x7684;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x4E4B;&#x540E;&#xFF0C;&#x4F60;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x53BB;&#x5173;&#x5FC3;&#x56FE;&#x7247;&#x7684;&#x52A0;&#x8F7D;&#x548C;&#x663E;&#x793A;&#x7684;&#x7E41;&#x7410;&#x4E8B;&#x4EF6;&#x3002;&#x5BF9;&#x4E8E;&#x4E13;&#x6CE8;&#x4E8E;&#x56FE;&#x7247;<code>App</code>&#x5F3A;&#x70C8;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x5B83;&#x3002;</p>\n<h2 id=\"Feature\"><a href=\"#Feature\" class=\"headerlink\" title=\"Feature\"></a>Feature</h2><p>&#x4E0B;&#x9762;&#x662F;&#x5B83;&#x7684;&#x4E00;&#x4E9B;&#x7A81;&#x51FA;&#x7279;&#x6027;</p>\n<ul>\n<li><code>Fresco</code>&#x4E2D;&#x7684;<code>Image Pipeline</code>&#x8D1F;&#x8D23;&#x4ECE;&#x7F51;&#x7EDC;&#x3001;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3001;&#x672C;&#x5730;&#x8D44;&#x6E90;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x8282;&#x7701;&#x7A7A;&#x95F4;&#x4E0E;<code>CPU</code>&#x65F6;&#x95F4;&#xFF0C;&#x540C;&#x65F6;&#x542B;&#x6709;3&#x7EA7;&#x7F13;&#x5B58;&#xFF08;2&#x7EA7;&#x5185;&#x5B58;&#xFF0C;1&#x7EA7;&#x78C1;&#x76D8;&#xFF09;&#xFF0C;&#x652F;&#x6301;&#x7F29;&#x7565;&#x56FE;&#x4E0E;&#x6E05;&#x6670;&#x5EA6;&#x7684;&#x8F6C;&#x6362;&#x7B49;</li>\n<li><code>Fresco</code>&#x7684;<code>Drawees</code>&#xFF0C;&#x8D1F;&#x8D23;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x524D;&#x7684;&#x5360;&#x4F4D;&#x56FE;&#x4E0E;&#x56FE;&#x7247;&#x4E0D;&#x53EF;&#x89C1;&#x65F6;&#x7684;&#x91CA;&#x653E;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x652F;&#x6301;&#x5706;&#x5F62;&#x56FE;&#x7247;&#x7684;&#x5B9E;&#x73B0;</li>\n<li><code>Fresco</code>&#x652F;&#x6301;&#x6E10;&#x8FDB;&#x5F0F;&#x56FE;&#x7247;&#x5C55;&#x793A;&#xFF0C;<code>Android</code>&#x672C;&#x8EAB;&#x662F;&#x4E0D;&#x652F;&#x6301;&#x7684;&#x3002;</li>\n<li><p><code>Fresco</code>&#x5B8C;&#x7F8E;&#x652F;&#x6301;<code>Gif</code>&#x4E0E;<code>WebP</code>&#x52A8;&#x56FE;&#xFF0C;&#x8F7B;&#x677E;&#x89E3;&#x51B3;&#x6BCF;&#x4E00;&#x5E27;&#x90FD;&#x662F;&#x5F88;&#x5927;&#x7684;<code>Bitmap</code>&#x70E6;&#x607C;&#x3002;</p>\n<p>&#x4F20;&#x9001;&#x95E8;: <a href=\"https://github.com/facebook/fresco\" target=\"_blank\" rel=\"external\">Fresco</a></p>\n</li>\n</ul>\n<h1 id=\"&#x5927;&#x56FE;&#x6D4F;&#x89C8;\"><a href=\"#&#x5927;&#x56FE;&#x6D4F;&#x89C8;\" class=\"headerlink\" title=\"&#x5927;&#x56FE;&#x6D4F;&#x89C8;\"></a>&#x5927;&#x56FE;&#x6D4F;&#x89C8;</h1><h2 id=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"><a href=\"#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h2><p>&#x65E2;&#x7136;&#x662F;&#x57FA;&#x4E8E;<code>Fresco</code>,&#x5728;&#x5B9E;&#x73B0;&#x4E4B;&#x524D;&#x81EA;&#x7136;&#x8981;&#x5BFC;&#x5165;<code>Fresco</code>&#x7684;&#x76F8;&#x5173;&#x4F9D;&#x8D56;&#x5305;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.facebook.fresco:fresco:1.0.0&apos;</div><div class=\"line\">compile &apos;com.facebook.fresco:animated-gif:1.0.0&apos;</div><div class=\"line\">compile &apos;com.facebook.fresco:animated-webp:1.0.0&apos;</div><div class=\"line\">compile &apos;com.facebook.fresco:webpsupport:1.0.0&apos;</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x53EA;&#x8981;&#x5B9E;&#x73B0;&#x666E;&#x901A;&#x56FE;&#x7247;&#x7684;&#x52A0;&#x8F7D;&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x8981;&#x5BFC;&#x5165;&#x7B2C;&#x4E00;&#x4E2A;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x597D;&#x4E86;&#x73B0;&#x5728;&#x4F60;&#x5C31;&#x53EF;&#x725B;&#x903C;&#x54C4;&#x54C4;&#x7684;&#x4F7F;&#x7528;&#x8FD9;&#x4E48;&#x9AD8;&#x5927;&#x4E0A;&#x7684;&#x7EC4;&#x4EF6;&#x6765;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#xFF0C;&#x81F3;&#x4E8E;&#x4F7F;&#x7528;&#x6B65;&#x9AA4;&#xFF0C;&#x968F;&#x4FBF;&#x770B;&#x4E0B;&#x76F8;&#x5173;&#x6559;&#x7A0B;&#x5C31;&#x80FD;&#x8F7B;&#x677E;&#x641E;&#x5B9A;&#xFF0C;&#x4F8B;&#x5982;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;&#x5706;&#x5F62;&#x56FE;&#x7247;&#x3002;&#x60F3;&#x5F53;&#x521D;&#x6211;&#x8FD8;&#x662F;&#x82E6;&#x903C;&#x662F;&#x627E;&#x76F8;&#x5173;&#x7684;&#x5E93;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x2026;</p>\n<h2 id=\"SimpleDraweeView\"><a href=\"#SimpleDraweeView\" class=\"headerlink\" title=\"SimpleDraweeView\"></a>SimpleDraweeView</h2><p>&#x4E0A;&#x9762;&#x53EA;&#x662F;&#x9488;&#x5BF9;&#x4E8E;&#x666E;&#x901A;&#x7684;&#x56FE;&#x7247;&#x5C55;&#x793A;&#xFF0C;&#x4F46;&#x4E0D;&#x662F;&#x4ECA;&#x5929;&#x7684;&#x4E3B;&#x9898;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x6BB5;&#x57FA;&#x672C;&#x7684;&#x4F7F;&#x7528;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void displayImage(SimpleDraweeView draweeView, String url) {</div><div class=\"line\">        GenericDraweeHierarchy hierarchy = draweeView.getHierarchy();</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x5360;&#x4F4D;&#x56FE;</div><div class=\"line\">        if (hierarchy == null) {</div><div class=\"line\">            hierarchy = GenericDraweeHierarchyBuilder.newInstance(getResources())</div><div class=\"line\">                    .setPlaceholderImage(getResources().getDrawable(R.mipmap.ic_launcher)</div><div class=\"line\">                            , ScalingUtils.ScaleType.CENTER).build();</div><div class=\"line\">            draweeView.setHierarchy(hierarchy);</div><div class=\"line\">        } else {</div><div class=\"line\">            hierarchy.setPlaceholderImage(getResources().getDrawable(R.mipmap.ic_launcher)</div><div class=\"line\">                    , ScalingUtils.ScaleType.CENTER);</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        //&#x6784;&#x5EFA;ImageRequestBuilder&#xFF0C;&#x4F20;&#x5165;&#x8BF7;&#x6C42;Uri</div><div class=\"line\">        ImageRequestBuilder requestBuilder = ImageRequestBuilder.newBuilderWithSource(Uri.parse(url));</div><div class=\"line\">        //&#x6784;&#x5EFA;Controller</div><div class=\"line\">        DraweeController controller = Fresco.newDraweeControllerBuilder()</div><div class=\"line\">                .setOldController(draweeView.getController())</div><div class=\"line\">                .setImageRequest(requestBuilder.build())</div><div class=\"line\">                .build();</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x56FE;&#x7247;&#xFF0C;Fresco&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x56FE;&#x7247;&#x90FD;&#x662F;&#x901A;&#x8FC7;Controller&#x6765;&#x5B9E;&#x73B0;</div><div class=\"line\">        draweeView.setController(controller);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x76F8;&#x4FE1;&#x4E0A;&#x9762;&#x7684;&#x6CE8;&#x91CA;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x660E;&#x663E;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"ZoomableView\"><a href=\"#ZoomableView\" class=\"headerlink\" title=\"ZoomableView\"></a>ZoomableView</h2><p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x73B0;&#x5728;&#x53EA;&#x8981;&#x662F;&#x4E2A;<code>App</code>&#x4E14;&#x91CC;&#x9762;&#x6709;&#x56FE;&#x7247;&#x7684;&#x5C55;&#x793A;&#xFF0C;&#x90A3;&#x4E48;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x6709;&#x56FE;&#x7247;&#x6D4F;&#x89C8;&#x8FD9;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x3002;&#x5BF9;&#x4E8E;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x9700;&#x8981;&#x652F;&#x6301;&#x7F29;&#x653E;&#x3001;&#x62D6;&#x62FD;&#x3001;&#x53CC;&#x51FB;&#x653E;&#x5927;&#x3002;<code>Fresco</code>&#x539F;&#x751F;&#x7684;<code>SimpleDraweeView</code>&#x662F;&#x4E0D;&#x652F;&#x6301;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x8981;&#x4F7F;&#x7528;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x63A7;&#x4EF6;<code>ZoomableView</code>&#x3002;&#x5F53;&#x7136;&#x5B83;&#x4E5F;&#x662F;<code>Fresco</code>&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x63A5;&#x5165;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x3002;&#x524D;&#x9762;&#x7684;&#x4F20;&#x9001;&#x95E8;&#x4E2D;&#x53EF;&#x4EE5;&#x627E;&#x5230;<code>ZoomableView</code>&#x3002;&#x4F46;&#x6BD5;&#x7ADF;&#x662F;<code>Fresco</code>&#x9879;&#x76EE;&#x7684;&#x96C6;&#x5408;&#x4F53;&#xFF0C;&#x672C;&#x7247;&#x6587;&#x7AE0;&#x7684;&#x672B;&#x5C3E;&#x6211;&#x4F1A;&#x63D0;&#x4F9B;&#x6211;&#x5DF2;&#x7ECF;&#x63D0;&#x53D6;&#x597D;&#x7684;&#x76F8;&#x5173;&#x4EE3;&#x7801;&#x3002;</p>\n<h2 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h2><p>&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x754C;&#x9762;<code>ZoomableActivity</code>,&#x81F3;&#x4E8E;&#x5E03;&#x5C40;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x81EA;&#x7136;&#x5C11;&#x4E0D;&#x4E86;<code>ViewPager</code>,&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x4ECB;&#x7ECD;<code>ViewPager</code>&#x4E86;,&#x76F4;&#x63A5;&#x4E0A;<code>ZoomableActivity</code>&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ZoomableActivity extends AppCompatActivity implements ViewPager.OnPageChangeListener {</div><div class=\"line\">    private static final String EXTRA_ZOOMABLE_PATHS = &quot;extra_zoomable_paths&quot;;</div><div class=\"line\">    private static final String EXTRA_ZOOMABLE_INDEX = &quot;extra_zoomable_index&quot;;</div><div class=\"line\"> </div><div class=\"line\">    private ViewPager mViewPager;</div><div class=\"line\">    private TextView mZoomableIndex;</div><div class=\"line\">    private ArrayList&lt;String&gt; mPaths;</div><div class=\"line\">    private int mIndex;</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onCreate(@Nullable Bundle savedInstanceState) {</div><div class=\"line\">        super.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.zoommable_activity);</div><div class=\"line\">        getExtraData();</div><div class=\"line\">        initView();</div><div class=\"line\">        setupViewPager();</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private void getExtraData() {</div><div class=\"line\">        mPaths = getIntent().getStringArrayListExtra(EXTRA_ZOOMABLE_PATHS);</div><div class=\"line\">        mIndex = getIntent().getIntExtra(EXTRA_ZOOMABLE_INDEX, 0);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private void initView() {</div><div class=\"line\">        mViewPager = (ViewPager) findViewById(R.id.view_pager);</div><div class=\"line\">        mZoomableIndex = (TextView) findViewById(R.id.zoomable_index);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private void setupViewPager() {</div><div class=\"line\">        mViewPager.setAdapter(new ZoomableViewPagerAdapter(this, mPaths));</div><div class=\"line\">        mViewPager.setCurrentItem(mIndex);</div><div class=\"line\">        mZoomableIndex.setText(mIndex + 1 + &quot;/&quot; + mPaths.size());</div><div class=\"line\">        mViewPager.addOnPageChangeListener(this);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void onPageSelected(int position) {</div><div class=\"line\">        mZoomableIndex.setText(position + 1 + &quot;/&quot; + mPaths.size());</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void onPageScrollStateChanged(int state) {</div><div class=\"line\"> </div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    public static void goToPage(Context context, ArrayList&lt;String&gt; paths, int index) {</div><div class=\"line\">        Intent intent = new Intent(context, ZoomableActivity.class);</div><div class=\"line\">         intent.putStringArrayListExtra(EXTRA_ZOOMABLE_PATHS, paths);</div><div class=\"line\">        intent.putExtra(EXTRA_ZOOMABLE_INDEX, index);</div><div class=\"line\">        context.startActivity(intent);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x5C31;&#x662F;<code>Adapter</code>&#x4E86;&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x56FE;&#x7247;&#x7684;&#x663E;&#x793A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x662F;<code>ViewPager</code>&#x6240;&#x4EE5;&#x4F7F;&#x7528;<code>PagerAdapter</code>,&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#x5C31;&#x662F;&#x5B83;&#x7684;<code>instantiateItem</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public Object instantiateItem(ViewGroup container, int position) {</div><div class=\"line\">        View view = LayoutInflater.from(mContext).inflate(R.layout.zoomable_view_pager_item, null);</div><div class=\"line\">        ZoomableDraweeView zoomableDraweeView = (ZoomableDraweeView) view.findViewById(R.id.zoomable_image);</div><div class=\"line\">        //&#x5141;&#x8BB8;&#x7F29;&#x653E;&#x65F6;&#x5207;&#x6362;</div><div class=\"line\">        zoomableDraweeView.setAllowTouchInterceptionWhileZoomed(true);</div><div class=\"line\">        //&#x957F;&#x6309;</div><div class=\"line\">        zoomableDraweeView.setIsLongpressEnabled(false);</div><div class=\"line\">        //&#x53CC;&#x51FB;&#x51FB;&#x653E;&#x5927;&#x6216;&#x7F29;&#x5C0F;</div><div class=\"line\">        zoomableDraweeView.setTapListener(new DoubleTapGestureListener(zoomableDraweeView));</div><div class=\"line\"></div><div class=\"line\">        DraweeController draweeController = Fresco.newDraweeControllerBuilder()</div><div class=\"line\">                .setUri(mPaths.get(position))</div><div class=\"line\">                .build();</div><div class=\"line\">        //&#x52A0;&#x8F7D;&#x56FE;&#x7247;</div><div class=\"line\">        zoomableDraweeView.setController(draweeController);</div><div class=\"line\">        container.addView(view);</div><div class=\"line\">        view.requestLayout();</div><div class=\"line\">        return view;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x6837;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x501F;&#x52A9;<code>ZoomableView</code>&#x540E;&#xFF0C;&#x53EA;&#x8981;&#x5B9E;&#x73B0;&#x4EA4;&#x4E92;&#x7684;&#x5C55;&#x793A;&#x903B;&#x8F91;&#x5C31;Ok&#x4E86;</em></p>\n</blockquote>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2017/03/05/&#x57FA;&#x4E8E;Fresco&#x7684;&#x5927;&#x56FE;&#x6D4F;&#x89C8;/zoomable.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x9879;&#x76EE;&#x4F20;&#x9001;&#x95E8;&#xFF1A;<a href=\"https://github.com/idisfkj/Zoomable\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/Zoomable</a></p>\n"},{"title":"git使用杂记","url":"https://idisfkj.github.io/2017/01/26/git使用杂记/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x5982;&#x679C;&#x73B0;&#x5728;&#x8FD8;&#x4E0D;&#x77E5;&#x9053;<code>git</code>&#x6216;&#x8005;&#x8FD8;&#x4E0D;&#x4F1A;&#x4F7F;&#x7528;<code>git</code>&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5E94;&#x8BE5;&#x597D;&#x597D;&#x7684;&#x53CD;&#x7701;&#x3002;&#x81EA;&#x5DF1;&#x53BB;&#x597D;&#x597D;&#x770B;&#x4E00;&#x904D;&#x7684;&#x5165;&#x95E8;&#x4ECB;&#x7ECD;&#x5427;&#x3002;&#x4ECA;&#x5929;&#x53EA;&#x662F;&#x5BF9;&#x81EA;&#x5DF1;&#x5728;&#x65E5;&#x5E38;&#x4E2D;&#x4F7F;&#x7528;<code>git</code>&#x7684;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x547D;&#x4EE4;&#x7684;&#x4ECB;&#x7ECD;&#x4E0E;&#x81EA;&#x5DF1;&#x8BA4;&#x4E3A;&#x4E0D;&#x9519;&#x4E14;&#x80FD;&#x63D0;&#x9AD8;&#x6211;&#x4EEC;&#x529E;&#x516C;&#x6548;&#x7387;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x5185;&#x5BB9;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x70B9;&#x6742;&#x4E71;&#xFF0C;&#x4F46;&#x7EDD;&#x5BF9;&#x90FD;&#x662F;&#x7ECF;&#x5178;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5728;&#x6B64;&#x8BB0;&#x4E0B;&#x7B14;&#x8BB0;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x80FD;&#x5E2E;&#x52A9;&#x6765;&#x8D4F;&#x8138;&#x5173;&#x987E;&#x7684;&#x4F60;&#x4EEC;&#x3002;</p>\n<h2 id=\"&#x533A;&#x57DF;\"><a href=\"#&#x533A;&#x57DF;\" class=\"headerlink\" title=\"&#x533A;&#x57DF;\"></a>&#x533A;&#x57DF;</h2><p>&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#xFF0C;&#x6765;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;<code>git</code>&#x7684;&#x4E09;&#x4E2A;&#x533A;&#x57DF;</p>\n<ul>\n<li>&#x5DE5;&#x4F5C;&#x533A;&#xFF08;working directory&#xFF09;</li>\n<li>&#x6682;&#x5B58;&#x533A;&#xFF08;stage index&#xFF09;</li>\n<li>&#x672C;&#x5730;&#x5386;&#x53F2;&#x533A;&#xFF08;history&#xFF09;</li>\n</ul>\n<p>&#x901A;&#x8FC7;&#x4E00;&#x5F20;&#x56FE;&#x5C31;&#x80FD;&#x7B80;&#x6D01;&#x6613;&#x61C2;&#x7684;&#x660E;&#x767D;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x8F6C;&#x5316;&#x3002;</p>\n<p><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/5.png\" alt=\"git\"></p>\n<h2 id=\"clone\"><a href=\"#clone\" class=\"headerlink\" title=\"clone\"></a>clone</h2><p>&#x5148;&#x4ECE;<code>clone</code>&#x547D;&#x4EE4;&#x6765;&#x4ECB;&#x7ECD;&#xFF0C;&#x4F7F;&#x7528;&#x8FC7;<code>git</code>&#x7684;&#x90FD;&#x77E5;&#x9053;&#x5B83;&#x3002;<code>git colne</code>&#x547D;&#x4EE4;&#x62C9;&#x53D6;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x5230;&#x672C;&#x5730;&#x3002;&#x4F46;&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x62C9;&#x53D6;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x65F6;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x76F4;&#x63A5;<code>mkdir</code>&#xFF0C;&#x5176;&#x5B9E;&#x65E0;&#x9700;&#x5982;&#x6B64;&#xFF0C;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x5C31;&#x80FD;&#x641E;&#x5B9A;<code>git clone &#x8FDC;&#x7A0B;&#x4ED3;&#x5E93; &#x6587;&#x4EF6;&#x540D;</code>&#xFF0C;&#x5C31;&#x662F;&#x5982;&#x6B64;&#x7B80;&#x5355;&#x3002;</p>\n<h2 id=\"rm\"><a href=\"#rm\" class=\"headerlink\" title=\"rm\"></a>rm</h2><p>&#x6211;&#x4EEC;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x8FD9;&#x4E48;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x4F7F;&#x7528;<code>git add .</code>&#x76F4;&#x63A5;&#x5C06;&#x5DE5;&#x4F5C;&#x533A;&#x7684;&#x6240;&#x6709;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;&#x52A0;&#x5165;&#x5230;&#x6682;&#x5B58;&#x533A;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x540E;&#x9762;&#x53D1;&#x73B0;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5148;&#x4E0D;&#x8981;&#x52A0;&#x8FDB;&#x53BB;&#xFF0C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x8BE5;&#x6587;&#x4EF6;&#x9000;&#x56DE;&#x5230;&#x5DE5;&#x4F5C;&#x533A;&#x4E2D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rm --cached &lt;file&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"stash\"><a href=\"#stash\" class=\"headerlink\" title=\"stash\"></a>stash</h2><p>&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5F53;&#x4F60;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x65F6;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x4E0A;&#x7684;&#x7D27;&#x6025;<code>bug</code>&#x9700;&#x8981;&#x4FEE;&#x590D;&#xFF0C;&#x6B64;&#x65F6;&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x529F;&#x80FD;&#x53C8;&#x6CA1;&#x6709;&#x5B8C;&#x6210;&#x4F60;&#x4E0D;&#x60F3;&#x63D0;&#x4EA4;&#xFF0C;&#x6B64;&#x65F6;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>git stash</code>&#x5C06;&#x5DE5;&#x4F5C;&#x533A;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x5B58;&#x653E;&#x8D77;&#x6765;&#x3002;&#x8FD9;&#x65F6;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x653E;&#x5FC3;&#x7684;&#x53BB;&#x5207;&#x5206;&#x652F;&#x4FEE;&#x590D;<code>bug</code>&#xFF0C;&#x4FEE;&#x590D;&#x5B8C;&#x4E4B;&#x540E;&#x6267;&#x884C;<code>git stash pop</code>&#x53EF;&#x4EE5;&#x5C06;&#x5148;&#x524D;&#x5B58;&#x653E;&#x7684;&#x53D6;&#x51FA;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x6709;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x76F8;&#x5173;&#x547D;&#x4EE4;&#x4F8B;&#x5982;&#xFF1A;<code>git stash list</code>&#x67E5;&#x770B;&#x5B58;&#x653E;&#x7684;&#x8BB0;&#x5F55;,<code>git stash drop</code>&#x4E22;&#x5F03;&#x5B58;&#x653E;&#x7684;&#x8BB0;&#x5F55;&#x3002;</p>\n<h2 id=\"tag\"><a href=\"#tag\" class=\"headerlink\" title=\"tag\"></a>tag</h2><p>&#x53EF;&#x80FD;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x6211;&#x4EEC;&#x8981;&#x6253;&#x6807;&#x7B7E;<code>git tag tagName</code>&#xFF0C;&#x5E76;&#x4E14;&#x8981;&#x5C06;&#x76F8;&#x5E94;&#x7684;&#x6807;&#x7B7E;&#x63A8;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x4E2D;&#xFF0C;&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x63A8;&#x9001;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push --tags tagName</div></pre></td></tr></table></figure>\n<h2 id=\"amend\"><a href=\"#amend\" class=\"headerlink\" title=\"amend\"></a>amend</h2><p>&#x5F53;&#x4F60;<code>commit</code>&#x4EE5;&#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x52A0;&#x8FDB;&#x4E0A;&#x6B21;&#x7684;<code>commit</code>&#x4E2D;&#xFF0C;&#x6216;&#x8005;&#x53C8;&#x4FEE;&#x6539;&#x4E86;&#x4E00;&#x4E9B;&#x6587;&#x4EF6;&#x3002;&#x6B64;&#x65F6;&#x4F60;&#x5E76;&#x4E0D;&#x60F3;&#x589E;&#x52A0;&#x65B0;&#x7684;<code>commit</code>&#x4FE1;&#x606F;&#xFF0C;&#x53EA;&#x662F;&#x60F3;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x5230;&#x4E0A;&#x6B21;&#x7684;<code>commit</code>&#x4E2D;&#x3002;&#x8FD9;&#x65F6;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git commit --amend &lt;file&gt;</div></pre></td></tr></table></figure>\n<p>&#x5C06;&#x6682;&#x5B58;&#x533A;&#x7684;&#x6587;&#x4EF6;&#x52A0;&#x5165;&#x5176;&#x4E2D;,&#x5E76;&#x4E14;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6B64;&#x65F6;&#x7684;<code>commit</code>&#x4FE1;&#x606F;&#x3002;</p>\n<h2 id=\"reset\"><a href=\"#reset\" class=\"headerlink\" title=\"reset\"></a>reset</h2><p><code>reset</code>&#x4E5F;&#x80FD;&#x5B9E;&#x73B0;&#x524D;&#x9762;&#x7684;<code>rm</code>&#x7684;&#x6548;&#x679C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x6765;&#x66FF;&#x4EE3;&#x524D;&#x9762;&#x7684;<code>git rm --cached &lt;file&gt;</code>&#x547D;&#x4EE4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reset HEAD &lt;file&gt;</div></pre></td></tr></table></figure>\n<p>&#x4F46;<code>reset</code>&#x7528;&#x9014;&#x66F4;&#x5E7F;&#xFF0C;&#x7ED3;&#x5408;<code>soft</code>&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x56DE;&#x64A4;&#x5230;&#x4EFB;&#x610F;&#x7684;<code>commit</code>&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reset --soft index</div></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;&#x8BE5;&#x547D;&#x4EE4;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x56DE;&#x5230;<code>index</code>&#x5904;&#xFF0C;&#x5DE5;&#x4F5C;&#x533A;&#x4E0D;&#x53D8;&#x3001;&#x6682;&#x5B58;&#x533A;&#x56DE;&#x5230;&#x5F53;&#x65F6;&#x7684;<code>index</code>&#x5904;&#x3002;&#x53E6;&#x5916;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;<code>hard</code>&#x53C2;&#x6570;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reset --hard index</div></pre></td></tr></table></figure>\n<p>&#x4E0E;<code>soft</code>&#x53EF;&#x4EE5;&#x8BF4;&#x5BF9;&#x7ACB;&#xFF0C;&#x5B83;&#x7684;&#x6548;&#x679C;&#x5C31;&#x5728;&#x4E8E;&#x5DE5;&#x4F5C;&#x533A;&#x4E0E;&#x6682;&#x5B58;&#x533A;&#x7684;&#x4E0D;&#x540C;&#xFF0C;&#x5B83;&#x4F1A;&#x6E05;&#x7A7A;&#x8FD9;&#x4E24;&#x4E2A;&#x533A;&#x3002;</p>\n<h2 id=\"rebase\"><a href=\"#rebase\" class=\"headerlink\" title=\"rebase\"></a>rebase</h2><p>&#x5BF9;&#x4E8E;<code>rebase</code>&#x662F;&#x91CD;&#x5B9A;&#x5411;&#x7684;&#x610F;&#x601D;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5F53;&#x524D;&#x7684;&#x5206;&#x652F;&#x4E0E;&#x8FDC;&#x7A0B;&#x7684;&#x5206;&#x652F;<code>commit</code>&#x4FE1;&#x606F;&#x5B58;&#x5728;&#x5DEE;&#x5F02;&#x65F6;&#xFF0C;&#x4F1A;&#x63D0;&#x9192;&#x4F60;&#x6B64;&#x65F6;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;<code>push</code>&#xFF0C;&#x5FC5;&#x987B;&#x5148;&#x5C06;&#x8FDC;&#x7A0B;&#x7684;<code>commit</code>&#x4FE1;&#x606F;&#x62C9;&#x53BB;&#x5230;&#x672C;&#x5730;&#x6765;&#xFF0C;&#x624D;&#x80FD;&#x8FDB;&#x884C;&#x63D0;&#x4EA4;&#x3002;&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>rebase</code>&#x547D;&#x4EE4;&#x4E86;&#x3002;&#x5982;&#x4E0B;&#x5F53;&#x524D;&#x5904;&#x5728;<code>develop</code>&#x5206;&#x652F;</p>\n<p><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/1.png\" alt=\"rebase\"></p>\n<p>&#x6B64;&#x65F6;&#x5E94;&#x8BE5;&#x5148;&#x6267;&#x884C;<code>rebase</code>&#x547D;&#x4EE4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git fetch</div><div class=\"line\">git rebase origin/master</div></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x6700;&#x540E;&#x518D;<code>push</code>&#x5230;&#x8FDC;&#x7A0B;<code>master</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push origin master</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x7EC8;&#x5404;&#x4E2A;&#x5206;&#x652F;&#x7684;&#x60C5;&#x51B5;&#x5C31;&#x662F;&#x4E0A;&#x56FE;&#x7684;&#x6548;&#x679C;&#x4E86;&#x3002;&#x5982;&#x679C;&#x89C9;&#x5F97;&#x547D;&#x4EE4;&#x591A;&#x96BE;&#x8BB0;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x53EF;&#x7528;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x6765;&#x5B8C;&#x6210;&#x4E0A;&#x9762;&#x7684;&#x6548;&#x679C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git pull --rebase origin master</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;<code>rebase</code>&#x7684;&#x7B80;&#x5355;&#x8FD0;&#x7528;&#xFF0C;&#x4E5F;&#x662F;&#x5E38;&#x89C1;&#x7684;&#x547D;&#x4EE4;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;<code>rebase</code>&#x7684;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x53C2;&#x6570;<code>--onto</code>&#x3002;</p>\n<h3 id=\"&#x2013;onto\"><a href=\"#&#x2013;onto\" class=\"headerlink\" title=\"&#x2013;onto\"></a>&#x2013;onto</h3><p>&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x6211;&#x4EEC;&#x90FD;&#x4F1A;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x652F;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x4E0D;&#x540C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5F53;&#x4F60;&#x5728;&#x5206;&#x652F;<code>A</code>&#x4E0A;&#x521B;&#x5EFA;&#x4E86;&#x65B0;&#x5206;&#x652F;<code>B</code>&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x529F;&#x80FD;&#x5E76;&#x4E14;&#x4E5F;&#x63D0;&#x4EA4;&#x4E86;&#x4E00;&#x4E9B;<code>commit</code>&#x65F6;&#xFF0C;&#x6B64;&#x65F6;&#x4F60;&#x53D1;&#x73B0;&#x539F;&#x6765;<code>A</code>&#x5206;&#x652F;&#x4E0A;&#x6709;&#x9519;&#x8BEF;&#x7684;<code>commit</code>&#xFF0C;&#x5982;&#x679C;&#x8981;<code>rebase</code>&#x5230;<code>master</code>&#x4E0A;&#x65F6;&#xFF0C;&#x4E0D;&#x80FD;&#x5C06;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x7684;<code>commit</code>&#x4E5F;&#x9644;&#x5E26;&#x4E0A;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x8BE5;<code>--onto</code>&#x5927;&#x663E;&#x795E;&#x901A;&#x4E86;&#x3002;</p>\n<p><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/3.png\" alt=\"--onto\"></p>\n<p>&#x5F53;&#x524D;&#x5904;&#x5728;<code>B</code>&#x5206;&#x652F;&#xFF0C;&#x8981;&#x5F97;&#x5230;&#x4E0A;&#x9762;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x53EA;&#x9700;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rebase --onto master &lt;b&#x7684;commit hash code&gt; B</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x652F;&#xFF0C;&#x4E5F;&#x80FD;&#x4F5C;&#x7528;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x4E0A;&#x3002;&#x6240;&#x4EE5;&#x9488;&#x5BF9;&#x4E0A;&#x9762;&#x7684;&#x60C5;&#x51B5;&#x53EF;&#x4EE5;&#x53EA;&#x5BF9;&#x5206;&#x652F;<code>B</code>&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x7B49;&#x4EF7;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rebase --onto &lt;a&#x7684;commit hash code&gt; &lt;b&#x7684;commit hash code&gt; B</div></pre></td></tr></table></figure>\n<h3 id=\"&#x2013;interactive\"><a href=\"#&#x2013;interactive\" class=\"headerlink\" title=\"&#x2013;interactive\"></a>&#x2013;interactive</h3><p>&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x4FEE;&#x6539;<code>commit</code>&#x4FE1;&#x606F;&#x7684;&#x540D;&#x79F0;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x4FEE;&#x6539;&#x7684;<code>commit</code>&#x5904;&#x5728;&#x7B2C;&#x4E00;&#x4E2A;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git commit --amend</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x4E0D;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x8981;&#x4F7F;&#x7528;&#x5230;<code>rebase</code>&#x7684;<code>--interactive</code>&#x53EF;&#x9009;&#x53C2;&#x6570;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x7B80;&#x5199;&#x4E3A;<code>-i</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rebase -i &lt;commit hash code&gt;</div></pre></td></tr></table></figure>\n<p>&#x53C2;&#x6570;&#x540E;&#x9762;&#x7684;<code>commit hash code</code>&#x4E3A;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x7684;<code>commit</code>&#x7684;&#x524D;&#x4E00;&#x4E2A;&#x3002;&#x6267;&#x884C;&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x7C7B;&#x4F3C;&#x7684;&#x4FE1;&#x606F;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">pick 137cf0a First coommit</div><div class=\"line\">pick 163dc38 Second commit</div><div class=\"line\"></div><div class=\"line\"># Rebase f9aee6e..163dc38 onto f9aee6e (2 command(s))</div><div class=\"line\">#</div><div class=\"line\"># Commands:</div><div class=\"line\"># p, pick = use commit</div><div class=\"line\"># r, reword = use commit, but edit the commit message</div><div class=\"line\"># e, edit = use commit, but stop for amending</div><div class=\"line\"># s, squash = use commit, but meld into previous commit</div><div class=\"line\"># f, fixup = like &quot;squash&quot;, but discard this commit&apos;s log message</div><div class=\"line\"># x, exec = run command (the rest of the line) using shell</div><div class=\"line\">#</div><div class=\"line\"># These lines can be re-ordered; they are executed from top to bottom.</div><div class=\"line\">#</div><div class=\"line\"># If you remove a line here THAT COMMIT WILL BE LOST.</div><div class=\"line\">#</div><div class=\"line\"># However, if you remove everything, the rebase will be aborted.</div><div class=\"line\">#</div><div class=\"line\"># Note that empty commits are commented out</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x63D0;&#x793A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6709;<code>6</code>&#x4E2A;&#x53EF;&#x9009;&#x62E9;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x76F8;&#x4FE1;&#x63D0;&#x793A;&#x5DF2;&#x7ECF;&#x8BF4;&#x7684;&#x5F88;&#x660E;&#x663E;&#x4E86;&#xFF0C;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x8FD9;&#x79CD;&#x8981;&#x4FEE;&#x6539;<code>First coommit</code>&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;<code>r</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">r 137cf0a First commit</div><div class=\"line\">pick 163dc38 Second commit</div></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;&#x4E4B;&#x540E;&#x4F1A;&#x8DF3;&#x5230;&#x4FEE;&#x8BE5;<code>First coomit</code>&#x7684;&#x754C;&#x9762;&#xFF0C;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x5373;&#x53EF;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">First commit</div><div class=\"line\"></div><div class=\"line\"># Please enter the commit message for your changes. Lines starting</div><div class=\"line\"># with &apos;#&apos; will be ignored, and an empty message aborts the commit.</div><div class=\"line\">#</div><div class=\"line\"># Date:      Thu Jan 26 23:07:10 2017 +0800</div><div class=\"line\">#</div><div class=\"line\"># rebase in progress; onto f9aee6e</div><div class=\"line\"># You are currently editing a commit while rebasing branch &apos;master&apos; on &apos;f9aee6e&apos;.</div><div class=\"line\">#</div><div class=\"line\"># Changes to be committed:</div><div class=\"line\">#       new file:   file1</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x5176;&#x4ED6;&#x7684;&#x64CD;&#x4F5C;&#x9879;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x53BB;&#x5C1D;&#x8BD5;&#x4E00;&#x4E0B;&#x3002;&#x4F8B;&#x5982;<code>s</code>&#x64CD;&#x4F5C;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5408;&#x5E76;<code>commit</code>&#x3002;</p>\n<h2 id=\"branch\"><a href=\"#branch\" class=\"headerlink\" title=\"branch\"></a>branch</h2><p>&#x76F8;&#x4FE1;<code>branch</code>&#x90FD;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x8981;&#x8BF4;&#x7684;&#x662F;&#x4ED6;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x53EF;&#x80FD;&#x4F1A;&#x7528;&#x5230;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x573A;&#x666F;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x5982;&#x679C;&#x5728;&#x4F60;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x5206;&#x652F;&#x65F6;&#xFF0C;&#x5E76;&#x4E0D;&#x60F3;&#x4ECE;&#x5F53;&#x524D;&#x7684;<code>commit</code>&#x4FE1;&#x606F;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x5206;&#x652F;&#x3002;</p>\n<p><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/2.png\" alt=\"branch\"></p>\n<p>&#x8981;&#x5B9E;&#x73B0;&#x5982;&#x4E0A;&#x6548;&#x679C;&#x53EA;&#x9700;&#x5728;&#x521B;&#x5EFA;&#x5206;&#x652F;&#x65F6;&#x5728;&#x540E;&#x9762;&#x518D;&#x6DFB;&#x52A0;&#x989D;&#x5916;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x4F60;&#x6240;&#x9700;&#x8C03;&#x5230;&#x7684;<code>commit</code>&#x8282;&#x70B9;&#x7684;<code>hash code</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch new_branch &lt;commit hash code&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"push\"><a href=\"#push\" class=\"headerlink\" title=\"push\"></a>push</h2><p>&#x8FD9;&#x91CC;&#x63D0;&#x4E00;&#x4E0B;<code>push</code>&#x7684;<code>--set-upstream</code>,&#x5B83;&#x7684;&#x6548;&#x679C;&#x662F;&#x8BBE;&#x7F6E;&#x4E0A;&#x6E38;&#x5206;&#x652F;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5C06;&#x8FDC;&#x7A0B;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x672C;&#x5730;&#x5206;&#x652F;&#x63A8;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5728;&#x63A8;&#x9001;&#x7684;&#x5206;&#x652F;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x4F1A;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x63A8;&#x9001;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout push_branch</div><div class=\"line\">git push origin push_branch</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x662F;&#x7B80;&#x6D01;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F7F;&#x7528;&#x8BE5;&#x53C2;&#x6570;&#x65E0;&#x9700;&#x5207;&#x6362;&#x5206;&#x652F;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x63A8;&#x9001;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push --set-upstream origin push_branch</div></pre></td></tr></table></figure>\n<h2 id=\"cherry-pick\"><a href=\"#cherry-pick\" class=\"headerlink\" title=\"cherry-pick\"></a>cherry-pick</h2><p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x573A;&#x666F;&#x662F;&#xFF1A;&#x5F53;&#x4F60;&#x6240;&#x5728;&#x7684;&#x5206;&#x652F;&#x6CA1;&#x7528;&#xFF0C;&#x4F60;&#x8981;&#x5220;&#x9664;&#x5B83;&#xFF0C;&#x4F46;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;<code>commit</code>&#x4F60;&#x8FD8;&#x662F;&#x60F3;&#x63A8;&#x9001;&#x5230;&#x8FDC;&#x7A0B;<code>master</code>&#x4E0A;&#x3002;<br><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/4.png\" alt=\"cherry-pick\"></p>\n<p>&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;<code>master</code>&#xFF0C;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git cherry-pick &lt;b&#x7684; commit hash code&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"merge\"><a href=\"#merge\" class=\"headerlink\" title=\"merge\"></a>merge</h2><p>&#x6211;&#x4EEC;&#x6240;&#x719F;&#x77E5;&#x7684;&#x662F;&#x4F7F;&#x7528;<code>merge</code>&#x6765;&#x8FDB;&#x884C;&#x5206;&#x652F;&#x7684;&#x5408;&#x5E76;&#xFF0C;&#x6BCF;&#x6B21;&#x4F7F;&#x7528;<code>merge</code>&#x65F6;&#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x526F;&#x5206;&#x652F;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;<code>commit</code>&#x8FDB;&#x884C;&#x63A8;&#x9001;&#x5230;&#x4E3B;&#x5206;&#x652F;&#x4E0A;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x6211;&#x4E0D;&#x60F3;&#x5B83;&#x81EA;&#x52A8;&#x63A8;&#x9001;&#x5230;&#x4E3B;&#x5206;&#x652F;&#x4E0A;&#x65F6;&#xFF08;&#x53EF;&#x80FD;&#x6211;&#x8FD8;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF09;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>--squash</code>&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git merge --squash dev_branch</div></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;&#x5B8C;&#x4EE5;&#x4E0A;&#x547D;&#x4EE4;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x6682;&#x5B58;&#x533A;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x8FD8;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x6587;&#x4EF6;&#x72B6;&#x6001;&#x3002;</p>\n<h2 id=\"reflog\"><a href=\"#reflog\" class=\"headerlink\" title=\"reflog\"></a>reflog</h2><p>&#x5F53;&#x6211;&#x4EEC;&#x5207;&#x5206;&#x652F;&#x592A;&#x9891;&#x7E41;&#x4E86;&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5FD8;&#x4E86;&#x4E00;&#x4E9B;&#x5206;&#x652F;&#x662F;&#x4ECE;&#x54EA;&#x4E2A;&#x5206;&#x652F;&#x5207;&#x8FC7;&#x6765;&#x7684;&#xFF0C;&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reflog</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">894a16d HEAD@{0}: commit: commit another todo</div><div class=\"line\">6876e5b HEAD@{1}: checkout: moving from solve_world_hunger to kill_the_batman</div><div class=\"line\">324336a HEAD@{2}: commit: commit todo</div><div class=\"line\">6876e5b HEAD@{3}: checkout: moving from blowup_sun_for_ransom to solve_world_hunger</div><div class=\"line\">6876e5b HEAD@{4}: checkout: moving from kill_the_batman to blowup_sun_for_ransom</div><div class=\"line\">6876e5b HEAD@{5}: checkout: moving from cure_common_cold to kill_the_batman</div><div class=\"line\">6876e5b HEAD@{6}: commit (initial): initial commit</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6240;&#x7528;&#x7684;&#x64CD;&#x4F5C;&#x5386;&#x53F2;&#x4E86;&#x3002;&#x8FD9;&#x6837;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>git reset</code>&#x547D;&#x4EE4;&#x4E0D;&#x5C0F;&#x5FC3;&#x5220;&#x9664;&#x4E86;&#x9700;&#x8981;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6B64;&#x6765;&#x67E5;&#x627E;&#x5230;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x7684;<code>hash code</code>&#xFF0C;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x6062;&#x590D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout &lt;hash code&gt;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x76EE;&#x524D;&#x60F3;&#x5230;&#x7684;&#x5C31;&#x8FD9;&#x4E9B;&#x4E86;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x6709;&#x6240;&#x5E2E;&#x52A9;</em></p>\n</blockquote>\n"},{"title":"Andorid多渠道打包","url":"https://idisfkj.github.io/2017/01/02/Andorid多渠道打包/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><code>2016</code>&#x521A;&#x521A;&#x8FC7;&#x53BB;&#xFF0C;&#x81EA;&#x5DF1;&#x5199;&#x535A;&#x5BA2;&#x662F;&#x5728;<code>2016.03.04</code>&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x65E5;&#x5B50;&#x5F88;&#x7279;&#x522B;&#xFF0C;&#x4E5F;&#x5F88;&#x6709;&#x620F;&#x5267;&#x8272;&#x5F69;(&#x5185;&#x5E55;&#x6211;&#x73B0;&#x5728;&#x662F;&#x4E0D;&#x4F1A;&#x544A;&#x8BC9;&#x4F60;&#x4EEC;&#x6EF4;&#xFF0C;&#x731C;&#x53BB;&#x5427;&#xFF01;)&#x3002;&#x6D4F;&#x89C8;&#x4E86;&#x4E0B;&#x81EA;&#x5DF1;&#x53BB;&#x5E74;&#x7684;&#x6210;&#x679C;&#xFF0C;&#x6587;&#x7AE0;&#x6570;&#x91CF;&#x8FD8;&#x662F;&#x5F88;&#x53EF;&#x89C2;&#x7684;&#xFF0C;&#x8D77;&#x521D;&#x7684;&#x4E00;&#x4E2A;&#x6708;<code>4</code>&#x7BC7;&#x5230;&#x540E;&#x9762;&#x7684;&#x4E00;&#x4E2A;&#x6708;<code>1</code>&#x7BC7;&#x3002;&#x73B0;&#x5728;&#x81EA;&#x5DF1;&#x4E5F;&#x8981;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E0D;&#x518D;&#x50CF;&#x539F;&#x6765;&#x5728;&#x5B66;&#x6821;&#x90A3;&#x4E48;&#x591A;&#x65F6;&#x95F4;&#xFF0C;&#x4ECE;&#x6700;&#x8FD1;&#x7684;&#x535A;&#x5BA2;&#x66F4;&#x65B0;&#x6765;&#x770B;&#xFF0C;&#x53D1;&#x73B0;&#x81EA;&#x5DF1;&#x6700;&#x8FD1;&#x5077;&#x61D2;&#x4E86;&#x54E6;(&#x5077;&#x61D2;&#x786E;&#x5B9E;&#x5F88;&#x723D;)&#xFF01;&#x65B0;&#x7684;&#x4E00;&#x5E74;&#x7ED9;&#x6211;&#x4E00;&#x51FB;&#x8B66;&#x949F;&#xFF0C;&#x6211;&#x4E0D;&#x80FD;&#x8352;&#x5E9F;&#x6211;&#x7684;&#x535A;&#x5BA2;&#xFF0C;&#x6211;&#x8981;&#x91CD;&#x62FE;&#x6211;&#x7684;&#x521D;&#x8877;&#x3002;<code>&#x5728;&#x6B64;&#x501F;&#x52A9;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x7ACB;&#x4E0B;&#x8BC1;&#x636E;</code>&#x3002;</p>\n<p>&#x65B0;&#x7684;&#x4E00;&#x5E74;&#x65B0;&#x7684;&#x5F00;&#x59CB;&#xFF0C;&#x4E00;&#x6B65;&#x4E00;&#x4E2A;&#x811A;&#x5370;&#x8FCE;&#x63A5;<code>2017</code></p>\n<hr>\n<h1 id=\"&#x6B63;&#x6587;\"><a href=\"#&#x6B63;&#x6587;\" class=\"headerlink\" title=\"&#x6B63;&#x6587;\"></a>&#x6B63;&#x6587;</h1><p>&#x611F;&#x8C22;&#x503E;&#x542C;&#x6211;&#x7684;&#x611F;&#x6168;&#xFF0C;&#x4E0B;&#x9762;&#x6B63;&#x5F0F;&#x8FDB;&#x5165;&#x4E3B;&#x9898;&#x3002;&#x5173;&#x4E8E;&#x8FD9;&#x6B21;&#x7684;&#x591A;&#x6E20;&#x9053;&#x6253;&#x5305;&#x4E5F;&#x662F;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x624D;&#x8BA4;&#x8BC6;&#x6709;&#x8FD9;&#x4E00;&#x56DE;&#x4E8B;&#xFF0C;&#x539F;&#x6765;&#x5728;&#x5B66;&#x6821;&#x66F4;&#x672C;&#x4E0D;&#x4F1A;&#x63A5;&#x89E6;&#x5230;&#x8FD9;&#x4E9B;&#xFF0C;<code>&#x793E;&#x4F1A;&#x662F;&#x6700;&#x597D;&#x7684;&#x8001;&#x5E08;</code>&#x3002;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;<code>App</code>&#x90FD;&#x8981;&#x53D1;&#x5E03;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x5E73;&#x53F0;&#xFF0C;&#x56E0;&#x6B64;&#x5C31;&#x6709;&#x4E86;&#x8BB8;&#x591A;&#x7684;&#x6E20;&#x9053;(360&#x3001;baidu&#x3001;xiaomi&#x3001;91&#x3001;oppo&#x7B49;)&#xFF0C;&#x800C;&#x516C;&#x53F8;&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x8FFD;&#x8E2A;&#x7528;&#x6237;&#x5BF9;&#x4EA7;&#x54C1;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x8981;&#x5BF9;&#x4E0D;&#x540C;&#x6E20;&#x9053;&#x4E0B;&#x8F7D;&#x7684;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x7EDF;&#x8BA1;&#x3002;&#x81F3;&#x4E8E;&#x7EDF;&#x8BA1;&#x73B0;&#x5728;&#x5927;&#x591A;&#x6570;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x53CB;&#x76DF;&#x3002;&#x5982;&#x4F55;&#x7EDF;&#x8BA1;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x3002;&#x6240;&#x4EE5;&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x6E20;&#x9053;&#x6211;&#x4EEC;&#x8981;&#x5206;&#x522B;&#x6253;&#x5305;&#xFF0C;&#x5F53;&#x7136;&#x8FD9;&#x4E5F;&#x662F;<code>Android</code>&#x591A;&#x5E73;&#x53F0;&#x7684;&#x7F18;&#x6545;&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E;<code>IOS</code>&#x5374;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x56DE;&#x4E8B;&#x3002;&#x73B0;&#x5728;&#x6E20;&#x9053;&#x6709;<code>900</code>&#x591A;&#x4E2A;&#xFF0C;&#x4E00;&#x822C;&#x6253;&#x4E00;&#x6B21;&#x5305;&#x5C31;&#x8981;<code>3~4</code>&#x5206;&#x949F;&#xFF0C;&#x50CF;&#x6211;&#x516C;&#x53F8;&#x8981;&#x9488;&#x5BF9;<code>66</code>&#x4E2A;&#x6E20;&#x9053;&#x8FDB;&#x884C;&#x6253;&#x5305;&#x3002;&#x5982;&#x679C;&#x6309;&#x90E8;&#x5C31;&#x73ED;&#x6765;&#x90A3;&#x5C31;&#x8981;<code>3~4</code>&#x4E2A;&#x5C0F;&#x65F6;&#x4E86;&#xFF08;&#x54C7;&#x597D;&#x723D;&#x554A;&#xFF0C;&#x534A;&#x5929;&#x5DE5;&#x4F5C;&#x65F6;&#x95F4;&#x5C31;&#x8FC7;&#x53BB;&#x4E86;&#xFF0C;&#x5077;&#x61D2;&#x6210;&#x529F;&#xFF09;&#x8FD9;&#x6837;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#x5B8C;&#x5168;&#x88AB;&#x8FD9;&#x79CD;&#x65E0;&#x610F;&#x4E49;&#x7684;&#x4E1C;&#x897F;&#x6D6A;&#x8D39;&#x4E86;&#x3002;&#x5982;&#x679C;&#x628A;&#x8FD9;&#x4E9B;&#x65F6;&#x95F4;&#x7528;&#x6765;&#x64A9;&#x59B9;&#x7EC8;&#x8EAB;&#x5927;&#x4E8B;&#x5C31;&#x4E0D;&#x6101;&#x4E86;&#xFF08;&#x563B;&#x563B;&#xFF09;&#x3002;</p>\n<h2 id=\"&#x89E3;&#x51B3;\"><a href=\"#&#x89E3;&#x51B3;\" class=\"headerlink\" title=\"&#x89E3;&#x51B3;\"></a>&#x89E3;&#x51B3;</h2><h3 id=\"&#x6700;&#x57FA;&#x672C;&#x65B9;&#x5F0F;\"><a href=\"#&#x6700;&#x57FA;&#x672C;&#x65B9;&#x5F0F;\" class=\"headerlink\" title=\"&#x6700;&#x57FA;&#x672C;&#x65B9;&#x5F0F;\"></a>&#x6700;&#x57FA;&#x672C;&#x65B9;&#x5F0F;</h3><p>&#x6700;&#x57FA;&#x672C;&#x7684;&#x8BBE;&#x7F6E;&#x6E20;&#x9053;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x5728;<code>AndroidManifest.xml</code>&#x6587;&#x4EF6;&#x4E2D;&#x5B9A;&#x4E49;<code>&lt;meta-data&gt;</code>&#x5143;&#x7D20;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;meta-data</div><div class=\"line\">    android:name=&quot;UMENG_CHANNEL&quot;</div><div class=\"line\">    android:value=&quot;Channel_ID&quot; /&gt;</div><div class=\"line\">&lt;meta-data</div><div class=\"line\">\tandroid:name=&quot;UMENG_CHANNEL&quot;</div><div class=\"line\">   \tandroid:value=&quot;web&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x53CB;&#x76DF;&#x7EDF;&#x8BA1;&#xFF0C; &#x4E0A;&#x9762;&#x7684;<code>web</code>&#x5C31;&#x662F;&#x6E20;&#x9053;&#x540D;&#xFF0C;&#x4E0D;&#x540C;&#x6E20;&#x9053;&#x5BF9;&#x5E94;&#x4E0D;&#x540C;&#x7684;&#x503C;&#x3002;&#x5BF9;&#x4E8E;&#x6E20;&#x9053;&#x5C11;&#x7684;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;<code>build.gradle</code>&#x4E2D;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;<code>productFlavors</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">productFlavors {</div><div class=\"line\">        xiaomi {</div><div class=\"line\">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;xiaomi&quot;]</div><div class=\"line\">        }</div><div class=\"line\">        _360 {</div><div class=\"line\">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;_360&quot;]</div><div class=\"line\">        }</div><div class=\"line\">        baidu {</div><div class=\"line\">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;baidu&quot;]</div><div class=\"line\">        }</div><div class=\"line\">        wandoujia {</div><div class=\"line\">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;wandoujia&quot;]</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6216;&#x8005;&#x7EDF;&#x4E00;&#x4FEE;&#x6539;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">productFlavors {</div><div class=\"line\">        xiaomi {}</div><div class=\"line\">        _360 {}</div><div class=\"line\">        baidu {}</div><div class=\"line\">        wandoujia {}</div><div class=\"line\">    }  </div><div class=\"line\">    productFlavors.all { </div><div class=\"line\">        flavor -&gt; flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name] </div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x9488;&#x5BF9;&#x6E20;&#x9053;&#x5C11;&#x7684;&#xFF0C;&#x4E5F;&#x662F;&#x6700;&#x57FA;&#x672C;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x6E20;&#x9053;&#x8FC7;&#x591A;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x73B0;&#x5728;&#x9047;&#x5230;&#x7684;<code>60</code>&#x591A;&#x4E2A;&#xFF0C;&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x5462;&#xFF1F;</p>\n<h3 id=\"&#x4F18;&#x5316;&#x65B9;&#x5F0F;\"><a href=\"#&#x4F18;&#x5316;&#x65B9;&#x5F0F;\" class=\"headerlink\" title=\"&#x4F18;&#x5316;&#x65B9;&#x5F0F;\"></a>&#x4F18;&#x5316;&#x65B9;&#x5F0F;</h3><p>&#x8FD9;&#x91CC;&#x501F;&#x52A9;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;<code>packer-ng</code>&#xFF0C;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6253;&#x5305;&#xFF0C;&#x5B83;&#x53EA;&#x9700;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x6B63;&#x5E38;&#x7684;&#x6253;&#x5305;&#x64CD;&#x4F5C;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x6E20;&#x9053;&#x6BCF;&#x4E2A;&#x4EE5;<code>1</code>&#x79D2;&#x4EE5;&#x5185;&#x7684;&#x901F;&#x5EA6;&#x8FDB;&#x884C;&#x6253;&#x5305;&#x3002;&#x901F;&#x5EA6;&#x662F;&#x4E0D;&#x662F;&#x975E;&#x5E38;&#x53EF;&#x89C2;&#x5462;(&#x9EBB;&#x9EBB;&#x518D;&#x4E5F;&#x4E0D;&#x7528;&#x62C5;&#x5FC3;&#x6211;&#x7684;&#x6548;&#x7387;&#x4E86;)&#x3002;</p>\n<p>&#x9996;&#x5148;&#x5728;&#x9879;&#x76EE;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x7684;<code>bulid.gradle</code>&#x4E2D;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">        classpath &apos;com.mcxiaoke.gradle:packer-ng:1.0.8&apos;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x5207;&#x6362;&#x5230;<code>app</code>&#x4E0B;&#x7684;<code>build.gradle</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">apply plugin: &apos;packer&apos;</div><div class=\"line\"> </div><div class=\"line\">signingConfigs {</div><div class=\"line\">        release {</div><div class=\"line\">            //&#x7701;&#x7565;&#x76F8;&#x5173;&#x914D;&#x7F6E;</div><div class=\"line\">            ....</div><div class=\"line\">            //&#x5982;&#x679C;&#x4F60;&#x7684;gradle&#x7248;&#x672C;&#x8D85;&#x8FC7;2.14.1</div><div class=\"line\">            //gradle plugin&#x7248;&#x672C;&#x8D85;&#x8FC7;2.2.0 &#x5C31;&#x8981;&#x8BBE;&#x7F6E;&#x8BE5;&#x9879;</div><div class=\"line\">            //&#x4E3A;&#x4E86;&#x7981;&#x7528;&#x9ED8;&#x8BA4;&#x7684;v2&#x7248;&#x7B7E;&#x540D;&#x6A21;&#x5F0F;</div><div class=\"line\">            v2SigningEnabled false</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">dependencies {</div><div class=\"line\">    compile &apos;com.mcxiaoke.gradle:packer-helper:1.0.8&apos;</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">packer {</div><div class=\"line\">        // &#x6307;&#x5B9A;&#x6E20;&#x9053;&#x6253;&#x5305;&#x8F93;&#x51FA;&#x76EE;&#x5F55;</div><div class=\"line\">         archiveOutput = file(new File(project.rootProject.buildDir.path, &quot;cyzs_apks&quot;))</div><div class=\"line\">        // &#x6307;&#x5B9A;&#x6E20;&#x9053;&#x6253;&#x5305;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x540D;&#x683C;&#x5F0F;</div><div class=\"line\">        // &#x9ED8;&#x8BA4;&#x662F; `${appPkg}-${flavorName}-${buildType}-v${versionName}-${versionCode}`</div><div class=\"line\">         archiveNameFormat = &apos;cyzs.${versionName}.${flavorName}&apos;</div><div class=\"line\">        // &#x662F;&#x5426;&#x68C0;&#x67E5;Gradle&#x914D;&#x7F6E;&#x4E2D;&#x7684;signingConfig&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x68C0;&#x67E5;</div><div class=\"line\">        // checkSigningConfig = false</div><div class=\"line\">        // &#x662F;&#x5426;&#x68C0;&#x67E5;Gradle&#x914D;&#x7F6E;&#x4E2D;&#x7684;zipAlignEnabled&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x68C0;&#x67E5;</div><div class=\"line\">        // checkZipAlign = false</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x5173;&#x4E8E;<code>gradle</code>&#x65B9;&#x9762;&#x7684;&#xFF0C;&#x65E2;&#x7136;&#x73B0;&#x5728;&#x4E0D;&#x5728;<code>AndroidManifes.xml</code>&#x4E2D;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x6E20;&#x9053;&#xFF0C;&#x5C31;&#x8981;&#x53E6;&#x5BFB;&#x5B83;&#x6CD5;&#xFF0C;&#x8FD9;&#x91CC;&#x5728;&#x9879;&#x76EE;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x521B;&#x5EFA;<code>marktes.txt</code>&#x6587;&#x672C;&#xFF0C;&#x6587;&#x672C;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5C31;&#x662F;&#x6240;&#x9700;&#x7684;&#x6E20;&#x9053;&#xFF0C;&#x683C;&#x5F0F;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">web</div><div class=\"line\">360</div><div class=\"line\">Tencent</div><div class=\"line\">baidu</div><div class=\"line\">91</div><div class=\"line\">Anzhuo</div><div class=\"line\">anzhi</div><div class=\"line\">Wandou</div><div class=\"line\">ppzhushou</div><div class=\"line\">Xiaomi</div><div class=\"line\">zhihuiyun</div><div class=\"line\">oppo</div><div class=\"line\">vivo</div></pre></td></tr></table></figure>\n<p>&#x65E2;&#x7136;&#x73B0;&#x5728;&#x89E3;&#x51B3;&#x4E86;&#x6E20;&#x9053;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x90A3;&#x4E48;&#x4E0B;&#x4E00;&#x6B65;&#x5C31;&#x662F;&#x5982;&#x4F55;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x8BBE;&#x7F6E;&#x7684;&#x6E20;&#x9053;&#x4E86;&#xFF0C;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x7EE7;&#x627F;&#x4E86;&#x76F8;&#x5173;&#x7684;&#x5E93;&#xFF0C;&#x6240;&#x4EE5;&#x8BFB;&#x53D6;&#x4E5F;&#x975E;&#x5E38;&#x7B80;&#x5355;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">channel = PackerNg.getMarket(context);</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x5C31;&#x62FF;&#x5230;&#x4E86;&#x6E20;&#x9053;&#x540D;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x64CD;&#x4F5C;&#x5C31;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x4E86;&#x3002;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x6765;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x5C06;&#x6E20;&#x9053;&#x4E0A;&#x4F20;&#x5230;&#x53CB;&#x76DF;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x3002;</p>\n<p>&#x6700;&#x540E;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x6267;&#x884C;&#x6253;&#x5305;&#x4E86;&#xFF0C;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x6267;&#x884C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew -Pmarket=markets.txt clean apkRelease</div></pre></td></tr></table></figure>\n<p><code>-Pmarket</code>&#x662F;&#x4E3A;&#x4E86;&#x6307;&#x5B9A;&#x6E20;&#x9053;&#x5B58;&#x653E;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x6839;&#x76EE;&#x5F55;&#x4E2D;&#x76F4;&#x63A5;&#x4E3A;<code>markets.txt</code>&#xFF0C;<code>clean</code>&#x662F;&#x4E3A;&#x4E86;&#x6E05;&#x9664;&#x539F;&#x6765;&#x8F93;&#x51FA;&#x76EE;&#x5F55;&#x4E2D;&#x7684;<code>apk</code>&#xFF0C;<code>apk[buildType]</code>&#x662F;&#x6807;&#x660E;&#x6253;&#x4EC0;&#x4E48;&#x5305;&#x3002;&#x8FD9;&#x91CC;&#x662F;<code>release</code>&#x3002;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x7B80;&#x6D01;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x7701;&#x7565;<code>-Pmarket=markets.txt</code>&#x3002;&#x5982;&#x6B64;&#x9700;&#x8981;&#x5728;<code>gradle.properites</code>&#x4E2D;&#x8FDB;&#x884C;&#x914D;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">market=markets.txt</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x6267;&#x884C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew clean apkRelease</div></pre></td></tr></table></figure>\n<p>&#x597D;&#x4E86;&#xFF0C;&#x5927;&#x529F;&#x544A;&#x6210;&#xFF0C;&#x518D;&#x7B49;<code>3~4</code>&#x5206;&#x949F;&#x5C31;&#x5B8C;&#x7F8E;&#x6536;&#x5DE5;&#x4E86;&#x3002;&#x6700;&#x540E;&#x6253;&#x597D;&#x7684;<code>apk</code>&#x4F1A;&#x5728;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x8DEF;&#x5F84;&#x4E2D;,&#x4F8B;&#x5982;&#x5BF9;&#x4E8E;&#x4E0A;&#x9762;&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x8DEF;&#x5F84;&#xFF1A;<code>&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;/build/cyzs_apks</code>&#x3002;</p>\n<p><img src=\"/2017/01/02/Andorid&#x591A;&#x6E20;&#x9053;&#x6253;&#x5305;/1.png\" alt=\"apks\"></p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p><code>Android</code>&#x5E94;&#x7528;&#x7684;<code>APK</code>&#x90FD;&#x662F;&#x4E00;&#x4E2A;<code>zip</code>&#x6587;&#x4EF6;&#xFF0C;&#x800C;<a href=\"https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT\" target=\"_blank\" rel=\"external\">zip&#x6587;&#x4EF6;&#x89C4;&#x5B9A;</a>&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x672B;&#x5C3E;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x53EB;<a href=\"https://users.cs.jmu.edu/buchhofp/forensics/formats/pkzip.html\" target=\"_blank\" rel=\"external\">Central Directory Record</a>&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x5B83;&#x7684;&#x672B;&#x5C3E;&#x662F;<code>apk</code>&#x7684;&#x6CE8;&#x91CA;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8FD9;&#x4E00;&#x70B9;&#x4FEE;&#x6539;&#x8FD9;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5411;&#x5176;&#x4E2D;&#x52A0;&#x5165;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x7684;&#x6E20;&#x9053;&#x540D;&#xFF0C;&#x4F46;&#x8FD9;&#x5374;&#x4E0D;&#x7834;&#x574F;<code>apk</code>&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x6839;&#x672C;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x5C31;&#x662F;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5BF9;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8BFB;&#x4E0E;&#x5199;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6700;&#x7EC8;&#x7684;&#x89E3;&#x51B3;&#x601D;&#x8DEF;&#x3002;    </p>\n<p>&#x5F53;&#x7136;&#x8FD8;&#x6709;&#x4E0D;&#x501F;&#x52A9;<code>gradle</code>&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x6253;&#x5305;&#xFF0C;&#x5206;&#x522B;&#x6709;<code>java</code>&#x4E0E;<code>python</code>&#x811A;&#x672C;&#x3002;&#x4ECA;&#x5929;&#x65F6;&#x95F4;&#x6709;&#x70B9;&#x665A;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x5982;&#x9700;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x540E;&#x7EED;&#x518D;&#x5355;&#x72EC;&#x8BA8;&#x8BBA;&#x3002;</p>\n<blockquote>\n<p><em><code>2017</code>&#x7B2C;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x5B8C;&#x7F8E;&#x6536;&#x5DE5;</em></p>\n</blockquote>\n"},{"title":"使用Retrofit原生的最佳实践","url":"https://idisfkj.github.io/2016/11/18/使用Retrofit原生的最佳实践/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x524D;&#x9762;&#x8BF4;&#x5230;&#x4E86;<code>Retrofit</code>&#x7684;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x5165;&#x95E8;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6CA1;&#x5165;&#x95E8;&#x7684;&#x63A8;&#x8350;&#x5148;&#x9605;&#x8BFB;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/11/15/%E5%B8%A6%E4%BD%A0%E8%B5%B0%E8%BF%9BRetrofit%E7%9A%84%E6%96%B0%E4%B8%96%E7%95%8C/#Headers-And-Header\">&#x5E26;&#x4F60;&#x8D70;&#x8FDB;Retrofit&#x7684;&#x65B0;&#x4E16;&#x754C;</a>&#xFF0C;&#x4ECA;&#x5929;&#x5C06;&#x76F4;&#x63A5;&#x4EE5;&#x5B9E;&#x8DF5;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x4ECB;&#x7ECD;<code>Retrofit</code><strong>&#x539F;&#x751F;</strong>&#x7684;&#x5404;&#x65B9;&#x9762;&#x7684;&#x5177;&#x4F53;&#x4F7F;&#x7528;&#xFF0C;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6307;&#x51FA;&#x3002;&#x4E0B;&#x9762;&#x5C06;&#x8981;&#x4ECB;&#x7ECD;&#x7684;&#x5185;&#x5BB9;&#x4E3B;&#x8981;&#x4E3A;&#xFF1A;</p>\n<ul>\n<li><code>Retrofit</code>&#x7684;&#x5C01;&#x88C5;</li>\n<li><code>Converter</code>&#x7684;&#x4F7F;&#x7528;</li>\n<li><code>OkHttp</code>&#x7684;<code>Interceptor</code>&#x7684;&#x4F7F;&#x7528;</li>\n<li><code>url</code>&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;<code>url</code>&#x7684;&#x8BBE;&#x7F6E;</li>\n<li><code>request</code>&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;</li>\n<li><code>Retrofit</code>&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;</li>\n<li><code>Retrofit</code>&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;</li>\n</ul>\n<h2 id=\"Retrofit&#x7684;&#x5C01;&#x88C5;\"><a href=\"#Retrofit&#x7684;&#x5C01;&#x88C5;\" class=\"headerlink\" title=\"Retrofit&#x7684;&#x5C01;&#x88C5;\"></a>Retrofit&#x7684;&#x5C01;&#x88C5;</h2><p>&#x9996;&#x5148;&#x7ED9;&#x4E00;&#x4E2A;&#x5E38;&#x89C4;&#x7684;&#x5199;&#x6CD5;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">    @GET(&quot;/repos/{owner}/{repo}/contributors&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors(</div><div class=\"line\">            @Path(&quot;owner&quot;) String owner,</div><div class=\"line\">            @Path(&quot;repo&quot;) String repo);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">Retrofit retrofit = new Retrofit.Builder()</div><div class=\"line\">                .baseUrl(&quot;https://api.github.com&quot;)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                .build();</div><div class=\"line\"> </div><div class=\"line\">        GithubService service = retrofit.create(GithubService.class);</div><div class=\"line\">        Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;square&quot;, &quot;retrofit&quot;);</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x7684;&#x8BF7;&#x6C42;&#x4E00;&#x822C;&#x90FD;&#x5F88;&#x591A;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6BCF;&#x6B21;&#x90FD;&#x6362;&#x63A5;&#x53E3;&#x90FD;&#x8981;&#x91CD;&#x590D;&#x5199;<code>Retrofit</code>&#xFF0C;&#x4ECE;&#x800C;&#x4EA7;&#x751F;&#x4E86;&#x7D2F;&#x8D58;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x901A;&#x7528;&#x7684;<code>ServiceGenerator</code>,&#x5411;&#x5176;&#x4E2D;&#x4F20;&#x5165;&#x9700;&#x8981;&#x8C03;&#x7528;&#x7684;&#x63A5;&#x53E3;&#x7C7B;&#xFF0C;&#x8BA9;&#x5176;&#x8FD4;&#x56DE;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;&#x63A5;&#x53E3;&#x5B9E;&#x4F8B;&#x5373;&#x53EF;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ServiceGenerator {</div><div class=\"line\">    public static String API_BASE_URL = &quot;https://api.github.com&quot;;</div><div class=\"line\">  </div><div class=\"line\">    private ServiceGenerator() {</div><div class=\"line\"> </div><div class=\"line\">    }</div><div class=\"line\">  </div><div class=\"line\">    private static OkHttpClient.Builder okHttpClient = new OkHttpClient.Builder();</div><div class=\"line\"> </div><div class=\"line\">    private static Retrofit.Builder builder = new Retrofit.Builder()</div><div class=\"line\">            .baseUrl(API_BASE_URL)</div><div class=\"line\">            .addConverterFactory(ScalarsConverterFactory.create())</div><div class=\"line\">            .addConverterFactory(GsonConverterFactory.create());</div><div class=\"line\">   </div><div class=\"line\">    public static &lt;S&gt; S createService(Class&lt;S&gt; serviceClass) {</div><div class=\"line\">        Retrofit retrofit = builder.client(okHttpClient.build()).build();</div><div class=\"line\">        return retrofit.create(serivceClass)</div><div class=\"line\">        }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5C01;&#x88C5;&#x7684;<code>ServiceGenerator</code>&#x8FDB;&#x884C;&#x8C03;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">GithubService service = ServiceGenerator.createService(GithubService.class);</div><div class=\"line\"> </div><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;square&quot;, &quot;retrofit&quot;);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x662F;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x5F88;&#x591A;&#x4E86;&#x5462;&#xFF0C;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x5C31;&#x641E;&#x5B9A;</em></p>\n</blockquote>\n<h2 id=\"Converter&#x7684;&#x4F7F;&#x7528;\"><a href=\"#Converter&#x7684;&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"Converter&#x7684;&#x4F7F;&#x7528;\"></a>Converter&#x7684;&#x4F7F;&#x7528;</h2><p><code>converter</code>&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8F6C;&#x5316;&#xFF0C;&#x9ED8;&#x8BA4;<code>Retrofit</code>&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x662F;<code>OkHttp</code>&#x7684;<code>RequestBody</code>&#x4E0E;<code>ResponseBody</code>,&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x5E94;&#x7528;&#x4E2D;&#x4F1A;&#x9047;&#x5230;&#x8BB8;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F8B;&#x5982;<code>JSON</code>&#x3001;<code>XML</code>&#x8FD9;&#x65F6;&#x4EEC;&#x5C31;&#x8981;&#x4F7F;&#x7528;&#x5230;<code>converter</code>&#x8FDB;&#x884C;&#x8F6C;&#x5316;&#x6210;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x503C;&#x5F97;&#x5E86;&#x5E78;&#x7684;&#x662F;&#x5B98;&#x65B9;&#x5DF2;&#x7ECF;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x5927;&#x90E8;&#x5206;&#x5E38;&#x7528;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x8F6C;&#x5316;&#x3002;</p>\n<ul>\n<li>Gson: com.squareup.retrofit2:converter-gson</li>\n<li>Jackson: com.squareup.retrofit2:converter-jackson</li>\n<li>Moshi: com.squareup.retrofit2:converter-moshi</li>\n<li>Protobuf: com.squareup.retrofit2:converter-protobuf</li>\n<li>Wire: com.squareup.retrofit2:converter-wire</li>\n<li>Simple XML: com.squareup.retrofit2:converter-simplexml</li>\n<li>Scalars (primitives, boxed, and String): com.squareup.retrofit2:converter-scalars</li>\n</ul>\n<p>&#x53EA;&#x9700;&#x4E24;&#x6B65;&#x5C31;&#x80FD;&#x5FEB;&#x901F;&#x914D;&#x7F6E;&#x4F7F;&#x7528;&#xFF0C;&#x4F8B;&#x5982;<code>Gson</code></p>\n<p>1.&#x5728;<code>Gradle</code>&#x4E2D;&#x914D;&#x7F6E;&#x4E0E;<code>Retrofit</code>&#x5BF9;&#x4E8E;&#x7684;&#x7248;&#x672C;&#x53F7;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.squareup.retrofit2:converter-gson:2.1.0&apos;</div></pre></td></tr></table></figure>\n<p>2.&#x5728;<code>Retrofit.Builder</code>&#x4E2D;&#x901A;&#x8FC7;<code>.addConverterFactory()</code>&#x8FDB;&#x884C;&#x914D;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Retrofit.Builder builder = new Retrofit.Builder()</div><div class=\"line\">            .baseUrl(API_DUOSHUO_URL)</div><div class=\"line\">            .addConverterFactory(GsonConverterFactory.create());</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x7528;&#x591A;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x6570;&#x636E;&#x5462;&#xFF1F;&#x4F8B;&#x5982;<code>Gson</code>&#x3001;<code>String</code>&#xFF0C;&#x653E;&#x5FC3;&#x4E5F;&#x662F;&#x901A;&#x8FC7;<code>.addConverterFactory()</code>&#x8FDB;&#x884C;&#x6DFB;&#x52A0;.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Retrofit.Builder builder = new Retrofit.Builder()</div><div class=\"line\">            .baseUrl(API_DUOSHUO_URL)</div><div class=\"line\">            .addConverterFactory(ScalarsConverterFactory.create())</div><div class=\"line\">            .addConverterFactory(GsonConverterFactory.create());</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;<code>Retrofit</code>&#x4F1A;&#x6309;&#x7167;&#x6DFB;&#x52A0;&#x7684;&#x987A;&#x5E8F;&#x8FDB;&#x884C;&#x5148;&#x540E;&#x7684;&#x5339;&#x914D;&#xFF0C;&#x76F4;&#x5230;&#x627E;&#x5230;&#x76F8;&#x9002;&#x5408;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;&#x4E00;&#x822C;&#x63A8;&#x8350;&#x5C06;<code>Gson</code>&#x653E;&#x5230;&#x6700;&#x540E;&#x9762;&#x3002;</p>\n<h2 id=\"OkHttp&#x7684;Interceptor&#x7684;&#x4F7F;&#x7528;\"><a href=\"#OkHttp&#x7684;Interceptor&#x7684;&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"OkHttp&#x7684;Interceptor&#x7684;&#x4F7F;&#x7528;\"></a>OkHttp&#x7684;Interceptor&#x7684;&#x4F7F;&#x7528;</h2><p>&#x5047;&#x8BBE;&#x6709;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x60C5;&#x5F62;&#xFF1A;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#x90FD;&#x8981;&#x6DFB;&#x52A0;<code>Connection</code>&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x90E8;&#xFF0C;&#x6839;&#x636E;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x5B66;&#x4E60;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Headers(&quot;Connection: keep-alive&quot;)</div><div class=\"line\">@POST(&quot;/login&quot;)</div><div class=\"line\">Call&lt;String&gt; loginService();</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x8981;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x90FD;&#x6DFB;&#x52A0;<code>@Headers</code>&#x5B57;&#x6BB5;&#x6216;&#x8005;&#x5728;&#x53C2;&#x6570;&#x4E2D;&#x6DFB;&#x52A0;<code>@Header</code>&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x6709;&#x70B9;&#x591A;&#x4F59;&#x4E0E;&#x9EBB;&#x70E6;&#x5462;&#x3002;&#x56E0;&#x4E3A;<code>Retrofit</code>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x662F;&#x4EA4;&#x7ED9;<code>OkHttp</code>&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4E48;&#x53EF;&#x4EE5;&#x5BF9;<code>OkHttp</code>&#x5C42;&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#x7684;&#x4FEE;&#x6539;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>Interceptor</code>&#x5C31;&#x80FD;&#x5B8C;&#x7F8E;&#x7684;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;,&#x8C03;&#x7528;<code>OkHttp</code>&#x7684;<code>.addInterceptor()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD8;&#x662F;&#x5728;<code>ServiceGenerator</code>&#x4E2D;&#x4FEE;&#x6539;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static &lt;S&gt; S createService(Class&lt;S&gt; serviceClass) {</div><div class=\"line\">okHttpClient.addInterceptor(new Interceptor() {</div><div class=\"line\">                @Override</div><div class=\"line\">                public Response intercept(Chain chain) throws IOException {</div><div class=\"line\">                    Request original = chain.request();</div><div class=\"line\"></div><div class=\"line\">                    Request.Builder builder = original.newBuilder()</div><div class=\"line\">                            .addHeader(&quot;Connection&quot;, &quot;keep-alive&quot;)</div><div class=\"line\">                            .method(original.method(), original.body());</div><div class=\"line\"> </div><div class=\"line\">                    Request request = builder.build();</div><div class=\"line\"> </div><div class=\"line\">                    return chain.proceed(request);</div><div class=\"line\">                }</div><div class=\"line\">            });</div><div class=\"line\">Retrofit retrofit = builder.client(okHttpClient.build()).build();</div><div class=\"line\">return retrofit.create(serivceClass);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<code>chain.request()</code>&#x83B7;&#x53D6;&#x539F;&#x6765;&#x7684;<code>request</code>&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x4F7F;&#x7528;<code>request.newBuilder()</code>&#x65B9;&#x6CD5;&#x6784;&#x9020;&#x65B0;&#x7684;<code>Request.Builder</code>&#xFF0C;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>.addHeader</code>&#x6216;&#x8005;<code>.Header</code>&#x65B9;&#x6CD5;&#x6765;&#x6DFB;&#x52A0;<code>Header</code>&#x3002;&#x6700;&#x540E;&#x518D;&#x6784;&#x9020;&#x65B0;&#x7684;<code>request</code>&#x8C03;&#x7528;<code>chain.proceed(request)</code>&#x3002;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;<code>.addHeader</code>&#x4E0E;<code>.Header</code>&#x7684;&#x533A;&#x522B;&#x3002;</p>\n<ul>\n<li><code>.addHeader</code>&#x5BF9;&#x76F8;&#x540C;&#x7684;<code>name</code>&#xFF0C;&#x4E0D;&#x540C;<code>value</code>&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x8986;&#x76D6;&#xFF0C;&#x8BF4;&#x660E;&#x5B83;&#x53EF;&#x4EE5;&#x5B58;&#x5728;&#x591A;&#x6761;&#x76F8;&#x540C;<code>name</code>&#x7684;&#x8BF7;&#x6C42;&#x5934;</li>\n<li><code>.Header</code>&#x5BF9;&#x76F8;&#x540C;<code>name</code>&#x4F1A;&#x8FDB;&#x884C;&#x8986;&#x76D6;&#xFF0C;&#x8BF4;&#x660E;&#x5BF9;&#x4E8E;&#x76F8;&#x540C;<code>name</code>&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x53EA;&#x80FD;&#x5B58;&#x5728;&#x4E00;&#x4E2A;</li>\n</ul>\n<p>&#x65E2;&#x7136;<code>Interceptor</code>&#x53EF;&#x4EE5;&#x5BF9;<code>header</code>&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x8BBE;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5927;&#x80C6;&#x731C;&#x60F3;&#x5BF9;&#x4E8E;&#x67E5;&#x8BE2;&#x5B57;&#x6BB5;&#x662F;&#x5426;&#x4E5F;&#x53EF;&#x4EE5;&#x7EDF;&#x4E00;&#x8BBE;&#x7F6E;&#x5462;&#xFF0C;&#x7B54;&#x6848;&#x662F;&#x80AF;&#x5B9A;&#x7684;&#xFF0C;&#x4F8B;&#x5982;<code>apikey</code>&#x5B57;&#x6BB5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">okHttpClient.addInterceptor(new Interceptor() {</div><div class=\"line\">                @Override</div><div class=\"line\">                public Response intercept(Chain chain) throws IOException {</div><div class=\"line\">                    Request original = chain.request();</div><div class=\"line\">                    //&#x83B7;&#x53D6;url</div><div class=\"line\">                    HttpUrl originalUrl = original.url();</div><div class=\"line\"> </div><div class=\"line\">                    Request.Builder builder = original.newBuilder()</div><div class=\"line\">                            .addHeader(&quot;Authorization&quot;, authToken)</div><div class=\"line\">                            .method(original.method(), original.body());                            </div><div class=\"line\">                    //&#x4E3A;url&#x6DFB;&#x52A0;apikey&#x5B57;&#x6BB5;</div><div class=\"line\">                    HttpUrl url = originalUrl.newBuilder()</div><div class=\"line\">                            .addQueryParameter(&quot;apikey&quot;, &quot;isdhh324bdsa&quot;)</div><div class=\"line\">                            .build();</div><div class=\"line\">                    //&#x5C06;&#x4FEE;&#x6539;&#x7684;url&#x6DFB;&#x52A0;&#x5230;&#x65B0;&#x7684;Request&#x4E2D;</div><div class=\"line\">                    Request request = builder</div><div class=\"line\">                            .url(url)</div><div class=\"line\">                            .build();</div><div class=\"line\">                    //&#x6267;&#x884C;</div><div class=\"line\">                    return chain.proceed(request);</div><div class=\"line\">                }</div><div class=\"line\">            });</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\"><a href=\"#url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\"></a>url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;</h2><h3 id=\"url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;\"><a href=\"#url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;\"></a>url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;</h3><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x7684;<code>baseUrl</code>&#x4E3A;<code>https://github.com/api/v2</code>&#x800C;&#x8BBE;&#x7F6E;&#x7684;&#x63A5;&#x53E3;&#x7684;&#x8BBE;&#x7F6E;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">    @GET(&quot;repos&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x4E3A;<code>https://github.com/api/v2/repos</code>,&#x5982;&#x679C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x8981;&#x8BF7;&#x6C42;<code>v3</code>&#x7248;&#x672C;&#x7684;<code>repos</code>&#x5462;&#xFF1F;&#x4F60;&#x4F1A;&#x8BF4;&#x5F88;&#x7B80;&#x5355;&#x76F4;&#x63A5;&#x4FEE;&#x6539;<code>baseUrl</code>&#x4E3A;<code>https://github.com/api/v3</code>,&#x4F46;&#x5728;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728;<code>ServiceGenerator</code>&#x4E2D;&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;<code>baseUrl</code>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E0D;&#x5E94;&#x8BE5;&#x53BB;&#x4FEE;&#x6539;&#x5B83;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x8981;&#x7528;&#x5230;<code>/</code>&#xFF0C;&#x5B83;&#x80FD;&#x5C06;<code>host</code>&#x540E;&#x9762;&#x7684;&#x5168;&#x90E8;&#x5FFD;&#x7565;&#xFF0C;&#x5373;<code>baseUrl</code>&#x76F4;&#x63A5;&#x6210;&#x4E3A;<code>https://github.com</code>&#xFF0C;&#x518D;&#x5728;&#x540E;&#x9762;&#x6DFB;&#x52A0;&#x8BBE;&#x7F6E;&#x7684;<code>endpoint url</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">    @GET(&quot;/api/v3/repos&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x4E3A;<code>https://github.com/api/v3/repos</code> ,&#x6240;&#x4EE5;<strong>&#x8981;&#x614E;&#x91CD;&#x4F7F;&#x7528;<code>/</code></strong>&#x3002;</p>\n<p>&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x662F;&#x4F7F;&#x7528;<code>//</code>,&#x5B83;&#x7684;&#x6548;&#x679C;&#x662F;&#x5BF9;<code>scheme</code>&#x8FDB;&#x884C;&#x4FDD;&#x6301;&#xFF0C;&#x4F8B;&#x5982;<code>baseUrl</code>&#x4E3A;<code>https://api.github.com</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">\t//url&#x4E3A;https://api.github.com/api/v3/repos</div><div class=\"line\">\t@GET(&quot;/api/v3/repos&quot;)</div><div class=\"line\">\tCall&lt;List&lt;Contributors&gt;&gt; contributors();</div><div class=\"line\">    </div><div class=\"line\">    //url&#x4E3A;https://api.github.com</div><div class=\"line\">    @GET(&quot;//api.github.com&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors();      </div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\"><a href=\"#&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\"></a>&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;</h3><p>&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x5F62;&#xFF1A;&#x524D;&#x9762;&#x8BF7;&#x6C42;&#x662F;<code>url</code>&#x4E3A;<code>https://github.com/api/repos</code>&#x4F46;&#x540E;&#x9762;&#x6709;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;<code>host</code>&#x4E0D;&#x540C;&#x4F8B;&#x5982;&#x4E3A;<code>https://duoshuo.com/api/repos</code>,&#x4F46;&#x4ED6;&#x4EEC;&#x8C03;&#x7528;&#x7684;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x63A5;&#x53E3;&#x56E0;&#x4E3A;&#x4ED6;&#x4EEC;&#x7684;<code>endpoint</code>&#x76F8;&#x540C;<code>/api/repos</code>&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x6539;&#x53D8;&#x8BF7;&#x6C42;&#x7684;<code>baseUrl</code>&#x3002;&#x5BF9;<code>ServiceGenerator</code>&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static OkHttpClient.Builder okHttpClient = new OkHttpClient.Builder();</div><div class=\"line\"></div><div class=\"line\">    private static Retrofit.Builder builder = new Retrofit.Builder()</div><div class=\"line\">            .baseUrl(API_DUOSHUO_URL)</div><div class=\"line\">            .addConverterFactory(ScalarsConverterFactory.create())</div><div class=\"line\">            .addConverterFactory(GsonConverterFactory.create());</div><div class=\"line\">\t//&#x6784;&#x9020;&#x65B0;&#x7684;builder </div><div class=\"line\">    public static void changeApiBaseUrl(String newApiBaseUrl) {</div><div class=\"line\">        apiBaseUrl = newApiBaseUrl;</div><div class=\"line\">        builder = new Retrofit.Builder()</div><div class=\"line\">                .baseUrl(apiBaseUrl)</div><div class=\"line\">                .addConverterFactory(ScalarsConverterFactory.create())</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create());</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5F00;&#x59CB;&#x4F7F;&#x7528;&#x65F6;&#x8C03;&#x7528;<code>changeApiBaseUrl</code>&#x65B9;&#x6CD5;&#x5373;&#x53EF;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x6539;&#x53D8;baseUrl</div><div class=\"line\">ServiceGenerator.changeApiBaseUrl(&quot;https://duoshuo.com&quot;);</div></pre></td></tr></table></figure>\n<p>&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x60C5;&#x5F62;&#xFF1A;&#x5C31;&#x662F;&#x5B8C;&#x5168;&#x4E0D;&#x76F8;&#x540C;&#x7684;<code>url</code>&#x4F8B;&#x5982;<code>https://example.com/ioe/we</code>,&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x53E6;&#x4E00;&#x4E2A;&#x6CE8;&#x91CA;<code>@Url</code>,&#x8BE5;&#x6CE8;&#x91CA;&#x4F5C;&#x7528;&#x4E8E;&#x53C2;&#x6570;&#x5B57;&#x6BB5;&#xFF0C;&#x5BF9;&#x8BF7;&#x6C42;&#x65F6;&#x7684;<code>url</code>&#x52A8;&#x6001;&#x8BBE;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET</div><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; contributors(@Url String  url);</div></pre></td></tr></table></figure>\n<p>&#x8C03;&#x7528;&#x65F6;&#x76F4;&#x63A5;&#x4F20;&#x9012;<code>url</code>&#x53C2;&#x6570;&#x5373;&#x53EF;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">GithubService service = ServiceGenerator.createService(GithubService.class);</div><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;https://example.com/ioe/we&quot;);</div></pre></td></tr></table></figure>\n<h2 id=\"request&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;\"><a href=\"#request&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;\" class=\"headerlink\" title=\"request&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;\"></a>request&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;</h2><p>&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x591A;&#x6B21;&#x8BF7;&#x6C42;&#x4E0D;&#x80FD;&#x91CD;&#x590D;&#x518D;&#x8C03;&#x7528;&#x5B83;&#x7684;<code>Call</code>&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x5B83;&#x7684;<code>clone</code>&#x65B9;&#x6CD5;&#xFF0C;&#x590D;&#x5236;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<code>Call</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">GithubService service = ServiceGenerator.createService(GithubService.class);</div><div class=\"line\">  </div><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;square&quot;, &quot;retrofit&quot;);</div><div class=\"line\">  </div><div class=\"line\">Callback&lt;ResponseBody&gt; callBack = new Callback&lt;ResponseBody&gt;() {...};</div><div class=\"line\"> </div><div class=\"line\">call.enqueue(callBack);</div><div class=\"line\">//&#x518D;&#x4E00;&#x6B21;&#x8BF7;&#x6C42; </div><div class=\"line\">Call&lt;ResponseBody&gt; newCall = originalCall.clone();</div><div class=\"line\">newCall.enqueue(callBack);</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x8C03;&#x7528;<code>Call.request</code>&#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x7684;<code>request</code>&#xFF0C;&#x4E0D;&#x7BA1;&#x5B83;&#x662F;&#x5426;&#x6267;&#x884C;&#x5B8C;&#x4E86;&#x8FD8;&#x662F;&#x672A;&#x6267;&#x884C;&#xFF0C;&#x8FD8;&#x662F;&#x5728;&#x6267;&#x884C;&#x7684;&#x65F6;&#x5019;&#x8C03;&#x7528;&#x4E86;<code>request.cacel()</code>&#x53D6;&#x6D88;&#x4E86;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x83B7;&#x53D6;&#x7684;<code>request</code>&#x67E5;&#x8BE2;&#x8BF7;&#x6C42;&#x7684;&#x4FE1;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void checkRequestContent(Request request) {  </div><div class=\"line\">    Headers requestHeaders = request.headers();</div><div class=\"line\">    RequestBody requestBody = request.body();</div><div class=\"line\">    HttpUrl requestUrl = request.url();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;\"><a href=\"#Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;\" class=\"headerlink\" title=\"Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;\"></a>Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;</h2><p>&#x5BF9;&#x4E8E;&#x6587;&#x4EF6;&#x7684;&#x4E0A;&#x4F20;<code>Retrofit</code>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>@Multipart</code>&#x8FDB;&#x884C;&#x6807;&#x6CE8;&#x6765;&#x5B9A;&#x4E49;&#x76F8;&#x5173;&#x7684;&#x4E0A;&#x4F20;&#x63A5;&#x53E3;&#xFF0C;&#x4E0B;&#x9762;&#x4EE5;&#x591A;&#x8BF4;&#x7684;&#x5934;&#x50CF;&#x4E0A;&#x4F20;&#x4E3A;&#x4F8B;&#xFF0C;&#x9996;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x4E0A;&#x4F20;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#xFF0C;&#x901A;&#x8FC7;&#x6293;&#x5305;&#x5206;&#x6790;</p>\n<p><img src=\"/2016/11/18/&#x4F7F;&#x7528;Retrofit&#x539F;&#x751F;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;/1.png\" alt=\"general\"><br><img src=\"/2016/11/18/&#x4F7F;&#x7528;Retrofit&#x539F;&#x751F;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;/2.png\" alt=\"request headers\"><br><img src=\"/2016/11/18/&#x4F7F;&#x7528;Retrofit&#x539F;&#x751F;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;/3.png\" alt=\"request payload\"></p>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x8BF7;&#x6C42;&#x7684;&#x65B9;&#x5F0F;&#x4E3A;<code>post</code>&#xFF0C;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x4E3A;<code>http://duoshuo.com/api/avatars/upload.json</code>,<code>Content-Type</code>&#x7C7B;&#x578B;&#x4E3A;<code>multipart/form-data</code>&#x8FD9;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x540E;&#x7EED;&#x8981;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x7684;&#x7C7B;&#x578B;,&#x8BF7;&#x6C42;&#x7684;<code>Disposition</code>&#x5206;&#x4E3A;&#x4E24;&#x90E8;&#x5206;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x90E8;&#x5206;&#x4E3A;<code>RequestBody</code>&#x7C7B;&#x578B;&#x7684;<code>nonce</code>&#x6570;&#x636E;&#xFF0C;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x4E3A;&#x4E0A;&#x4F20;&#x7684;&#x56FE;&#x7247;&#x4FE1;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x90E8;&#x5206;&#x4EE5;<code>MultipartBody.Part</code>&#x5B9A;&#x4E49;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface DuoShuoUploadService {</div><div class=\"line\">@Headers(&quot;Cookie: duoshuo_unique=your duoshuo cookie&quot;)</div><div class=\"line\">    @Multipart</div><div class=\"line\">    @POST(&quot;/api/avatars/upload.json&quot;)</div><div class=\"line\">    Call&lt;ResponseBody&gt; uploadService(@Part(&quot;nonce&quot;) RequestBody nonce,</div><div class=\"line\">                                     @Part MultipartBody.Part body);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x6784;&#x9020;&#x6570;&#x636E;&#xFF0C;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#x8BF7;&#x6C42;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void getUpdateFile(File file, String nonceString) {</div><div class=\"line\">        // &#x521B;&#x5EFA;&#x4E0A;&#x4F20;&#x7684;Service&#x670D;&#x52A1;&#x7AEF;</div><div class=\"line\">        DuoShuoUploadService uploadService = ServiceGenerator.createService(DuoShuoUploadService.class);</div><div class=\"line\">        // &#x521B;&#x5EFA;nonce&#x6570;&#x636E;&#x7684;RequestBody</div><div class=\"line\">        RequestBody nonce = RequestBody.create(MediaType.parse(&quot;multipart/form-data&quot;), nonceString);</div><div class=\"line\">        // &#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7684;RequestBody</div><div class=\"line\">        RequestBody requestFile = RequestBody.create(MediaType.parse(&quot;multipart/form-data&quot;), file);</div><div class=\"line\">        // &#x521B;&#x5EFA;MultipartBody.Part</div><div class=\"line\">        MultipartBody.Part body = MultipartBody.Part.createFormData(&quot;image&quot;, file.getName(), requestFile);</div><div class=\"line\">        // &#x8C03;&#x7528;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;,&#x5E76;&#x6267;&#x884C;&#x8BF7;&#x6C42;</div><div class=\"line\">        Call&lt;ResponseBody&gt; call = uploadService.uploadService(nonce, body);</div><div class=\"line\">        call.enqueue(new Callback&lt;ResponseBody&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {</div><div class=\"line\">                if (response.isSuccessful()) {</div><div class=\"line\">                    Log.v(&quot;TAG&quot;, &quot;success&quot; + &quot;-&gt;&quot; + response.body());</div><div class=\"line\">                } else {</div><div class=\"line\">//                    APIError apiError = ErrorUtils.parseError(response);</div><div class=\"line\">//                    Log.e(&quot;TAG&quot;, apiError.message());</div><div class=\"line\">                }</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot; service contacted at:&quot; + call.request().url());</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            @Override</div><div class=\"line\">            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {</div><div class=\"line\">                Log.e(&quot;TAG&quot;, &quot;error:&quot; + t.getMessage());</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot; service contacted at:&quot; + call.request().url());</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x6709;&#x4E24;&#x70B9;</p>\n<ul>\n<li>&#x5728;&#x521B;&#x5EFA;<code>RequestBody.create</code>&#x65F6;&#xFF0C;&#x5176;&#x4E2D;&#x7684;<code>Content-Type</code>&#x5373;<code>MediaType</code>&#x7C7B;&#x578B;&#x8981;&#x8BBE;&#x7F6E;&#x4E3A;<code>multipart/form-data</code>&#x8FD9;&#x662F;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x7684;&#x7C7B;&#x578B;&#x3002;</li>\n<li><code>MultipartBody.Part.createFormData()</code>&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x524D;&#x9762;&#x56FE;&#x4E2D;&#x7B2C;&#x4E8C;&#x4E2A;<code>Disposition</code>&#x7684;<code>name</code>&#x5B57;&#x6BB5;&#x7684;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5FC5;&#x987B;&#x76F8;&#x540C;&#x56E0;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x901A;&#x8FC7;&#x8BE5;&#x5B57;&#x6BB5;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x5373;&#x4E3A;&#x4E0A;&#x4F20;&#x7684;&#x56FE;&#x7247;&#x6570;&#x636E;<code>RequestBody</code>&#x7C7B;&#x578B;&#x3002;</li>\n</ul>\n<p>&#x5BF9;&#x4E8E;&#x591A;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x6216;&#x8005;&#x591A;&#x4E2A;<code>RequestBody</code>&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x901A;&#x8FC7;&#x4F20;&#x9012;&#x591A;&#x4E2A;<code>MultipartBody.Part</code>&#x7C7B;&#x578B;&#x7684;<code>body</code>&#x4E0E;<code>@PartMap</code>&#x6765;&#x5B9E;&#x73B0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Headers(&quot;Cookie: duoshuo_unique=your duoshuo cookie&quot;)</div><div class=\"line\">   @Multipart</div><div class=\"line\">   @POST(&quot;/api/avatars/upload.json&quot;)</div><div class=\"line\">   Call&lt;ResponseBody&gt; uploadMultipleService(@PartMap() Map&lt;String, RequestBody&gt; partMap,</div><div class=\"line\">                                            @Part MultipartBody.Part body1,</div><div class=\"line\">                                            @Part MultipartBody.Part body2);</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x9700;&#x6C42;&#x589E;&#x52A0;&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x4E0A;&#x4F20;&#x7684;&#x8FDB;&#x5EA6;&#x6761;&#xFF0C;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;<code>RequestBody</code>&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x6709;&#x8FDB;&#x5EA6;&#x6761;&#x7684;&#x4E0A;&#x4F20;&#xFF0C;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x7684;&#x8D34;&#x4E0B;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ProgressRequestBody extends RequestBody {    </div><div class=\"line\">    public interface OkHttpProgressListener {       </div><div class=\"line\">        void onProgress(long currentBytesCount, long totalBytesCount);    </div><div class=\"line\">    }    </div><div class=\"line\">    //&#x5B9E;&#x9645;&#x7684;&#x5F85;&#x5305;&#x88C5;&#x8BF7;&#x6C42;&#x4F53;    </div><div class=\"line\">    private final RequestBody requestBody;    </div><div class=\"line\">    //&#x8FDB;&#x5EA6;&#x56DE;&#x8C03;&#x63A5;&#x53E3;    </div><div class=\"line\">    private final OkHttpProgressListener progressListener;    </div><div class=\"line\">    //&#x5305;&#x88C5;&#x5B8C;&#x6210;&#x7684;BufferedSink    </div><div class=\"line\">    private BufferedSink bufferedSink;    </div><div class=\"line\">    public ProgressRequestBody(RequestBody requestBody, OkHttpProgressListener progressListener) {        </div><div class=\"line\">        this.requestBody = requestBody;        </div><div class=\"line\">        this.progressListener = progressListener;    </div><div class=\"line\">    }    </div><div class=\"line\">    /**     </div><div class=\"line\">      * &#x91CD;&#x5199;&#x8C03;&#x7528;&#x5B9E;&#x9645;&#x7684;&#x54CD;&#x5E94;&#x4F53;&#x7684;contentType     </div><div class=\"line\">      * @return MediaType     </div><div class=\"line\">      */    </div><div class=\"line\">    @Override    </div><div class=\"line\">    public MediaType contentType() {        </div><div class=\"line\">        return requestBody.contentType();    </div><div class=\"line\">    }    </div><div class=\"line\">    /**     </div><div class=\"line\">      * &#x91CD;&#x5199;&#x8C03;&#x7528;&#x5B9E;&#x9645;&#x7684;&#x54CD;&#x5E94;&#x4F53;&#x7684;contentLength     </div><div class=\"line\">      * @return contentLength     </div><div class=\"line\">      * @throws IOException &#x5F02;&#x5E38;     </div><div class=\"line\">      */    </div><div class=\"line\">    @Override    </div><div class=\"line\">    public long contentLength() throws IOException {        </div><div class=\"line\">        return requestBody.contentLength();    </div><div class=\"line\">    }    </div><div class=\"line\">    /**     </div><div class=\"line\">      * &#x91CD;&#x5199;&#x8FDB;&#x884C;&#x5199;&#x5165;     </div><div class=\"line\">      * @param sink BufferedSink     </div><div class=\"line\">      * @throws IOException &#x5F02;&#x5E38;     </div><div class=\"line\">      */    </div><div class=\"line\">    @Override    </div><div class=\"line\">    public void writeTo(BufferedSink sink) throws IOException {        </div><div class=\"line\">        if (null == bufferedSink) {            </div><div class=\"line\">            bufferedSink = Okio.buffer(sink(sink));        </div><div class=\"line\">        }        </div><div class=\"line\">        requestBody.writeTo(bufferedSink);        </div><div class=\"line\">        //&#x5FC5;&#x987B;&#x8C03;&#x7528;flush&#xFF0C;&#x5426;&#x5219;&#x6700;&#x540E;&#x4E00;&#x90E8;&#x5206;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x88AB;&#x5199;&#x5165;        </div><div class=\"line\">        bufferedSink.flush();    </div><div class=\"line\">     }    </div><div class=\"line\">      /**     </div><div class=\"line\">        * &#x5199;&#x5165;&#xFF0C;&#x56DE;&#x8C03;&#x8FDB;&#x5EA6;&#x63A5;&#x53E3;     </div><div class=\"line\">        * @param sink Sink     </div><div class=\"line\">        * @return Sink     </div><div class=\"line\">        */    </div><div class=\"line\">      private Sink sink(Sink sink) {        </div><div class=\"line\">          return new ForwardingSink(sink) {            </div><div class=\"line\">              //&#x5F53;&#x524D;&#x5199;&#x5165;&#x5B57;&#x8282;&#x6570;            </div><div class=\"line\">              long writtenBytesCount = 0L;            </div><div class=\"line\">              //&#x603B;&#x5B57;&#x8282;&#x957F;&#x5EA6;&#xFF0C;&#x907F;&#x514D;&#x591A;&#x6B21;&#x8C03;&#x7528;contentLength()&#x65B9;&#x6CD5;            </div><div class=\"line\">              long totalBytesCount = 0L;            </div><div class=\"line\">              @Override            </div><div class=\"line\">              public void write(Buffer source, long byteCount) throws IOException {    </div><div class=\"line\">                  super.write(source, byteCount);                </div><div class=\"line\">                  //&#x589E;&#x52A0;&#x5F53;&#x524D;&#x5199;&#x5165;&#x7684;&#x5B57;&#x8282;&#x6570;                </div><div class=\"line\">                  writtenBytesCount += byteCount;                </div><div class=\"line\">                  //&#x83B7;&#x5F97;contentLength&#x7684;&#x503C;&#xFF0C;&#x540E;&#x7EED;&#x4E0D;&#x518D;&#x8C03;&#x7528;                </div><div class=\"line\">                  if (totalBytesCount == 0) {                    </div><div class=\"line\">                      totalBytesCount = contentLength();                </div><div class=\"line\">                  }                </div><div class=\"line\">                   progressListener.onProgress(writtenBytesCount, totalBytesCount);            </div><div class=\"line\">              }        </div><div class=\"line\">          };    </div><div class=\"line\">      }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;\"><a href=\"#Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;\" class=\"headerlink\" title=\"Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;\"></a>Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;</h2><p><code>Retrofit</code>&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&#x4E5F;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x53EA;&#x8981;&#x77E5;&#x9053;&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;&#x7684;<code>url</code>&#xFF0C;&#x5B9A;&#x5236;&#x76F8;&#x5E94;&#x7684;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#xFF0C;&#x76F4;&#x63A5;&#x4E0A;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface DownloadFileService {</div><div class=\"line\">    @Streaming</div><div class=\"line\">    @GET</div><div class=\"line\">    Call&lt;ResponseBody&gt; downloadFileWithDynamicUrlSync(@Url String url);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5230;&#x4E86;<code>@Streaming</code>&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x662F;&#x6574;&#x4E2A;&#x4E00;&#x6B21;&#x6027;&#x4FDD;&#x5B58;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x636E;&#x8FC7;&#x5927;&#x5F88;&#x5BB9;&#x6613;&#x4EA7;&#x751F;<code>OOM</code>&#x73B0;&#x8C61;&#xFF1B;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E86;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5C06;&#x4F1A;&#x6309;&#x6D41;&#x7684;&#x5F62;&#x5F0F;&#x5206;&#x6563;&#x4F20;&#x9012;&#xFF0C;&#x6240;&#x4EE5;&#x5927;&#x6587;&#x4EF6;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;<code>@Streaming</code></em></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void getDownloadFile(final String filePath) {</div><div class=\"line\">        final DownloadFileService downloadFileService = ServiceGenerator.createService(DownloadFileService.class);</div><div class=\"line\"> </div><div class=\"line\">        Call&lt;ResponseBody&gt; call = downloadFileService.downloadFileWithDynamicUrlSync(filePath);</div><div class=\"line\"></div><div class=\"line\">        call.enqueue(new Callback&lt;ResponseBody&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {</div><div class=\"line\">                if (response.isSuccessful()) {</div><div class=\"line\">                    boolean writeToDisk = WriteToDiskUtils.writeResponseBodyToDiskUtils(MainActivity.this, response.body());</div><div class=\"line\">                    Log.d(&quot;TAG&quot;, &quot;&#x4E0B;&#x8F7D;&#x6210;&#x529F;?&quot; + writeToDisk);</div><div class=\"line\">                } else {</div><div class=\"line\">                    Log.d(&quot;TAG&quot;, &quot;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;!&quot;);</div><div class=\"line\">                }</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot; service contacted at:&quot; + call.request().url());</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            @Override</div><div class=\"line\">            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {</div><div class=\"line\">                if (call.isCanceled()) {</div><div class=\"line\">                    Log.d(&quot;TAG&quot;, &quot;&#x8BF7;&#x6C42;&#x5DF2;&#x7ECF;&#x53D6;&#x6D88;!&quot;);</div><div class=\"line\">                } else {</div><div class=\"line\">                    Log.e(&quot;TAG&quot;, t.getMessage());</div><div class=\"line\">                }</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot; service contacted at:&quot; + call.request().url());</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6587;&#x4EF6;&#x7684;&#x4FDD;&#x5B58;&#x4F7F;&#x7528;&#x4E86;<code>WriteToDiskUtils.writeResponseBodyToDiskUtils()</code>&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6570;&#x636E;&#x8BFB;&#x53D6;&#x4E0E;&#x5199;&#x5165;&#xFF0C;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#x76F4;&#x63A5;&#x770B;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class WriteToDiskUtils {</div><div class=\"line\"> </div><div class=\"line\">    public static boolean writeResponseBodyToDiskUtils(Context context, ResponseBody body) {</div><div class=\"line\">        File file = new File(Environment.getExternalStorageDirectory() + File.separator + &quot;retrofit/&quot;);</div><div class=\"line\">        InputStream in = null;</div><div class=\"line\">        OutputStream out = null;</div><div class=\"line\">        long fileSize = body.contentLength();</div><div class=\"line\">        int line;</div><div class=\"line\">        long downloadSize = 0;</div><div class=\"line\"> </div><div class=\"line\">        if (!file.exists()){</div><div class=\"line\">            file.mkdirs();</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        File realFile = new File(file,&quot;vso.mp4&quot;);</div><div class=\"line\"> </div><div class=\"line\">        try {</div><div class=\"line\">            in = body.byteStream();</div><div class=\"line\">            out = new FileOutputStream(realFile);</div><div class=\"line\">            byte[] buffer = new byte[4096];</div><div class=\"line\">            while ((line = in.read(buffer)) != -1) {</div><div class=\"line\">                out.write(buffer, 0, line);</div><div class=\"line\">                downloadSize += line;</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot;&#x6587;&#x4EF6;&#x603B;&#x7684;&#x5927;&#x5C0F;:&quot; + fileSize + &quot;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;:&quot; + downloadSize);</div><div class=\"line\">            }</div><div class=\"line\">            out.flush();</div><div class=\"line\">            return true;</div><div class=\"line\">        } catch (IOException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">            return false;</div><div class=\"line\">        } finally {</div><div class=\"line\">            try {</div><div class=\"line\">                if (in != null)</div><div class=\"line\">                    in.close();</div><div class=\"line\">                if (out != null)</div><div class=\"line\">                    out.close();</div><div class=\"line\">            } catch (IOException e) {</div><div class=\"line\">                e.printStackTrace();</div><div class=\"line\">                return false;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x6B21;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#x5427;&#xFF0C;&#x53BB;&#x4F11;&#x606F;&#x4E86;&#x3002;&#x3002;&#x3002;&#x4E0B;&#x6B21;&#x5C06;&#x5BF9;<code>Retrofit</code>&#x4E0E;<code>RXJava</code>&#x7684;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#x8FDB;&#x884C;&#x4ECB;&#x7ECD;</em></p>\n</blockquote>\n"},{"title":"带你走进Retrofit的新世界","url":"https://idisfkj.github.io/2016/11/15/带你走进Retrofit的新世界/","content":"<p>&#x5BF9;&#x4E8E;<code>Android</code>&#x6765;&#x8BF4;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7684;&#x5B9E;&#x73B0;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x4F8B;&#x5982;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6CA1;&#x6709;&#x5C01;&#x88C5;&#x7684;<code>HttpUrlConnection</code>&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x5DF2;&#x7ECF;&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#x7684;&#x4F8B;&#x5982;<code>Volley</code>&#x3001;<code>OkHttp</code>&#xFF0C;&#x8FD9;&#x4E9B;&#x5C01;&#x88C5;&#x597D;&#x7684;&#x5F00;&#x6E90;&#x5E93;&#x4E5F;&#x662F;&#x4E0D;&#x9519;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x8BB2;&#x7684;&#x8BDD;&#x4E5F;&#x53EF;&#x4EE5;&#x5355;&#x72EC;&#x5199;&#x597D;&#x51E0;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x4E86;&#x89E3;<code>Volley</code>&#x539F;&#x7406;&#x7684;&#x7684;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x8FD9;&#x4E24;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/10/14/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%80/\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</a>&#x3001;<a href=\"https://idisfkj.github.io/2016/10/17/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%BA%8C/\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E8C;)</a>&#x3002;&#x4F46;&#x662F;&#x4ECA;&#x5929;&#x8981;&#x8BF4;&#x7684;&#x662F;&#x73B0;&#x5728;<code>Android</code>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x8FDB;&#x9636;&#x5FC5;&#x5907;&#x7684;&#x7F51;&#x7EDC;&#x5E93;<code>Retrofit</code>&#xFF0C;&#x4E5F;&#x662F;&#x73B0;&#x5728;&#x6700;&#x6D41;&#x884C;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4E4B;&#x524D;&#x4F7F;&#x7528;&#x8FC7;<code>OkHttp</code>&#x90A3;&#x4E48;&#x606D;&#x559C;&#x4F60;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x4F18;&#x52BF;&#xFF0C;&#x56E0;&#x4E3A;<code>Retrofit</code>&#x5185;&#x90E8;&#x5C31;&#x662F;&#x4F7F;&#x7528;<code>OkHttp</code>&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#x7684;&#x3002;<code>Retrofit</code>&#x505A;&#x7684;&#x53EA;&#x662F;&#x5C01;&#x88C5;&#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x3001;<code>Header</code>&#x3001;<code>Url</code>&#x7B49;&#x4FE1;&#x606F;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x4F20;&#x7ED9;<code>OkHttp</code>&#x5B8C;&#x6210;&#x8BF7;&#x6C42;&#xFF0C;&#x8BF7;&#x6C42;&#x5B8C;&#x4E4B;&#x540E;<code>OkHttp</code>&#x5728;&#x4F20;&#x56DE;&#x7ED9;<code>Retrofit</code>&#x3002;&#x4E0B;&#x9762;&#x6765;&#x8BF4;&#x4E0B;<code>Retrofit</code>&#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;&#x3002;</p>\n<blockquote>\n<p>&#x672C;&#x7AE0;&#x4ECB;&#x7ECD;&#x7684;&#x90FD;&#x662F;&#x5165;&#x95E8;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x53EA;&#x505A;&#x4E00;&#x4E2A;&#x5F15;&#x5BFC;&#x4F5C;&#x7528;&#xFF0C;&#x5927;&#x795E;&#x8BF7;&#x81EA;&#x52A8;&#x8DF3;&#x8FC7;</p>\n</blockquote>\n<h1 id=\"Retrofit\"><a href=\"#Retrofit\" class=\"headerlink\" title=\"Retrofit\"></a>Retrofit</h1><p>&#x5BF9;&#x4E8E;<code>Retrofit</code>&#x7684;&#x4ECB;&#x7ECD;&#x6211;&#x5F15;&#x7528;&#x5B98;&#x65B9;&#x7684;&#x4E00;&#x53E5;&#x8BDD;<code>Type-safe HTTP client for Android and Java by Square, Inc.</code>&#x7B80;&#x5355;&#x7684;&#x7FFB;&#x8BD1;&#x4E00;&#x4E0B;&#x5C31;&#x662F;&#xFF1A;&#x5BF9;&#x4E8E;<code>Android</code>&#x4E0E;<code>Java</code>&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x5B89;&#x5168;&#x7684;<code>Http</code>&#x8BF7;&#x6C42;&#x5E93;&#x3002;&#x5B83;&#x662F;&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x6765;&#x63CF;&#x8FF0;<code>Http</code>&#x8BF7;&#x6C42;&#xFF0C;&#x4E3B;&#x8981;&#x6709;&#x4EE5;&#x4E0B;&#x7279;&#x70B9;&#xFF1A;</p>\n<ul>\n<li>&#x652F;&#x6301;<code>URL</code>&#x53C2;&#x6570;&#x66FF;&#x4EE3;&#x4E0E;<code>query</code>&#x53C2;&#x6570;&#x7684;&#x67E5;&#x8BE2;</li>\n<li>&#x5BF9;&#x4E8E;&#x8BF7;&#x6C42;<code>body</code>&#x7C7B;&#x578B;&#x7684;&#x8F6C;&#x6362;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;<code>Json</code>&#x3001;<code>protocol buffers</code>&#xFF09;</li>\n<li>&#x652F;&#x6301;<code>Multipart</code>&#x8BF7;&#x6C42;&#x4E0E;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;</li>\n</ul>\n<h2 id=\"&#x914D;&#x7F6E;\"><a href=\"#&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;\"></a>&#x914D;&#x7F6E;</h2><p>&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x66F4;&#x65B0;&#x5230;<code>Retrofit2</code>&#x4E86;&#xFF0C;&#x5BF9;&#x4E8E;<code>Android</code>&#x6765;&#x8BF4;&#x76F4;&#x63A5;&#x5728;<code>Gradle</code>&#x4E2D;&#x914D;&#x7F6E;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.squareup.retrofit2:retrofit:2.1.0&apos;</div></pre></td></tr></table></figure>\n<p>&#x6216;&#x8005;&#x67E5;&#x770B;<a href=\"https://github.com/square/retrofit\" target=\"_blank\" rel=\"external\">&#x5B98;&#x7F51;</a>&#x914D;&#x7F6E;&#x6700;&#x65B0;&#x7248;&#x672C;,<code>Retrofit</code>&#x9700;&#x8981;&#x7684;<code>Android</code>&#x6700;&#x4F4E;&#x7248;&#x672C;&#x4E3A;<code>2.3</code><br>&#x5BF9;&#x4E8E;<code>Retrofit2</code>&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x914D;&#x7F6E;<code>OkHttp</code>&#x4F9D;&#x8D56;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x9ED8;&#x8BA4;&#x4F1A;&#x4E00;&#x8D77;&#x914D;&#x7F6E;&#xFF0C;&#x5728;&#x4F7F;&#x7528;<code>Retrofit</code>&#x65F6;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x7C7B;&#x578B;&#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x4EE5;&#x4E0B;<code>6</code>&#x4E2D;&#x6D41;&#x884C;&#x7684;&#x7C7B;&#x578B;&#x4F9B;&#x9009;&#x62E9;</p>\n<ul>\n<li>Gson: com.squareup.retrofit2:converter-gson</li>\n<li>Jackson: com.squareup.retrofit2:converter-jackson</li>\n<li>Moshi: com.squareup.retrofit2:converter-moshi</li>\n<li>Protobuf: com.squareup.retrofit2:converter-protobuf</li>\n<li>Wire: com.squareup.retrofit2:converter-wire</li>\n<li>Simple XML: com.squareup.retrofit2:converter-simplexml</li>\n<li><p>Scalars (primitives, boxed, and String): com.squareup.retrofit2:converter-scalars</p>\n<p>&#x5728;<code>Gradle</code>&#x4E2D;&#x914D;&#x7F6E;&#x4E0E;<code>Retrofit</code>&#x5BF9;&#x4E8E;&#x7684;&#x7248;&#x672C;&#x53F7;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.squareup.retrofit2:converter-gson:2.1.0&apos;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"&#x4F7F;&#x7528;\"><a href=\"#&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;\"></a>&#x4F7F;&#x7528;</h1><p>&#x524D;&#x9762;&#x8BF4;&#x4E86;<code>Retrofit</code>&#x662F;&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x6765;&#x5B9A;&#x4E49;&#x8BF7;&#x6C42;&#xFF0C;&#x4E14;&#x5B83;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x91CA;&#x662F;&#x5728;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x90FD;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x76F8;&#x5E94;&#x7684;<code>Http</code>&#x6CE8;&#x91CA;&#x4E0E;&#x8BF7;&#x6C42;&#x7684;<code>URL</code>&#x3002;<code>Retrofit</code>&#x652F;&#x6301;<code>5</code>&#x4E2D;&#x5185;&#x7F6E;&#x7684;&#x6CE8;&#x91CA;&#x7684;<code>Http</code>&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#xFF1A;<code>GET</code>&#x3001;<code>POST</code>&#x3001;<code>PUT</code>&#x3001;<code>DELETE</code>&#x4E0E;<code>HEAD</code>&#x3002;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x4E0B;&#x7B80;&#x5355;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>\n<p>&#x5B9A;&#x4E49;&#x7684;<code>URL</code>&#x5305;&#x62EC;&#x4E24;&#x90E8;&#x5206;&#x4E00;&#x90E8;&#x5206;&#x4E3A;<code>host</code>&#x4E5F;&#x79F0;&#x4E3A;<code>baseUrl</code>&#x4F8B;&#x5982;&#xFF1A;<code>https://api.github.com</code>&#xFF0C;&#x522B;&#x4E00;&#x90E8;&#x5206;&#x4E3A;<code>path</code>&#x4F8B;&#x5982;:<code>users/list</code>&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x6CE8;&#x91CA;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;<code>url</code>&#x4E00;&#x822C;&#x4E3A;<code>path</code>&#x90E8;&#x5206;&#x3002;</p>\n<blockquote>\n<p>&#x4EE5;&#x4E0B;&#x7684;&#x4ECB;&#x7ECD;&#x90FD;&#x662F;&#x9488;&#x5BF9;<code>Retrofit2</code>&#x6765;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x4E0E;<code>Retrofit1.9</code>&#x6709;&#x7684;&#x5730;&#x65B9;&#x8FD8;&#x662F;&#x6709;&#x533A;&#x522B;&#x3002;</p>\n</blockquote>\n<h2 id=\"GET\"><a href=\"#GET\" class=\"headerlink\" title=\"GET\"></a>GET</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;users/list&quot;)</div></pre></td></tr></table></figure>\n<p>&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5E26;&#x53C2;&#x6570;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;users/list?sort=desc&quot;)</div></pre></td></tr></table></figure>\n<h2 id=\"Path\"><a href=\"#Path\" class=\"headerlink\" title=\"Path\"></a>Path</h2><p>&#x5176;&#x5B9E;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x66F4;&#x65B0;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B9A;&#x4E49;<code>path</code>&#xFF0C;&#x518D;<code>path</code>&#x4E2D;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code>{}</code>&#x6765;&#x5B9A;&#x4E49;&#x9700;&#x8981;&#x52A8;&#x6001;&#x66FF;&#x4EE3;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x518D;&#x5230;&#x65B9;&#x6CD5;&#x4E2D;&#x4F7F;&#x7528;<code>@Path()</code>&#x6765;&#x5B9A;&#x4E49;&#x66FF;&#x4EE3;&#x7684;&#x53D8;&#x91CF;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;group/{address}/users&quot;)</div><div class=\"line\">Call&lt;List&lt;User&gt;&gt; groupList(@Path(&quot;address&quot;) String address);</div></pre></td></tr></table></figure>\n<p><code>@Path</code>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x7684;&#x5B57;&#x6BB5;<code>encoded</code>&#x9ED8;&#x8BA4;&#x4E3A;<code>false</code>&#xFF0C;&#x5982;&#x679C;&#x4E3A;<code>true</code>&#x5C06;&#x4F1A;&#x5BF9;&#x7279;&#x6B8A;&#x7684;&#x5B57;&#x7B26;&#x8FDB;&#x884C;&#x7F16;&#x7801;&#x8F6C;&#x6362;&#xFF0C;&#x4F8B;&#x5982;<code>key</code>&#x4E3A;<code>address</code>&#x7684;<code>value</code>&#x4E3A;<code>maer-se</code>,&#x9ED8;&#x8BA4;&#x7F16;&#x7801;&#x7684;<code>url</code>&#x4E3A;<code>group/maer-se/users</code>&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x5BF9;<code>encoded</code>&#x8BBE;&#x7F6E;&#x4E3A;<code>true</code>&#x5C06;&#x4F1A;&#x5BF9;<code>-</code>&#x5B57;&#x7B26;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#x6700;&#x7EC8;&#x53D8;&#x6210;&#x4E86;<code>group/maer%2Dse/users</code>,&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;group/{address}/users&quot;)</div><div class=\"line\">Call&lt;List&lt;User&gt;&gt; groupList(@Path(value = &quot;address&quot;, encoded = true) String address);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x540E;&#x7EED;&#x7684;<code>Query</code>&#x3001;<code>QueryMap</code>&#x3001;<code>Part</code>&#x3001;<code>PartMap</code>&#x3001;<code>Field</code>&#x4E0E;<code>FieldMap</code>&#x90FD;&#x6709;&#x8FD9;&#x4E2A;&#x7279;&#x6027;</p>\n</blockquote>\n<h2 id=\"Query\"><a href=\"#Query\" class=\"headerlink\" title=\"Query\"></a>Query</h2><p>&#x53C2;&#x6570;&#x67E5;&#x8BE2;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code>@Query()</code>&#x6765;&#x5B9A;&#x4E49;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">GET(&quot;group/{id}/users&quot;)</div><div class=\"line\">Call&lt;List&lt;User&gt;&gt; groupList(@Path(&quot;id&quot;) int groupId, @Query(&quot;user&quot;) String user,</div><div class=\"line\">@Query(&quot;address&quot;) String address);</div></pre></td></tr></table></figure>\n<h2 id=\"QueryMap\"><a href=\"#QueryMap\" class=\"headerlink\" title=\"QueryMap\"></a>QueryMap</h2><p>&#x5982;&#x679C;&#x53C2;&#x6570;&#x8FC7;&#x591A;&#x53EF;&#x4EE5;&#x501F;&#x52A9;<code>@QueryMap</code> &#x6765;&#x6784;&#x9020;<code>Map</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;group/{id}/users&quot;)</div><div class=\"line\">Call&lt;List&lt;User&gt;&gt; groupList(@Path(&quot;id&quot;) int groupId, @QueryMap Map&lt;String, String&gt; options);</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x65F6;&#x5982;&#x679C;&#x5728;&#x8C03;&#x7528;<code>.groupList</code>&#x65F6;,&#x53EA;&#x8981;&#x53C2;&#x6570;&#x7684;&#x7C7B;&#x578B;&#x4E0D;&#x4E3A;&#x57FA;&#x672C;&#x7C7B;&#x578B;(<code>int</code>&#x3001;<code>double</code>&#x7B49;)&#xFF0C;&#x6216;&#x8005;&#x5C06;&#x57FA;&#x672C;&#x578B;&#x8F6C;&#x6362;&#x4E3A;<code>Integer,Double</code>&#x7B49;&#x65F6;&#x53EF;&#x4EE5;&#x4E3A;<code>null</code>&#xFF0C;&#x5982;&#x679C;&#x4E3A;<code>null</code>&#x90A3;&#x4E48;<code>Retrofit</code>&#x5C06;&#x4F1A;&#x5FFD;&#x7565;&#x4E0D;&#x4F1A;&#x5339;&#x914D;&#x8BE5;&#x53C2;&#x6570;&#x3002;&#x53E6;&#x5916;&#x5728;&#x4F7F;&#x7528;<code>QueryMap</code>&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5339;&#x914D;&#x4F60;&#x9700;&#x8981;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x7684;&#x53C2;&#x6570;&#x5C06;&#x4F1A;&#x81EA;&#x52A8;&#x5FFD;&#x7565;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String, String&gt; data = new HashMap&lt;&gt;();</div><div class=\"line\">    data.put(&quot;user&quot;, &quot;Marcus&quot;);</div><div class=\"line\">    Call&lt;List&lt;User&gt;&gt; call = newsService.groupList(2,data);</div><div class=\"line\">    call.enqueue(&#x2026;)</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x4E3A;<code>https://api.github.com/group/2/users?user=Marcus</code>&#x5BF9;&#x4E8E;<code>address</code>&#x5C06;&#x81EA;&#x52A8;&#x5FFD;&#x7565;&#x3002;</p>\n<blockquote>\n<p>&#x8BF4;&#x4E86;&#x8FD9;&#x4E48;&#x591A;&#x8FD8;&#x662F;&#x4EE5;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;&#x6765;&#x5C55;&#x793A;&#x6574;&#x4E2A;&#x8C03;&#x7528;&#x6D41;&#x7A0B;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x662F;<code>Github</code>&#x4E0A;&#x7684;</p>\n</blockquote>\n<h2 id=\"&#x793A;&#x4F8B;\"><a href=\"#&#x793A;&#x4F8B;\" class=\"headerlink\" title=\"&#x793A;&#x4F8B;\"></a>&#x793A;&#x4F8B;</h2><p>&#x5B9A;&#x4E49;&#x63A5;&#x53E3;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">    @GET(&quot;/repos/{owner}/{repo}/contributors&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors(</div><div class=\"line\">            @Path(&quot;owner&quot;) String owner,</div><div class=\"line\">            @Path(&quot;repo&quot;) String repo);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><code>Contributors</code>&#x662F;&#x4E00;&#x4E2A;&#x5B9E;&#x4F53;&#x7C7B;&#xFF0C;&#x5BF9;&#x5E94;&#x4E8E;&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class Contributors {</div><div class=\"line\">    public String login;</div><div class=\"line\">    public String contributions;</div><div class=\"line\"> </div><div class=\"line\">    public Contributors(String contributions, String login) {</div><div class=\"line\">        this.contributions = contributions;</div><div class=\"line\">        this.login = login;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<code>Retrofit</code>&#x751F;&#x6210;&#x4F60;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x4E2D;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x662F;<code>Json</code>&#x7C7B;&#x578B;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5BF9;<code>body</code>&#x505A;&#x76F8;&#x5E94;&#x7684;&#x8F6C;&#x5316;&#xFF0C;&#x901A;&#x8FC7;&#x6DFB;&#x52A0;<code>Converter</code>&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;<code>Converter</code>&#x5B83;&#x9ED8;&#x8BA4;&#x662F;&#x4F7F;&#x7528;<code>OkHttp</code>&#x7684;<code>ResponseBody</code>&#x4E0E;<code>ResponseBody</code>&#x5BF9;&#x4E8E;&#x540E;&#x7EED;<code>POST</code>&#x8BBE;&#x7F6E;&#x7684;<code>@Body</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Retrofit retrofit = new Retrofit.Builder()</div><div class=\"line\">                .baseUrl(&quot;https://api.github.com&quot;)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                .build();</div><div class=\"line\"> </div><div class=\"line\">GithubService service = retrofit.create(GithubService.class)</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x4F7F;&#x7528;<code>GsonConverterFactory.create()</code>&#x5FC5;&#x987B;&#x5728;<code>Gradle</code>&#x4E2D;&#x914D;&#x7F6E;&#x4E86;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;<code>6</code>&#x79CD;&#x7C7B;&#x578B;&#x4E2D;&#x7684;<code>Gson</code></p>\n</blockquote>\n<p>&#x6BCF;&#x4E00;&#x4E2A;<code>Call</code>&#x90FD;&#x662F;&#x6765;&#x81EA;&#x4E8E;&#x521B;&#x5EFA;&#x7684;&#x63A5;&#x53E3;&#x901A;&#x8FC7;&#x540C;&#x6B65;&#x6216;&#x8005;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x800C;&#x83B7;&#x5F97;&#x3002;&#x5728;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x6CD5;&#x65F6;&#x53EF;&#x4EE5;&#x4F20;&#x5165;&#x5BF9;&#x5E94;&#x7684;&#x53C2;&#x6570;&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;square&quot;, &quot;retrofit&quot;);</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x540C;&#x8C03;&#x7528;<code>Call</code>&#x7684;<code>execute</code>&#x6267;&#x884C;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#xFF0C;&#x6216;&#x8005;&#x8C03;&#x7528;<code>Call</code>&#x7684;<code>enqueue</code>&#x6765;&#x6267;&#x884C;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x54CD;&#x5E94;&#x7684;&#x7ED3;&#x679C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">try {</div><div class=\"line\">            List&lt;Contributors&gt; contributorses = call.execute().body();</div><div class=\"line\">            for (Contributors contributors : contributorses) {</div><div class=\"line\">                Log.v(&quot;TAG&quot;, contributors.login + &quot;(&quot; + contributors.contributions + &quot;)&quot;);</div><div class=\"line\">            }</div><div class=\"line\">        } catch (IOException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<h2 id=\"POST\"><a href=\"#POST\" class=\"headerlink\" title=\"POST\"></a>POST</h2><p>&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53EF;&#x80FD;&#x4F1A;&#x4F5C;&#x4E3A;<code>Http</code>&#x8BF7;&#x6C42;&#x7684;<code>body</code>&#x3002;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@Body</code>&#x6CE8;&#x91CA;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@POST(&quot;users/new&quot;)</div><div class=\"line\">Call&lt;User&gt; createUser(@Body User user);</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>Retrofit</code>&#x7684;<code>converter</code>&#x6765;&#x8FDB;&#x884C;&#x7279;&#x6B8A;&#x7684;&#x8F6C;&#x5316;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;<code>converter</code>&#x5B83;&#x5C06;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;<code>RequestBody</code></p>\n<h2 id=\"FormUrlEncoded-And-Multipart\"><a href=\"#FormUrlEncoded-And-Multipart\" class=\"headerlink\" title=\"FormUrlEncoded And Multipart\"></a>FormUrlEncoded And Multipart</h2><p>&#x5BF9;&#x4E8E;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x4E5F;&#x53EF;&#x4EE5;&#x53D1;&#x9001;<code>form-encoded</code>&#x4E0E;<code>multipart</code>&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;</p>\n<h3 id=\"Field-And-FiledMap\"><a href=\"#Field-And-FiledMap\" class=\"headerlink\" title=\"Field And FiledMap\"></a>Field And FiledMap</h3><p>&#x5BF9;&#x4E8E;<code>form-encoded</code>&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x4E00;&#x822C;<code>Content-type</code>&#x4E3A;<code>x-www-form-urlencoded</code>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@FormUrlEncoded</code>&#x6765;&#x5BF9;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x6CE8;&#x91CA;&#x8BF4;&#x660E;&#xFF0C;&#x6BCF;&#x4E00;&#x5BF9;&#x7684;<code>key-value</code>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@Field</code>&#x6765;&#x8FDB;&#x884C;&#x5B9A;&#x4E49;&#xFF0C;&#x5206;&#x522B;&#x63D0;&#x4F9B;<code>key</code>&#x4E0E;<code>value</code>&#x3002;&#x5BF9;&#x4E8E;&#x591A;&#x5BF9;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@FieldMap</code>&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x8BBE;&#x7F6E;,&#x4F7F;&#x7528;&#x4E0E;<code>@QueryMap</code>&#x7C7B;&#x4F3C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@FormUrlEncoded</div><div class=\"line\">@POST(&quot;user/edit&quot;)</div><div class=\"line\">Call&lt;User&gt; updateUser(@Field(&quot;first_name&quot;) String first, @Field(&quot;last_name&quot;) String last);</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#x76F8;&#x540C;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6570;&#x7EC4;&#x6765;&#x5B9A;&#x4E49;&#x5B57;&#x6BB5;&#x7684;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@FormUrlEncoded</div><div class=\"line\">@POST(&quot;tasks&quot;)</div><div class=\"line\">Call&lt;List&lt;Task&gt;&gt; createTasks(@Field(&quot;title&quot;) List&lt;String&gt; titles);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><code>FromUrlEncoded</code>&#x4E0E;<code>Query Parameter</code>&#x7684;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x662F;&#xFF0C;&#x524D;&#x8005;&#x662F;<code>POST</code>&#x540E;&#x8005;&#x662F;<code>GET</code>&#xFF0C;&#x540C;&#x65F6;&#x524D;&#x8005;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x662F;&#x653E;&#x5728;<code>request body</code>&#x4E2D;&#xFF0C;&#x800C;&#x540E;&#x8005;&#x662F;&#x653E;&#x5728;<code>url</code>&#x4E2D;&#x3002;</p>\n</blockquote>\n<h3 id=\"Part-And-PartMap\"><a href=\"#Part-And-PartMap\" class=\"headerlink\" title=\"Part And PartMap\"></a>Part And PartMap</h3><p>&#x9700;&#x8981;<code>Multipart</code>&#x8BF7;&#x6C42;&#x65F6;&#x5373;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x4E00;&#x822C;<code>Content-type</code>&#x4E3A;<code>multipart/form-data</code>,&#x53EA;&#x8981;&#x5728;&#x65B9;&#x6CD5;&#x4E0A;&#x9762;&#x4F7F;&#x7528;<code>@Multipart</code>&#x6CE8;&#x91CA;&#xFF0C;&#x540C;&#x65F6;&#x5BF9;&#x4E8E;<code>Parts</code>&#x90E8;&#x5206;&#x7684;&#x5B9A;&#x4E49;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@Part</code>&#x6CE8;&#x91CA;&#xFF0C;&#x76F8;&#x5E94;&#x7684;<code>@PartMap</code>&#x4E5F;&#x5B58;&#x5728;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Multipart</div><div class=\"line\">@PUT(&quot;user/photo&quot;)</div><div class=\"line\">Call&lt;User&gt; updateUser(@Part(&quot;photo&quot;) RequestBody photo, </div><div class=\"line\">\t\t\t\t @Part(&quot;description&quot;) RequestBody description);</div></pre></td></tr></table></figure>\n<p><code>Multipart</code>&#x9ED8;&#x8BA4;&#x4E5F;&#x662F;&#x4F7F;&#x7528;<code>RequestBody</code>&#x64CD;&#x4F5C;&#x5B83;&#x7684;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x6216;&#x8005;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>converter</code>&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>\n<h2 id=\"Headers-And-Header\"><a href=\"#Headers-And-Header\" class=\"headerlink\" title=\"Headers And Header\"></a>Headers And Header</h2><p><code>@Headers</code>&#x6CE8;&#x91CA;&#x662F;&#x4E3A;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x9759;&#x6001;&#x7684;<code>headers</code>&#xFF0C;&#x4E14;&#x76F8;&#x540C;&#x7684;<code>name</code>&#x4E0D;&#x4F1A;&#x88AB;&#x8986;&#x76D6;&#xFF0C;&#x90FD;&#x4F1A;&#x5305;&#x542B;&#x5230;&#x8BF7;&#x6C42;&#x4E2D;;&#x800C;<code>@Header</code>&#x6CE8;&#x91CA;&#x662F;&#x4E3A;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x52A8;&#x6001;&#x7684;<code>header</code>,&#x5B83;&#x5C06;&#x4F1A;&#x76F8;&#x5F53;&#x4E0E;&#x53C2;&#x6570;&#x6765;&#x5BF9;<code>@Header</code>&#x8FDB;&#x884C;&#x63D0;&#x4F9B;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x503C;&#x4E3A;<code>null</code>&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C06;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Headers({&quot;Connection: keep-alive&quot;,</div><div class=\"line\">            &quot;Accept-Language:zh-CN,zh;q=0.8,en;q=0.6&quot;})</div><div class=\"line\">    @GET(&quot;/settings&quot;)</div><div class=\"line\">    Call&lt;String&gt; settingService(@Header(&quot;Cookie&quot;) String cookie);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x5982;&#x679C;&#x662F;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684;<code>Retrofit2.1</code>,&#x4E5F;&#x652F;&#x6301;<code>@HeaderMap</code></p>\n</blockquote>\n<h2 id=\"&#x793A;&#x4F8B;-1\"><a href=\"#&#x793A;&#x4F8B;-1\" class=\"headerlink\" title=\"&#x793A;&#x4F8B;\"></a>&#x793A;&#x4F8B;</h2><p>&#x518D;&#x6765;&#x8D34;&#x4E00;&#x4E2A;&#x591A;&#x8BF4;&#x6587;&#x7AE0;&#x8BF7;&#x6C42;&#x7684;&#x5B8C;&#x6574;&#x793A;&#x4F8B;&#xFF0C;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x9700;&#x8981;&#x8BF7;&#x6C42;&#x793A;&#x4F8B;&#x8D44;&#x6E90;</p>\n<p><img src=\"/2016/11/15/&#x5E26;&#x4F60;&#x8D70;&#x8FDB;Retrofit&#x7684;&#x65B0;&#x4E16;&#x754C;/1.png\" alt=\"General\"></p>\n<p><img src=\"/2016/11/15/&#x5E26;&#x4F60;&#x8D70;&#x8FDB;Retrofit&#x7684;&#x65B0;&#x4E16;&#x754C;/2.png\" alt=\"Query String Parameters\"></p>\n<p>&#x76F8;&#x4FE1;&#x5E94;&#x8BE5;&#x5F88;&#x6E05;&#x695A;&#x4E86;&#xFF0C;&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#x4E3A;<code>GET</code>&#xFF0C;&#x8BF7;&#x6C42;&#x7684;<code>Url</code>&#x4E3A;<code>http://idisfkj.duoshuo.com/api/threads/list.json?short_name=idisfkj&amp;order=desc&amp;limit=30&amp;nonce=57f1b19209428</code>,&#x8BF7;&#x6C42;&#x67E5;&#x8BE2;&#x7684;&#x53C2;&#x6570;&#x4E3A;<code>short_name</code>&#x3001;<code>order</code>&#x3001;<code>limit</code>&#x4E0E;<code>nonce</code>&#xFF0C;<code>Ok</code>&#x9700;&#x8981;&#x77E5;&#x9053;&#x7684;&#x90FD;&#x6709;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x6765;<code>code</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface DuoShuoArticleService {</div><div class=\"line\">    @GET(&quot;/api/threads/list.json&quot;)</div><div class=\"line\">    Call&lt;DuoShuoArticle&gt; articleService(@Query(&quot;short_name&quot;) String shortName,</div><div class=\"line\">                                        @Query(&quot;order&quot;) String order,</div><div class=\"line\">                                        @Query(&quot;limit&quot;) int limit,</div><div class=\"line\">                                        @Query(&quot;nonce&quot;) String onnce);</div><div class=\"line\"> </div><div class=\"line\">    @GET(&quot;/api/threads/list.json&quot;)</div><div class=\"line\">    Call&lt;DuoShuoArticle&gt; articleServiceMap(@Query(&quot;limit&quot;) int limit,</div><div class=\"line\">                                           @QueryMap Map&lt;String, String&gt; options);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">   /**</div><div class=\"line\">     * get &#x5BF9;url&#x7684;&#x4F20;&#x53C2;&#x67E5;&#x8BE2;&#x53D1;&#x8D77;&#x8BF7;&#x6C42; &#x8FD4;&#x56DE;json&#x7C7B;&#x578B;&#x7684;response</div><div class=\"line\">     */</div><div class=\"line\">    public void getDuoShuoArticle() {</div><div class=\"line\">        Retrofit retrofit = new Retrofit.Builder()</div><div class=\"line\">                .baseUrl(&quot;http://idisfkj.duoshuo.com&quot;)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                .build();</div><div class=\"line\">        DuoShuoArticleService articleService = retrofit.create(DuoShuoArticleService.class);</div><div class=\"line\">        Call&lt;DuoShuoArticle&gt; call = articleService.articleService(&quot;idisfkj&quot;, &quot;desc&quot;, 5, &quot;57f1b19209428&quot;);</div><div class=\"line\"> </div><div class=\"line\">        //&#x4F7F;&#x7528;QueryMap</div><div class=\"line\">//                Map&lt;String,String&gt; map = new HashMap&lt;String, String&gt;();</div><div class=\"line\">//                map.put(&quot;short_name&quot;,&quot;idisfkj&quot;);</div><div class=\"line\">//                map.put(&quot;order&quot;,&quot;desc&quot;);</div><div class=\"line\">//                map.put(&quot;nonce&quot;,&quot;57f1b19209428&quot;);</div><div class=\"line\">//                Call&lt;DuoShuoArticle&gt; call = articleService.articleServiceMap(5,map);</div><div class=\"line\">        try {</div><div class=\"line\">            Response&lt;DuoShuoArticle&gt; response = call.execute();</div><div class=\"line\">            List&lt;DuoShuoArticle.ResponseBean&gt; list = response.body().getResponse();</div><div class=\"line\"> </div><div class=\"line\">            for (DuoShuoArticle.ResponseBean responseBean : list) {</div><div class=\"line\">                Log.v(&quot;TAG&quot;, responseBean.getThread_key() + &quot;-&gt;&quot; + responseBean.getTitle());</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">        } catch (IOException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;&#x5E26;&#x4F60;&#x8D70;&#x8FDB;Retrofit&#x7684;&#x65B0;&#x4E16;&#x754C;</div><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;Android &#x81EA;&#x5B9A;&#x4E49;View</div><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;Android Handler&#x3001;Looper&#x4E0E;MessageQueue&#x6E90;&#x7801;&#x5206;&#x6790;</div><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E8C;)</div><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x5982;&#x679C;&#x4F60;&#x770B;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x90A3;&#x4E48;&#x606D;&#x559C;&#x4F60;&#x5BF9;<code>Retrofit</code>&#x4E5F;&#x5165;&#x95E8;&#x4E86;&#xFF0C;&#x540E;&#x7EED;&#x6211;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x63A2;&#x7A76;&#x4E0E;&#x5927;&#x5BB6;&#x8FDB;&#x884C;&#x5206;&#x4EAB;&#x3002;</p>\n</blockquote>\n"},{"title":"Android 自定义View","url":"https://idisfkj.github.io/2016/11/13/Android-自定义View/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><code>Android</code>&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x7684;&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;&#x662F;&#x6211;&#x4EEC;&#x6BCF;&#x4E00;&#x4E2A;<code>Android</code>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x90FD;&#x5FC5;&#x987B;&#x638C;&#x63E1;&#x7684;&#x6280;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x603B;&#x4F1A;&#x9047;&#x5230;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x7684;&#x9700;&#x6C42;&#x3002;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x81EA;&#x5DF1;&#x7684;&#x6280;&#x672F;&#x6C34;&#x5E73;&#xFF0C;&#x81EA;&#x5DF1;&#x5C31;&#x7CFB;&#x7EDF;&#x7684;&#x53BB;&#x7814;&#x7A76;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x5199;&#x4E0B;&#x4E00;&#x70B9;&#x5FC3;&#x5F97;&#xFF0C;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x53CA;&#x65F6;&#x6307;&#x51FA;&#x3002;</p>\n<h1 id=\"&#x6D41;&#x7A0B;\"><a href=\"#&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"&#x6D41;&#x7A0B;\"></a>&#x6D41;&#x7A0B;</h1><p>&#x5728;<code>Android</code>&#x4E2D;&#x5BF9;&#x4E8E;&#x5E03;&#x5C40;&#x7684;&#x8BF7;&#x6C42;&#x7ED8;&#x5236;&#x662F;&#x5728;<code>Android framework</code>&#x5C42;&#x5F00;&#x59CB;&#x5904;&#x7406;&#x7684;&#x3002;&#x7ED8;&#x5236;&#x662F;&#x4ECE;&#x6839;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#xFF0C;&#x5BF9;&#x5E03;&#x5C40;&#x6811;&#x8FDB;&#x884C;<code>measure</code>&#x4E0E;<code>draw</code>&#x3002;&#x5728;<code>RootViewImpl</code>&#x4E2D;&#x7684;<code>performTraversals</code>&#x5C55;&#x5F00;&#x3002;&#x5B83;&#x6240;&#x505A;&#x7684;&#x5C31;&#x662F;&#x5BF9;&#x9700;&#x8981;&#x7684;&#x89C6;&#x56FE;&#x8FDB;&#x884C;<code>measure</code>&#xFF08;&#x6D4B;&#x91CF;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#xFF09;&#x3001;<code>layout</code>&#xFF08;&#x786E;&#x5B9A;&#x89C6;&#x56FE;&#x7684;&#x4F4D;&#x7F6E;&#xFF09;&#x4E0E;<code>draw</code>&#xFF08;&#x7ED8;&#x5236;&#x89C6;&#x56FE;&#xFF09;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x56FE;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5C55;&#x73B0;&#x89C6;&#x56FE;&#x7684;&#x7ED8;&#x5236;&#x6D41;&#x7A0B;&#xFF1A;</p>\n<p><img src=\"https://raw.githubusercontent.com/android-cn/android-open-project-analysis/master/tech/viewdrawflow/image/view_draw_method_chain.png\" alt=\"View&#x7684;&#x7ED8;&#x5236;&#x6D41;&#x7A0B;&#x56FE;\"></p>\n<blockquote>\n<p>&#x5F53;&#x7528;&#x6237;&#x8C03;&#x7528;<code>requestLayout</code>&#x65F6;&#xFF0C;&#x53EA;&#x4F1A;&#x89E6;&#x53D1;<code>measure</code>&#x4E0E;<code>layout</code>&#xFF0C;&#x4F46;&#x7CFB;&#x7EDF;&#x5F00;&#x59CB;&#x8C03;&#x7528;&#x65F6;&#x8FD8;&#x4F1A;&#x89E6;&#x53D1;<code>draw</code></p>\n</blockquote>\n<p>&#x4E0B;&#x9762;&#x6765;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x8FD9;&#x51E0;&#x4E2A;&#x6D41;&#x7A0B;&#x3002;</p>\n<h2 id=\"measure\"><a href=\"#measure\" class=\"headerlink\" title=\"measure\"></a>measure</h2><p><code>measure</code>&#x662F;<code>View</code>&#x4E2D;&#x7684;<code>final</code>&#x578B;&#x65B9;&#x6CD5;&#x4E0D;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#x3002;&#x5B83;&#x662F;&#x5BF9;&#x89C6;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x6D4B;&#x91CF;&#x8BA1;&#x7B97;&#xFF0C;&#x4F46;&#x5B83;&#x4F1A;&#x56DE;&#x8C03;<code>onMeasure</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x91CD;&#x5199;<code>onMeasure</code>&#x65B9;&#x6CD5;&#x6765;&#x5BF9;<code>View</code>&#x8FDB;&#x884C;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;&#x6D4B;&#x91CF;&#x3002;&#x5B83;&#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570;<code>widthMeasureSpec</code>&#x4E0E;<code>heightMeasureSpec</code>&#x3002;&#x5176;&#x5B9E;&#x8FD9;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x90FD;&#x5305;&#x542B;&#x4E24;&#x90E8;&#x5206;&#xFF0C;&#x5206;&#x522B;&#x4E3A;<code>size</code>&#x4E0E;<code>mode</code>&#x3002;<code>size</code>&#x4E3A;&#x6D4B;&#x91CF;&#x7684;&#x5927;&#x5C0F;&#x800C;<code>mode</code>&#x4E3A;&#x89C6;&#x56FE;&#x5E03;&#x5C40;&#x7684;&#x6A21;&#x5F0F;<br>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x5206;&#x522B;&#x83B7;&#x53D6;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">int widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">int heightSize = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">int widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">int heightMode = MeasureSpec.getMode(heightMeasureSpec);</div></pre></td></tr></table></figure>\n<p>&#x83B7;&#x53D6;&#x5230;&#x7684;<code>mode</code>&#x79CD;&#x7C7B;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x4E09;&#x79CD;&#xFF1A;</p>\n<table>\n<thead>\n<tr>\n<th>MODE</th>\n<th>EXPLAIN</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>UNSPECIFiED</td>\n<td>&#x7236;&#x89C6;&#x56FE;&#x4E0D;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x8FDB;&#x884C;&#x7EA6;&#x675F;&#xFF0C;&#x5B50;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x610F;&#x5927;&#x5C0F;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x5BF9;<code>ListView</code>&#x3001;<code>ScrollView</code>&#x7B49;&#x8FDB;&#x884C;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;&#x4E00;&#x822C;&#x7528;&#x4E0D;&#x5230;</td>\n</tr>\n<tr>\n<td>EXACTLY</td>\n<td>&#x7236;&#x89C6;&#x56FE;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x8BBE;&#x5B9A;&#x4E86;&#x4E00;&#x4E2A;&#x7CBE;&#x786E;&#x7684;&#x5C3A;&#x5BF8;&#xFF0C;&#x5B50;&#x89C6;&#x56FE;&#x4E0D;&#x8D85;&#x8FC7;&#x8BE5;&#x5C3A;&#x5BF8;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;&#x7CBE;&#x786E;&#x7684;&#x503C;&#x4F8B;&#x5982;<code>200dp</code>&#x6216;&#x8005;&#x4F7F;&#x7528;&#x4E86;<code>match_parent</code></td>\n</tr>\n<tr>\n<td>AT_MOST</td>\n<td>&#x7236;&#x89C6;&#x56FE;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x6307;&#x5B9A;&#x4E86;&#x4E00;&#x6700;&#x5927;&#x7684;&#x5C3A;&#x5BF8;&#xFF0C;&#x786E;&#x4FDD;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x6240;&#x4EE5;&#x5185;&#x5BB9;&#x90FD;&#x521A;&#x597D;&#x80FD;&#x5728;&#x8BE5;&#x5C3A;&#x5BF8;&#x4E2D;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;<code>wrap_content</code>,&#x8FD9;&#x79CD;&#x7236;&#x89C6;&#x56FE;&#x4E0D;&#x80FD;&#x83B7;&#x53D6;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x53EA;&#x80FD;&#x7531;&#x5B50;&#x89C6;&#x56FE;&#x81EA;&#x5DF1;&#x53BB;&#x8BA1;&#x7B97;&#x5C3A;&#x5BF8;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x6D4B;&#x91CF;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x903B;&#x8F91;&#x60C5;&#x51B5;</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"setMeasuredDimension\"><a href=\"#setMeasuredDimension\" class=\"headerlink\" title=\"setMeasuredDimension\"></a>setMeasuredDimension</h3><p>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x903B;&#x8F91;&#x83B7;&#x53D6;&#x89C6;&#x56FE;&#x7684;&#x5BBD;&#x9AD8;&#xFF0C;&#x6700;&#x540E;&#x8981;&#x8C03;&#x7528;<code>setMeasuredDimension</code>&#x65B9;&#x6CD5;&#x5C06;&#x6D4B;&#x91CF;&#x597D;&#x7684;&#x5BBD;&#x9AD8;&#x8FDB;&#x884C;&#x4F20;&#x9012;&#x51FA;&#x53BB;&#x3002;&#x5176;&#x5B9E;&#x6700;&#x7EC8;&#x662F;&#x8C03;&#x7528;<code>setMeasuredDimensionRaw</code>&#x65B9;&#x6CD5;&#x5BF9;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x503C;&#x8FDB;&#x884C;&#x5C5E;&#x6027;&#x8D4B;&#x503C;&#x3002;&#x8C03;&#x7528;<code>super.onMeasure()</code>&#x7684;&#x8C03;&#x7528;&#x903B;&#x8F91;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;<br>&#x4E0B;&#x9762;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;<code>&#x9A8C;&#x8BC1;&#x7801;&#x7684;View</code>&#x4E3A;&#x4F8B;&#xFF0C;&#x5B83;&#x7684;<code>onMeasure</code>&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {</div><div class=\"line\">        int widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">        int heightSize = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">        int widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">        int heightMode = MeasureSpec.getMode(heightMeasureSpec);</div><div class=\"line\">        if (widthMode == MeasureSpec.EXACTLY) {</div><div class=\"line\">            //&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x7CBE;&#x786E;&#x7684;&#x5BBD;&#x5EA6;</div><div class=\"line\">            width = widthSize;</div><div class=\"line\">        } else if (widthMode == MeasureSpec.AT_MOST) {</div><div class=\"line\">            //&#x8BA1;&#x7B97;&#x51FA;&#x5BBD;&#x5EA6;(&#x6587;&#x672C;&#x7684;&#x5BBD;&#x5EA6;+padding&#x7684;&#x5927;&#x5C0F;)</div><div class=\"line\">            width = bounds.width() + getPaddingLeft() + getPaddingRight();</div><div class=\"line\">        }</div><div class=\"line\">        if (heightMode == MeasureSpec.EXACTLY) {</div><div class=\"line\">            //&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x7CBE;&#x786E;&#x7684;&#x9AD8;&#x5EA6;</div><div class=\"line\">            height = heightSize;</div><div class=\"line\">        } else if (heightMode == MeasureSpec.AT_MOST) {</div><div class=\"line\">            //&#x8BA1;&#x7B97;&#x51FA;&#x9AD8;&#x5EA6;(&#x6587;&#x672C;&#x7684;&#x9AD8;&#x5EA6;+padding&#x7684;&#x5927;&#x5C0F;)</div><div class=\"line\">            height = bounds.height() + getPaddingBottom() + getPaddingTop();</div><div class=\"line\">        }</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x83B7;&#x53D6;&#x7684;&#x5BBD;&#x9AD8;</div><div class=\"line\">        setMeasuredDimension(width, height);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x53EF;&#x4EE5;&#x5BF9;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x7684;<code>layout_width</code>&#x4E0E;<code>layout_height</code>&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x8FBE;&#x5230;&#x4E0D;&#x540C;&#x7684;<code>mode</code>&#x7C7B;&#x578B;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x6548;&#x679C;</p>\n</blockquote>\n<h3 id=\"measureChildren\"><a href=\"#measureChildren\" class=\"headerlink\" title=\"measureChildren\"></a>measureChildren</h3><p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x5BF9;&#x7EE7;&#x627F;<code>ViewGroup</code>&#x7684;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x90A3;&#x4E48;&#x5728;&#x8FDB;&#x884C;&#x6D4B;&#x91CF;&#x81EA;&#x8EAB;&#x7684;&#x5927;&#x5C0F;&#x65F6;&#x8FD8;&#x8981;&#x6D4B;&#x91CF;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x4E00;&#x822C;&#x901A;&#x8FC7;<code>measureChildren(int widthMeasureSpec, int heightMeasureSpec)</code>&#x65B9;&#x6CD5;&#x6765;&#x6D4B;&#x91CF;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void measureChildren(int widthMeasureSpec, int heightMeasureSpec) {</div><div class=\"line\">        final int size = mChildrenCount;</div><div class=\"line\">        final View[] children = mChildren;</div><div class=\"line\">        for (int i = 0; i &lt; size; ++i) {</div><div class=\"line\">            final View child = children[i];</div><div class=\"line\">            if ((child.mViewFlags &amp; VISIBILITY_MASK) != GONE) {</div><div class=\"line\">                measureChild(child, widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x6E90;&#x7801;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x5B83;&#x5176;&#x5B9E;&#x662F;&#x904D;&#x5386;&#x6BCF;&#x4E00;&#x4E2A;&#x5B50;&#x89C6;&#x56FE;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x5B50;&#x89C6;&#x56FE;&#x4E0D;&#x662F;&#x9690;&#x85CF;&#x7684;&#x5C31;&#x8C03;&#x7528;<code>measureChild</code>&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x6765;&#x770B;&#x4E0B;<code>measureChild</code>&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void measureChild(View child, int parentWidthMeasureSpec,</div><div class=\"line\">            int parentHeightMeasureSpec) {</div><div class=\"line\">        final LayoutParams lp = child.getLayoutParams();</div><div class=\"line\">        final int childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec,</div><div class=\"line\">                mPaddingLeft + mPaddingRight, lp.width);</div><div class=\"line\">        final int childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec,</div><div class=\"line\">                mPaddingTop + mPaddingBottom, lp.height);</div><div class=\"line\">        child.measure(childWidthMeasureSpec, childHeightMeasureSpec);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x9996;&#x5148;&#x8C03;&#x7528;&#x4E86;<code>getChildMeasureSpec</code>&#x65B9;&#x6CD5;&#x6765;&#x5206;&#x522B;&#x83B7;&#x53D6;&#x5BBD;&#x9AD8;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;<code>View</code>&#x7684;<code>measure</code>&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x901A;&#x8FC7;&#x524D;&#x9762;&#x7684;&#x5206;&#x6790;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x5B83;&#x505A;&#x7684;&#x5C31;&#x662F;&#x5BF9;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#x7684;&#x8BA1;&#x7B97;&#x3002;&#x800C;&#x5BF9;&#x4E8E;<code>measure</code>&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x662F;&#x901A;&#x8FC7;<code>getChildMeasureSpec</code>&#x83B7;&#x53D6;&#xFF0C;&#x518D;&#x6765;&#x770B;&#x4E0B;&#x5176;&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static int getChildMeasureSpec(int spec, int padding, int childDimension) {</div><div class=\"line\">        int specMode = MeasureSpec.getMode(spec);</div><div class=\"line\">        int specSize = MeasureSpec.getSize(spec);</div><div class=\"line\"> </div><div class=\"line\">        int size = Math.max(0, specSize - padding);</div><div class=\"line\"> </div><div class=\"line\">        int resultSize = 0;</div><div class=\"line\">        int resultMode = 0;</div><div class=\"line\"> </div><div class=\"line\">        switch (specMode) {</div><div class=\"line\">        // Parent has imposed an exact size on us</div><div class=\"line\">        case MeasureSpec.EXACTLY:</div><div class=\"line\">            if (childDimension &gt;= 0) {</div><div class=\"line\">                resultSize = childDimension;</div><div class=\"line\">                resultMode = MeasureSpec.EXACTLY;</div><div class=\"line\">            } else if (childDimension == LayoutParams.MATCH_PARENT) {</div><div class=\"line\">                // Child wants to be our size. So be it.</div><div class=\"line\">                resultSize = size;</div><div class=\"line\">                resultMode = MeasureSpec.EXACTLY;</div><div class=\"line\">            } else if (childDimension == LayoutParams.WRAP_CONTENT) {</div><div class=\"line\">                // Child wants to determine its own size. It can&apos;t be</div><div class=\"line\">                // bigger than us.</div><div class=\"line\">                resultSize = size;</div><div class=\"line\">                resultMode = MeasureSpec.AT_MOST;</div><div class=\"line\">            }</div><div class=\"line\">            break;</div><div class=\"line\"> </div><div class=\"line\">        // Parent has imposed a maximum size on us</div><div class=\"line\">        case MeasureSpec.AT_MOST:</div><div class=\"line\">            if (childDimension &gt;= 0) {</div><div class=\"line\">                // Child wants a specific size... so be it</div><div class=\"line\">                resultSize = childDimension;</div><div class=\"line\">                resultMode = MeasureSpec.EXACTLY;</div><div class=\"line\">            } else if (childDimension == LayoutParams.MATCH_PARENT) {</div><div class=\"line\">                // Child wants to be our size, but our size is not fixed.</div><div class=\"line\">                // Constrain child to not be bigger than us.</div><div class=\"line\">                resultSize = size;</div><div class=\"line\">                resultMode = MeasureSpec.AT_MOST;</div><div class=\"line\">            } else if (childDimension == LayoutParams.WRAP_CONTENT) {</div><div class=\"line\">                // Child wants to determine its own size. It can&apos;t be</div><div class=\"line\">                // bigger than us.</div><div class=\"line\">                resultSize = size;</div><div class=\"line\">                resultMode = MeasureSpec.AT_MOST;</div><div class=\"line\">            }</div><div class=\"line\">            break;</div><div class=\"line\"> </div><div class=\"line\">        // Parent asked to see how big we want to be</div><div class=\"line\">        case MeasureSpec.UNSPECIFIED:</div><div class=\"line\">            if (childDimension &gt;= 0) {</div><div class=\"line\">                // Child wants a specific size... let him have it</div><div class=\"line\">                resultSize = childDimension;</div><div class=\"line\">                resultMode = MeasureSpec.EXACTLY;</div><div class=\"line\">            } else if (childDimension == LayoutParams.MATCH_PARENT) {</div><div class=\"line\">                // Child wants to be our size... find out how big it should</div><div class=\"line\">                // be</div><div class=\"line\">                resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size;</div><div class=\"line\">                resultMode = MeasureSpec.UNSPECIFIED;</div><div class=\"line\">            } else if (childDimension == LayoutParams.WRAP_CONTENT) {</div><div class=\"line\">                // Child wants to determine its own size.... find out how</div><div class=\"line\">                // big it should be</div><div class=\"line\">                resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size;</div><div class=\"line\">                resultMode = MeasureSpec.UNSPECIFIED;</div><div class=\"line\">            }</div><div class=\"line\">            break;</div><div class=\"line\">        }</div><div class=\"line\">        //noinspection ResourceType</div><div class=\"line\">        return MeasureSpec.makeMeasureSpec(resultSize, resultMode);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x662F;&#x4E0D;&#x662F;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x4E86;&#x70B9;&#x5462;&#x3002;&#x5B83;&#x505A;&#x7684;&#x5C31;&#x662F;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;&#x6839;&#x636E;<code>mode</code>&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x83B7;&#x53D6;&#x76F8;&#x5E94;&#x7684;<code>size</code>&#x3002;&#x6839;&#x636E;&#x7236;&#x89C6;&#x56FE;&#x7684;<code>mode</code>&#x7C7B;&#x578B;&#x4E0E;&#x5B50;&#x89C6;&#x56FE;&#x7684;<code>LayoutParams</code>&#x7C7B;&#x578B;&#x6765;&#x51B3;&#x5B9A;&#x5B50;&#x89C6;&#x56FE;&#x6240;&#x5C5E;&#x7684;<code>mode</code>,&#x6700;&#x540E;&#x518D;&#x5C06;&#x83B7;&#x53D6;&#x7684;<code>size</code>&#x4E0E;<code>mode</code>&#x901A;&#x8FC7;<code>MeasureSpec.makeMeasureSpec</code>&#x65B9;&#x6CD5;&#x6574;&#x5408;&#x8FD4;&#x56DE;&#x3002;&#x6700;&#x540E;&#x4F20;&#x9012;&#x5230;<code>measure</code>&#x4E2D;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;<code>widthMeasureSpec</code>&#x4E0E;<code>heightMeasureSpec</code>&#x4E2D;&#x5305;&#x542B;&#x7684;&#x4E24;&#x90E8;&#x5206;&#x7684;&#x503C;&#x3002;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E3A;<code>measureChildren</code>-&gt;<code>measureChild</code>-&gt;<code>getChildMeasureSpec</code>-&gt;<code>measure</code>-&gt;<code>onMeasure</code>-&gt;<code>setMeasuredDimension</code>,&#x6240;&#x4EE5;&#x901A;&#x8FC7;<code>measureChildren</code>&#x5C31;&#x53EF;&#x4EE5;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x8FDB;&#x884C;&#x6D4B;&#x91CF;&#x8BA1;&#x7B97;&#x3002;</p>\n<h2 id=\"layout\"><a href=\"#layout\" class=\"headerlink\" title=\"layout\"></a>layout</h2><p><code>layout</code>&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x5185;&#x90E8;&#x4F1A;&#x56DE;&#x8C03;<code>onLayout</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x662F;&#x7528;&#x6765;&#x786E;&#x5B9A;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x7ED8;&#x5236;&#x4F4D;&#x7F6E;&#xFF0C;&#x4F46;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5728;<code>ViewGroup</code>&#x4E2D;&#x662F;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>View</code>&#x662F;&#x7EE7;&#x627F;<code>ViewGroup</code>&#x7684;&#x8BDD;&#x5C31;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;&#x4F46;&#x5982;&#x679C;&#x662F;&#x7EE7;&#x627F;<code>View</code>&#x7684;&#x8BDD;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x4E86;&#xFF0C;<code>View</code>&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x7A7A;&#x5B9E;&#x73B0;&#x3002;&#x800C;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x4F4D;&#x7F6E;&#x7684;&#x8BBE;&#x7F6E;&#x662F;&#x901A;&#x8FC7;<code>View</code>&#x7684;<code>layout</code>&#x65B9;&#x6CD5;&#x901A;&#x8FC7;&#x4F20;&#x9012;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;<code>left</code>&#x3001;<code>top</code>&#x3001;<code>right</code>&#x4E0E;<code>bottom</code>&#x503C;&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x503C;&#x4E00;&#x822C;&#x90FD;&#x8981;&#x501F;&#x52A9;<code>View</code>&#x7684;&#x5BBD;&#x9AD8;&#x6765;&#x8BA1;&#x7B97;,&#x89C6;&#x56FE;&#x7684;&#x5BBD;&#x9AD8;&#x5219;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>getMeasureWidth</code>&#x4E0E;<code>getMeasureHeight</code>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x7684;&#x503C;&#x5C31;&#x662F;&#x4E0A;&#x9762;<code>onMeasure</code>&#x4E2D;<code>setMeasuredDimension</code>&#x4F20;&#x9012;&#x7684;&#x503C;&#xFF0C;&#x5373;&#x5B50;&#x89C6;&#x56FE;&#x6D4B;&#x91CF;&#x7684;&#x5BBD;&#x9AD8;&#x3002;</p>\n<blockquote>\n<p><code>getWidth</code>&#x3001;<code>getHeight</code>&#x4E0E;<code>getMeasureWidth</code>&#x3001;<code>getMeasureHeight</code>&#x662F;&#x4E0D;&#x540C;&#x7684;&#xFF0C;&#x524D;&#x8005;&#x662F;&#x5728;<code>onLayout</code>&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x503C;&#xFF0C;&#x5206;&#x522B;&#x4E3A;<code>left</code>-<code>right</code>&#x4E0E;<code>top</code>-<code>bottom</code>&#xFF1B;&#x800C;&#x540E;&#x8005;&#x662F;&#x5728;<code>onMeasure</code>&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x503C;&#x3002;&#x53EA;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E24;&#x79CD;&#x83B7;&#x53D6;&#x7684;&#x503C;<code>&#x4E00;&#x822C;</code>&#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x6CE8;&#x610F;&#x8C03;&#x7528;&#x7684;<code>&#x65F6;&#x673A;</code>&#x3002;</p>\n</blockquote>\n<p>&#x4E0B;&#x9762;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x628A;&#x5B50;&#x89C6;&#x56FE;&#x653E;&#x7F6E;&#x4E8E;&#x7236;&#x89C6;&#x56FE;&#x7684;&#x56DB;&#x4E2A;&#x89D2;&#x7684;<code>View</code>&#x4E3A;&#x4F8B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onLayout(boolean changed, int l, int t, int r, int b) {</div><div class=\"line\">        int count = getChildCount();</div><div class=\"line\">        MarginLayoutParams params;</div><div class=\"line\">        </div><div class=\"line\">        int cl;</div><div class=\"line\">        int ct;</div><div class=\"line\">        int cr;</div><div class=\"line\">        int cb;</div><div class=\"line\">            </div><div class=\"line\">        for (int i = 0; i &lt; count; i++) {</div><div class=\"line\">            View child = getChildAt(i);</div><div class=\"line\">            params = (MarginLayoutParams) child.getLayoutParams();</div><div class=\"line\">                </div><div class=\"line\">            if (i == 0) {</div><div class=\"line\">                //&#x5DE6;&#x4E0A;&#x89D2;</div><div class=\"line\">                cl = params.leftMargin;</div><div class=\"line\">                ct = params.topMargin;</div><div class=\"line\">            } else if (i == 1) {</div><div class=\"line\">                //&#x53F3;&#x4E0A;&#x89D2;</div><div class=\"line\">                cl = getMeasuredWidth() - params.rightMargin - child.getMeasuredWidth();</div><div class=\"line\">                ct = params.topMargin;</div><div class=\"line\">            } else if (i == 2) {</div><div class=\"line\">                //&#x5DE6;&#x4E0B;&#x89D2;</div><div class=\"line\">                cl = params.leftMargin;</div><div class=\"line\">                ct = getMeasuredHeight() - params.bottomMargin - child.getMeasuredHeight()</div><div class=\"line\">                 - params.topMargin;</div><div class=\"line\">            } else {</div><div class=\"line\">                //&#x53F3;&#x4E0B;&#x89D2;</div><div class=\"line\">                cl = getMeasuredWidth() - params.rightMargin - child.getMeasuredWidth();</div><div class=\"line\">                ct = getMeasuredHeight() - params.bottomMargin - child.getMeasuredHeight()</div><div class=\"line\">                 - params.topMargin;</div><div class=\"line\">            }</div><div class=\"line\">            cr = cl + child.getMeasuredWidth();</div><div class=\"line\">            cb = ct + child.getMeasuredHeight();</div><div class=\"line\">            //&#x786E;&#x5B9A;&#x5B50;&#x89C6;&#x56FE;&#x5728;&#x7236;&#x89C6;&#x56FE;&#x4E2D;&#x653E;&#x7F6E;&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">            child.layout(cl, ct, cr, cb);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x81F3;&#x4E8E;<code>onMeasure</code>&#x7684;&#x5B9E;&#x73B0;&#x6E90;&#x7801;&#x6211;&#x540E;&#x9762;&#x4F1A;&#x7ED9;&#x94FE;&#x63A5;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x770B;&#x6548;&#x679C;&#x56FE;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x540E;&#x9762;&#x4E5F;&#x4F1A;&#x8D34;&#x51FA;&#x6765;&#xFF0C;&#x524D;&#x9762;&#x7684;&#x90A3;&#x4E2A;&#x9A8C;&#x8BC1;&#x7801;&#x7684;&#x4E5F;&#x662F;&#x4E00;&#x6837;</p>\n</blockquote>\n<h2 id=\"draw\"><a href=\"#draw\" class=\"headerlink\" title=\"draw\"></a>draw</h2><p><code>draw</code>&#x662F;&#x7531;<code>dispatchDraw</code>&#x53D1;&#x52A8;&#x7684;&#xFF0C;<code>dispatchDraw</code>&#x662F;<code>ViewGroup</code>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;<code>View</code>&#x662F;&#x7A7A;&#x5B9E;&#x73B0;&#x3002;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x53BB;&#x7BA1;&#x7406;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;&#x800C;<code>draw</code>&#x65B9;&#x6CD5;&#x53EA;&#x5728;<code>View</code>&#x4E2D;&#x5B58;&#x5728;&#xFF0C;<code>ViewGoup</code>&#x505A;&#x7684;&#x53EA;&#x662F;&#x5728;<code>dispatchDraw</code>&#x4E2D;&#x8C03;&#x7528;<code>drawChild</code>&#x65B9;&#x6CD5;&#xFF0C;&#x800C;<code>drawChild</code>&#x4E2D;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;<code>View</code>&#x7684;<code>draw</code>&#x65B9;&#x6CD5;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;<code>draw</code>&#x7684;&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void draw(Canvas canvas) {</div><div class=\"line\">        final int privateFlags = mPrivateFlags;</div><div class=\"line\">        final boolean dirtyOpaque = (privateFlags &amp; PFLAG_DIRTY_MASK) == PFLAG_DIRTY_OPAQUE &amp;&amp;</div><div class=\"line\">                (mAttachInfo == null || !mAttachInfo.mIgnoreDirtyState);</div><div class=\"line\">        mPrivateFlags = (privateFlags &amp; ~PFLAG_DIRTY_MASK) | PFLAG_DRAWN;</div><div class=\"line\">         </div><div class=\"line\">        /*</div><div class=\"line\">         * Draw traversal performs several drawing steps which must be executed</div><div class=\"line\">         * in the appropriate order:</div><div class=\"line\">         *</div><div class=\"line\">         *      1. Draw the background</div><div class=\"line\">         *      2. If necessary, save the canvas&apos; layers to prepare for fading</div><div class=\"line\">         *      3. Draw view&apos;s content</div><div class=\"line\">         *      4. Draw children</div><div class=\"line\">         *      5. If necessary, draw the fading edges and restore layers</div><div class=\"line\">         *      6. Draw decorations (scrollbars for instance)</div><div class=\"line\">         */</div><div class=\"line\">          </div><div class=\"line\">        // Step 1, draw the background, if needed</div><div class=\"line\">        int saveCount;</div><div class=\"line\"> </div><div class=\"line\">        if (!dirtyOpaque) {</div><div class=\"line\">            drawBackground(canvas);</div><div class=\"line\">        }</div><div class=\"line\">         </div><div class=\"line\">        // skip step 2 &amp; 5 if possible (common case)</div><div class=\"line\">        final int viewFlags = mViewFlags;</div><div class=\"line\">        boolean horizontalEdges = (viewFlags &amp; FADING_EDGE_HORIZONTAL) != 0;</div><div class=\"line\">        boolean verticalEdges = (viewFlags &amp; FADING_EDGE_VERTICAL) != 0;</div><div class=\"line\">        if (!verticalEdges &amp;&amp; !horizontalEdges) {</div><div class=\"line\">            // Step 3, draw the content</div><div class=\"line\">            if (!dirtyOpaque) onDraw(canvas);</div><div class=\"line\">             </div><div class=\"line\">            // Step 4, draw the children</div><div class=\"line\">            dispatchDraw(canvas);</div><div class=\"line\">             </div><div class=\"line\">            // Overlay is part of the content and draws beneath Foreground</div><div class=\"line\">            if (mOverlay != null &amp;&amp; !mOverlay.isEmpty()) {</div><div class=\"line\">                            mOverlay.getOverlayView().dispatchDraw(canvas);</div><div class=\"line\">            }</div><div class=\"line\">                         </div><div class=\"line\">            // Step 6, draw decorations (foreground, scrollbars)</div><div class=\"line\">            onDrawForeground(canvas);</div><div class=\"line\">                       </div><div class=\"line\">            // we&apos;re done...</div><div class=\"line\">            return;</div><div class=\"line\">        }</div><div class=\"line\">        //&#x7701;&#x7565;2&amp;5&#x7684;&#x60C5;&#x51B5;</div><div class=\"line\">        ....</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6E90;&#x7801;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x6E05;&#x6670;&#x4E86;<code>draw</code>&#x603B;&#x5171;&#x5206;&#x4E3A;6&#x6B65;&#xFF1B;</p>\n<ul>\n<li>&#x7ED8;&#x5236;&#x80CC;&#x666F;</li>\n<li>&#x5982;&#x679C;&#x9700;&#x8981;&#x7684;&#x8BDD;&#xFF0C;&#x4FDD;&#x5B58;<code>layers</code></li>\n<li>&#x7ED8;&#x5236;&#x81EA;&#x8EAB;&#x6587;&#x672C;</li>\n<li>&#x7ED8;&#x5236;&#x5B50;&#x89C6;&#x56FE;</li>\n<li>&#x5982;&#x679C;&#x9700;&#x8981;&#x7684;&#x8BDD;&#xFF0C;&#x7ED8;&#x5236;<code>fading edges</code></li>\n<li>&#x7ED8;&#x5236;<code>scrollbars</code></li>\n</ul>\n<p>&#x5176;&#x4E2D;    &#x7B2C;<code>2</code>&#x6B65;&#x4E0E;&#x7B2C;<code>5</code>&#x6B65;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#x7684;&#x3002;&#x5728;&#x7B2C;<code>3</code>&#x6B65;&#x8C03;&#x7528;&#x4E86;<code>onDraw</code>&#x65B9;&#x6CD5;&#x6765;&#x7ED8;&#x5236;&#x81EA;&#x8EAB;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5728;<code>View</code>&#x4E2D;&#x662F;&#x7A7A;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x4E3A;&#x4EC0;&#x4E48;&#x5728;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x65F6;&#x5FC5;&#x987B;&#x8981;&#x91CD;&#x5199;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;&#x800C;&#x7B2C;<code>4</code>&#x6B65;&#x8C03;&#x7528;&#x4E86;<code>dispatchDraw</code>&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x8FDB;&#x884C;&#x7ED8;&#x5236;&#x3002;&#x8FD8;&#x662F;&#x4EE5;<code>&#x9A8C;&#x8BC1;&#x7801;</code>&#x4E3A;&#x4F8B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onDraw(Canvas canvas) {</div><div class=\"line\">        //&#x7ED8;&#x5236;&#x80CC;&#x666F;</div><div class=\"line\">        mPaint.setColor(getResources().getColor(R.color.autoCodeBg));</div><div class=\"line\">        canvas.drawRect(0, 0, getMeasuredWidth(), getMeasuredHeight(), mPaint);</div><div class=\"line\"></div><div class=\"line\">        mPaint.getTextBounds(autoText, 0, autoText.length(), bounds);</div><div class=\"line\">        //&#x7ED8;&#x5236;&#x6587;&#x672C;</div><div class=\"line\">        for (int i = 0; i &lt; autoText.length(); i++) {</div><div class=\"line\">             mPaint.setColor(getResources().getColor(colorRes[random.nextInt(6)]));</div><div class=\"line\">            canvas.drawText(autoText, i, i + 1, getWidth() / 2 - bounds.width() / 2 + i * bounds.width() / autoNum</div><div class=\"line\">                    , bounds.height() + random.nextInt(getHeight() - bounds.height())</div><div class=\"line\">                    , mPaint);</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        //&#x7ED8;&#x5236;&#x5E72;&#x6270;&#x70B9;</div><div class=\"line\">        for (int j = 0; j &lt; 250; j++) {</div><div class=\"line\">             canvas.drawPoint(random.nextInt(getWidth()), random.nextInt(getHeight()), pointPaint);</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        //&#x7ED8;&#x5236;&#x5E72;&#x6270;&#x7EBF;</div><div class=\"line\">        for (int k = 0; k &lt; 20; k++) {</div><div class=\"line\">            int startX = random.nextInt(getWidth());</div><div class=\"line\">            int startY = random.nextInt(getHeight());</div><div class=\"line\">            int stopX = startX + random.nextInt(getWidth() - startX);</div><div class=\"line\">            int stopY = startY + random.nextInt(getHeight() - startY);</div><div class=\"line\">             linePaint.setColor(getResources().getColor(colorRes[random.nextInt(6)]));</div><div class=\"line\">            canvas.drawLine(startX, startY, stopX, stopY, linePaint);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E9B;&#x7ED8;&#x5236;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;&#x597D;&#x4E86;&#x57FA;&#x672C;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x4E0A;&#x4F20;&#x4E00;&#x5F20;&#x793A;&#x4F8B;&#x7684;&#x6548;&#x679C;&#x56FE;&#xFF0C;&#x4E0E;&#x6E90;&#x7801;&#x94FE;&#x63A5;</p>\n</blockquote>\n<h1 id=\"&#x793A;&#x4F8B;&#x56FE;\"><a href=\"#&#x793A;&#x4F8B;&#x56FE;\" class=\"headerlink\" title=\"&#x793A;&#x4F8B;&#x56FE;\"></a>&#x793A;&#x4F8B;&#x56FE;</h1><p><img src=\"/2016/11/13/Android-&#x81EA;&#x5B9A;&#x4E49;View/custom.gif\" alt=\"&#x793A;&#x4F8B;&#x56FE;\"></p>\n<blockquote>\n<p>&#x5BF9;&#x4E86;&#x8FD8;&#x6709;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x8BF4;&#x4E00;&#x4E0B;&#x3002;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x65F6;&#x4E00;&#x822C;&#x90FD;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x90FD;&#x4F1A;&#x5728;<code>res/values/attr.xml</code>&#x4E2D;&#x5B9A;&#x4E49;<code>attr</code>&#x4E0E;<code>declare-styleable</code>,&#x6700;&#x540E;&#x5728;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x4E2D;&#x901A;&#x8FC7;<code>TypedArray</code>&#x83B7;&#x53D6;&#x3002;</p>\n</blockquote>\n<p>&#x793A;&#x4F8B;&#x6E90;&#x7801;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/CustomViewOrViewGroup\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/CustomViewOrViewGroup</a></p>\n"},{"title":"Handler、Looper与MessageQueue源码分析","url":"https://idisfkj.github.io/2016/10/19/Android-Handler、Looper与MessageQueue源码分析/","content":"<p>&#x5728;<code>Android</code>&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>Handler</code>&#x6765;&#x66F4;&#x65B0;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;<code>UI</code>&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x66F4;&#x65B0;<code>UI</code>&#x53EA;&#x80FD;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#xFF0C;&#x800C;&#x4E3A;&#x4E86;&#x8BA9;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E5F;&#x80FD;&#x63A7;&#x5236;<code>UI</code>&#x7684;&#x53D8;&#x5316;&#xFF0C;<code>Android</code>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x673A;&#x5236;<code>Handler</code>&#x3001;<code>Looper</code>&#x4E0E;<code>MessageQueue</code>&#x4E00;&#x540C;&#x534F;&#x4F5C;&#x6765;&#x8FBE;&#x5230;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x66F4;&#x65B0;<code>UI</code>&#x7684;&#x76EE;&#x7684;&#x3002;</p>\n<p>&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;<code>Handler</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">private Handler mHandler = new Handler() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void handleMessage(Message msg) {</div><div class=\"line\">            tv.setText(&quot;mHandler change UI&quot;);</div><div class=\"line\">            super.handleMessage(msg);</div><div class=\"line\">        }</div><div class=\"line\">    };</div></pre></td></tr></table></figure>\n<p>&#x4E00;&#x822C;&#x90FD;&#x89C1;&#x4E0D;&#x5230;<code>Looper</code>&#x4E0E;<code>MessageQueue</code>&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x5728;&#x54EA;&#x91CC;&#x8C03;&#x7528;&#x4E0E;&#x5982;&#x4F55;&#x534F;&#x4F5C;&#x7684;&#x5462;&#xFF1F;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E0D;&#x4F1A;&#x663E;&#x5F0F;&#x7684;&#x8C03;&#x7528;<code>Looper</code>&#x800C;&#x662F;&#x4F1A;&#x5728;<code>ActivityThread.main</code>&#x65B9;&#x6CD5;&#x4E2D;&#x9ED8;&#x8BA4;&#x8C03;&#x7528;&#x3002;</p>\n<h1 id=\"ActivityThread-main\"><a href=\"#ActivityThread-main\" class=\"headerlink\" title=\"ActivityThread.main\"></a>ActivityThread.main</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void main(String[] args) {</div><div class=\"line\">         Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &quot;ActivityThreadMain&quot;);</div><div class=\"line\">        SamplingProfilerIntegration.start();</div><div class=\"line\"> </div><div class=\"line\">        // CloseGuard defaults to true and can be quite spammy.  We</div><div class=\"line\">        // disable it here, but selectively enable it later (via</div><div class=\"line\">        // StrictMode) on debug builds, but using DropBox, not logs.</div><div class=\"line\">        CloseGuard.setEnabled(false);</div><div class=\"line\"> </div><div class=\"line\">        Environment.initForCurrentUser();</div><div class=\"line\"> </div><div class=\"line\">        // Set the reporter for event logging in libcore</div><div class=\"line\">        EventLogger.setReporter(new EventLoggingReporter());</div><div class=\"line\"> </div><div class=\"line\">        // Make sure TrustedCertificateStore looks in the right place for CA certificates</div><div class=\"line\">        final File configDir = Environment.getUserConfigDirectory(UserHandle.myUserId());</div><div class=\"line\">         TrustedCertificateStore.setDefaultUserDirectory(configDir);</div><div class=\"line\"> </div><div class=\"line\">        Process.setArgV0(&quot;&lt;pre-initialized&gt;&quot;);</div><div class=\"line\"> </div><div class=\"line\">        Looper.prepareMainLooper();//&#x521B;&#x5EFA;Looper</div><div class=\"line\"> </div><div class=\"line\">        ActivityThread thread = new ActivityThread();</div><div class=\"line\">        thread.attach(false);</div><div class=\"line\"> </div><div class=\"line\">        if (sMainThreadHandler == null) {</div><div class=\"line\">            sMainThreadHandler = thread.getHandler();</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        if (false) {</div><div class=\"line\">            Looper.myLooper().setMessageLogging(new</div><div class=\"line\">                    LogPrinter(Log.DEBUG, &quot;ActivityThread&quot;));</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        // End of event ActivityThreadMain.</div><div class=\"line\">         Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</div><div class=\"line\">        Looper.loop();//&#x5F00;&#x542F;Looper&#x5FAA;&#x73AF;</div><div class=\"line\"> </div><div class=\"line\">        throw new RuntimeException(&quot;Main thread loop unexpectedly exited&quot;);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x4E0A;&#x4EE3;&#x7801;&#xFF0C;&#x8C03;&#x7528;&#x4E86;<code>Looper.prepareMainLooper()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>Looper</code>&#xFF0C;&#x4E0D;&#x4FE1;&#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x518D;&#x67E5;&#x770B;&#x8BE5;&#x65B9;&#x6CD5;&#x505A;&#x4E86;&#x4EC0;&#x4E48;</p>\n<h1 id=\"Looper\"><a href=\"#Looper\" class=\"headerlink\" title=\"Looper\"></a>Looper</h1><h2 id=\"prepare\"><a href=\"#prepare\" class=\"headerlink\" title=\"prepare\"></a>prepare</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void prepare() {</div><div class=\"line\">        prepare(true);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private static void prepare(boolean quitAllowed) {</div><div class=\"line\">        if (sThreadLocal.get() != null) {</div><div class=\"line\">            throw new RuntimeException(&quot;Only one Looper may be created per thread&quot;);</div><div class=\"line\">        }</div><div class=\"line\">        sThreadLocal.set(new Looper(quitAllowed));//&#x521B;&#x5EFA;Looper&#x5E76;&#x8D4B;&#x7ED9;sThreadLocal</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    /**</div><div class=\"line\">     * Initialize the current thread as a looper, marking it as an</div><div class=\"line\">     * application&apos;s main looper. The main looper for your application</div><div class=\"line\">     * is created by the Android environment, so you should never need</div><div class=\"line\">     * to call this function yourself.  See also: {@link #prepare()}</div><div class=\"line\">     */</div><div class=\"line\">    public static void prepareMainLooper() {</div><div class=\"line\">        prepare(false);</div><div class=\"line\">        synchronized (Looper.class) {</div><div class=\"line\">            if (sMainLooper != null) {</div><div class=\"line\">                throw new IllegalStateException(&quot;The main Looper has already been prepared.&quot;);</div><div class=\"line\">            }</div><div class=\"line\">            sMainLooper = myLooper();</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">    public static @Nullable Looper myLooper() {</div><div class=\"line\">        return sThreadLocal.get();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;<code>prepareMainLooper</code>&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x4E86;<code>prepare</code>&#x800C;&#x901A;&#x8FC7;<code>prepare</code>&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>Looper</code>&#xFF0C;&#x5E76;&#x628A;&#x5B83;&#x8D4B;&#x7ED9;&#x4E86;<code>sThreadLocal</code>&#x3002;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>myLooper</code>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;<code>Looper</code>&#x3002;&#x518D;&#x6765;&#x770B;&#x4E0B;<code>new Looper(quitAllowed)</code>&#x521D;&#x59CB;&#x5316;&#x4E86;&#x4EC0;&#x4E48;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">private Looper(boolean quitAllowed) {</div><div class=\"line\">        mQueue = new MessageQueue(quitAllowed);</div><div class=\"line\">        mThread = Thread.currentThread();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7EC8;&#x4E8E;&#x770B;&#x5230;&#x4E86;<code>MessageQueue</code>&#x4E86;&#xFF0C;&#x5B83;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>MessageQueue</code>&#x3002;&#x8BE5;&#x6D88;&#x606F;&#x961F;&#x5217;&#x5C31;&#x662F;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x540E;&#x7EED;&#x7684;<code>Message</code>&#x3002;&#x518D;&#x56DE;&#x5230;<code>ActivityThread.main</code>&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x53D1;&#x73B0;&#x5B83;&#x8C03;&#x7528;&#x4E86;<code>Looper.loop()</code>&#x662F;&#x7528;&#x6765;&#x5F00;&#x542F;<code>Looper</code>&#x5FAA;&#x73AF;&#x7684;&#xFF0C;&#x76D1;&#x542C;&#x6D88;&#x606F;&#x961F;&#x5217;<code>MessageQueue</code>&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x3002;</p>\n<h2 id=\"loop\"><a href=\"#loop\" class=\"headerlink\" title=\"loop\"></a>loop</h2><p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;<code>Looper.loop()</code>&#x7684;&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void loop() {</div><div class=\"line\">        final Looper me = myLooper();//&#x83B7;&#x53D6;Looper</div><div class=\"line\">        if (me == null) {</div><div class=\"line\">            throw new RuntimeException(&quot;No Looper; Looper.prepare() wasn&apos;t called on this thread.&quot;);</div><div class=\"line\">        }</div><div class=\"line\">        final MessageQueue queue = me.mQueue;//&#x83B7;&#x53D6;&#x6D88;&#x606F;&#x961F;&#x5217;</div><div class=\"line\"> </div><div class=\"line\">        // Make sure the identity of this thread is that of the local process,</div><div class=\"line\">        // and keep track of what that identity token actually is.</div><div class=\"line\">        Binder.clearCallingIdentity();</div><div class=\"line\">        final long ident = Binder.clearCallingIdentity();</div><div class=\"line\"> </div><div class=\"line\">        for (;;) {        </div><div class=\"line\">            Message msg = queue.next(); // might block</div><div class=\"line\">            if (msg == null) {</div><div class=\"line\">                // No message indicates that the message queue is quitting.</div><div class=\"line\">                return;</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // This must be in a local variable, in case a UI event sets the logger</div><div class=\"line\">            final Printer logging = me.mLogging;</div><div class=\"line\">            if (logging != null) {</div><div class=\"line\">                logging.println(&quot;&gt;&gt;&gt;&gt;&gt; Dispatching to &quot; + msg.target + &quot; &quot; +</div><div class=\"line\">                        msg.callback + &quot;: &quot; + msg.what);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            final long traceTag = me.mTraceTag;</div><div class=\"line\">            if (traceTag != 0) {</div><div class=\"line\">                Trace.traceBegin(traceTag, msg.target.getTraceName(msg));</div><div class=\"line\">            }</div><div class=\"line\">            try {</div><div class=\"line\">                msg.target.dispatchMessage(msg);//&#x901A;&#x8FC7;Handler&#x5206;&#x53D1;&#x6D88;&#x606F;</div><div class=\"line\">            } finally {</div><div class=\"line\">                if (traceTag != 0) {</div><div class=\"line\">                    Trace.traceEnd(traceTag);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            if (logging != null) {</div><div class=\"line\">                logging.println(&quot;&lt;&lt;&lt;&lt;&lt; Finished to &quot; + msg.target + &quot; &quot; + msg.callback);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // Make sure that during the course of dispatching the</div><div class=\"line\">            // identity of the thread wasn&apos;t corrupted.</div><div class=\"line\">            final long newIdent = Binder.clearCallingIdentity();</div><div class=\"line\">            if (ident != newIdent) {</div><div class=\"line\">                Log.wtf(TAG, &quot;Thread identity changed from 0x&quot;</div><div class=\"line\">                        + Long.toHexString(ident) + &quot; to 0x&quot;</div><div class=\"line\">                        + Long.toHexString(newIdent) + &quot; while dispatching to &quot;</div><div class=\"line\">                        + msg.target.getClass().getName() + &quot; &quot;</div><div class=\"line\">                        + msg.callback + &quot; what=&quot; + msg.what);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            msg.recycleUnchecked();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;<code>loop</code>&#x4E2D;&#x9996;&#x5148;&#x83B7;&#x53D6;&#x4E86;&#x5F53;&#x524D;&#x6240;&#x5728;&#x7EBF;&#x7A0B;&#x7684;<code>Looper</code>&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x83B7;&#x53D6;&#x5230;&#x4E86;<code>Looper</code>&#x4E2D;&#x7684;<code>MessageQueue</code>&#xFF0C;&#x8BF4;&#x660E;<code>Looper</code>&#x5DF2;&#x7ECF;&#x4E0E;&#x5F53;&#x524D;&#x7684;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x4E86;&#x7ED1;&#x5B9A;&#x3002;&#x5728;&#x540E;&#x9762;&#x5F00;&#x542F;&#x4E86;&#x4E00;&#x4E2A;<code>for</code>&#x7684;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x53D1;&#x73B0;&#x5B83;&#x505A;&#x7684;&#x4E8B;&#x4EF6;&#x662F;&#x4E0D;&#x65AD;&#x7684;&#x4ECE;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E2D;&#x53D6;&#x51FA;&#x6D88;&#x606F;&#xFF0C;&#x6700;&#x540E;&#x90FD;&#x4EA4;&#x7ED9;<code>msg.target</code>&#x8C03;&#x7528;&#x5B83;&#x7684;<code>dispatchMessage</code>&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;<code>target</code>&#x53C8;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x8FDB;&#x5165;<code>Message</code></p>\n<h1 id=\"Message\"><a href=\"#Message\" class=\"headerlink\" title=\"Message\"></a>Message</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">/*package*/ int flags;</div><div class=\"line\"></div><div class=\"line\">    /*package*/ long when;</div><div class=\"line\">    </div><div class=\"line\">    /*package*/ Bundle data;</div><div class=\"line\">    </div><div class=\"line\">    /*package*/ Handler target;</div><div class=\"line\">    </div><div class=\"line\">    /*package*/ Runnable callback;</div><div class=\"line\">    </div><div class=\"line\">    // sometimes we store linked lists of these things</div><div class=\"line\">    /*package*/ Message next;</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x73B0;&#x5B83;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x719F;&#x6089;&#x7684;<code>Handler</code>&#xFF0C;&#x8BF4;&#x660E;&#x6700;&#x540E;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;<code>Handler</code>&#x4E2D;&#x7684;<code>dispatchMessage</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5BF9;&#x6D88;&#x606F;&#x7684;&#x5206;&#x53D1;&#x5904;&#x7406;&#x3002;&#x8FD9;&#x6837;&#x4E00;&#x6765;<code>Handler</code>&#x5C31;&#x901A;&#x8FC7;<code>Looper</code>&#x8054;&#x7CFB;&#x4E0A;&#x4E86;<code>Looper</code>&#x6240;&#x7ED1;&#x5B9A;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x5373;&#x4E3A;&#x4E3B;&#x7EBF;&#x7A0B;&#x3002;</p>\n<h1 id=\"Handler\"><a href=\"#Handler\" class=\"headerlink\" title=\"Handler\"></a>Handler</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">public Handler(Callback callback, boolean async) {</div><div class=\"line\">        if (FIND_POTENTIAL_LEAKS) {</div><div class=\"line\">            final Class&lt;? extends Handler&gt; klass = getClass();</div><div class=\"line\">            if ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp;</div><div class=\"line\">                    (klass.getModifiers() &amp; Modifier.STATIC) == 0) {</div><div class=\"line\">                Log.w(TAG, &quot;The following Handler class should be static or leaks might occur: &quot; +</div><div class=\"line\">                    klass.getCanonicalName());</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        mLooper = Looper.myLooper();</div><div class=\"line\">        if (mLooper == null) {</div><div class=\"line\">            throw new RuntimeException(</div><div class=\"line\">                &quot;Can&apos;t create handler inside thread that has not called Looper.prepare()&quot;);</div><div class=\"line\">        }</div><div class=\"line\">        mQueue = mLooper.mQueue;</div><div class=\"line\">        mCallback = callback;</div><div class=\"line\">        mAsynchronous = async;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<code>Handler</code>&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5B83;&#x83B7;&#x53D6;&#x4E86;&#x5B83;&#x6240;&#x5904;&#x7EBF;&#x7A0B;&#x7684;<code>Looper</code>&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x83B7;&#x53D6;&#x4E86;<code>Looper</code>&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#x3002;&#x5F53;&#x7136;&#x5982;&#x679C;&#x6240;&#x5904;&#x7EBF;&#x7A0B;&#x7684;<code>Looper</code>&#x4E3A;&#x7A7A;&#x7684;&#x8BDD;&#x5C31;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x8FD9;&#x5C31;&#x89E3;&#x91CA;&#x4E86;&#x4E3A;&#x4EC0;&#x4E48;&#x5728;&#x975E;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x521B;&#x5EFA;<code>Handler</code>&#x8981;&#x5206;&#x522B;&#x8C03;&#x7528;<code>Looper.prepare</code>&#x4E0E;<code>Looper.loop</code>&#x800C;&#x4E3B;&#x7EBF;&#x7A0B;&#x5219;&#x4E0D;&#x9700;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x9ED8;&#x8BA4;&#x5DF2;&#x7ECF;&#x8C03;&#x7528;&#x4E86;&#x3002;</p>\n<h2 id=\"dispatchMessage\"><a href=\"#dispatchMessage\" class=\"headerlink\" title=\"dispatchMessage\"></a>dispatchMessage</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void dispatchMessage(Message msg) {</div><div class=\"line\">        if (msg.callback != null) {</div><div class=\"line\">            handleCallback(msg);</div><div class=\"line\">        } else {</div><div class=\"line\">            if (mCallback != null) {</div><div class=\"line\">                if (mCallback.handleMessage(msg)) {</div><div class=\"line\">                    return;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">            handleMessage(msg);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">private static void handleCallback(Message message) {</div><div class=\"line\">        message.callback.run();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x56DE;&#x5230;&#x524D;&#x9762;&#xFF0C;&#x5BF9;&#x4E8E;<code>dispatchMessage</code>&#x7684;&#x5904;&#x7406;&#xFF0C;&#x9996;&#x5148;&#x5224;&#x65AD;<code>msg.callback</code>&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#xFF0C;&#x8FD9;&#x91CC;<code>callback</code>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;<code>Message</code>&#x5E94;&#x8BE5;&#x80FD;&#x77E5;&#x9053;&#x4ED6;&#x5C31;&#x662F;&#x4E00;&#x4E2A;<code>Runnable</code>&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x4E3A;&#x7A7A;&#x5219;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>Runnable</code>&#x7684;<code>run</code>&#x65B9;&#x6CD5;&#x3002;&#x5426;&#x5219;&#x8C03;&#x7528;<code>Handler</code>&#x7684;<code>handleMessage</code>&#x65B9;&#x6CD5;.&#x800C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x5DF2;&#x7ECF;&#x5F88;&#x719F;&#x6089;&#x4E86;&#xFF0C;&#x5BF9;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x90FD;&#x662F;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x3002;&#x56E0;&#x4E3A;&#x901A;&#x8FC7;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x4E86;<code>Handler</code>&#x5DF2;&#x7ECF;&#x8054;&#x7CFB;&#x4E0A;&#x4E86;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;<code>handleMessage</code>&#x4E2D;&#x7684;&#x5904;&#x7406;&#x81EA;&#x7136;&#x76F8;&#x5BF9;&#x4E8E;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#xFF0C;&#x81EA;&#x7136;&#x4E5F;&#x80FD;&#x66F4;&#x65B0;<code>UI</code>&#x4E86;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x80FD;&#x628A;<code>Looper</code>&#x6BD4;&#x4F5C;&#x662F;&#x4E00;&#x4E2A;&#x6865;&#x6881;&#xFF0C;&#x6765;&#x8FDE;&#x63A5;<code>Looper</code>&#x6240;&#x5728;&#x7684;&#x7EBF;&#x7A0B;&#x4E0E;<code>Handler</code>&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x540C;&#x65F6;&#x7BA1;&#x7406;&#x6D88;&#x606F;&#x961F;&#x5217;<code>MessageQueue</code>&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x3002;&#x90A3;&#x4E48;&#x524D;&#x9762;&#x7684;<code>Runnable</code>&#x53C8;&#x662F;&#x5982;&#x4F55;&#x4E0D;&#x4E3A;&#x7A7A;&#x7684;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>Handler</code>&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x76F4;&#x63A5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>Handler</code>&#x5E76;&#x4E14;&#x91CD;&#x5199;&#x5B83;&#x7684;<code>handleMessage</code>&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x53E6;&#x4E00;&#x79CD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>Handler.post(Runnable)</code>&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x81EA;&#x7136;&#x5C31;&#x5728;<code>run</code>&#x65B9;&#x6CD5;&#x4E2D;&#x5B9E;&#x73B0;&#x3002;</p>\n<p>&#x4E0A;&#x9762;&#x4ECB;&#x7ECD;&#x4E86;<code>Handler</code>&#x662F;&#x5982;&#x4F55;&#x8054;&#x7CFB;&#x4E0A;&#x4E86;&#x9700;&#x8981;&#x64CD;&#x4F5C;&#x7684;&#x7EBF;&#x7A0B;&#x4E0E;&#x5BF9;&#x6D88;&#x606F;&#x662F;&#x5982;&#x4F55;&#x53D6;&#x51FA;&#x4E0E;&#x5904;&#x7406;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x8C08;&#x8C08;&#x6D88;&#x606F;&#x662F;&#x5982;&#x4F55;&#x653E;&#x5165;&#x5230;<code>Looper</code>&#x4E2D;&#x7684;<code>MessageQueue</code>&#x4E2D;&#x7684;&#x3002;</p>\n<h2 id=\"sendMessageAtTime\"><a href=\"#sendMessageAtTime\" class=\"headerlink\" title=\"sendMessageAtTime\"></a>sendMessageAtTime</h2><p>&#x901A;&#x8FC7;<code>Handler</code>&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x65B9;&#x5F0F;&#x5F88;&#x591A;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;<code>sendMessage</code>&#x3001;<code>sendEmptyMessage</code>&#x4E0E;<code>sendMessageDelayed</code>&#x7B49;&#xFF0C;&#x5176;&#x5B9E;&#x5230;&#x6700;&#x540E;&#x4ED6;&#x4EEC;&#x8C03;&#x7528;&#x7684;&#x90FD;&#x662F;<code>sendMessageAtTime</code>&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x6765;&#x770B;&#x4E0B;<code>sendMessageAtTime</code>&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public boolean sendMessageAtTime(Message msg, long uptimeMillis) {</div><div class=\"line\">        MessageQueue queue = mQueue;</div><div class=\"line\">        if (queue == null) {</div><div class=\"line\">            RuntimeException e = new RuntimeException(</div><div class=\"line\">                    this + &quot; sendMessageAtTime() called with no mQueue&quot;);</div><div class=\"line\">            Log.w(&quot;Looper&quot;, e.getMessage(), e);</div><div class=\"line\">            return false;</div><div class=\"line\">        }</div><div class=\"line\">        return enqueueMessage(queue, msg, uptimeMillis);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x800C;<code>sendMessageAtTime</code>&#x5219;&#x5C31;&#x662F;&#x8C03;&#x7528;&#x4E86;<code>enqueueMessage</code>&#x64CD;&#x4F5C;&#xFF0C;&#x770B;&#x8FD9;&#x65B9;&#x6CD5;&#x540D;&#x5C31;&#x77E5;&#x9053;&#x662F;&#x5165;&#x961F;&#x5217;&#x64CD;&#x4F5C;&#x4E86;&#x3002;</p>\n<h2 id=\"enqueueMessage\"><a href=\"#enqueueMessage\" class=\"headerlink\" title=\"enqueueMessage\"></a>enqueueMessage</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">private boolean enqueueMessage(MessageQueue queue, Message msg, long uptimeMillis) {</div><div class=\"line\">        msg.target = this;</div><div class=\"line\">        if (mAsynchronous) {</div><div class=\"line\">            msg.setAsynchronous(true);</div><div class=\"line\">        }</div><div class=\"line\">        return queue.enqueueMessage(msg, uptimeMillis);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x679C;&#x4E0D;&#x5176;&#x7136;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x4E86;<code>MessageQueue</code>&#x4E2D;&#x7684;<code>queue.enqueueMessage(msg, uptimeMillis)</code>&#x5C06;&#x6D88;&#x606F;&#x52A0;&#x5165;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x540C;&#x65F6;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;<code>msg.target = this</code> &#x5C06;&#x5F53;&#x524D;&#x7684;<code>Handler</code>&#x8D4B;&#x7ED9;&#x4E86;<code>msg.target</code>,&#x8FD9;&#x5C31;&#x662F;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;<code>Looper.loop</code>&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x7684;<code>Handler</code>&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x628A;&#x6D88;&#x606F;&#x653E;&#x5230;&#x4E86;<code>MessageQueue</code>&#x4E2D;&#xFF0C;&#x8FDB;&#x800C;&#x901A;&#x8FC7;&#x524D;&#x9762;&#x6240;&#x8BB2;&#x7684;<code>loop</code>&#x6765;&#x53D6;&#x51FA;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x6784;&#x6210;&#x4E86;&#x6574;&#x4E2A;&#x5BF9;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x7684;&#x7CFB;&#x7EDF;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x4F7F;&#x7528;<code>Handler</code>&#x5185;&#x90E8;&#x6240;&#x53D1;&#x751F;&#x7684;&#x539F;&#x7406;&#x3002;&#x597D;&#x4E86;<code>Handler</code>&#x3001;<code>Looper</code>&#x4E0E;<code>MessageQueue</code>&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x8054;&#x7CFB;&#x57FA;&#x672C;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#x4E86;&#x3002;&#x6211;&#x4E5F;&#x7B80;&#x5355;&#x753B;&#x4E86;&#x5F20;&#x56FE;&#x5E0C;&#x671B;&#x6709;&#x6240;&#x5E2E;&#x52A9;</p>\n<p><img src=\"/2016/10/19/Android-Handler&#x3001;Looper&#x4E0E;MessageQueue&#x6E90;&#x7801;&#x5206;&#x6790;/Handler&#x3001;Looper&#x4E0E;MessageQueue.png\" alt=\"&#x8349;&#x56FE;\"></p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x6765;&#x603B;&#x7ED3;&#x4E0B;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x6D41;&#x7A0B;&#x3002;&#x9996;&#x5148;&#x521B;&#x5EFA;<code>Handler</code>&#x800C;&#x5728;<code>Handler</code>&#x6240;&#x5904;&#x7684;&#x7EBF;&#x7A0B;&#x4E2D;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x4E00;&#x4E2A;<code>Looper</code>&#xFF0C;&#x5982;&#x679C;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x9ED8;&#x8BA4;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;&#x8C03;&#x7528;<code>Looper.prepare</code>&#x6765;&#x521B;&#x5EFA;<code>Looper</code>&#x540C;&#x65F6;&#x8C03;&#x7528;<code>Looper.loop</code>&#x5F00;&#x542F;&#x5BF9;&#x6D88;&#x606F;&#x7684;&#x5904;&#x7406;&#x3002;&#x6BCF;&#x4E2A;<code>Looper</code>&#x4E2D;&#x90FD;&#x6709;&#x4E00;&#x4E2A;<code>MessageQueue</code>&#x5B83;&#x662F;&#x7528;&#x6765;&#x5B58;&#x50A8;<code>Message</code>&#x7684;&#xFF0C;<code>Handler</code>&#x901A;&#x8FC7;<code>post</code>&#x6216;&#x8005;<code>send..</code>&#x7B49;&#x4E00;&#x7CFB;&#x5217;&#x64CD;&#x4F5C;&#x901A;&#x8FC7;<code>Looper</code>&#x5C06;&#x6D88;&#x606F;&#x653E;&#x5165;&#x5230;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x800C;<code>Looper</code>&#x901A;&#x8FC7;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x65E0;&#x9650;&#x7684;&#x5FAA;&#x73AF;&#x6765;&#x4E00;&#x76F4;&#x76D1;&#x542C;&#x7740;&#x6D88;&#x606F;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4E0D;&#x65AD;&#x4ECE;<code>MessageQueue</code>&#x4E2D;&#x53D6;&#x51FA;&#x6D88;&#x606F;&#xFF0C;&#x5E76;&#x4EA4;&#x7ED9;&#x4E0E;&#x5F53;&#x524D;<code>Looper</code>&#x6240;&#x7ED1;&#x5B9A;&#x7684;<code>handler</code>&#x7684;<code>dispatchMessage</code>&#x8FDB;&#x884C;&#x5206;&#x53D1;&#xFF0C;&#x6700;&#x540E;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x8C03;&#x7528;<code>Runnable</code>&#x7684;<code>run</code>&#x6216;&#x8005;<code>Handler</code>&#x7684;<code>HandlerMessage</code>&#x65B9;&#x6CD5;&#x5BF9;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x6700;&#x540E;&#x7684;&#x5904;&#x7406;&#x3002;</p>\n"},{"title":"Android Volley源码分析(二)","url":"https://idisfkj.github.io/2016/10/17/Android-Volley源码分析-二/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4E0A;&#x4E00;&#x6B21;&#x5206;&#x6790;&#x4E86;&#x5173;&#x4E8E;<code>Volley</code>&#x6700;&#x6838;&#x5FC3;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x5BF9;<code>Volley</code>&#x5982;&#x4F55;&#x5904;&#x7406;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x5168;&#x9762;&#x7684;&#x5256;&#x6790;&#x3002;&#x8FD8;&#x6CA1;&#x6709;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x5148;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;<a href=\"https://idisfkj.github.io/2016/10/14/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%80/\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</a>,&#x8FD9;&#x6B21;&#x6211;&#x518D;&#x6765;&#x5BF9;&#x5B83;&#x7684;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x539F;&#x7406;&#x8FDB;&#x884C;&#x81EA;&#x6211;&#x8BB2;&#x89E3;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x5E2E;&#x52A9;&#x5230;&#x4E00;&#x90E8;&#x5206;&#x4EBA;&#xFF0C;&#x4E5F;&#x80FD;&#x5DE9;&#x56FA;&#x81EA;&#x5DF1;&#x6240;&#x5B66;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6307;&#x51FA;&#xFF01;</p>\n<h1 id=\"ImageLoader\"><a href=\"#ImageLoader\" class=\"headerlink\" title=\"ImageLoader\"></a>ImageLoader</h1><p>&#x5BF9;&#x4E8E;&#x56FE;&#x7247;&#x8BF7;&#x6C42;&#xFF0C;&#x662F;&#x5C11;&#x4E0D;&#x4E86;&#x5BF9;<code>ImageLoader</code>&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x88C5;&#x8F7D;&#x5668;&#xFF0C;&#x5BF9;&#x56FE;&#x7247;&#x8BF7;&#x6C42;&#x7684;&#x7BA1;&#x7406;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x4E0B;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static final ImageLoader imageLoader = new ImageLoader(VolleyUtil.volleyQueue, new ImageCache(CACHE_SIZE));</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x4E3A;<code>RequestQueue</code>&#x4E0E;<code>ImageCache</code>&#xFF0C;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x6211;&#x4EEC;&#x518D;&#x719F;&#x6089;&#x4E0D;&#x8FC7;&#x4E86;&#xFF0C;&#x81F3;&#x4E8E;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E3A;&#x4E86;&#x6784;&#x5EFA;&#x56FE;&#x7247;&#x7F13;&#x5B58;&#x7684;&#xFF0C;&#x5982;&#x4E0D;&#x6784;&#x5EFA;&#x5219;&#x7F13;&#x5B58;&#x81EA;&#x7136;&#x5C31;&#x5931;&#x6548;&#x4E86;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x8FDB;&#x5165;<code>ImageLoader</code>&#x67E5;&#x770B;&#x5B83;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x770B;&#x5B83;&#x5230;&#x5E95;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#xFF1F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public ImageLoader(RequestQueue queue, ImageCache imageCache) {</div><div class=\"line\">        mRequestQueue = queue;</div><div class=\"line\">        mCache = imageCache;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FDB;&#x53BB;&#x53D1;&#x73B0;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;<code>get</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5BF9;&#x56FE;&#x7247;&#x7684;&#x5904;&#x7406;&#x5C31;&#x662F;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x8FC7;<code>Volley</code>&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7684;&#x90FD;&#x77E5;&#x9053;&#x6211;&#x4EEC;&#x90FD;&#x8981;&#x8C03;&#x7528;&#x5B83;&#x7684;<code>get</code>&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5230;&#x5E95;&#x53C8;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>\n<h2 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">public ImageContainer get(String requestUrl, ImageListener imageListener,</div><div class=\"line\">            int maxWidth, int maxHeight, ScaleType scaleType) {</div><div class=\"line\"> </div><div class=\"line\">        // only fulfill requests that were initiated from the main thread.</div><div class=\"line\">        throwIfNotOnMainThread();</div><div class=\"line\"> </div><div class=\"line\">        final String cacheKey = getCacheKey(requestUrl, maxWidth, maxHeight, scaleType);</div><div class=\"line\"> </div><div class=\"line\">        // Try to look up the request in the cache of remote images.</div><div class=\"line\">        Bitmap cachedBitmap = mCache.getBitmap(cacheKey);</div><div class=\"line\">        if (cachedBitmap != null) {</div><div class=\"line\">            // Return the cached bitmap.</div><div class=\"line\">            ImageContainer container = new ImageContainer(cachedBitmap, requestUrl, null, null);</div><div class=\"line\">            imageListener.onResponse(container, true);</div><div class=\"line\">            return container;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        // The bitmap did not exist in the cache, fetch it!</div><div class=\"line\">        ImageContainer imageContainer =</div><div class=\"line\">                new ImageContainer(null, requestUrl, cacheKey, imageListener);</div><div class=\"line\"> </div><div class=\"line\">        // Update the caller to let them know that they should use the default bitmap.</div><div class=\"line\">        imageListener.onResponse(imageContainer, true);</div><div class=\"line\"> </div><div class=\"line\">        // Check to see if a request is already in-flight.</div><div class=\"line\">        BatchedImageRequest request = mInFlightRequests.get(cacheKey);</div><div class=\"line\">        if (request != null) {</div><div class=\"line\">            // If it is, add this request to the list of listeners.</div><div class=\"line\">            request.addContainer(imageContainer);</div><div class=\"line\">            return imageContainer;</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        // The request is not already in flight. Send the new request to the network and</div><div class=\"line\">        // track it.</div><div class=\"line\">        Request&lt;Bitmap&gt; newRequest = makeImageRequest(requestUrl, maxWidth, maxHeight, scaleType,</div><div class=\"line\">                cacheKey);</div><div class=\"line\"> </div><div class=\"line\">        mRequestQueue.add(newRequest);</div><div class=\"line\">        mInFlightRequests.put(cacheKey,</div><div class=\"line\">                new BatchedImageRequest(newRequest, imageContainer));</div><div class=\"line\">        return imageContainer;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x5B83;&#x4F20;&#x9012;&#x4E86;&#x51E0;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x62EC;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x3001;&#x76D1;&#x542C;&#x5668;<code>ImageListener</code>&#x3001;&#x8FD4;&#x56DE;&#x7684;&#x56FE;&#x7247;&#x5BBD;&#x9AD8;&#x4E0E;&#x7F29;&#x653E;&#x7C7B;&#x578B;&#xFF0C;<code>ImageListener</code>&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x662F;&#x4E3A;&#x4E86;&#x5BF9;&#x54CD;&#x5E94;&#x4E0D;&#x540C;&#x5904;&#x7406;&#x7684;&#x56DE;&#x8C03;,&#x5305;&#x62EC;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x3002;&#x4E0B;&#x9762;&#x770B;&#x4E3B;&#x8981;&#x4EE3;&#x7801;&#xFF0C;&#x9996;&#x5148;&#x5224;&#x65AD;&#x8BE5;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x662F;&#x5426;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E0D;&#x662F;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x5BF9;&#x4E8E;&#x5BF9;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x5224;&#x65AD;&#x5E94;&#x8BE5;&#x5F88;&#x5BB9;&#x6613;&#x60F3;&#x5230;&#xFF0C;&#x56E0;&#x4E3A;&#x8981;&#x5BF9;&#x8BF7;&#x6C42;&#x7684;&#x54CD;&#x5E94;&#x505A;&#x5904;&#x7406;&#x66F4;&#x65B0;&#x56FE;&#x7247;&#x7B49;&#xFF0C;&#x5BF9;<code>UI</code>&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x8981;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x7136;&#x8981;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x3002;&#x4E0B;&#x4E00;&#x6B65;&#x90FD;&#x662F;&#x4E00;&#x8D2F;&#x7684;&#x4F5C;&#x98CE;&#xFF0C;&#xFF08;<code>10</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#x5148;&#x5224;&#x65AD;&#x7F13;&#x5B58;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x8BE5;&#x8BF7;&#x6C42;&#x7684;<code>Bitmap</code>&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728;&#x5219;&#x6784;&#x9020;&#x4E00;&#x4E2A;<code>ImageContainer</code>&#xFF0C;&#x5C06;&#x5FC5;&#x8981;&#x4FE1;&#x606F;&#x4F20;&#x5165;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x56FE;&#x7247;&#x7684;&#x4FE1;&#x606F;,&#x5305;&#x62EC;</p>\n<ul>\n<li><code>Bitmap</code>&#x8BF7;&#x6C42;&#x7684;&#x56FE;&#x7247;</li>\n<li><code>ImageListener</code> &#x76D1;&#x542C;&#x5668;,&#x5305;&#x62EC;&#x540E;&#x7EED;&#x56DE;&#x8C03;&#x7684;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x65B9;&#x6CD5;</li>\n<li><code>mCacheKey</code> &#x7F13;&#x5B58;&#x7684;<code>key</code></li>\n<li><code>mRequestUrl</code> &#x8BF7;&#x6C42;&#x7684;<code>url</code></li>\n</ul>\n<p>&#x7136;&#x540E;&#x8C03;&#x7528;<code>imageListener</code>&#x7684;<code>onResponse</code>&#x65B9;&#x6CD5;&#x3002;&#x4E0D;&#x5B58;&#x5728;&#x4E0E;&#x4F1A;&#x4E3A;&#x5176;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>ImageContainer</code>&#x4E3A;&#x4E86;&#x4FDD;&#x5B58;&#x540E;&#x7EED;&#x7684;<code>Bitmpa</code>&#xFF0C;&#x540C;&#x65F6;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x4E5F;&#x4F1A;&#x5148;&#x8C03;&#x7528;<code>onResponse</code>&#x8FD9;&#x4E00;&#x6B65;&#x5E76;&#x4E0D;&#x662F;&#x8BBE;&#x7F6E;&#x52A0;&#x8F7D;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x800C;&#x662F;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x6B63;&#x5728;&#x52A0;&#x8F7D;&#x7684;&#x56FE;&#x7247;&#xFF08;&#x5982;&#x679C;&#x4F60;&#x8BBE;&#x7F6E;&#x4E86;&#x7684;&#x8BDD;&#xFF09;&#x3002;&#xFF08;<code>25</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#x5982;&#x679C;&#x8BE5;&#x8BF7;&#x6C42;&#x6B63;&#x5728;&#x88AB;&#x6267;&#x884C;,&#x5C06;&#x5F53;&#x524D;&#x7684;<code>ImageContainer</code>&#x52A0;&#x5165;&#x5230;&#x4E00;&#x4E2A;<code>LinkedList</code>&#x4E2D;&#x4E3A;le&#x540E;&#x7EED;&#x54CD;&#x5E94;&#x7684;&#x9012;&#x9001;&#xFF1B;&#x4E0B;&#x9762;&#x624D;&#x662F;&#x771F;&#x5728;&#x4ECE;&#x7F51;&#x7EDC;&#x4E0A;&#x83B7;&#x53D6;&#xFF08;<code>34</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x4E2A;<code>Request</code>&#x5E76;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x5230;&#x4E86;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x8FD9;&#x4E2A;<code>makeImageRequest</code>&#x5B9E;&#x73B0;&#x4E86;&#x4EC0;&#x4E48;</p>\n<h2 id=\"makeImageRequest\"><a href=\"#makeImageRequest\" class=\"headerlink\" title=\"makeImageRequest\"></a>makeImageRequest</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected Request&lt;Bitmap&gt; makeImageRequest(String requestUrl, int maxWidth, int maxHeight,</div><div class=\"line\">            ScaleType scaleType, final String cacheKey) {</div><div class=\"line\">        return new ImageRequest(requestUrl, new Listener&lt;Bitmap&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(Bitmap response) {</div><div class=\"line\">                onGetImageSuccess(cacheKey, response);</div><div class=\"line\">            }</div><div class=\"line\">        }, maxWidth, maxHeight, scaleType, Config.RGB_565, new ErrorListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError error) {</div><div class=\"line\">                onGetImageError(cacheKey, error);</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x73B0;&#x5728;&#x660E;&#x767D;&#x4E86;&#x5427;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E86;<code>ImageRequest</code>&#xFF0C;&#x4E0E;<code>StringRequest</code>&#x7C7B;&#x4F3C;&#xFF0C;&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/10/14/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%80/\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</a>&#x5DF2;&#x7ECF;&#x8BB2;&#x4E86;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x8FD8;&#x662F;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x5728;&#x6700;&#x540E;&#x90FD;&#x4F1A;&#x5C06;&#x7ED3;&#x679C;&#x4EA4;&#x7531;<code>DeliveryResponse</code>&#x8FDB;&#x884C;&#x9012;&#x9001;,&#x6839;&#x636E;&#x54CD;&#x5E94;&#x60C5;&#x51B5;&#x5206;&#x522B;&#x8C03;&#x7528;&#x76D1;&#x542C;&#x5668;&#x7684;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x65B9;&#x6CD5;&#x3002;&#x90A3;&#x4E48;&#x5176;&#x4E2D;&#x7684;<code>onGetImageSuccess</code>&#x4E0E;<code>onGetImageError</code>&#x65B9;&#x6CD5;&#x53C8;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>\n<h2 id=\"onGetImageSuccess-amp-amp-onGetImageError\"><a href=\"#onGetImageSuccess-amp-amp-onGetImageError\" class=\"headerlink\" title=\"onGetImageSuccess &amp;&amp; onGetImageError\"></a>onGetImageSuccess &amp;&amp; onGetImageError</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void onGetImageSuccess(String cacheKey, Bitmap response) {</div><div class=\"line\">        // cache the image that was fetched.</div><div class=\"line\">        mCache.putBitmap(cacheKey, response);</div><div class=\"line\"> </div><div class=\"line\">        // remove the request from the list of in-flight requests.</div><div class=\"line\">        BatchedImageRequest request = mInFlightRequests.remove(cacheKey);</div><div class=\"line\"> </div><div class=\"line\">        if (request != null) {</div><div class=\"line\">            // Update the response bitmap.</div><div class=\"line\">            request.mResponseBitmap = response;</div><div class=\"line\"></div><div class=\"line\">            // Send the batched response</div><div class=\"line\">            batchResponse(cacheKey, request);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x505A;&#x7684;&#x4E8B;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x5C06;<code>Bitmap</code>&#x52A0;&#x5165;&#x7F13;&#x5B58;&#x4E2D;&#x540C;&#x65F6;&#x66F4;&#x65B0;&#x8BF7;&#x6C42;&#x4E2D;&#x7684;<code>Bitmap</code>&#x4EE5;&#x4FBF;&#x540E;&#x7EED;<code>batchResponse</code>&#x7684;&#x6279;&#x5904;&#x7406;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void onGetImageError(String cacheKey, VolleyError error) {</div><div class=\"line\">        // Notify the requesters that something failed via a null result.</div><div class=\"line\">        // Remove this request from the list of in-flight requests.</div><div class=\"line\">        BatchedImageRequest request = mInFlightRequests.remove(cacheKey);</div><div class=\"line\"> </div><div class=\"line\">        if (request != null) {</div><div class=\"line\">            // Set the error for this request</div><div class=\"line\">            request.setError(error);</div><div class=\"line\"> </div><div class=\"line\">            // Send the batched response</div><div class=\"line\">            batchResponse(cacheKey, request);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p><code>onGetImageError</code>&#x4E5F;&#x7C7B;&#x4F3C;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x662F;&#x9519;&#x8BEF;&#x7684;&#x54CD;&#x5E94;&#x65E0;&#x9700;&#x52A0;&#x5165;&#x5230;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x8981;&#x8FDB;&#x884C;<code>batchResponse</code>&#xFF0C;&#x65E2;&#x7136;&#x5982;&#x6B64;&#x90A3;&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x8FDB;&#x5165;<code>batchResponse</code>&#x6E90;&#x7801;&#x3002;</p>\n<h2 id=\"batchResponse\"><a href=\"#batchResponse\" class=\"headerlink\" title=\"batchResponse\"></a>batchResponse</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void batchResponse(String cacheKey, BatchedImageRequest request) {</div><div class=\"line\">        mBatchedResponses.put(cacheKey, request);</div><div class=\"line\">        // If we don&apos;t already have a batch delivery runnable in flight, make a new one.</div><div class=\"line\">        // Note that this will be used to deliver responses to all callers in mBatchedResponses.</div><div class=\"line\">        if (mRunnable == null) {</div><div class=\"line\">            mRunnable = new Runnable() {</div><div class=\"line\">                @Override</div><div class=\"line\">                public void run() {</div><div class=\"line\">                    for (BatchedImageRequest bir : mBatchedResponses.values()) {</div><div class=\"line\">                        for (ImageContainer container : bir.mContainers) {</div><div class=\"line\">                            // If one of the callers in the batched request canceled the request</div><div class=\"line\">                            // after the response was received but before it was delivered,</div><div class=\"line\">                            // skip them.</div><div class=\"line\">                            if (container.mListener == null) {</div><div class=\"line\">                                continue;</div><div class=\"line\">                            }</div><div class=\"line\">                            if (bir.getError() == null) {</div><div class=\"line\">                                container.mBitmap = bir.mResponseBitmap;</div><div class=\"line\">                                 container.mListener.onResponse(container, false);</div><div class=\"line\">                            } else {</div><div class=\"line\">                                 container.mListener.onErrorResponse(bir.getError());</div><div class=\"line\">                            }</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                    mBatchedResponses.clear();</div><div class=\"line\">                    mRunnable = null;</div><div class=\"line\">                }</div><div class=\"line\"> </div><div class=\"line\">            };</div><div class=\"line\">            // Post the runnable.</div><div class=\"line\">            mHandler.postDelayed(mRunnable, mBatchResponseDelayMs);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#x53D1;&#x73B0;&#x5176;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;<code>run</code>&#x65B9;&#x6CD5;&#xFF0C;&#x91CC;&#x9762;&#x6839;&#x636E;&#x56FE;&#x7247;&#x5BB9;&#x5668;<code>ImageContainer</code>&#x4E2D;&#x7684;&#x4FE1;&#x606F;&#x5206;&#x522B;&#x8C03;&#x7528;&#x76D1;&#x542C;&#x5668;&#x4E2D;&#x7684;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x524D;&#x9762;<code>get</code>&#x4E2D;&#x6240;&#x4F20;&#x9012;&#x7684;<code>ImageListener</code>&#x63A5;&#x53E3;&#x3002;&#x5176;&#x4E2D;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x4EE5;&#x7531;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x6700;&#x540E;&#x901A;&#x8FC7;<code>mHandler</code>&#xFF08;&#x4F5C;&#x7528;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF09;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;<br>&#x5BF9;&#x4E8E;<code>ImageListener</code>&#x63A5;&#x53E3;&#xFF0C;&#x4E5F;&#x6709;&#x9ED8;&#x8BA4;&#x7684;&#x5B9E;&#x73B0;<code>getImageListener</code></p>\n<h2 id=\"&#x9ED8;&#x8BA4;&#x7684;getImageListener&#x5B9E;&#x73B0;\"><a href=\"#&#x9ED8;&#x8BA4;&#x7684;getImageListener&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x9ED8;&#x8BA4;&#x7684;getImageListener&#x5B9E;&#x73B0;\"></a>&#x9ED8;&#x8BA4;&#x7684;getImageListener&#x5B9E;&#x73B0;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static ImageListener getImageListener(final ImageView view,</div><div class=\"line\">            final int defaultImageResId, final int errorImageResId) {</div><div class=\"line\">        return new ImageListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError error) {</div><div class=\"line\">                if (errorImageResId != 0) {</div><div class=\"line\">                    view.setImageResource(errorImageResId);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(ImageContainer response, boolean isImmediate) {</div><div class=\"line\">                if (response.getBitmap() != null) {</div><div class=\"line\">                    view.setImageBitmap(response.getBitmap());</div><div class=\"line\">                } else if (defaultImageResId != 0) {</div><div class=\"line\">                    view.setImageResource(defaultImageResId);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x80FD;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x6700;&#x559C;&#x6B22;&#x770B;&#x5230;&#x7684;&#x4EE3;&#x7801;&#xFF1A;&#x5BF9;<code>ImageView</code>&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x586B;&#x5145;&#x3002;&#x4F46;&#x6211;&#x4EEC;&#x53EA;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x80FD;&#x4F1A;&#x5B58;&#x5728;&#x8BB8;&#x591A;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982;&#x591A;&#x6761;&#x76EE;&#x7684;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x4F1A;&#x590D;&#x7528;<code>item</code>&#x5982;&#x679C;&#x4E0D;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x7279;&#x6B8A;&#x5904;&#x7406;&#x4F1A;&#x5F88;&#x5BB9;&#x6613;&#x4EA7;&#x751F;<code>&#x591A;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x65F6;&#x7684;&#x95EA;&#x70C1;&#x4E0E;&#x5F02;&#x4F4D;&#x95EE;&#x9898;</code>&#x3002;&#x90A3;&#x8981;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x4E0D;&#x8BA9;&#x4ED6;&#x76F4;&#x63A5;&#x5C31;&#x5904;&#x7406;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x800C;&#x662F;&#x8981;&#x8FDB;&#x884C;&#x7279;&#x6B8A;&#x7684;&#x5224;&#x65AD;&#xFF0C;&#x65E2;&#x7136;&#x5982;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x6709;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x81EA;&#x5DF1;&#x6765;&#x5B9E;&#x73B0;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;</p>\n<h2 id=\"&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;ImageListener&#x63A5;&#x53E3;\"><a href=\"#&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;ImageListener&#x63A5;&#x53E3;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;ImageListener&#x63A5;&#x53E3;\"></a>&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;ImageListener&#x63A5;&#x53E3;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static ImageLoader.ImageListener getImageListener(final ImageView view, final String url, final int defaultImageResId</div><div class=\"line\">            , final int errorImageResId) {</div><div class=\"line\">        return new ImageLoader.ImageListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(ImageLoader.ImageContainer response, boolean isImmediate) {</div><div class=\"line\">                if (response.getBitmap() != null) {</div><div class=\"line\">                    //&#x9632;&#x6B62;&#x672A;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x52A0;&#x8F7D;&#x524D;&#x7684;&#x663E;&#x793A;&#x56FE;&#x7247;&#x800C;&#x5BFC;&#x81F4;&#x7684;&#x56FE;&#x7247;&#x9519;&#x4E71;&#x95EE;&#x9898;</div><div class=\"line\">                    String preUrl = (String) view.getTag();</div><div class=\"line\">                    if (preUrl != null &amp;&amp; preUrl.trim().equals(url)) {</div><div class=\"line\">                        if (!isImmediate &amp;&amp; defaultImageResId != 0) {</div><div class=\"line\">                            //&#x4F7F;&#x7528;&#x7F51;&#x7EDC;&#x4E0B;&#x8F7D;&#x7684;&#x56FE;&#x7247;</div><div class=\"line\">                            TransitionDrawable transitionDrawable = new TransitionDrawable(</div><div class=\"line\">                                    new Drawable[]{</div><div class=\"line\">                                            App.mContext.getResources().getDrawable(defaultImageResId),</div><div class=\"line\">                                            new BitmapDrawable(App.mContext.getResources(),</div><div class=\"line\">                                                    response.getBitmap())</div><div class=\"line\">                                    }</div><div class=\"line\">                            );</div><div class=\"line\">                            transitionDrawable.setCrossFadeEnabled(true);</div><div class=\"line\">                            view.setImageDrawable(transitionDrawable);</div><div class=\"line\">                            transitionDrawable.startTransition(100);</div><div class=\"line\">                        } else {</div><div class=\"line\">                            //&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x56FE;&#x7247;</div><div class=\"line\">                            view.setImageBitmap(response.getBitmap());</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                } else {</div><div class=\"line\">                    if (defaultImageResId != 0)</div><div class=\"line\">                        view.setImageResource(defaultImageResId);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError error) {</div><div class=\"line\">                if (errorImageResId != 0)</div><div class=\"line\">                    view.setImageResource(errorImageResId);</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x4EE3;&#x7801;&#x4E2D;&#x7684;&#x6CE8;&#x91CA;&#x6240;&#x793A;&#xFF0C;&#x5BF9;<code>View</code>&#x5176;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;<code>Tag</code>&#x53EF;&#x4EE5;&#x662F;<code>url</code>&#x3002;&#x53EA;&#x6709;&#x7B26;&#x5408;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#x7684;<code>url</code>&#x94FE;&#x63A5;&#x7684;<code>Bitmap</code>&#x624D;&#x80FD;&#x586B;&#x5145;&#x5F53;&#x524D;&#x7684;<code>View</code>&#xFF0C;&#x5176;&#x5B9E;&#x8981;&#x5B8C;&#x7F8E;&#x89E3;&#x51B3;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x524D;&#x63D0;&#x7684;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E86;&#x9ED8;&#x8BA4;&#x7684;&#x663E;&#x793A;&#x56FE;&#x7247;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;&#x7684;&#x663E;&#x793A;&#xFF0C;&#x867D;&#x7136;&#x5F02;&#x4F4D;&#x7684;&#x60C5;&#x51B5;&#x89E3;&#x51B3;&#x4E86;&#xFF0C;&#x4F46;&#x53EF;&#x80FD;&#x8FD8;&#x662F;&#x4F1A;&#x5BFC;&#x81F4;&#x56FE;&#x7247;&#x7684;&#x95EA;&#x70C1;&#x3002;&#x53EA;&#x4E0D;&#x8FC7;&#x73B0;&#x5728;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x90FD;&#x4F1A;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7684;&#x56FE;&#x7247;&#x663E;&#x793A;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x672C;&#x5C31;&#x4E0D;&#x5B58;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>\n<h2 id=\"ImageCache\"><a href=\"#ImageCache\" class=\"headerlink\" title=\"ImageCache\"></a>ImageCache</h2><p>&#x5173;&#x4E8E;&#x7F13;&#x5B58;&#x5728;<code>ImageLoader</code>&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;<code>ImageLoader.ImageCache</code>&#x63A5;&#x53E3;&#xFF0C;&#x5C31;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;<code>getBitmap</code>&#x4E0E;<code>putBitmap</code>,&#x5982;&#x679C;&#x7EC6;&#x5FC3;&#x7684;&#x8BDD;&#x524D;&#x9762;&#x5BF9;&#x7F13;&#x5B58;&#x7684;&#x5904;&#x7406;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6;&#x4E0E;&#x4FDD;&#x5B58;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x8981;&#x5B9E;&#x73B0;&#x7F13;&#x5B58;&#x7684;&#x8BDD;&#x5C31;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x8BE5;&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x4E0D;&#x8FC7;&#x5BF9;&#x7F13;&#x5B58;&#x7684;&#x7BA1;&#x7406;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;<code>LruCache</code>&#x7B97;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ImageCache extends LruCache&lt;String, Bitmap&gt; implements ImageLoader.ImageCache {</div><div class=\"line\">    /**</div><div class=\"line\">     * @param maxSize for caches that do not override {@link #sizeOf}, this is</div><div class=\"line\">     *                the maximum number of entries in the cache. For all other caches,</div><div class=\"line\">     *                this is the maximum sum of the sizes of the entries in this cache.</div><div class=\"line\">     */</div><div class=\"line\"> </div><div class=\"line\">    public ImageCache(int maxSize) {</div><div class=\"line\">        super(maxSize);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    protected int sizeOf(String key, Bitmap value) {</div><div class=\"line\">        return value.getRowBytes() * value.getHeight();</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public Bitmap getBitmap(String url) {</div><div class=\"line\">        return get(url);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void putBitmap(String url, Bitmap bitmap) {</div><div class=\"line\">        put(url, bitmap);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x4E8E;&#x7F13;&#x5B58;<code>maxSize</code>&#x7684;&#x5927;&#x5C0F;&#x53EF;&#x4EE5;&#x53D6;&#x5185;&#x5B58;&#x9600;&#x503C;&#x7684;1/8</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static final int CACHE_SIZE = 1024 * 1024 * ((ActivityManager) App.mContext.</div><div class=\"line\">            getSystemService(Context.ACTIVITY_SERVICE)).getMemoryClass() / 8;</div></pre></td></tr></table></figure>\n<h1 id=\"NetWorkImageView\"><a href=\"#NetWorkImageView\" class=\"headerlink\" title=\"NetWorkImageView\"></a>NetWorkImageView</h1><p><code>Volley</code>&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x7684;&#x7F51;&#x7EDC;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7684;&#x63A7;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5C06;<code>xml</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>ImageView</code>&#x66FF;&#x6362;&#x6210;<code>NetWorkImageView</code>&#xFF0C;&#x8BE5;&#x63A7;&#x4EF6;&#x4E5F;&#x662F;&#x7EE7;&#x627F;&#x4E86;<code>ImageView</code>&#x53EA;&#x4E0D;&#x8FC7;&#x5B83;&#x5BF9;&#x4E13;&#x95E8;&#x5BF9;&#x4F7F;&#x7528;<code>Volley</code>&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x901A;&#x8FC7;<code>setDefaultImageResId</code>&#x4E0E;<code>setErrorImageResId</code>&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x4E0E;&#x9519;&#x8BEF;&#x663E;&#x793A;&#x56FE;&#x7247;&#xFF0C;&#x8C03;&#x7528;&#x5219;&#x662F;&#x76F4;&#x63A5;<code>setImageUrl</code>&#xFF0C;&#x8FD8;&#x662F;&#x6765;&#x770B;&#x4E0B;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void setImageUrl(String url, ImageLoader imageLoader) {</div><div class=\"line\">        mUrl = url;</div><div class=\"line\">        mImageLoader = imageLoader;</div><div class=\"line\">        // The URL has potentially changed. See if we need to load it.</div><div class=\"line\">        loadImageIfNecessary(false);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x53C2;&#x6570;<code>url</code>&#x4E0E;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;<code>ImageLoader</code>,&#x8BF4;&#x660E;&#x4E0D;&#x7BA1;&#x4F7F;&#x7528;&#x54EA;&#x79CD;&#x65B9;&#x5F0F;<code>ImageLoader</code>&#x90FD;&#x662F;&#x5FC5;&#x987B;&#x7684;&#x3002;&#x518D;&#x770B;&#x4E0B;<code>loadImageIfNecessary</code>&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#xFF1F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div></pre></td><td class=\"code\"><pre><div class=\"line\">void loadImageIfNecessary(final boolean isInLayoutPass) {</div><div class=\"line\">        int width = getWidth();</div><div class=\"line\">        int height = getHeight();</div><div class=\"line\">        ScaleType scaleType = getScaleType();</div><div class=\"line\">   </div><div class=\"line\">        boolean wrapWidth = false, wrapHeight = false;</div><div class=\"line\">        if (getLayoutParams() != null) {</div><div class=\"line\">            wrapWidth = getLayoutParams().width == LayoutParams.WRAP_CONTENT;</div><div class=\"line\">            wrapHeight = getLayoutParams().height == LayoutParams.WRAP_CONTENT;</div><div class=\"line\">        }</div><div class=\"line\">   </div><div class=\"line\">        // if the view&apos;s bounds aren&apos;t known yet, and this is not a wrap-content/wrap-content</div><div class=\"line\">        // view, hold off on loading the image.</div><div class=\"line\">        boolean isFullyWrapContent = wrapWidth &amp;&amp; wrapHeight;</div><div class=\"line\">        if (width == 0 &amp;&amp; height == 0 &amp;&amp; !isFullyWrapContent) {</div><div class=\"line\">            return;</div><div class=\"line\">        }</div><div class=\"line\">   </div><div class=\"line\">        // if the URL to be loaded in this view is empty, cancel any old requests and clear the</div><div class=\"line\">        // currently loaded image.</div><div class=\"line\">        if (TextUtils.isEmpty(mUrl)) {</div><div class=\"line\">            if (mImageContainer != null) {</div><div class=\"line\">                mImageContainer.cancelRequest();</div><div class=\"line\">                mImageContainer = null;</div><div class=\"line\">            }</div><div class=\"line\">            setDefaultImageOrNull();</div><div class=\"line\">            return;</div><div class=\"line\">        }</div><div class=\"line\">   </div><div class=\"line\">        // if there was an old request in this view, check if it needs to be canceled.</div><div class=\"line\">        if (mImageContainer != null &amp;&amp; mImageContainer.getRequestUrl() != null) {</div><div class=\"line\">            if (mImageContainer.getRequestUrl().equals(mUrl)) {</div><div class=\"line\">                // if the request is from the same URL, return.</div><div class=\"line\">                return;</div><div class=\"line\">            } else {</div><div class=\"line\">                // if there is a pre-existing request, cancel it if it&apos;s fetching a different URL.</div><div class=\"line\">                mImageContainer.cancelRequest();</div><div class=\"line\">                setDefaultImageOrNull();</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">   </div><div class=\"line\">        // Calculate the max image width / height to use while ignoring WRAP_CONTENT dimens.</div><div class=\"line\">        int maxWidth = wrapWidth ? 0 : width;</div><div class=\"line\">        int maxHeight = wrapHeight ? 0 : height;</div><div class=\"line\">     </div><div class=\"line\">        // The pre-existing content of this view didn&apos;t match the current URL. Load the new image</div><div class=\"line\">        // from the network.</div><div class=\"line\">        ImageContainer newContainer = mImageLoader.get(mUrl,</div><div class=\"line\">                new ImageListener() {</div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void onErrorResponse(VolleyError error) {</div><div class=\"line\">                        if (mErrorImageId != 0) {</div><div class=\"line\">                                 setImageResource(mErrorImageId);</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">      </div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void onResponse(final ImageContainer response, boolean isImmediate) {</div><div class=\"line\">                        // If this was an immediate response that was delivered inside of a layout</div><div class=\"line\">                        // pass do not set the image immediately as it will trigger a requestLayout</div><div class=\"line\">                        // inside of a layout. Instead, defer setting the image by posting back to</div><div class=\"line\">                        // the main thread.</div><div class=\"line\">                        if (isImmediate &amp;&amp; isInLayoutPass) {</div><div class=\"line\">                            post(new Runnable() {</div><div class=\"line\">                                @Override</div><div class=\"line\">                                public void run() {</div><div class=\"line\">                                      onResponse(response, false);</div><div class=\"line\">                                }</div><div class=\"line\">                            });</div><div class=\"line\">                            return;</div><div class=\"line\">                        }</div><div class=\"line\"></div><div class=\"line\">                        if (response.getBitmap() != null) {</div><div class=\"line\">                                 setImageBitmap(response.getBitmap());</div><div class=\"line\">                        } else if (mDefaultImageId != 0) {</div><div class=\"line\">                                   setImageResource(mDefaultImageId);</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                }, maxWidth, maxHeight, scaleType);</div><div class=\"line\"> </div><div class=\"line\">        // update the ImageContainer to be the new bitmap container.</div><div class=\"line\">        mImageContainer = newContainer;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x4F46;&#x90FD;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x7684;&#xFF0C;&#x524D;&#x9762;&#x4E00;&#x90E8;&#x5206;&#x90FD;&#x662F;&#x5BF9;&#x5BBD;&#x5EA6;&#x4E0E;&#x9AD8;&#x5EA6;&#x7684;&#x8BA1;&#x7B97;&#xFF0C;&#x4F7F;&#x56FE;&#x7247;&#x80FD;&#x9002;&#x5E94;&#x63A7;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x627E;&#x5230;&#x6211;&#x4EEC;&#x6240;&#x719F;&#x6089;&#x7684;&#xFF08;<code>48</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#xFF0C;&#x5B83;&#x5C31;&#x662F;&#x524D;&#x9762;&#x7684;<code>get</code>&#x65B9;&#x6CD5;&#x4EE5;&#x53CA;<code>ImageListener</code>&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x91CC;&#x76F8;&#x4FE1;&#x73B0;&#x5728;&#x4E0D;&#x7528;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x5B83;&#x8C03;&#x7528;&#x7684;&#x6E90;&#x7801;&#x90FD;&#x5728;&#x524D;&#x9762;&#x8BB2;&#x4E86;&#x3002;&#x518D;&#x5411;&#x4E0A;&#x8D70;(<code>32</code>&#x884C;&#x4EE3;&#x7801;)&#x53D1;&#x73B0;&#x6CA1;&#xFF0C;&#x5B83;&#x5C06;&#x5F53;&#x524D;<code>NetWorkImageView</code>&#x4E2D;&#x7684;<code>ImageContainer</code>&#x4E2D;&#x4FDD;&#x5B58;&#x7684;<code>url</code>&#x4E0E;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x76F8;&#x6BD4;&#x8F83;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x4E0E;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;<code>&#x9632;&#x95EA;&#x70C1;&#x4E0E;&#x5F02;&#x4F4D;</code>&#x7684;&#x5904;&#x7406;&#x76F8;&#x4F3C;&#x5462;&#xFF1F;&#x4F60;&#x770B;&#xFF0C;&#x5982;&#x679C;<code>url</code>&#x76F8;&#x540C;&#x7684;&#x8BDD;&#x8BF4;&#x660E;&#x5F53;&#x524D;&#x63A7;&#x4EF6;&#x4E0A;&#x6240;&#x663E;&#x793A;&#x7684;&#x56FE;&#x7247;&#x4E0E;&#x7ED3;&#x679C;&#x543B;&#x5408;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x4E0D;&#x505A;&#x5904;&#x7406;&#xFF1B;&#x5426;&#x5219;<code>mImageContainer.cancelRequest()</code>&#x53D6;&#x6D88;&#x539F;&#x6765;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x4E14;<code>setDefaultImageOrNull()</code>&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x770B;&#x65B9;&#x6CD5;&#x540D;&#x5C31;&#x77E5;&#x9053;&#xFF1A;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;&#x5C31;&#x663E;&#x793A;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;&#xFF0C;&#x6CA1;&#x6709;&#x5C31;&#x8BBE;&#x7F6E;&#x7A7A;&#x56FE;&#x7247;&#x4E0D;&#x663E;&#x793A;&#x3002;&#x540E;&#x9762;&#x7684;&#x5904;&#x7406;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x7684;<code>get</code>&#x5904;&#x7406;&#x4E86;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;&#x6240;&#x4EE5;<code>NetWorkImageView</code>&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x76F8;&#x5BF9;&#x4E8E;&#x66F4;&#x7B80;&#x5355;&#xFF0C;&#x66F4;&#x5BB9;&#x6613;&#x4E0A;&#x624B;&#x3002;</p>\n<h1 id=\"&#x5410;&#x69FD;\"><a href=\"#&#x5410;&#x69FD;\" class=\"headerlink\" title=\"&#x5410;&#x69FD;\"></a>&#x5410;&#x69FD;</h1><p>&#x5176;&#x5B9E;&#x4E0A;&#x9762;&#x7684;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#x6700;&#x7EC8;&#x90FD;&#x662F;&#x8C03;&#x7528;&#x7684;<code>ImageRequest</code>&#xFF0C;&#x800C;<code>ImageRequest</code>&#x662F;&#x7EE7;&#x627F;&#x4E0E;<code>Request</code>&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x8D70;&#x5230;&#x4E86;&#x524D;&#x9762;&#x90A3;&#x7BC7;&#x6587;&#x7AE0;&#x6240;&#x8BB2;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x540C;&#x7406;&#x518D;&#x53BB;&#x770B;<code>StringRequest</code>&#x3001;<code>JsonObjectRequest</code>&#x4E0E;<code>JsonArrayRequest</code>&#x90FD;&#x662F;&#x7C7B;&#x4F3C;&#x7684;&#xFF0C;&#x90FD;&#x662F;&#x91CD;&#x5199;<code>deliverResponse</code>&#x4E0E;<code>parseNetworkResponse</code>&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x540C;&#x6837;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x53C8;&#x56DE;&#x5230;&#x4E86;<a href=\"https://idisfkj.github.io/2016/10/14/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%80/\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</a>&#x4E2D;&#x6240;&#x5206;&#x6790;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x8FD9;&#x91CC;&#x5BF9;<code>Volley</code>&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#x7684;&#x4F7F;&#x7528;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x6982;&#x62EC;</p>\n<ul>\n<li>&#x521B;&#x5EFA;<code>RequestQueue</code></li>\n<li>&#x521B;&#x5EFA;<code>ImageLoader</code></li>\n<li>&#x5B9E;&#x73B0;&#x7F13;&#x5B58;&#x3002;&#x7EE7;&#x627F;<code>LruCache</code>&#x5B9E;&#x73B0;<code>ImageLoader</code>&#x7684;<code>ImageLoader.ImageCache</code>&#x63A5;&#x53E3;</li>\n<li>&#x5982;&#x679C;&#x4F7F;&#x7528;<code>ImageView</code>&#x5219;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;<code>ImageLoader.ImageListener</code>,&#x8C03;&#x7528;<code>get</code>&#x65B9;&#x6CD5;</li>\n<li>&#x5982;&#x679C;&#x4F7F;&#x7528;<code>NetWorkImageView</code>&#x5219;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>setImageUrl</code>&#x65B9;&#x6CD5;</li>\n</ul>\n"},{"title":"Android Volley源码分析(一)","url":"https://idisfkj.github.io/2016/10/14/Android-Volley源码分析-一/","content":"<p><code>volley</code>&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x6D41;&#x884C;&#x7684;<code>Android</code>&#x5F00;&#x6E90;&#x6846;&#x67B6;&#xFF0C;&#x81EA;&#x5DF1;&#x5E73;&#x65F6;&#x4E5F;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x4F46;&#x81EA;&#x5DF1;&#x5BF9;&#x4E8E;&#x5B83;&#x7684;&#x5185;&#x90E8;&#x7684;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;&#x5E76;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x592A;&#x591A;&#x7684;&#x6DF1;&#x7A76;&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x4EE5;&#x540E;&#x80FD;&#x66F4;&#x901A;&#x900F;&#x7684;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x4E86;&#x89E3;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x81EA;&#x5DF1;&#x6709;&#x4E86;&#x4E00;&#x70B9;&#x7814;&#x7A76;&#xFF0C;&#x505A;&#x4E2A;&#x7B14;&#x8BB0;&#x540C;&#x65F6;&#x4E0E;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x5206;&#x4EAB;&#x3002;&#x671F;&#x95F4;&#x81EA;&#x5DF1;&#x4E5F;&#x753B;&#x4E86;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x7406;&#x89E3;&#x5176;&#x4E2D;&#x7684;&#x6B65;&#x9AA4;&#x4E0E;&#x539F;&#x7406;&#x3002;&#x5982;&#x4E0B;&#xFF1A;<br><img src=\"/2016/10/14/Android-Volley&#x6E90;&#x7801;&#x5206;&#x6790;-&#x4E00;/Volley&#x6846;&#x67B6;&#x56FE;.png\" alt=\"Volley&#x6846;&#x67B6;&#x56FE;\"><br>&#x5F00;&#x59CB;&#x770B;&#x53EF;&#x80FD;&#x4F1A;&#x4E00;&#x8138;&#x61F5;&#x903C;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x7ED3;&#x5408;&#x6E90;&#x7801;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x6765;&#xFF0C;&#x73B0;&#x5728;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x8FDB;&#x5165;<code>Volley</code>&#x7684;&#x6E90;&#x7801;&#x4E16;&#x754C;&#xFF0C;&#x6765;&#x89E3;&#x8BFB;&#x5927;&#x795E;&#x4EEC;&#x7684;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x3002;</p>\n<h1 id=\"newRequestQueue\"><a href=\"#newRequestQueue\" class=\"headerlink\" title=\"newRequestQueue\"></a>newRequestQueue</h1><p>&#x5982;&#x679C;&#x4F7F;&#x7528;&#x8FC7;<code>Volley</code>&#x7684;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x8FD8;&#x662F;&#x4EC0;&#x4E48;&#x522B;&#x7684;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#xFF0C;&#x9996;&#x5148;&#x90FD;&#x8981;&#x521B;&#x5EFA;&#x597D;&#x4E00;&#x4E2A;<code>RequestQueue</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static final RequestQueue volleyQueue = Volley.newRequestQueue(App.mContext);</div></pre></td></tr></table></figure>\n<p>&#x800C;<code>RequestQueue</code>&#x7684;&#x521B;&#x5EFA;&#x81EA;&#x7136;&#x79BB;&#x4E0D;&#x5F00;<code>Volley</code>&#x4E2D;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;<code>newRequestQueue</code>&#xFF0C;&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x7247;&#x4E5F;&#x80FD;&#x77E5;&#x9053;&#x9996;&#x5148;&#x8FDB;&#x5165;&#x70B9;&#x662F;<code>newRequestQueue</code>,&#x597D;&#x4E86;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x5230;&#x5E95;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static RequestQueue newRequestQueue(Context context, HttpStack stack) {</div><div class=\"line\">        File cacheDir = new File(context.getCacheDir(), DEFAULT_CACHE_DIR);</div><div class=\"line\">        String userAgent = &quot;volley/0&quot;;</div><div class=\"line\">        try {</div><div class=\"line\">            String packageName = context.getPackageName();</div><div class=\"line\">            PackageInfo info = context.getPackageManager().getPackageInfo(packageName, 0);</div><div class=\"line\">            userAgent = packageName + &quot;/&quot; + info.versionCode;</div><div class=\"line\">        } catch (NameNotFoundException e) {</div><div class=\"line\">        }</div><div class=\"line\">        if (stack == null) {</div><div class=\"line\">            if (Build.VERSION.SDK_INT &gt;= 9) {</div><div class=\"line\">                stack = new HurlStack();</div><div class=\"line\">            } else {</div><div class=\"line\">                // Prior to Gingerbread, HttpUrlConnection was unreliable.</div><div class=\"line\">                // See: http://android-developers.blogspot.com/2011/09/androids-http-clients.html</div><div class=\"line\">                stack = new HttpClientStack(AndroidHttpClient.newInstance(userAgent));</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        Network network = new BasicNetwork(stack);</div><div class=\"line\">        RequestQueue queue = new RequestQueue(new DiskBasedCache(cacheDir), network);</div><div class=\"line\">        queue.start();</div><div class=\"line\">        return queue;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x6E90;&#x7801;&#x4E2D;&#x6211;&#x4EEC;&#x80FD;&#x53D1;&#x73B0;&#x6709;&#x4E00;&#x4E2A;<code>stack</code>&#xFF0C;&#x5B83;&#x4EE3;&#x8868;&#x7740;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x901A;&#x4FE1;<code>HttpClient</code>&#x4E0E;<code>HttpUrlConnection</code>&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x4E3A;<code>null</code>&#x3002;&#x56E0;&#x4E3A;&#x5B83;&#x4F1A;&#x9ED8;&#x8BA4;&#x5E2E;&#x6211;&#x4EEC;&#x8FDB;&#x5224;&#x65AD;&#x9009;&#x62E9;&#x66F4;&#x9002;&#x5408;&#x7684;&#x3002;&#x5F53;&#x624B;&#x673A;&#x7248;&#x672C;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;<code>9</code>&#x65F6;&#x4F1A;&#x4F7F;&#x7528;<code>HurlStack</code>&#x5B83;&#x91CC;&#x9762;&#x4F7F;&#x7528;<code>HttpUrlConnection</code>&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x901A;&#x4FE1;&#x7684;&#xFF0C;&#x800C;&#x5C0F;&#x4E8E;<code>9</code>&#x65F6;&#x5219;&#x521B;&#x5EFA;<code>HttpClientStack</code>&#xFF0C;&#x5B83;&#x91CC;&#x9762;&#x81EA;&#x7136;&#x662F;<code>HttpClient</code>&#x7684;&#x5B9E;&#x73B0;&#x3002;&#x901A;&#x8FC7;<code>BasicNetwork</code>&#x6784;&#x9020;&#x6210;<code>Network</code>&#x6765;&#x8FDB;&#x884C;&#x4F20;&#x9012;&#x4F7F;&#x7528;&#xFF1B;&#x5728;&#x8FD9;&#x4E4B;&#x540E;&#x6784;&#x5EFA;&#x4E86;<code>RequestQueue</code>&#xFF0C;&#x5176;&#x4E2D;&#x5E2E;&#x6211;&#x4EEC;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;<code>new DiskBasedCache(cacheDir)</code>&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;<code>5MB</code>,&#x7F13;&#x5B58;&#x76EE;&#x5F55;&#x4E3A;<code>volley</code>&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x80FD;&#x5728;<code>data/data/&#x5E94;&#x7528;&#x5305;&#x540D;/volley</code>&#x4E0B;&#x627E;&#x5230;&#x7F13;&#x5B58;&#x3002;&#x6700;&#x540E;&#x8C03;&#x7528;&#x5176;<code>start</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;<code>RequestQueue</code>&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x7B2C;&#x4E00;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8FDB;&#x5165;<code>RequestQueue</code>&#x4E2D;&#x7684;<code>start</code>&#x65B9;&#x6CD5;&#x770B;&#x4E0B;&#x5B83;&#x5230;&#x5E95;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>\n<h1 id=\"RequestQueue\"><a href=\"#RequestQueue\" class=\"headerlink\" title=\"RequestQueue\"></a>RequestQueue</h1><p>&#x5728;<code>RequestQueue</code>&#x4E2D;&#x901A;&#x8FC7;<code>this</code>&#x8C03;&#x7528;&#x81EA;&#x8EAB;&#x6765;&#x9ED8;&#x8BA4;&#x5E2E;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x4E86;&#x4E0B;&#x9762;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public RequestQueue(Cache cache, Network network, int threadPoolSize,</div><div class=\"line\">            ResponseDelivery delivery) {</div><div class=\"line\">        mCache = cache;</div><div class=\"line\">        mNetwork = network;</div><div class=\"line\">        mDispatchers = new NetworkDispatcher[threadPoolSize];</div><div class=\"line\">        mDelivery = delivery;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p><code>cache</code>&#x540E;&#x7EED;&#x5728;<code>NetworkDispatcher</code>&#x4E2D;&#x4F1A;&#x5E2E;&#x6211;&#x4EEC;&#x8FDB;&#x884C;<code>response.cacheEntry</code>&#x7684;&#x7F13;&#x5B58;&#xFF0C;<code>netWork</code>&#x662F;&#x524D;&#x9762;&#x7684;&#x6839;&#x636E;&#x7248;&#x672C;&#x6240;&#x5C01;&#x88C5;&#x7684;&#x901A;&#x4FE1;&#xFF0C;<code>threadPoolSize</code>&#x7EBF;&#x7A0B;&#x6C60;&#x5927;&#x5C0F;&#x9ED8;&#x8BA4;&#x4E3A;<code>4</code>&#xFF0C;<code>delivery</code>,&#x662F;<code>ExecutorDelivery</code>&#x4F5C;&#x7528;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;,&#x5728;&#x6700;&#x540E;&#x5BF9;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;&#x7684;&#x5206;&#x53D1;&#x3002;</p>\n<h2 id=\"start\"><a href=\"#start\" class=\"headerlink\" title=\"start\"></a>start</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void start() {</div><div class=\"line\">        stop();  // Make sure any currently running dispatchers are stopped.</div><div class=\"line\">        // Create the cache dispatcher and start it.</div><div class=\"line\">        mCacheDispatcher = new CacheDispatcher(mCacheQueue, mNetworkQueue, mCache, mDelivery);</div><div class=\"line\">        mCacheDispatcher.start();</div><div class=\"line\">        // Create network dispatchers (and corresponding threads) up to the pool size.</div><div class=\"line\">        for (int i = 0; i &lt; mDispatchers.length; i++) {</div><div class=\"line\">            NetworkDispatcher networkDispatcher = new NetworkDispatcher(mNetworkQueue, mNetwork,</div><div class=\"line\">                    mCache, mDelivery);</div><div class=\"line\">            mDispatchers[i] = networkDispatcher;</div><div class=\"line\">            networkDispatcher.start();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;<code>start</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x5B83;&#x5B9E;&#x73B0;&#x4E86;&#x4E24;&#x4E2A;<code>dispatch</code>,&#x4E00;&#x4E2A;&#x662F;<code>CacheDispatcher</code>&#x7F13;&#x5B58;&#x6D3E;&#x9063;,&#x53E6;&#x4E00;&#x4E2A;&#x662F;<code>networkDispatcher</code>&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x6D3E;&#x9063;&#xFF0C;&#x5176;&#x5B9E;&#x4ED6;&#x4EEC;&#x90FD;&#x662F;<code>Thread</code>&#xFF0C;&#x6240;&#x4EE5;&#x90FD;&#x8C03;&#x7528;&#x4E86;&#x4ED6;&#x4EEC;&#x7684;<code>start</code>&#x65B9;&#x6CD5;&#x3002;&#x5176;&#x4E2D;<code>networkDispatcher</code>&#x9ED8;&#x8BA4;&#x6784;&#x5EFA;&#x4E86;<code>4</code>&#x4E2A;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x5305;&#x542B;<code>4</code>&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5148;&#x4E0D;&#x53BB;&#x770B;&#x4ED6;&#x4EEC;&#x5185;&#x90E8;&#x7684;<code>run</code>&#x65B9;&#x6CD5;&#x5230;&#x5E95;&#x5B9E;&#x73B0;&#x4E86;&#x4EC0;&#x4E48;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x63A5;&#x7740;&#x770B;<code>RequestQueue</code>&#x4E2D;&#x6211;&#x4EEC;&#x9891;&#x7E41;&#x4F7F;&#x7528;&#x7684;<code>add</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"add\"><a href=\"#add\" class=\"headerlink\" title=\"add\"></a>add</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\">public &lt;T&gt; Request&lt;T&gt; add(Request&lt;T&gt; request) {</div><div class=\"line\">        // Tag the request as belonging to this queue and add it to the set of current requests.</div><div class=\"line\">        request.setRequestQueue(this);</div><div class=\"line\">        synchronized (mCurrentRequests) {</div><div class=\"line\">            mCurrentRequests.add(request);</div><div class=\"line\">        }</div><div class=\"line\">        // Process requests in the order they are added.</div><div class=\"line\">        request.setSequence(getSequenceNumber());</div><div class=\"line\">        request.addMarker(&quot;add-to-queue&quot;);</div><div class=\"line\">        // If the request is uncacheable, skip the cache queue and go straight to the network.</div><div class=\"line\">        if (!request.shouldCache()) {</div><div class=\"line\">            mNetworkQueue.add(request);</div><div class=\"line\">            return request;</div><div class=\"line\">        }</div><div class=\"line\">        // Insert request into stage if there&apos;s already a request with the same cache key in flight.</div><div class=\"line\">        synchronized (mWaitingRequests) {</div><div class=\"line\">            String cacheKey = request.getCacheKey();</div><div class=\"line\">            if (mWaitingRequests.containsKey(cacheKey)) {</div><div class=\"line\">                // There is already a request in flight. Queue up.</div><div class=\"line\">                Queue&lt;Request&lt;?&gt;&gt; stagedRequests = mWaitingRequests.get(cacheKey);</div><div class=\"line\">                if (stagedRequests == null) {</div><div class=\"line\">                    stagedRequests = new LinkedList&lt;Request&lt;?&gt;&gt;();</div><div class=\"line\">                }</div><div class=\"line\">                stagedRequests.add(request);</div><div class=\"line\">                mWaitingRequests.put(cacheKey, stagedRequests);</div><div class=\"line\">                if (VolleyLog.DEBUG) {</div><div class=\"line\">                    VolleyLog.v(&quot;Request for cacheKey=%s is in flight, putting on hold.&quot;, cacheKey);</div><div class=\"line\">                }</div><div class=\"line\">            } else {</div><div class=\"line\">                // Insert &apos;null&apos; queue for this cacheKey, indicating there is now a request in</div><div class=\"line\">                // flight.</div><div class=\"line\">                mWaitingRequests.put(cacheKey, null);</div><div class=\"line\">                mCacheQueue.add(request);</div><div class=\"line\">            }</div><div class=\"line\">            return request;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x7ED3;&#x5408;&#x4EE3;&#x7801;&#x4E0E;&#x524D;&#x9762;&#x7684;&#x56FE;&#xFF0C;&#x9996;&#x5148;&#x4F1A;&#x4E3A;&#x5F53;&#x524D;&#x7684;<code>request</code>&#x8BBE;&#x7F6E;<code>RequestQueue</code>,&#x5E76;&#x4E14;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x540C;&#x6B65;&#x662F;&#x5426;&#x662F;&#x5F53;&#x524D;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x52A0;&#x5165;&#x5230;<code>mCurrentRequests</code>&#x4E2D;&#xFF0C;&#x770B;<code>11</code>&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x4E4B;&#x540E;&#x5BF9;&#x5F53;&#x524D;<code>request</code>&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x9700;&#x8981;&#x7F13;&#x5B58;&#xFF08;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x662F;<code>true</code>&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#x53EF;&#x8C03;&#x7528;<code>request.setShouldCache()</code>&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF09;,&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#x5219;&#x76F4;&#x63A5;&#x52A0;&#x5165;&#x5230;&#x524D;&#x9762;&#x7684;<code>mNetworkQueue</code>&#x4E2D;&#xFF0C;&#x5B83;&#x4F1A;&#x5728;<code>CacheDispatcher</code>&#x4E0E;<code>NetworkDispatcher</code>&#x4E2D;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;<code>request</code>&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x7F13;&#x5B58;&#xFF0C;&#x770B;16&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x5219;&#x5BF9;<code>mWaitingRequests</code>&#x4E2D;&#x662F;&#x5426;&#x5305;&#x542B;<code>cacheKey</code>&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#x3002;&#x5176;&#x4E2D;<code>cacheKey</code>&#x4E3A;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x3002;&#x6700;&#x540E;&#x518D;&#x52A0;&#x5165;&#x5230;&#x7F13;&#x5B58;&#x961F;&#x5217;<code>mCacheQueue</code>&#x4E2D;&#x3002;</p>\n<h2 id=\"finish\"><a href=\"#finish\" class=\"headerlink\" title=\"finish\"></a>finish</h2><p>&#x7EC6;&#x5FC3;&#x7684;&#x4EBA;&#x4F1A;&#x53D1;&#x73B0;&#x5F53;&#x5BF9;&#x5E94;<code>cacheKey</code>&#x7684;<code>value</code>&#x4E0D;&#x4E3A;&#x7A7A;&#x65F6;&#xFF0C;&#x521B;&#x5EFA;&#x4E86;<code>LinkedList</code>&#x5373;<code>Queue</code>,&#x53EA;&#x662F;&#x5C06;<code>request</code>&#x52A0;&#x5165;&#x5230;&#x4E86;<code>Queue</code>&#x4E2D;&#xFF0C;&#x53EA;&#x662F;&#x66F4;&#x65B0;&#x4E86;<code>mWaitingRequests</code>&#x4E2D;&#x76F8;&#x5E94;&#x7684;<code>value</code>&#x4F46;&#x5E76;&#x6CA1;&#x6709;&#x52A0;&#x5165;&#x5230;<code>mCacheQueue</code>&#x4E2D;&#x3002;&#x5176;&#x5B9E;&#x4E0D;&#x7136;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x7EED;&#x4F1A;&#x8C03;&#x7528;<code>finish</code>&#x65B9;&#x6CD5;,&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x6E90;&#x7801;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;T&gt; void finish(Request&lt;T&gt; request) {</div><div class=\"line\">        // Remove from the set of requests currently being processed.</div><div class=\"line\">        synchronized (mCurrentRequests) {</div><div class=\"line\">            mCurrentRequests.remove(request);</div><div class=\"line\">        }</div><div class=\"line\">        synchronized (mFinishedListeners) {</div><div class=\"line\">          for (RequestFinishedListener&lt;T&gt; listener : mFinishedListeners) {</div><div class=\"line\">            listener.onRequestFinished(request);</div><div class=\"line\">          }</div><div class=\"line\">        }</div><div class=\"line\">        if (request.shouldCache()) {</div><div class=\"line\">            synchronized (mWaitingRequests) {</div><div class=\"line\">                String cacheKey = request.getCacheKey();</div><div class=\"line\">                Queue&lt;Request&lt;?&gt;&gt; waitingRequests = mWaitingRequests.remove(cacheKey);</div><div class=\"line\">                if (waitingRequests != null) {</div><div class=\"line\">                    if (VolleyLog.DEBUG) {</div><div class=\"line\">                        VolleyLog.v(&quot;Releasing %d waiting requests for cacheKey=%s.&quot;,</div><div class=\"line\">                                waitingRequests.size(), cacheKey);</div><div class=\"line\">                    }</div><div class=\"line\">                    // Process all queued up requests. They won&apos;t be considered as in flight, but</div><div class=\"line\">                    // that&apos;s not a problem as the cache has been primed by &apos;request&apos;.</div><div class=\"line\">                    mCacheQueue.addAll(waitingRequests);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x770B;<code>14</code>&#x3001;<code>22</code>&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x6B63;&#x5982;&#x4E0A;&#x9762;&#x6211;&#x6240;&#x8BF4;&#xFF0C;&#x4F1A;&#x5C06;<code>Queue</code>&#x4E2D;&#x7684;<code>request</code>&#x5168;&#x90E8;&#x52A0;&#x5165;&#x5230;<code>mCacheQueue</code>&#x4E2D;&#x3002;<br>&#x597D;&#x4E86;<code>RequestQueue</code>&#x7684;&#x4E3B;&#x8981;&#x6E90;&#x7801;&#x5DEE;&#x4E0D;&#x591A;&#x5C31;&#x8FD9;&#x4E9B;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8FDB;&#x5165;<code>CacheDispatcher</code>&#x7684;&#x6E90;&#x7801;&#x5206;&#x6790;,&#x770B;&#x5B83;&#x7A76;&#x7ADF;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#x5462;&#xFF1F;</p>\n<h1 id=\"CacheDispatcher\"><a href=\"#CacheDispatcher\" class=\"headerlink\" title=\"CacheDispatcher\"></a>CacheDispatcher</h1><p>&#x524D;&#x9762;&#x63D0;&#x5230;&#x4E86;&#x5B83;&#x4E0E;<code>NetworkDispatcher</code>&#x672C;&#x8D28;&#x90FD;&#x662F;<code>Thread</code>&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x81EA;&#x7136;&#x662F;&#x770B;<code>run</code>&#x65B9;&#x6CD5;</p>\n<h2 id=\"run\"><a href=\"#run\" class=\"headerlink\" title=\"run\"></a>run</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void run() {</div><div class=\"line\">        if (DEBUG) VolleyLog.v(&quot;start new dispatcher&quot;);</div><div class=\"line\">                Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);</div><div class=\"line\">        </div><div class=\"line\">        // Make a blocking call to initialize the cache.</div><div class=\"line\">        mCache.initialize();</div><div class=\"line\">                </div><div class=\"line\">        while (true) {</div><div class=\"line\">            try {</div><div class=\"line\">                // Get a request from the cache triage queue, blocking until</div><div class=\"line\">                // at least one is available.</div><div class=\"line\">                final Request&lt;?&gt; request = mCacheQueue.take();</div><div class=\"line\">                request.addMarker(&quot;cache-queue-take&quot;);</div><div class=\"line\">                </div><div class=\"line\">                // If the request has been canceled, don&apos;t bother dispatching it.</div><div class=\"line\">                if (request.isCanceled()) {</div><div class=\"line\">                    request.finish(&quot;cache-discard-canceled&quot;);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\">                </div><div class=\"line\">                // Attempt to retrieve this item from cache.</div><div class=\"line\">                Cache.Entry entry = mCache.get(request.getCacheKey());</div><div class=\"line\">                if (entry == null) {</div><div class=\"line\">                    request.addMarker(&quot;cache-miss&quot;);</div><div class=\"line\">                    // Cache miss; send off to the network dispatcher.</div><div class=\"line\">                    mNetworkQueue.put(request);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\">                </div><div class=\"line\">                // If it is completely expired, just send it to the network.</div><div class=\"line\">                if (entry.isExpired()) {</div><div class=\"line\">                    request.addMarker(&quot;cache-hit-expired&quot;);</div><div class=\"line\">                    request.setCacheEntry(entry);</div><div class=\"line\">                    mNetworkQueue.put(request);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\">                </div><div class=\"line\">                // We have a cache hit; parse its data for delivery back to the request.</div><div class=\"line\">                request.addMarker(&quot;cache-hit&quot;);</div><div class=\"line\">                Response&lt;?&gt; response = request.parseNetworkResponse(</div><div class=\"line\">                        new NetworkResponse(entry.data, entry.responseHeaders));</div><div class=\"line\">                request.addMarker(&quot;cache-hit-parsed&quot;);</div><div class=\"line\">                    </div><div class=\"line\">                if (!entry.refreshNeeded()) {</div><div class=\"line\">                    // Completely unexpired cache hit. Just deliver the response.</div><div class=\"line\">                    mDelivery.postResponse(request, response);</div><div class=\"line\">                } else {</div><div class=\"line\">                    // Soft-expired cache hit. We can deliver the cached response,</div><div class=\"line\">                    // but we need to also send the request to the network for</div><div class=\"line\">                    // refreshing.</div><div class=\"line\">                    request.addMarker(&quot;cache-hit-refresh-needed&quot;);</div><div class=\"line\">                    request.setCacheEntry(entry);</div><div class=\"line\">                    </div><div class=\"line\">                    // Mark the response as intermediate.</div><div class=\"line\">                    response.intermediate = true;</div><div class=\"line\">             </div><div class=\"line\">                    // Post the intermediate response back to the user and have</div><div class=\"line\">                    // the delivery then forward the request along to the network.</div><div class=\"line\">                    mDelivery.postResponse(request, response, new Runnable() {</div><div class=\"line\">                        @Override</div><div class=\"line\">                        public void run() {</div><div class=\"line\">                            try {</div><div class=\"line\">                                                                            mNetworkQueue.put(request);</div><div class=\"line\">                            } catch (InterruptedException e) {</div><div class=\"line\">                                // Not much we can do about this.</div><div class=\"line\">                            }</div><div class=\"line\">                        }</div><div class=\"line\">                    });</div><div class=\"line\">                }</div><div class=\"line\">                                                                                          </div><div class=\"line\">            } catch (InterruptedException e) {</div><div class=\"line\">                // We may have been interrupted because it was time to quit.</div><div class=\"line\">                if (mQuit) {</div><div class=\"line\">                    return;</div><div class=\"line\">                }</div><div class=\"line\">                continue;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x770B;&#x8D77;&#x6765;&#x5F88;&#x591A;&#xFF0C;&#x6211;&#x4EEC;&#x7ED3;&#x5408;&#x56FE;&#x6765;&#x6311;&#x4E3B;&#x8981;&#x7684;&#x770B;&#x3002;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x4E00;&#x76F4;&#x5728;&#x76D1;&#x89C6;&#x7740;<code>request</code>&#x7684;&#x53D8;&#x5316;&#x3002;&#x4ECE;&#x7F13;&#x5B58;&#x961F;&#x5217;<code>mCacheQueue</code>&#x4E2D;&#x83B7;&#x53D6;<code>request</code>,&#x5982;&#x679C;&#x8BE5;&#x8BF7;&#x6C42;&#x662F;<code>cancle</code>&#x4E86;&#xFF0C;&#x8C03;&#x7528;<code>request.finish()</code>&#x6E05;&#x9664;&#x76F8;&#x5E94;&#x6570;&#x636E;&#x5E76;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5426;&#x5219;&#x4ECE;&#x524D;&#x9762;&#x63D0;&#x5230;&#x7684;<code>mCache</code>&#x4E2D;&#x83B7;&#x53D6;<code>Cache.Entry</code>&#x3002;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x6216;&#x8005;&#x5DF2;&#x7ECF;&#x8FC7;&#x671F;&#xFF0C;&#x5C06;&#x8BF7;&#x6C42;&#x52A0;&#x5165;&#x5230;&#x7F51;&#x7EDC;&#x961F;&#x5217;&#x4E2D;<code>mNetWorkQueue</code>&#xFF0C;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF08;<code>41</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#x5219;&#x8FDB;&#x884C;<code>request.parseNetworkResponse()</code>&#x89E3;&#x6790;&#x51FA;<code>response</code>,&#x4E0D;&#x540C;&#x7684;<code>request</code>&#x5BF9;&#x5E94;&#x4E0D;&#x540C;&#x7684;&#x89E3;&#x6790;&#x65B9;&#x6CD5;&#x3002;&#x4F8B;&#x5982;<code>StringRequest</code>&#x4E0E;<code>JsonObjectRequest</code>&#x6709;&#x5404;&#x81EA;&#x7684;&#x89E3;&#x6790;&#x5B9E;&#x73B0;&#x3002;&#x518D;&#x770B;<code>45</code>&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x4E0D;&#x7BA1;<code>entry</code>&#x662F;&#x5426;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x7684;&#xFF0C;&#x90FD;&#x4F1A;&#x8FDB;&#x4E00;&#x6B65;&#x5BF9;<code>response</code>&#x8FDB;&#x884C;<code>mDelivery.postResponse(request, response)</code>&#x9012;&#x9001;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x7684;&#x8BDD;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;<code>request</code>&#x7684;<code>entry</code>&#x4E0E;&#x52A0;&#x5165;&#x5230;<code>mNetworkQueue</code>&#x4E2D;&#xFF0C;&#x4E5F;&#x5C31;&#x76F8;&#x5F53;&#x4E0E;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x4E00;&#x904D;&#x3002;&#x90A3;&#x4E48;&#x518D;&#x56DE;&#x5230;&#x9012;&#x9001;&#x7684;&#x9636;&#x6BB5;&#xFF0C;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x63D0;&#x5230;&#x5728;&#x521B;&#x5EFA;<code>RequestQueue</code>&#x662F;&#x5B9E;&#x73B0;&#x4E86;<code>ExecutorDelivery</code>,<code>mDelivery.postResponse</code>&#x5C31;&#x662F;&#x5176;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;</p>\n<h2 id=\"ExecutorDelivery\"><a href=\"#ExecutorDelivery\" class=\"headerlink\" title=\"ExecutorDelivery\"></a>ExecutorDelivery</h2><p>&#x5728;&#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>Executor</code>&#xFF0C;&#x5BF9;&#x540E;&#x9762;&#x8FDB;&#x884C;&#x9012;&#x9001;,&#x4F5C;&#x7528;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public ExecutorDelivery(final Handler handler) {</div><div class=\"line\">        // Make an Executor that just wraps the handler.</div><div class=\"line\">        mResponsePoster = new Executor() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void execute(Runnable command) {</div><div class=\"line\">                handler.post(command);</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">    }</div></pre></td></tr></table></figure></p>\n<h3 id=\"postResponse\"><a href=\"#postResponse\" class=\"headerlink\" title=\"postResponse\"></a>postResponse</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void postResponse(Request&lt;?&gt; request, Response&lt;?&gt; response) {</div><div class=\"line\">        postResponse(request, response, null);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void postResponse(Request&lt;?&gt; request, Response&lt;?&gt; response, Runnable runnable) {</div><div class=\"line\">        request.markDelivered();</div><div class=\"line\">        request.addMarker(&quot;post-response&quot;);</div><div class=\"line\">        mResponsePoster.execute(new ResponseDeliveryRunnable(request, response, runnable));</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x7B80;&#x5355;&#x4E86;&#x5C31;&#x662F;&#x8C03;&#x7528;<code>execute</code>&#x8FDB;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x5728;&#x8FDB;&#x5165;<code>ResponseDeliveryRunnable</code>&#x7684;<code>run</code>&#x770B;&#x5B83;&#x5982;&#x4F55;&#x6267;&#x884C;</p>\n<h3 id=\"ResponseDeliveryRunnable\"><a href=\"#ResponseDeliveryRunnable\" class=\"headerlink\" title=\"ResponseDeliveryRunnable\"></a>ResponseDeliveryRunnable</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void run() {</div><div class=\"line\">            // If this request has canceled, finish it and don&apos;t deliver.</div><div class=\"line\">            if (mRequest.isCanceled()) {</div><div class=\"line\">                mRequest.finish(&quot;canceled-at-delivery&quot;);</div><div class=\"line\">                return;</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // Deliver a normal response or error, depending.</div><div class=\"line\">            if (mResponse.isSuccess()) {</div><div class=\"line\">                 mRequest.deliverResponse(mResponse.result);</div><div class=\"line\">            } else {</div><div class=\"line\">                mRequest.deliverError(mResponse.error);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // If this is an intermediate response, add a marker, otherwise we&apos;re done</div><div class=\"line\">            // and the request can be finished.</div><div class=\"line\">            if (mResponse.intermediate) {</div><div class=\"line\">                mRequest.addMarker(&quot;intermediate-response&quot;);</div><div class=\"line\">            } else {</div><div class=\"line\">                mRequest.finish(&quot;done&quot;);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // If we have been provided a post-delivery runnable, run it.</div><div class=\"line\">            if (mRunnable != null) {</div><div class=\"line\">                mRunnable.run();</div><div class=\"line\">            }</div><div class=\"line\">       }</div></pre></td></tr></table></figure>\n<p>&#x4E3B;&#x8981;&#x662F;&#x7B2C;<code>9</code>&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x54CD;&#x5E94;&#x505A;&#x4E0D;&#x540C;&#x7684;&#x9012;&#x9001;&#xFF0C;<code>deliverResponse</code>&#x4E0E;<code>deliverError</code>&#x5185;&#x90E8;&#x5206;&#x522B;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x975E;&#x5E38;&#x719F;&#x6089;&#x7684;<code>Listener</code>&#x4E2D;&#x7684;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FDB;&#x800C;&#x8FD4;&#x56DE;&#x5230;&#x6211;&#x4EEC;&#x5BF9;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7ED3;&#x679C;&#x7684;&#x5904;&#x7406;&#x51FD;&#x6570;&#x3002;</p>\n<p>&#x8FD9;&#x5C31;&#x662F;&#x6574;&#x4E2A;&#x7684;&#x7F13;&#x5B58;&#x6D3E;&#x9063;&#xFF0C;&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x5B58;&#x5728;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x5C31;&#x4E0D;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5206;&#x53D1;&#x9012;&#x9001;&#x3002;&#x53CD;&#x4E4B;&#x6267;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;<br>&#x4E0B;&#x9762;&#x6211;&#x6765;&#x770B;&#x4E0B;<code>NetworkDispatcher</code>&#x662F;&#x5982;&#x4F55;&#x5904;&#x7406;&#x7684;</p>\n<h1 id=\"NetworkDispatcher\"><a href=\"#NetworkDispatcher\" class=\"headerlink\" title=\"NetworkDispatcher\"></a>NetworkDispatcher</h1><h2 id=\"run-1\"><a href=\"#run-1\" class=\"headerlink\" title=\"run\"></a>run</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void run() {</div><div class=\"line\">         Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);</div><div class=\"line\">        while (true) {</div><div class=\"line\">            long startTimeMs = SystemClock.elapsedRealtime();</div><div class=\"line\">            Request&lt;?&gt; request;</div><div class=\"line\">            try {</div><div class=\"line\">                // Take a request from the queue.</div><div class=\"line\">                request = mQueue.take();</div><div class=\"line\">            } catch (InterruptedException e) {</div><div class=\"line\">                // We may have been interrupted because it was time to quit.</div><div class=\"line\">                if (mQuit) {</div><div class=\"line\">                    return;</div><div class=\"line\">                }</div><div class=\"line\">                continue;</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            try {</div><div class=\"line\">                request.addMarker(&quot;network-queue-take&quot;);</div><div class=\"line\"> </div><div class=\"line\">                // If the request was cancelled already, do not perform the</div><div class=\"line\">                // network request.</div><div class=\"line\">                if (request.isCanceled()) {</div><div class=\"line\">                    request.finish(&quot;network-discard-cancelled&quot;);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\"> </div><div class=\"line\">                addTrafficStatsTag(request);</div><div class=\"line\"> </div><div class=\"line\">                // Perform the network request.</div><div class=\"line\">                NetworkResponse networkResponse = mNetwork.performRequest(request);</div><div class=\"line\">                request.addMarker(&quot;network-http-complete&quot;);</div><div class=\"line\"> </div><div class=\"line\">                // If the server returned 304 AND we delivered a response already,</div><div class=\"line\">                // we&apos;re done -- don&apos;t deliver a second identical response.</div><div class=\"line\">                if (networkResponse.notModified &amp;&amp; request.hasHadResponseDelivered()) {</div><div class=\"line\">                    request.finish(&quot;not-modified&quot;);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\"> </div><div class=\"line\">                // Parse the response here on the worker thread.</div><div class=\"line\">                Response&lt;?&gt; response = request.parseNetworkResponse(networkResponse);</div><div class=\"line\">                request.addMarker(&quot;network-parse-complete&quot;);</div><div class=\"line\"> </div><div class=\"line\">                // Write to cache if applicable.</div><div class=\"line\">                // TODO: Only update cache metadata instead of entire record for 304s.</div><div class=\"line\">                if (request.shouldCache() &amp;&amp; response.cacheEntry != null) {</div><div class=\"line\">                     mCache.put(request.getCacheKey(), response.cacheEntry);</div><div class=\"line\">                    request.addMarker(&quot;network-cache-written&quot;);</div><div class=\"line\">                }</div><div class=\"line\"> </div><div class=\"line\">                // Post the response back.</div><div class=\"line\">                request.markDelivered();</div><div class=\"line\">                mDelivery.postResponse(request, response);</div><div class=\"line\">            } catch (VolleyError volleyError) {</div><div class=\"line\">                 volleyError.setNetworkTimeMs(SystemClock.elapsedRealtime() - startTimeMs);</div><div class=\"line\">                parseAndDeliverNetworkError(request, volleyError);</div><div class=\"line\">            } catch (Exception e) {</div><div class=\"line\">                VolleyLog.e(e, &quot;Unhandled exception %s&quot;, e.toString());</div><div class=\"line\">                VolleyError volleyError = new VolleyError(e);</div><div class=\"line\">                 volleyError.setNetworkTimeMs(SystemClock.elapsedRealtime() - startTimeMs);</div><div class=\"line\">                mDelivery.postError(request, volleyError);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x4E5F;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x7684;<code>while</code>,&#x540C;&#x6837;&#x4E5F;&#x662F;&#x5148;&#x83B7;&#x53D6;<code>request</code>&#xFF0C;&#x4E0D;&#x8FC7;&#x662F;&#x4ECE;<code>mQueue</code>&#x4E2D;&#xFF0C;&#x5373;&#x524D;&#x9762;&#x591A;&#x6B21;&#x51FA;&#x73B0;&#x7684;<code>mNetWorkQueue</code>,&#x901A;&#x8FC7;&#x770B;&#x4EE3;&#x7801;&#x53D1;&#x73B0;&#x4E00;&#x4E9B;&#x5B9E;&#x73B0;&#x8DDF;<code>CacheDispatcher</code>&#x4E2D;&#x7684;&#x7C7B;&#x4F3C;&#x3002;&#x4E5F;&#x6B63;&#x5982;&#x56FE;&#x7247;&#x4E2D;&#x6240;&#x5C55;&#x793A;&#x7684;&#x4E00;&#x6837;&#xFF0C;&#xFF08;<code>23</code>&#x884C;&#xFF09;&#x5982;&#x4F55;&#x8BF7;&#x6C42;&#x53D6;&#x6D88;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;<code>finish</code>&#xFF1B;&#x5426;&#x5219;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x8C03;&#x7528;(<code>31</code>&#x884C;)<code>mNetwork.performRequest(request)</code>&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>mNetWork</code>&#x5373;&#x4E3A;&#x524D;&#x9762;<code>RequestQueue</code>&#x4E2D;&#x5BF9;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#x7684;<code>stack</code>&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x5206;&#x522B;&#x8C03;&#x7528;<code>HurlStack</code>&#x4E0E;<code>HttpClientStack</code>&#x5404;&#x81EA;&#x7684;<code>performRequest</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x6784;&#x9020;&#x8BF7;&#x6C42;&#x5934;&#x4E0E;&#x53C2;&#x6570;&#x5206;&#x522B;&#x4F7F;&#x7528;<code>HttpClient</code>&#x6216;&#x8005;<code>HttpUrlConnection</code>&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;<code>42</code>&#x884C;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x4E0E;<code>CacheDispatcher</code>&#x4E2D;&#x7684;&#x4E00;&#x6837;&#x8FDB;&#x884C;<code>response</code>&#x8FDB;&#x884C;&#x89E3;&#x6790;&#xFF0C;&#x7136;&#x540E;&#x5982;&#x679C;&#x9700;&#x8981;&#x7F13;&#x5B58;&#x5C31;&#x52A0;&#x5165;&#x5230;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x6700;&#x540E;&#xFF08;<code>54</code>&#x884C;&#xFF09;&#x518D;&#x8C03;&#x7528;<code>mDelivery.postResponse(request, response)</code>&#x8FDB;&#x884C;&#x9012;&#x9001;&#x3002;&#x81F3;&#x4E8E;&#x540E;&#x9762;&#x7684;&#x5269;&#x4F59;&#x7684;&#x6B65;&#x9AA4;&#x4E0E;<code>CacheDispatcher</code>&#x4E2D;&#x7684;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x7D2F;&#x8D58;&#x4E86;&#x3002;</p>\n<blockquote>\n<p><em>&#x597D;&#x4E86;&#xFF0C;<code>Volley</code>&#x7684;&#x6E90;&#x7801;&#x89E3;&#x6790;&#x5148;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x56DE;&#x8FC7;&#x53BB;&#x770B;&#x90A3;&#x5F20;&#x56FE;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5F88;&#x6E05;&#x6670;&#x4E86;&#x5462;?</em></p>\n</blockquote>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x6211;&#x4EEC;&#x6765;&#x5BF9;&#x4F7F;&#x7528;<code>Volley</code>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x505A;&#x4E2A;&#x603B;&#x7ED3;</p>\n<ul>\n<li>&#x901A;&#x8FC7;<code>newRequestQueue</code>&#x521D;&#x59CB;&#x5316;&#x4E0E;&#x6784;&#x9020;<code>RequestQueue</code></li>\n<li>&#x8C03;&#x7528;<code>RequestQueue</code>&#x4E2D;&#x7684;<code>add</code>&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;<code>request</code>&#x5230;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x4E2D;</li>\n<li>&#x7F13;&#x5B58;&#x6D3E;&#x9063;&#xFF0C;&#x5148;&#x8FDB;&#x884C;<code>CacheDispatcher</code>,&#x5224;&#x65AD;&#x7F13;&#x5B58;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x6709;&#x5219;&#x89E3;&#x6790;<code>response</code>&#xFF0C;&#x518D;&#x76F4;&#x63A5;<code>postResponse</code>&#x9012;&#x9001;&#xFF0C;&#x5426;&#x5219;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;</li>\n<li>&#x7F51;&#x7EDC;&#x6D3E;&#x9063;&#xFF0C;<code>NetworkDispatcher</code>&#x4E2D;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;<code>request</code>&#x8BF7;&#x6C42;&#xFF0C;&#x89E3;&#x6790;<code>response</code>&#x5982;&#x8BBE;&#x7F6E;&#x4E86;&#x7F13;&#x5B58;&#x5C31;&#x5C06;&#x7ED3;&#x679C;&#x4FDD;&#x5B58;&#x5230;<code>cache</code>&#x4E2D;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x6700;&#x540E;&#x7684;<code>postResponse</code>&#x9012;&#x9001;&#x3002;</li>\n</ul>\n"},{"title":"AIDL入门","url":"https://idisfkj.github.io/2016/09/25/AIDL入门/","content":"<p>&#x4E00;&#x76F4;&#x542C;&#x8BF4;<code>AIDL</code>&#x4F46;&#x662F;&#x81EA;&#x5DF1;&#x8FD8;&#x6CA1;&#x6709;&#x771F;&#x6B63;&#x4F7F;&#x7528;&#x8FC7;&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x78B0;&#x5230;&#x8FC7;&#x4F7F;&#x7528;&#x5B83;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4F46;&#x8FD9;&#x5E76;&#x4E0D;&#x80FD;&#x6210;&#x4E3A;&#x6211;&#x4E0D;&#x53BB;&#x4E86;&#x89E3;&#x5B83;&#x7684;&#x501F;&#x53E3;&#x3002;&#x73B0;&#x5728;&#x8FD8;&#x6CA1;&#x6709;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x548C;&#x6211;&#x4E00;&#x8D77;&#x8FDB;&#x884C;&#x4E86;&#x89E3;&#xFF08;&#x4EC5;&#x9650;&#x4E8E;&#x5165;&#x95E8;&#xFF0C;&#x5927;&#x795E;&#x53EF;&#x4EE5;&#x79FB;&#x6B65;&#x4E86;&#xFF09;</p>\n<h2 id=\"&#x4EC0;&#x4E48;&#x662F;AIDL\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;AIDL\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;AIDL\"></a>&#x4EC0;&#x4E48;&#x662F;AIDL</h2><p>&#x4EC0;&#x4E48;&#x662F;AIDL&#x5462;&#xFF1F;&#x5B83;&#x7684;&#x5168;&#x79F0;&#x662F;<code>Android Interface Definition Language</code>,&#x4E2D;&#x6587;&#x540D;&#x5B57;&#x5C31;&#x662F;<code>Android</code>&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x8BED;&#x8A00;&#x3002;<code>Android</code>&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x95F4;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x5185;&#x5B58;&#x5171;&#x4EAB;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x540C;&#x7684;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;<code>Android</code>&#x91C7;&#x7528;&#x8FDC;&#x7A0B;&#x8FC7;&#x7A0B;&#x8C03;&#x5EA6;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x4E00;&#x79CD;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x4E0E;&#x516C;&#x5F00;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x8DE8;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#x6210;&#x4E3A;AIDL&#x3002;</p>\n<h2 id=\"&#x5B9E;&#x73B0;AIDL&#x7684;&#x6B65;&#x9AA4;\"><a href=\"#&#x5B9E;&#x73B0;AIDL&#x7684;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;AIDL&#x7684;&#x6B65;&#x9AA4;\"></a>&#x5B9E;&#x73B0;AIDL&#x7684;&#x6B65;&#x9AA4;</h2><p>&#x603B;&#x4F53;&#x6765;&#x8BF4;&#x6211;&#x628A;&#x5176;&#x5206;&#x4E3A;3&#x4E2A;&#x6B65;&#x9AA4;</p>\n<ul>\n<li>&#x521B;&#x5EFA;&#x76F8;&#x5E94;&#x7684;<code>.aidl</code>&#x6587;&#x4EF6;&#xFF0C;&#x4E0E;&#x9700;&#x8981;&#x7684;&#x63A5;&#x53E3;</li>\n<li>&#x5B9E;&#x73B0;&#x521B;&#x5EFA;&#x7684;&#x63A5;&#x53E3;</li>\n<li>&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x66B4;&#x9732;&#x5B9E;&#x73B0;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5B9E;&#x73B0;&#x8C03;&#x7528;</li>\n</ul>\n<p>&#x4E0B;&#x9762;&#x6765;&#x8BE6;&#x7EC6;&#x7684;&#x8BF4;&#x8BF4;&#x5404;&#x4E2A;&#x6B65;&#x9AA4;&#x7684;&#x5B9E;&#x73B0;</p>\n<h2 id=\"&#x521B;&#x5EFA;-aidl&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;\"><a href=\"#&#x521B;&#x5EFA;-aidl&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;.aidl&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;\"></a>&#x521B;&#x5EFA;.aidl&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;</h2><p>&#x5728;<code>Android Studio</code>&#x4E2D;&#x65B0;&#x5EFA;&#x9879;&#x76EE;&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x7684;<code>src</code>&#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;<code>.aidl</code>&#x6587;&#x4EF6;</p>\n<p><img src=\"/2016/09/25/AIDL&#x5165;&#x95E8;/1.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x8FD9;&#x4E2A;&#x65B0;&#x5EFA;&#x7684;<code>.aidl</code>&#x6587;&#x4EF6;&#x662F;&#x5B9A;&#x4E49;&#x8FDC;&#x7A0B;&#x8FDB;&#x7A0B;&#x6240;&#x4EE5;&#x66B4;&#x9732;&#x7684;&#x63A5;&#x53E3;,&#x6211;&#x8FD9;&#x91CC;&#x547D;&#x540D;&#x4E3A;<code>IRemoteService</code>&#x3002;&#x521B;&#x5EFA;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x5728;<code>src/main/aidl</code>&#x4E2D;&#x627E;&#x5230;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x4EEC;&#x66B4;&#x9732;&#x4E00;&#x4E2A;<code>sayHello</code>&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x7684;&#x7C7B;&#x578B;&#x662F;<code>HelloMessage</code>&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">// IRemoteService.aidl</div><div class=\"line\">package com.idisfkj.aidldemo;</div><div class=\"line\"></div><div class=\"line\">// Declare any non-default types here with import statements</div><div class=\"line\">import com.idisfkj.aidldemo.HelloMessage;</div><div class=\"line\">interface IRemoteService {</div><div class=\"line\">    /**</div><div class=\"line\">     * Demonstrates some basic types that you can use as parameters</div><div class=\"line\">     * and return values in AIDL.</div><div class=\"line\">     */</div><div class=\"line\">    void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat,</div><div class=\"line\">            double aDouble, String aString);</div><div class=\"line\"></div><div class=\"line\">    HelloMessage sayHello();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6765;&#x521B;&#x5EFA;<code>HelloMessage</code>&#x7C7B;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7684;<code>main/java</code>&#x4E2D;&#x521B;&#x5EFA;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">package com.idisfkj.aidldemo;</div><div class=\"line\"></div><div class=\"line\">import android.os.Parcel;</div><div class=\"line\">import android.os.Parcelable;</div><div class=\"line\"></div><div class=\"line\">public class HelloMessage implements Parcelable{</div><div class=\"line\">    private String message;</div><div class=\"line\">    private int pId;</div><div class=\"line\"></div><div class=\"line\">    public HelloMessage(String message, int pId) {</div><div class=\"line\">        this.message = message;</div><div class=\"line\">        this.pId = pId;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    protected HelloMessage(Parcel in) {</div><div class=\"line\">        message = in.readString();</div><div class=\"line\">        pId = in.readInt();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public static final Creator&lt;HelloMessage&gt; CREATOR = new Creator&lt;HelloMessage&gt;() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public HelloMessage createFromParcel(Parcel in) {</div><div class=\"line\">            return new HelloMessage(in);</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        @Override</div><div class=\"line\">        public HelloMessage[] newArray(int size) {</div><div class=\"line\">            return new HelloMessage[size];</div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    public String getMessage() {</div><div class=\"line\">        return message;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setMessage(String message) {</div><div class=\"line\">        this.message = message;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public int getpId() {</div><div class=\"line\">        return pId;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setpId(int pId) {</div><div class=\"line\">        this.pId = pId;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public int describeContents() {</div><div class=\"line\">        return 0;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void writeToParcel(Parcel parcel, int i) {</div><div class=\"line\">        parcel.writeString(message);</div><div class=\"line\">        parcel.writeInt(pId);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x5305;&#x62EC;&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#x5B57;&#x6BB5;<code>message</code>&#x4E0E;<code>pId</code>,&#x4EE3;&#x8868;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8981;&#x4F20;&#x9012;&#x7684;&#x4FE1;&#x606F;&#x4E0E;&#x65B9;&#x4FBF;&#x67E5;&#x770B;&#x7684;&#x8FDB;&#x7A0B;<code>ID</code>&#x3002;&#x8FD9;&#x91CC;&#x5B9E;&#x73B0;&#x4E86;<code>Parcelable</code>&#x63A5;&#x53E3;&#xFF0C;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x3002;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x5230;&#x4E86;<code>Parcelable</code>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x56DE;&#x5230;<code>aidl</code>&#x76EE;&#x5F55;&#xFF0C;&#x518D;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x4E0E;<code>HelloMessage</code>&#x76F8;&#x540C;&#x540D;&#x5B57;&#x7684;<code>.aidl</code>&#x6587;&#x4EF6;&#xFF0C;&#x5185;&#x5BB9;&#x4E3A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">// HelloMessage.aidl</div><div class=\"line\">package com.idisfkj.aidldemo;</div><div class=\"line\"></div><div class=\"line\">// Declare any non-default types here with import statements</div><div class=\"line\"></div><div class=\"line\">parcelable HelloMessage;</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5728;&#x524D;&#x9762;&#x65B0;&#x5EFA;&#x7684;<code>IRemoteService.aidl</code>&#x6587;&#x4EF6;&#x4E2D;&#x5BFC;&#x5165;&#x8BE5;&#x7C7B;&#x578B;&#x7684;&#x5305;&#x3002;&#xFF08;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x524D;&#x9762;&#x8D34;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x6240;&#x9700;&#x7684;<code>.aidl</code>&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;&#x90FD;&#x5DF2;&#x7ECF;&#x5EFA;&#x597D;&#x4E86;&#xFF0C;&#x6700;&#x540E;&#x518D;<code>Build -&gt; Make Project</code>(&#x5982;&#x679C;&#x4F60;&#x662F;&#x5728;<code>Module</code>&#x4E2D;&#x5219;<code>Build -&gt; Make Module App</code>)&#x3002;&#x5B8C;&#x4E86;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x5728;<code>build/generated/source/aidl</code>&#x4E2D;&#x67E5;&#x770B;&#x751F;&#x6210;&#x7684;<code>IRemoteService</code>&#x3002;&#x6253;&#x5F00;&#x4E4B;&#x540E;&#x80FD;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x4FE1;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface IRemoteService extends android.os.IInterface</div><div class=\"line\">{</div><div class=\"line\">/** Local-side IPC implementation stub class. */</div><div class=\"line\">public static abstract class Stub extends android.os.Binder implements com.idisfkj.aidldemo.IRemoteService</div><div class=\"line\">{</div><div class=\"line\">private static final java.lang.String DESCRIPTOR = &quot;com.idisfkj.aidldemo.IRemoteService&quot;;</div><div class=\"line\">/** Construct the stub at attach it to the interface. */</div><div class=\"line\">public Stub()</div><div class=\"line\">{</div><div class=\"line\">this.attachInterface(this, DESCRIPTOR);</div><div class=\"line\">}</div><div class=\"line\">/**</div><div class=\"line\"> * Cast an IBinder object into an com.idisfkj.aidldemo.IRemoteService interface,</div><div class=\"line\"> * generating a proxy if needed.</div><div class=\"line\"> */</div><div class=\"line\">public static com.idisfkj.aidldemo.IRemoteService asInterface(android.os.IBinder obj)</div><div class=\"line\">{</div><div class=\"line\"> //&#x7701;&#x7565;</div></pre></td></tr></table></figure>\n<p>&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x62BD;&#x8C61;&#x7C7B;<code>Stub</code>&#xFF0C;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;<code>Binder</code>&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;<code>IRemoteService</code>&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>New IRemoteService.Stub()</code>&#x6765;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;,&#x540C;&#x65F6;&#x901A;&#x8FC7;<code>asInterface</code>&#x6765;&#x83B7;&#x53D6;&#x5176;&#x4EE3;&#x7406;&#xFF0C;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;\"><a href=\"#&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;\"></a>&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;</h2><p>&#x9996;&#x5148;&#x5EFA;&#x4E00;&#x4E2A;<code>Service</code>&#xFF0C;&#x901A;&#x8FC7;<code>Service</code>&#x7684;<code>onBind</code>&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x4F20;&#x9012;&#x7ED1;&#x5B9A;&#x7684;<code>IBinder</code>&#xFF0C;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x8BF4;&#x4E86;<code>Stub</code>&#x7EE7;&#x627F;&#x4E0E;<code>Binder</code>&#x800C;<code>Binder</code>&#x5B9E;&#x73B0;&#x4E86;<code>IBinder</code>&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>Stub</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class RemoteService extends Service {</div><div class=\"line\">    public RemoteService() {</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    IRemoteService.Stub mBinder = new IRemoteService.Stub() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat, double aDouble, String aString) throws RemoteException {</div><div class=\"line\"></div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        @Override</div><div class=\"line\">        public HelloMessage sayHello() throws RemoteException {</div><div class=\"line\">            return new HelloMessage(&quot;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;:&quot; + Thread.currentThread().toString() + &quot;\\n&quot;</div><div class=\"line\">                    + &quot;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;id:&quot; + Thread.currentThread().getId() + &quot;\\n&quot;</div><div class=\"line\">                    + &quot;&#x4E3B;&#x7EBF;&#x7A0B;id:&quot; + getMainLooper().getThread().getId(), Process.myPid());</div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public IBinder onBind(Intent intent) {</div><div class=\"line\">        // TODO: Return the communication channel to the service.</div><div class=\"line\">        return mBinder;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"&#x8C03;&#x7528;\"><a href=\"#&#x8C03;&#x7528;\" class=\"headerlink\" title=\"&#x8C03;&#x7528;\"></a>&#x8C03;&#x7528;</h2><p>&#x5728;<code>MainActivity</code>&#x4E2D;&#x7ED1;&#x5B9A;&#x5F00;&#x542F;<code>Service</code>&#xFF0C;&#x5B9E;&#x73B0;<code>ServiceConnection</code>,&#x5728;<code>onServiceConnected</code>&#x4E2D;&#x901A;&#x8FC7;<code>iRemoteService = IRemoteService.Stub.asInterface(iBinder);</code>&#x6765;&#x83B7;&#x53D6;&#x8C03;&#x7528;&#x7684;&#x4EE3;&#x7406;&#xFF0C;&#x6700;&#x540E;&#x8C03;&#x7528;<code>iRemoteService.sayHello()</code>&#x83B7;&#x53D6;&#x901A;&#x4FE1;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class MainActivity extends AppCompatActivity {</div><div class=\"line\"></div><div class=\"line\">    private TextView mPidText;</div><div class=\"line\">    private IRemoteService iRemoteService;</div><div class=\"line\">    private boolean mBind = false;</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onCreate(Bundle savedInstanceState) {</div><div class=\"line\">        super.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\">        mPidText = (TextView) findViewById(R.id.pid_text);</div><div class=\"line\">        mPidText.setText(&quot;&#x672C;&#x5730;id:&quot; + Process.myPid());</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onStart() {</div><div class=\"line\">        super.onStart();</div><div class=\"line\">        Intent intent = new Intent(MainActivity.this, RemoteService.class);</div><div class=\"line\">        bindService(intent, conn, BIND_AUTO_CREATE);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onStop() {</div><div class=\"line\">        super.onStop();</div><div class=\"line\">        unbindService(conn);</div><div class=\"line\">        mBind = false;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    private ServiceConnection conn = new ServiceConnection() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void onServiceConnected(ComponentName componentName, IBinder iBinder) {</div><div class=\"line\">            iRemoteService = IRemoteService.Stub.asInterface(iBinder);</div><div class=\"line\">            mBind = true;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        @Override</div><div class=\"line\">        public void onServiceDisconnected(ComponentName componentName) {</div><div class=\"line\">            iRemoteService = null;</div><div class=\"line\">            mBind = false;</div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    public void myClick(View view) {</div><div class=\"line\">        switch (view.getId()) {</div><div class=\"line\">            case R.id.show_pid_bt:</div><div class=\"line\">                if (mBind) {</div><div class=\"line\">                    try {</div><div class=\"line\">                        Log.v(&quot;TAG&quot;, &quot;&#x8FDC;&#x7A0B;id:&quot; + iRemoteService.sayHello().getpId());</div><div class=\"line\">                    } catch (RemoteException e) {</div><div class=\"line\">                        e.printStackTrace();</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">                break;</div><div class=\"line\">            case R.id.show_message_bt:</div><div class=\"line\">                if (mBind) {</div><div class=\"line\">                    try {</div><div class=\"line\">                        Log.v(&quot;TAG&quot;, &quot;Message:&quot; + iRemoteService.sayHello().getMessage());</div><div class=\"line\">                    } catch (RemoteException e) {</div><div class=\"line\">                        e.printStackTrace();</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">                break;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#x5728;<code>AndroidManifest.xml</code>&#x4E2D;&#x8981;&#x5BF9;<code>Service</code>&#x8FDB;&#x884C;&#x914D;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;service</div><div class=\"line\">            android:name=&quot;.RemoteService&quot;</div><div class=\"line\">            android:enabled=&quot;true&quot;</div><div class=\"line\">            android:exported=&quot;true&quot;</div><div class=\"line\">            android:process=&quot;:remote&quot;&gt;&lt;/service&gt;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6CE8;&#x610F;&#x56E0;&#x4E3A;&#x8981;&#x6A21;&#x4EFF;&#x8FDC;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5C06;process&#x8BBE;&#x7F6E;&#x6210;remote&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x8BBE;&#x7F6E;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#xFF0C;&#x4F46;&#x8FD9;&#x5C31;&#x4E0D;&#x662F;&#x4E0D;&#x540C;&#x8FDB;&#x7A0B;&#x4E2D;&#x7684;&#x901A;&#x4FE1;&#x4E86;&#xFF0C;aidl&#x5C31;&#x6CA1;&#x4EC0;&#x4E48;&#x610F;&#x4E49;&#x4E86;</em></p>\n</blockquote>\n<p>&#x6765;&#x770B;&#x4E0B;&#x6548;&#x679C;&#x5427;</p>\n<p><img src=\"/2016/09/25/AIDL&#x5165;&#x95E8;/2.png\" alt=\"&#x6548;&#x679C;\"></p>\n<p><img src=\"/2016/09/25/AIDL&#x5165;&#x95E8;/3.png\" alt=\"&#x6548;&#x679C;\"></p>\n<p>&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x7A0B;&#x662F;<code>26951</code>&#x800C;&#x670D;&#x52A1;&#x7AEF;&#x8FDB;&#x7A0B;&#x4E3A;<code>26974</code>&#xFF0C;&#x8BF4;&#x660E;&#x4ED6;&#x4EEC;&#x5904;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x8FD9;&#x6837;<code>AIDL</code>&#x4E5F;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x3002;&#x5F53;&#x7136;&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#x5C06;<code>process</code>&#x53BB;&#x6389;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x8FDB;&#x7A0B;&#x5C31;&#x662F;&#x4E00;&#x6837;&#x7684;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x5C31;&#x7559;&#x4E2A;&#x8BFB;&#x8005;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;&#x4E86;&#x3002;</p>\n<p>&#x6E90;&#x4EE3;&#x7801;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/AIDLDemo\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/AIDLDemo</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904;idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"React Native For Android","url":"https://idisfkj.github.io/2016/08/29/React-Native-For-Android/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><code>React Native</code>&#x6709;&#x70B9;&#x5927;&#x52BF;&#x6240;&#x8D8B;&#xFF0C;&#x6240;&#x4EE5;&#x524D;&#x6BB5;&#x65F6;&#x95F4;&#x7814;&#x7A76;&#x4E86;&#x4E0B;&#x5B83;&#xFF0C;&#x770B;&#x4E86;&#x5B83;&#x7684;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x540C;&#x65F6;&#x4E5F;&#x5728;<code>Github</code>&#x6D4F;&#x89C8;&#x4E86;&#x524D;&#x8F88;&#x4EEC;&#x7684;&#x6770;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x5DF1;&#x4E5F;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;<code>Demo</code>&#x4E5F;&#x7B97;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x5165;&#x95E8;&#x3002;&#x914D;&#x5408;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E0E;&#x4EE3;&#x7801;&#x5B9E;&#x4F8B;&#x76F8;&#x4FE1;&#x90FD;&#x80FD;&#x5F88;&#x5FEB;&#x7684;&#x8FDB;&#x5165;<code>React Native</code>&#x7684;&#x4E16;&#x754C;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4ECB;&#x7ECD;&#x7684;&#x4E0D;&#x4F1A;&#x5F88;&#x8BE6;&#x7EC6;&#xFF0C;&#x662F;&#x9488;&#x5BF9;<code>React Native</code>&#x8BED;&#x6CD5;&#x6709;&#x4E00;&#x5B9A;&#x4F1A;&#x57FA;&#x7840;&#x7684;&#x540C;&#x5B66;&#x3002;</p>\n<h1 id=\"React-Native&#x4ECB;&#x7ECD;\"><a href=\"#React-Native&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"React Native&#x4ECB;&#x7ECD;\"></a>React Native&#x4ECB;&#x7ECD;</h1><p>&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;<code>React Native</code></p>\n<ul>\n<li>&#x5B83;&#x662F;&#x501F;&#x52A9;&#x4E8E;<code>FaceBook</code>&#x73B0;&#x6709;&#x7684;&#x8F6E;&#x5B50;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;<code>ISO</code>&#x548C;<code>Android</code>&#x4E24;&#x5927;&#x5E73;&#x53F0;&#x7684;&#x652F;&#x6301;</li>\n<li>&#x4F7F;&#x7528;<code>React.js</code>&#x6765;&#x64CD;&#x4F5C;&#x539F;&#x751F;&#x7684;<code>UI</code>&#x7EC4;&#x4EF6;&#xFF0C;&#x66FF;&#x4EE3;&#x4E86;<code>DOM</code>&#x5143;&#x7D20;</li>\n<li>&#x5728;<code>UI</code>&#x65B9;&#x9762;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;<code>Flexbox</code>&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x652F;&#x6301;<code>css-layout</code>&#x6837;&#x5F0F;</li>\n<li>&#x4F7F;&#x7528;<code>JSX</code>&#x6765;&#x8F6C;&#x6362;&#x6210;<code>JS</code>&#x6765;&#x6267;&#x884C;&#xFF0C;<code>JSX</code>&#x662F;&#x4E00;&#x79CD;&#x7C7B;&#x4F3C;&#x4E8E;<code>XML</code>&#x8BED;&#x6CD5;&#x7684;&#x811A;&#x6B65;&#x6269;&#x5C55;&#x8BED;&#x8A00;&#x3002;</li>\n</ul>\n<p>&#x5BF9;&#x4E8E;<code>React Native</code>&#x7684;&#x73AF;&#x5883;&#x642D;&#x5EFA;,&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;<a href=\"https://facebook.github.io/react-native/docs/getting-started.html\" target=\"_blank\" rel=\"external\">Getting Started</a>,&#x5982;&#x679C;&#x82F1;&#x6587;&#x4E0D;&#x597D;&#x7684;&#x522B;&#x6025;&#xFF0C;&#x8FD9;&#x91CC;&#x8FD8;&#x6709;&#x4E2D;&#x6587;&#x7248;&#x7684;<a href=\"http://reactnative.cn/docs/0.31/getting-started.html\" target=\"_blank\" rel=\"external\">Getting Started</a></p>\n<blockquote>\n<p><em>&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x82F1;&#x6587;&#x7248;&#x7684;&#xFF0C;&#x4E2D;&#x6587;&#x7248;&#x7684;&#x8FD8;&#x662F;&#x5B58;&#x5728;&#x5751;&#xFF0C;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;Demo&#x4E2D;&#x7528;&#x5230;&#x7684;&#x7EC4;&#x4EF6;</em></p>\n</blockquote>\n<h1 id=\"Navigator\"><a href=\"#Navigator\" class=\"headerlink\" title=\"Navigator\"></a>Navigator</h1><p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5BFC;&#x822A;&#x5668;,&#x76F4;&#x767D;&#x7684;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x754C;&#x9762;&#x4E4B;&#x95F4;&#x7684;&#x8DF3;&#x8F6C;&#xFF0C;&#x5728;<code>React Native</code>&#x4E2D;&#x501F;&#x52A9;&#x5B83;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5B9E;&#x73B0;&#x754C;&#x9762;&#x7684;&#x5207;&#x6362;&#x3002;&#x5B9E;&#x73B0;&#x5B83;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x51E0;&#x4E2A;&#x5FC5;&#x8981;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;Navigator initialRoute={{title: &apos;&#x4E3B;&#x9875;&apos;, component: Welcome}}</div><div class=\"line\">          configureScene={(route,routeStack) =&gt; Navigator.SceneConfigs.FloatFromLeft}</div><div class=\"line\">          renderScene={this.renderScene}/&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"initialRoute\"><a href=\"#initialRoute\" class=\"headerlink\" title=\"initialRoute\"></a>initialRoute</h2><p><code>Navigator</code>&#x90FD;&#x662F;&#x7531;<code>route</code>&#x6765;&#x63A7;&#x5236;&#x8DF3;&#x8F6C;&#x8DEF;&#x7EBF;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5F00;&#x59CB;&#x4F7F;&#x7528;&#x65F6;&#x8981;&#x521D;&#x59CB;&#x5316;<code>route</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">initialRoute={{title: &apos;&#x4E3B;&#x9875;&apos;, component: Welcome}}</div></pre></td></tr></table></figure>\n<p>&#x91CC;&#x9762;&#x7684;&#x53C2;&#x6570;&#x540D;&#x4E0D;&#x53D7;&#x9650;&#x5236;&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x5FC5;&#x987B;&#x8981;&#x6307;&#x660E;&#x8DF3;&#x8F6C;&#x7684;<code>Componnet</code>&#x7EC4;&#x4EF6;&#x540D;&#xFF0C;&#x65B9;&#x4FBF;&#x5728;&#x540E;&#x7EED;&#x6267;&#x884C;&#x4E2D;&#x53D6;&#x51FA;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>route.component</code>&#x53D6;&#x51FA;&#x3002;</p>\n<h2 id=\"renderScene\"><a href=\"#renderScene\" class=\"headerlink\" title=\"renderScene\"></a>renderScene</h2><p>&#x8BE5;&#x914D;&#x7F6E;&#x5C31;&#x662F;&#x6267;&#x884C;&#x6CA1;&#x4E00;&#x4E2A;<code>route</code>&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#xFF0C;&#x4ECE;&#x800C;&#x6E32;&#x67D3;&#x51FA;&#x6765;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E24;&#x4E2A;&#x5185;&#x7F6E;&#x53C2;&#x6570;<code>route</code>&#x4E0E;<code>navigator</code>&#xFF0C;&#x6765;&#x65B9;&#x4FBF;&#x6E32;&#x67D3;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">renderScene={this.renderScene}</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">renderScene(route, navigator){</div><div class=\"line\">    _navigator = navigator;</div><div class=\"line\">    let DefaultComponet = route.component;</div><div class=\"line\">    return &lt;DefaultComponet</div><div class=\"line\">      route = {route} navigator = {navigator}/&gt;</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x5728;<code>renderScene</code>&#x4E2D;&#x6211;&#x4EEC;&#x53D6;&#x51FA;&#x6BCF;&#x6B21;&#x8981;&#x5BFC;&#x822A;&#x7684;<code>Component</code>&#xFF0C;&#x540C;&#x65F6;&#x6E32;&#x67D3;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x4E14;&#x628A;<code>route</code>&#x4E0E;<code>navigator</code>&#x4F20;&#x5230;&#x6E32;&#x67D3;&#x7684;&#x754C;&#x9762;&#x4E2D;&#x3002;&#x5728;&#x6E32;&#x67D3;&#x754C;&#x9762;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>this.props.rout</code>&#x4E0E;<code>this.props.navigator</code>&#x6765;&#x83B7;&#x53D6;&#x3002;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x5C31;&#x662F;&#x8981;&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">this.renderScene = this.renderScene.bind(this);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x4E0D;&#x61C2;props&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x67E5;&#x9605;&#x5B98;&#x65B9;&#x6587;&#x6863;</em></p>\n</blockquote>\n<h2 id=\"push&#x4E0E;pop\"><a href=\"#push&#x4E0E;pop\" class=\"headerlink\" title=\"push&#x4E0E;pop\"></a>push&#x4E0E;pop</h2><p><code>Navigator</code>&#x63D0;&#x4F9B;&#x4E86;<code>push</code>&#x4E0E;<code>pop</code>&#x65B9;&#x6CD5;&#x6765;&#x63A7;&#x5236;<code>route</code>&#x7684;&#x8DEF;&#x7EBF;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x6211;&#x4EEC;&#x719F;&#x77E5;&#x7684;&#x6808;&#x3002;&#x901A;&#x8FC7;<code>push</code>&#x6765;&#x8BBE;&#x7F6E;&#x4E0B;&#x4E00;&#x4E2A;&#x5BFC;&#x822A;&#x7684;<code>route</code>&#xFF0C;&#x901A;&#x8FC7;<code>pop</code>&#x6765;&#x9000;&#x51FA;&#x8BE5;&#x754C;&#x9762;&#x8FD4;&#x56DE;&#x539F;&#x6765;&#x7684;&#x754C;&#x9762;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;TouchableOpacity onPress={() =&gt; this.props.navigator.push({</div><div class=\"line\">        title: &apos;&#x8BE6;&#x60C5;&apos;,</div><div class=\"line\">        component: Detail,</div><div class=\"line\">        number: rowID,</div><div class=\"line\">      })}&gt;</div><div class=\"line\">      &lt;View style={styles.item}&gt;</div><div class=\"line\">        &lt;View style={styles.content}&gt;</div><div class=\"line\">          &lt;Text style={styles.des}&gt;</div><div class=\"line\">            {rowData.title}</div><div class=\"line\">          &lt;/Text&gt;</div><div class=\"line\">          ....</div><div class=\"line\">      &lt;/View&gt;</div><div class=\"line\">&lt;/TouchableOpacity&gt;</div></pre></td></tr></table></figure>\n<p><code>TouchableOpacity</code>&#x662F;&#x4E00;&#x4E2A;&#x70B9;&#x51FB;&#x76D1;&#x542C;&#x7EC4;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;TouchableOpacity onPress={() =&gt; this.props.navigator.pop()}&gt;</div><div class=\"line\">            &lt;Image source={require(&apos;../imgs/back.png&apos;)} style={styles.back}/&gt;</div><div class=\"line\">          &lt;/TouchableOpacity&gt;</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x70B9;&#x51FB;&#x4EE5;&#x540E;&#x6E32;&#x67D3;&#x51FA;&#x6765;&#x7684;&#x754C;&#x9762;&#x4E2D;&#x8C03;&#x7528;<code>pop</code>&#x65B9;&#x6CD5;&#x9000;&#x51FA;&#x8BE5;&#x6E32;&#x67D3;.</p>\n<h1 id=\"ListView\"><a href=\"#ListView\" class=\"headerlink\" title=\"ListView\"></a>ListView</h1><p>&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5F88;&#x4EB2;&#x5207;&#xFF0C;&#x5B83;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;&#x8DDF;<code>Android</code>&#x4E2D;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;&#x4F46;&#x662F;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x5C31;&#x4E0D;&#x540C;&#x4E86;&#x54E6;&#x3002;&#x4E0D;&#x8FC7;&#x6574;&#x4F53;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x539F;&#x7406;&#x8FD8;&#x662F;&#x7C7B;&#x4F3C;&#x3002;&#x65E0;&#x975E;&#x4E5F;&#x8981;&#x6574;&#x4E2A;&#x7684;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x4E0E;&#x7ED1;&#x5B9A;&#x6CA1;&#x4E2A;<code>Item</code>&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<h2 id=\"rowHasChanged\"><a href=\"#rowHasChanged\" class=\"headerlink\" title=\"rowHasChanged\"></a>rowHasChanged</h2><p>&#x5728;&#x6E32;&#x67D3;&#x4E4B;&#x524D;&#x8981;&#x8BBE;&#x7F6E;&#x5224;&#x65AD;&#x8BE5;&#x6570;&#x636E;&#x662F;&#x5426;&#x9700;&#x8981;&#x4ECE;&#x65B0;&#x6E32;&#x67D3;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x51CF;&#x5C11;&#x8BB8;&#x591A;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x6E32;&#x67D3;&#x6B65;&#x9AA4;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x80FD;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">const listView = new ListView.DataSource({</div><div class=\"line\">      rowHasChanged: (r1,r2) =&gt; r1!==r2});</div></pre></td></tr></table></figure>\n<h2 id=\"cloneWithRows\"><a href=\"#cloneWithRows\" class=\"headerlink\" title=\"cloneWithRows\"></a>cloneWithRows</h2><p>&#x4E3A;<code>listView</code>&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x6E90;,&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>state</code>&#x72B6;&#x6001;&#x6765;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">this.state={</div><div class=\"line\">      dataSource: listView.cloneWithRows(this._rowData())};</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<h2 id=\"&#x7ED1;&#x5B9A;\"><a href=\"#&#x7ED1;&#x5B9A;\" class=\"headerlink\" title=\"&#x7ED1;&#x5B9A;\"></a>&#x7ED1;&#x5B9A;</h2><p>&#x6700;&#x540E;&#x5728;&#x6E32;&#x67D3;<code>render()</code>&#x751F;&#x547D;&#x5468;&#x671F;&#x65B9;&#x6CD5;&#x4E2D;&#x8FDB;&#x884C;&#x7EC4;&#x4EF6;&#x8D44;&#x6E90;&#x7ED1;&#x5B9A;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;ListView</div><div class=\"line\">            style={styles.container}</div><div class=\"line\">            dataSource={this.state.dataSource}</div><div class=\"line\">            renderRow={this._renderRow.bind(this)}/&gt;</div><div class=\"line\">          &lt;/View&gt;</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<code>dataSource</code>&#x4E0E;<code>renderRow</code>&#x662F;&#x4E24;&#x4E2A;&#x5FC5;&#x8981;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x662F;&#x7ED1;&#x5B9A;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x540E;&#x4E00;&#x4E2A;&#x662F;&#x7ED1;&#x5B9A;&#x6E32;&#x67D3;&#x7684;&#x6BCF;&#x4E00;&#x884C;&#x7684;&#x6570;&#x636E;&#x3002;&#x5176;&#x4E2D;<code>_renderRow</code>&#x662F;<code>Item</code>&#x7684;&#x5E03;&#x5C40;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">_renderRow(rowData,sectionID,rowID,highlightRow){</div><div class=\"line\">    return(</div><div class=\"line\">    &lt;TouchableOpacity onPress={() =&gt; this.props.navigator.push({</div><div class=\"line\">        title: &apos;&#x8BE6;&#x60C5;&apos;,</div><div class=\"line\">        component: Detail,</div><div class=\"line\">        number: rowID,</div><div class=\"line\">      })}&gt;</div><div class=\"line\">      &lt;View style={styles.item}&gt;</div><div class=\"line\">        &lt;View style={styles.content}&gt;</div><div class=\"line\">          &lt;Text style={styles.des}&gt;</div><div class=\"line\">            {rowData.title}</div><div class=\"line\">          &lt;/Text&gt;</div><div class=\"line\">          &lt;View style={styles.bottom}&gt;</div><div class=\"line\">            &lt;Text style={styles.fb}&gt;</div><div class=\"line\">              {&quot;&#x53D1;&#x5E03;: &quot;+rowData.fb}</div><div class=\"line\">            &lt;/Text&gt;</div><div class=\"line\">            &lt;Text style={styles.data}&gt;</div><div class=\"line\">              {&quot;&#x65E5;&#x671F;: &quot;+rowData.data}</div><div class=\"line\">            &lt;/Text&gt;</div><div class=\"line\">          &lt;/View&gt;</div><div class=\"line\">        &lt;/View&gt;</div><div class=\"line\">        &lt;Image style={styles.image}</div><div class=\"line\">        source={{uri: rowData.image}}/&gt;</div><div class=\"line\">      &lt;/View&gt;</div><div class=\"line\">      &lt;/TouchableOpacity&gt;</div><div class=\"line\">    );</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p><code>renderRow</code>&#x63D0;&#x4F9B;&#x4E86;&#x56DB;&#x4E2A;&#x53C2;&#x6570;<code>rowData,sectionID,rowID,highlightRow</code>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x5229;&#x7528;<code>rowData</code>&#x6765;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x6E90;&#x3002;&#x5E03;&#x5C40;&#x6837;&#x5F0F;&#x662F;&#x4F7F;&#x7528;<code>css-layout</code>&#x6765;&#x5B9E;&#x73B0;,&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x7EC4;&#x4EF6;&#x662F;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">style={{flex: 1}}</div></pre></td></tr></table></figure>\n<p>&#x6216;&#x8005;&#x901A;&#x8FC7;<code>StyleSheet</code>&#x6765;&#x7EDF;&#x4E00;&#x521B;&#x5EFA;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">const styles = StyleSheet.create({</div><div class=\"line\">  container: {</div><div class=\"line\">    flex: 1,</div><div class=\"line\">    backgroundColor: &apos;#F5FCFF&apos;,</div><div class=\"line\">  },</div><div class=\"line\">  title: {</div><div class=\"line\">    backgroundColor: &apos;royalblue&apos;,</div><div class=\"line\">    justifyContent: &apos;center&apos;,</div><div class=\"line\">    alignItems: &apos;center&apos;,</div><div class=\"line\">    borderColor: &apos;gray&apos;,</div><div class=\"line\">    borderBottomWidth: 1,</div><div class=\"line\">  },</div><div class=\"line\">  ...</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>css&#x8FD9;&#x91CC;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x81EA;&#x5DF1;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;</em></p>\n</blockquote>\n<h1 id=\"TabNavigator\"><a href=\"#TabNavigator\" class=\"headerlink\" title=\"TabNavigator\"></a>TabNavigator</h1><p>&#x8FD9;&#x91CC;&#x518D;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E0B;<code>TabNavigator</code>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x4E8E;<code>Android</code>&#x4E2D;&#x7684;<code>FragmentTabHost</code>&#x3002;&#x76F8;&#x4FE1;&#x90FD;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x662F;&#x4EC0;&#x4E48;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;TabNavigator&gt;</div><div class=\"line\">        &lt;TabNavigator.Item</div><div class=\"line\">          title=&quot;&#x65B0;&#x95FB;&quot;</div><div class=\"line\">          selected={this.state.selectedTab===&apos;news&apos;}</div><div class=\"line\">          selectedTitleStyle={styles.selectedText}</div><div class=\"line\">          titleStyle={styles.text}</div><div class=\"line\">          renderIcon={() =&gt; &lt;Image source={require(&apos;../imgs/ic_news.png&apos;)} style={styles.image}/&gt;}</div><div class=\"line\">          renderSelectedIcon={() =&gt; &lt;Image source={require(&apos;../imgs/ic_news_pressed.png&apos;)} style={styles.image}/&gt;}</div><div class=\"line\">          onPress={() =&gt; this.setState({selectedTab: &apos;news&apos;})}&gt;</div><div class=\"line\">          &lt;News {...this.props}/&gt;</div><div class=\"line\">        &lt;/TabNavigator.Item&gt;</div><div class=\"line\">        ...</div><div class=\"line\">&lt;/TabNavigator&gt;</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<code>&lt;TabNavigator.Item&gt;</code>&#x5B50;&#x6807;&#x7B7E;&#x6765;&#x8BBE;&#x7F6E;&#x6BCF;&#x4E00;&#x4E2A;&#x5E95;&#x90E8;<code>Item</code>&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x5728;&#x8BBE;&#x7F6E;&#x8BE5;<code>Item</code>&#x8981;&#x6E32;&#x67D3;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x4E0A;&#x9762;&#x7684;<code>News</code>&#x5C31;&#x662F;&#x8981;&#x6E32;&#x67D3;&#x7684;&#x754C;&#x9762;,&#x8BE5;&#x754C;&#x9762;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>export default News</code>&#x5BFC;&#x51FA;&#xFF0C;<code>import News from &apos;./News&apos;</code>&#x5BFC;&#x5165;&#x3002;</p>\n<blockquote>\n<p><em>&#x5148;&#x5C31;&#x4ECB;&#x7ECD;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6709;&#x9700;&#x8981;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#x6E90;&#x7801;,&#x540E;&#x7EED;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x518D;&#x505A;&#x6269;&#x5C55;</em></p>\n</blockquote>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/08/29/React-Native-For-Android/rn.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/RNDemo\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/RNDemo</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"hexo使用新node版本问题","url":"https://idisfkj.github.io/2016/08/29/hexo使用新node版本问题/","content":"<p>&#x4ECA;&#x5929;&#x5728;&#x4F7F;&#x7528;<code>hexo</code>&#x5199;&#x535A;&#x5BA2;&#x7684;&#x65F6;&#x5019;&#x53D1;&#x73B0;&#x4F7F;&#x7528;<code>hexo</code>&#x547D;&#x4EE4;&#x5C45;&#x7136;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div></pre></td><td class=\"code\"><pre><div class=\"line\">Error: Module version mismatch. Expected 48, got 47.</div><div class=\"line\">    at Error (native)</div><div class=\"line\">    at Object.Module._extensions..node (module.js:568:18)</div><div class=\"line\">    at Module.load (module.js:458:32)</div><div class=\"line\">    at tryModuleLoad (module.js:417:12)</div><div class=\"line\">    at Function.Module._load (module.js:409:3)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/dtrace-provider/dtrace-provider.js:17:23)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32)</div><div class=\"line\">    at tryModuleLoad (module.js:417:12)</div><div class=\"line\">    at Function.Module._load (module.js:409:3)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/bunyan/lib/bunyan.js:79:18)</div><div class=\"line\">{ Error: Cannot find module &apos;./build/default/DTraceProviderBindings&apos;</div><div class=\"line\">    at Function.Module._resolveFilename (module.js:440:15)</div><div class=\"line\">    at Function.Module._load (module.js:388:25)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/dtrace-provider/dtrace-provider.js:17:23)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32)</div><div class=\"line\">    at tryModuleLoad (module.js:417:12)</div><div class=\"line\">    at Function.Module._load (module.js:409:3)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/bunyan/lib/bunyan.js:79:18)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32) code: &apos;MODULE_NOT_FOUND&apos; }</div><div class=\"line\">{ Error: Cannot find module &apos;./build/Debug/DTraceProviderBindings&apos;</div><div class=\"line\">    at Function.Module._resolveFilename (module.js:440:15)</div><div class=\"line\">    at Function.Module._load (module.js:388:25)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/dtrace-provider/dtrace-provider.js:17:23)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32)</div><div class=\"line\">    at tryModuleLoad (module.js:417:12)</div><div class=\"line\">    at Function.Module._load (module.js:409:3)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/bunyan/lib/bunyan.js:79:18)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32) code: &apos;MODULE_NOT_FOUND&apos; }</div></pre></td></tr></table></figure>\n<p>&#x867D;&#x7136;&#x4E5F;&#x80FD;&#x8FD0;&#x884C;<code>hexo</code>&#xFF0C;&#x4F46;&#x662F;&#x60F3;&#x5230;&#x6BCF;&#x6B21;&#x770B;&#x5230;&#x8FD9;&#x79CD;&#x4E1C;&#x897F;&#x5FC3;&#x91CC;&#x90FD;&#x4E0D;&#x723D;&#xFF0C;&#x6240;&#x4EE5;&#x575A;&#x51B3;&#x8981;&#x89E3;&#x51B3;&#x5B83;&#x3002;&#x6700;&#x540E;&#x7ECF;&#x8FC7;&#x5404;&#x79CD;&#x67E5;&#x8D44;&#x6599;&#x53D1;&#x73B0;&#x662F;<code>node</code>&#x7684;&#x7248;&#x672C;&#x95EE;&#x9898;&#xFF0C;&#x7531;&#x4E8E;&#x524D;&#x6BB5;&#x65F6;&#x95F4;&#x641E;&#x4E86;&#x4E0B;<code>React-Native</code>&#x5347;&#x7EA7;&#x4E86;<code>node</code>&#x7248;&#x672C;&#xFF0C;&#x4EE5;&#x81F3;&#x4E8E;&#x73B0;&#x5728;&#x7684;<code>node</code>&#x7248;&#x672C;&#x662F;&#x6700;&#x65B0;&#x7684;<code>6.3.1</code>&#x3002;&#x7531;&#x4E8E;&#x65B0;&#x7248;&#x672C;&#x4E2D;&#x6709;&#x7684;&#x6A21;&#x5757;&#x4E0D;&#x652F;&#x6301;&#xFF0C;&#x6240;&#x6709;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x6309;&#x7167;&#x6D41;&#x884C;&#x7248;&#x5427;<code>(node4-lts)</code></p>\n<blockquote>\n<p><em>&#x597D;&#x4E86;&#x4E0B;&#x9762;&#x8BF4;&#x4E0B;&#x5177;&#x4F53;&#x89E3;&#x51B3;&#x6B65;&#x9AA4;</em></p>\n</blockquote>\n<h2 id=\"&#x89E3;&#x51B3;&#x65B9;&#x6848;\"><a href=\"#&#x89E3;&#x51B3;&#x65B9;&#x6848;\" class=\"headerlink\" title=\"&#x89E3;&#x51B3;&#x65B9;&#x6848;\"></a>&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><p>&#x65E2;&#x7136;&#x77E5;&#x9053;&#x539F;&#x56E0;&#x90A3;&#x5C31;&#x597D;&#x529E;&#x4E86;&#xFF0C;&#x53EA;&#x8981;&#x66F4;&#x6539;<code>node</code>&#x7684;&#x7248;&#x672C;&#x3002;</p>\n<h3 id=\"&#x67E5;&#x770B;&#x7248;&#x672C;\"><a href=\"#&#x67E5;&#x770B;&#x7248;&#x672C;\" class=\"headerlink\" title=\"&#x67E5;&#x770B;&#x7248;&#x672C;\"></a>&#x67E5;&#x770B;&#x7248;&#x672C;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew install homebrew/versions/node</div></pre></td></tr></table></figure>\n<h3 id=\"&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;\"><a href=\"#&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;\"></a>&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew install homebrew/versions/node4-lts</div></pre></td></tr></table></figure>\n<h3 id=\"&#x5B89;&#x88C5;&#x6A21;&#x677F;\"><a href=\"#&#x5B89;&#x88C5;&#x6A21;&#x677F;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;&#x6A21;&#x677F;\"></a>&#x5B89;&#x88C5;&#x6A21;&#x677F;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo npm install hexo-cli -g</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x8FD0;&#x884C;&#x4E0B;<code>hexo server</code>&#x53D1;&#x73B0;&#x95EE;&#x9898;&#x89E3;&#x51B3;&#x4E86;&#x3002;</p>\n<p><em>&#x679C;&#x7136;&#x65B0;&#x7248;&#x672C;&#x8FD8;&#x662F;&#x4E0D;&#x8981;&#x8F7B;&#x6613;&#x4F7F;&#x7528;&#xFF0C;&#x8001;&#x7248;&#x672C;&#x8FD8;&#x662F;&#x76F8;&#x5BF9;&#x7A33;&#x5B9A;</em></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904;idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"LoopView-循环轮播控件","url":"https://idisfkj.github.io/2016/08/09/LoopView-循环轮播控件/","content":"<p>&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x6765;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#x65E5;&#x5E38;&#x770B;&#x5230;&#x7684;&#x5E7F;&#x544A;&#x8F6E;&#x64AD;&#x5668;&#xFF0C;&#x51E0;&#x4E4E;&#x6BCF;&#x4E2A;<code>App</code>&#x4E2D;&#x90FD;&#x62E5;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x63A7;&#x4EF6;&#x3002;&#x8FD9;&#x79CD;&#x4F7F;&#x7528;&#x9891;&#x7E41;&#x7684;&#x63A7;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x61C2;&#x5F97;&#x5B83;&#x4EEC;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x5DE5;&#x7A0B;&#x4E2D;&#x5C31;&#x80FD;&#x66F4;&#x52A0;&#x719F;&#x7EC3;&#x4E0E;&#x8F7B;&#x677E;&#x3002;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x6548;&#x679C;&#x5427;&#x3002;</p>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/08/09/LoopView-&#x5FAA;&#x73AF;&#x8F6E;&#x64AD;&#x63A7;&#x4EF6;/loopView.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<h1 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h1><p>&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x63A7;&#x4EF6;&#x7684;&#x5B9E;&#x73B0;&#x672C;&#x8D28;&#x5C31;&#x662F;&#x4E00;&#x4E2A;<code>ViewPager</code>&#xFF0C;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x5BF9;<code>ViewPager</code>&#x4E0D;&#x4F1A;&#x5F88;&#x964C;&#x751F;&#xFF0C;&#x4F8B;&#x5982;<code>ViewPager</code>+<code>Fragment</code>&#x5B9E;&#x73B0;&#x65B0;&#x95FB;&#x7684;&#x754C;&#x9762;&#x3002;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x8981;&#x660E;&#x786E;&#x6211;&#x4EEC;&#x6240;&#x8981;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;<code>ViewPager</code>&#x6ED1;&#x52A8;&#x5207;&#x6362;&#x753B;&#x9762;&#xFF0C;&#x540C;&#x65F6;&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;&#x5B83;&#x81EA;&#x5DF1;&#x80FD;&#x5FAA;&#x73AF;&#x5207;&#x6362;&#x3002;&#x597D;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x6765;&#x7B80;&#x8981;&#x7684;&#x89E3;&#x91CA;&#x4E0B;&#x6838;&#x5FC3;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>\n<h2 id=\"&#x521D;&#x59CB;&#x5316;\"><a href=\"#&#x521D;&#x59CB;&#x5316;\" class=\"headerlink\" title=\"&#x521D;&#x59CB;&#x5316;\"></a>&#x521D;&#x59CB;&#x5316;</h2><p>&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x8F6E;&#x64AD;&#x63A7;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8981;&#x81EA;&#x5B9A;&#x4E49;<code>LoopView</code>&#x63A7;&#x4EF6;&#xFF0C;&#x8BBE;&#x7F6E;&#x76F8;&#x5173;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#xFF0C;&#x4E0E;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E9B;&#x6BD4;&#x8F83;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x4F8B;&#x5982;&#x7ED1;&#x5B9A;&#x63A7;&#x4EF6;&#x3001;&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x4E0E;&#x83B7;&#x53D6;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x503C;&#x3002;&#x8FD9;&#x91CC;&#x5E03;&#x5C40;&#x6211;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x67E5;&#x770B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void init(Context context) {</div><div class=\"line\">        LayoutInflater.from(context).inflate(R.layout.loopview_layout, this, true);</div><div class=\"line\">        viewPager = (ViewPager) findViewById(R.id.loopView);</div><div class=\"line\">        linearCircler = (LinearLayout) findViewById(R.id.linear_circler);</div><div class=\"line\">        linearCirclerNo = (LinearLayout) findViewById(R.id.linear_circler_no);</div><div class=\"line\">        descript = (TextView) findViewById(R.id.descript);</div><div class=\"line\">        viewPager.addOnPageChangeListener(this);</div><div class=\"line\">        viewPager.setOnTouchListener(this);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x4E00;&#x4E9B;&#x5FC5;&#x8981;&#x7684;&#x5E03;&#x5C40;&#x586B;&#x5145;&#x4E0E;&#x76D1;&#x542C;&#x7ED1;&#x5B9A;&#xFF0C;&#x540C;&#x65F6;&#x6211;&#x8FD9;&#x91CC;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;&#x5C5E;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x8981;&#x83B7;&#x53D6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public LoopView(Context context, AttributeSet attrs, int defStyleAttr) {</div><div class=\"line\">        super(context, attrs, defStyleAttr);</div><div class=\"line\">        TypedArray typedArray = getContext().obtainStyledAttributes(attrs, R.styleable.LoopView);</div><div class=\"line\">        rate = typedArray.getInteger(R.styleable.LoopView_rate, DEF_RATE);</div><div class=\"line\">        bottomStyle = typedArray.getInteger(R.styleable.LoopView_bottom_style, DEF_BOTTOM_STYLE);</div><div class=\"line\">        typedArray.recycle();</div><div class=\"line\">        init(context);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<code>rate</code>&#x4EE3;&#x8868;&#x4E0B;&#x9762;&#x4F1A;&#x63D0;&#x5230;&#x7684;&#x8F6E;&#x64AD;&#x7684;&#x901F;&#x5EA6;&#xFF0C;<code>bottomStyle</code>&#x4EE3;&#x8868;&#x7684;&#x662F;<code>LoopView</code>&#x7684;&#x6837;&#x5F0F;&#x3002;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#x90FD;&#x662F;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x8BBE;&#x7F6E;&#x3002;</p>\n<h2 id=\"addOnPageChangeListener\"><a href=\"#addOnPageChangeListener\" class=\"headerlink\" title=\"addOnPageChangeListener\"></a>addOnPageChangeListener</h2><p>&#x8FD9;&#x4E2A;&#x662F;&#x76D1;&#x542C;<code>LoopView</code>&#x4E2D;<code>ViewPager</code>&#x63A7;&#x4EF6;&#x7684;<code>pager</code>&#x5207;&#x6362;&#x3002;&#x8981;&#x5B9E;&#x73B0;&#x5B83;&#x7684;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;<code>onPageScrolled</code>&#x3001;<code>onPageSelected</code>&#x4E0E;<code>onPageScrollStateChanged</code>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x8981;&#x7528;&#x7684;&#x662F;&#x4E2D;&#x95F4;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"onPageSelected\"><a href=\"#onPageSelected\" class=\"headerlink\" title=\"onPageSelected\"></a>onPageSelected</h3><p>&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;&#x5BF9;&#x754C;&#x9762;&#x4E2D;&#x5706;&#x70B9;&#x9009;&#x4E2D;&#x5207;&#x6362;&#x4E0E;&#x63CF;&#x8FF0;&#x6587;&#x672C;&#x7684;&#x5185;&#x5BB9;&#x7684;&#x53D8;&#x66F4;,&#x4EE3;&#x7801;&#x4E0D;&#x662F;&#x5F88;&#x591A;,&#x76F4;&#x63A5;&#x770B;&#x6E90;&#x7801;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">   public void onPageSelected(int position) {</div><div class=\"line\">       mCurrentPos = position;</div><div class=\"line\">       if (bottomStyle == getResources().getInteger(R.integer.loop_have_descript))</div><div class=\"line\">           descript.setText(list.get(position % list.size()).getDescript());</div><div class=\"line\">       for (int i = 0; i &lt; linearLayout.getChildCount(); i++) {</div><div class=\"line\">           if (i == position % list.size())</div><div class=\"line\">               linearLayout.getChildAt(i).setSelected(true);</div><div class=\"line\">           else</div><div class=\"line\">               linearLayout.getChildAt(i).setSelected(false);</div><div class=\"line\">       }</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<h2 id=\"setOnTouchListener\"><a href=\"#setOnTouchListener\" class=\"headerlink\" title=\"setOnTouchListener\"></a>setOnTouchListener</h2><p>&#x5B9E;&#x73B0;&#x89E6;&#x6478;&#x76D1;&#x542C;&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5728;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x5207;&#x6362;&#x65F6;&#xFF0C;<code>LoopView</code>&#x8FD8;&#x5728;&#x81EA;&#x5DF1;&#x5FAA;&#x73AF;&#x5207;&#x6362;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4F7F;&#x5F97;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x5207;&#x6362;&#x65F6;&#x4E0D;&#x534F;&#x8C03;&#x3002;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x624B;&#x6307;&#x89E6;&#x6478;&#x5230;<code>LoopView</code>&#x65F6;&#x505C;&#x6B62;&#x81EA;&#x52A8;&#x5FAA;&#x73AF;&#xFF0C;&#x5373;<code>ACTION_DOWN</code>&#x4E0E;<code>ACTION_MOVE</code>&#x3002;&#x5728;&#x624B;&#x6307;&#x79BB;&#x5F00;&#x65F6;&#x5F00;&#x542F;&#x5FAA;&#x73AF;&#xFF0C;&#x5373;<code>ACTION_UP</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">   public boolean onTouch(View view, MotionEvent motionEvent) {</div><div class=\"line\">       switch (motionEvent.getAction()) {</div><div class=\"line\">           case MotionEvent.ACTION_DOWN:</div><div class=\"line\">           case MotionEvent.ACTION_MOVE:</div><div class=\"line\">               pauseLoop();</div><div class=\"line\">               break;</div><div class=\"line\">           case MotionEvent.ACTION_UP:</div><div class=\"line\">               if (mSes.isShutdown())</div><div class=\"line\">                   startLoop();</div><div class=\"line\">               break;</div><div class=\"line\">       }</div><div class=\"line\">       return false;</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x5FAA;&#x73AF;&#x64AD;&#x653E;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x662F;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5468;&#x671F;&#x6027;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x8BA9;&#x5B83;&#x5FAA;&#x73AF;&#x81EA;&#x52A8;&#x64CD;&#x4F5C;&#xFF0C;&#x501F;&#x52A9;&#x7684;&#x662F;<code>ScheduledExecutorService</code>&#x3002;&#x4E0B;&#x9762;&#x662F;<code>pauseLoop();</code>&#x4E0E;<code>startLoop()</code>&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void startLoop() {</div><div class=\"line\">        mSes = Executors.newSingleThreadScheduledExecutor();</div><div class=\"line\">        mSes.scheduleAtFixedRate(new AutoRunnable(), rate, rate, TimeUnit.SECONDS);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    protected void pauseLoop() {</div><div class=\"line\">        mSes.shutdown();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x63A7;&#x5236;&#x4E0E;&#x5B9E;&#x73B0;&#x5FAA;&#x73AF;&#x8F6E;&#x64AD;&#xFF0C;&#x539F;&#x7406;&#x5C31;&#x4ECB;&#x7ECD;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x8BF4;&#x4E0B;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5982;&#x4F55;&#x4F7F;&#x7528;</em></p>\n</blockquote>\n<h1 id=\"&#x4F7F;&#x7528;\"><a href=\"#&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;\"></a>&#x4F7F;&#x7528;</h1><h2 id=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"><a href=\"#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h2><h3 id=\"Maven\"><a href=\"#Maven\" class=\"headerlink\" title=\"Maven\"></a>Maven</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.idisfkj.loopview&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;loopview&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;2.0.0&lt;/version&gt;</div><div class=\"line\">  &lt;type&gt;pom&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.idisfkj.loopview:loopview:2.0.0&apos;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</em></p>\n</blockquote>\n<h2 id=\"&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;\"><a href=\"#&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;\" class=\"headerlink\" title=\"&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;\"></a>&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;</h2><p>&#x9996;&#x5148;&#x5728;&#x6839;&#x5E03;&#x5C40;&#x4E2D;&#x52A0;&#x4E0A;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x7684;&#x5F15;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">xmlns:loop=&quot;http://schemas.android.com/apk/res-auto&quot;</div></pre></td></tr></table></figure>\n<p>&#x5F15;&#x7528;<code>LoopView</code>&#x63A7;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;com.idisfkj.loopview.LoopView</div><div class=\"line\">            android:id=&quot;@+id/loop_view&quot;</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;200dp&quot;</div><div class=\"line\">            loop:bottom_style=&quot;@integer/loop_have_descript&quot;</div><div class=\"line\">            loop:rate=&quot;3&quot;&gt;</div><div class=\"line\">&lt;/com.idisfkj.loopview.LoopView&gt;</div></pre></td></tr></table></figure>\n<p><code>bottom_style</code>&#x4EE3;&#x8868;<code>LoopView</code>&#x5E95;&#x90E8;&#x6837;&#x5F0F;&#xFF0C;&#x6709;&#x4E09;&#x4E2A;&#x53EF;&#x9009;&#x503C;,&#x9ED8;&#x8BA4;&#x4E3A;<code>loop_have_descript</code></p>\n<ul>\n<li>loop_have_descript &#x4EE3;&#x8868;&#x6709;&#x63CF;&#x8FF0;&#x7684;&#x5E03;&#x5C40;</li>\n<li>loop_no_descript_right &#x4EE3;&#x8868;&#x6CA1;&#x6709;&#x63CF;&#x8FF0;&#x4E14;&#x5706;&#x70B9;&#x5C45;&#x53F3;&#x7684;&#x5E03;&#x5C40;</li>\n<li>loop_no_descript_center &#x4EE3;&#x8868;&#x6CA1;&#x6709;&#x63CF;&#x8FF0;&#x4E14;&#x5706;&#x70B9;&#x5C45;&#x4E2D;&#x7684;&#x5E03;&#x5C40;</li>\n</ul>\n<p><code>rate</code>&#x4EE3;&#x8868;&#x8F6E;&#x64AD;&#x7684;&#x901F;&#x5EA6;&#xFF0C;<code>&#x5355;&#x4F4D;&#x4E3A;s</code>,&#x9ED8;&#x8BA4;&#x4E3A;3s</p>\n<h2 id=\"&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;\"><a href=\"#&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;\"></a>&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">loopView.setDefaultImageView(xxx);</div><div class=\"line\">loopView.setErrorImageView(xxx);</div></pre></td></tr></table></figure>\n<h2 id=\"&#x586B;&#x5145;&#x6570;&#x636E;\"><a href=\"#&#x586B;&#x5145;&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x586B;&#x5145;&#x6570;&#x636E;\"></a>&#x586B;&#x5145;&#x6570;&#x636E;</h2><p>&#x586B;&#x5145;&#x6570;&#x636E;&#x9700;&#x8981;&#x501F;&#x52A9;<code>LoopViewEntity</code>&#x5B9E;&#x4F53;&#x7C7B;&#x6765;&#x5B58;&#x50A8;,&#x4F8B;&#x5982;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">for (int i = 0; i &lt; urls.length; i++) {</div><div class=\"line\">            LoopViewEntity entity = new LoopViewEntity();</div><div class=\"line\">            entity.setImageUrl(urls[i]);</div><div class=\"line\">            entity.setDescript(descripts[i]);</div><div class=\"line\">            list.add(entity);</div><div class=\"line\">        }</div><div class=\"line\">loopView.setLoopData(list);</div></pre></td></tr></table></figure>\n<h2 id=\"item&#x70B9;&#x51FB;&#x76D1;&#x542C;\"><a href=\"#item&#x70B9;&#x51FB;&#x76D1;&#x542C;\" class=\"headerlink\" title=\"item&#x70B9;&#x51FB;&#x76D1;&#x542C;\"></a>item&#x70B9;&#x51FB;&#x76D1;&#x542C;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">loopView.setOnItemClickListener(new LoopView.OnItemClickListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onItemClick(int position) {</div><div class=\"line\">                //to do ...</div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6B22;&#x8FCE;Star&#x4E0E;Fork&#xFF0C;&#x5982;&#x6709;&#x9700;&#x8981;&#x540E;&#x7EED;&#x6211;&#x4F1A;&#x7EE7;&#x7EED;&#x4F18;&#x5316;&#xFF0C;&#x6216;&#x8005;&#x52A0;&#x5165;&#x4E0E;&#x6211;&#x4E00;&#x8D77;&#x6765;&#x4F18;&#x5316;</em></p>\n</blockquote>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/AndroidLoopView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/AndroidLoopView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView下拉刷新与上拉更多","url":"https://idisfkj.github.io/2016/08/03/RecyclerView下拉刷新与上拉更多/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x5728;&#x539F;&#x6765;&#x7684;&#x6587;&#x7AE0;&#x4E2D;&#x6211;&#x63D0;&#x53CA;&#x4E86;&#x5982;&#x4F55;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#xFF0C;&#x4ECA;&#x5929;&#x6211;&#x4EEC;&#x6765;&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x6269;&#x5C55;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x5B9E;&#x73B0;&#x5E38;&#x7528;&#x7684;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x4E0E;&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5F53;&#x7136;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x7684;&#x5B9E;&#x73B0;&#x4E5F;&#x662F;&#x57FA;&#x4E8E;&#x524D;&#x9762;&#x7684;<a href=\"https://idisfkj.github.io/2016/07/05/RecyclerView%E6%B7%BB%E5%8A%A0header%E4%B8%8Efooter/\">RecyclerView&#x6DFB;&#x52A0;header&#x4E0E;footer</a>&#x4E3A;&#x57FA;&#x7840;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x4E0D;&#x662F;&#x5F88;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x770B;&#x524D;&#x9762;&#x7684;&#x6587;&#x7AE0;&#x53EF;&#x80FD;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x5E2E;&#x52A9;&#x7406;&#x89E3;&#x3002;</p>\n<h2 id=\"&#x4F9D;&#x8D56;\"><a href=\"#&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x4F9D;&#x8D56;\"></a>&#x4F9D;&#x8D56;</h2><p>&#x4E3A;&#x4E86;&#x65B9;&#x6CD5;&#x5927;&#x5BB6;&#x7684;&#x4F7F;&#x7528;&#x6211;&#x5DF2;&#x7ECF;&#x628A;&#x4ED6;&#x4E0A;&#x4F20;&#x5230;<code>Jcenter</code>&#x4E2D;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E86;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x4F7F;&#x7528;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.idisfkj.enchancerecyclerview:mylibrary:1.1.1&apos;</div></pre></td></tr></table></figure>\n<h2 id=\"EnhanceRecyclerView\"><a href=\"#EnhanceRecyclerView\" class=\"headerlink\" title=\"EnhanceRecyclerView\"></a>EnhanceRecyclerView</h2><p>&#x6211;&#x5C06;&#x8FD9;&#x4E2A;&#x6269;&#x5C55;&#x7684;<code>RecyclerView</code>&#x547D;&#x540D;&#x4E3A;<code>EnhanceRecyclerView</code>&#xFF0C;&#x7EE7;&#x627F;<code>RecyclerView</code>&#x3002;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x65E2;&#x7136;&#x8981;&#x5B9E;&#x73B0;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x4E0E;&#x4E0A;&#x62C9;&#x66F4;&#x591A;&#x81EA;&#x7136;&#x5148;&#x8981;&#x5B9E;&#x73B0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5148;&#x5229;&#x7528;&#x524D;&#x9762;&#x7684;&#x77E5;&#x8BC6;&#x6765;&#x4E3A;<code>EnhanceRecycleView</code>&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void initView() {</div><div class=\"line\">        View headerView = LayoutInflater.from(getContext()).inflate(R.layout.head_layout, null);</div><div class=\"line\">        View footerView = LayoutInflater.from(getContext()).inflate(R.layout.footer_layout, null);</div><div class=\"line\">        addHeaderView(headerView);</div><div class=\"line\">        addFooterView(footerView);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5176;&#x4E2D;&#x7684;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x81F3;&#x4E8E;addHeaderView&#x4E0E;addFooterView&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6211;&#x524D;&#x9762;&#x7684;&#x90A3;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x6709;&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;</em></p>\n</blockquote>\n<h2 id=\"&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x5668;\"><a href=\"#&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x5668;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x5668;\"></a>&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x5668;</h2><p>&#x65E2;&#x7136;&#x8981;&#x5B9E;&#x73B0;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x4E0E;&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#xFF0C;&#x81EA;&#x7136;&#x5C11;&#x4E0D;&#x4E86;&#x5BF9;&#x76D1;&#x542C;&#x5668;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x4E0B;&#x9762;&#x6765;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x4E0B;&#x5BF9;&#x76D1;&#x542C;&#x5668;<code>OnScrollListener</code>&#x4E0E;<code>OnTouchListener</code>&#x7684;&#x5904;&#x7406;&#x3002;</p>\n<h2 id=\"OnScrollListener\"><a href=\"#OnScrollListener\" class=\"headerlink\" title=\"OnScrollListener\"></a>OnScrollListener</h2><p>&#x4E3A;<code>EnhanceRecyclerView</code>&#x6DFB;&#x52A0;<code>addOnScrollListener</code>&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;<code>onScrollStateChanged</code>&#x4E0E;<code>onScrolled</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"onScrolled\"><a href=\"#onScrolled\" class=\"headerlink\" title=\"onScrolled\"></a>onScrolled</h3><p>&#x5728;<code>onScrolled</code>&#x4E2D;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x505A;&#x7684;&#x662F;&#x83B7;&#x53D6;<code>EnhanceRcyclerView</code>&#x4E2D;<code>item</code>&#x7684;&#x603B;&#x6570;&#x91CF;&#x3001;&#x89C6;&#x56FE;&#x663E;&#x793A;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;<code>item</code>&#x5728;<code>EnhanceRecyclerView</code>&#x4E2D;&#x6240;&#x5904;&#x7684;&#x4F4D;&#x7F6E;&#x4E0E;&#x89C6;&#x56FE;&#x663E;&#x793A;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;<code>item</code>&#x5728;<code>EnhanceRecyclerView</code>&#x4E2D;&#x6240;&#x5904;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;<code>item</code>&#x7684;&#x603B;&#x6570;&#x91CF;&#x5F88;&#x597D;&#x83B7;&#x53D6;&#x76F4;&#x63A5;&#x8C03;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">totalCount = getLayoutManager().getItemCount();</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x4E8E;<code>RecyclerView</code>&#x80FD;&#x5B9E;&#x73B0;<code>LinearLayoutManager</code>&#x3001;<code>GridLayoutManager</code>&#x4E0E;<code>StaggeredGridLayoutManager</code>&#x4E0D;&#x540C;&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x6240;&#x4EE5;&#x53E6;&#x5916;&#x4E24;&#x4E2A;&#x8981;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;<code>manager</code>&#x6765;&#x83B7;&#x53D6;,&#x8FD8;&#x662F;&#x770B;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x5427;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (getLayoutManager() instanceof LinearLayoutManager) {</div><div class=\"line\">                    lastItem = ((LinearLayoutManager) getLayoutManager()).findLastVisibleItemPosition();</div><div class=\"line\">                    firstVisible = ((LinearLayoutManager) getLayoutManager()).findFirstVisibleItemPosition();</div><div class=\"line\">                } else {</div><div class=\"line\">                    into = ((StaggeredGridLayoutManager) getLayoutManager()).findLastVisibleItemPositions(into);</div><div class=\"line\">                    firstInto = ((StaggeredGridLayoutManager) getLayoutManager()).findFirstVisibleItemPositions(firstInto);</div><div class=\"line\">                    lastItem = into[0];</div><div class=\"line\">                    firstVisible = firstInto[0];</div><div class=\"line\">                }</div></pre></td></tr></table></figure>\n<h3 id=\"onScrollStateChanged\"><a href=\"#onScrollStateChanged\" class=\"headerlink\" title=\"onScrollStateChanged\"></a>onScrollStateChanged</h3><p>&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x90A3;&#x4E09;&#x4E2A;&#x5173;&#x952E;&#x6570;&#x636E;&#x4EE5;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728;<code>onScrollStateChanged</code>&#x4E2D;&#x5B9E;&#x73B0;&#x5177;&#x4F53;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x662F;&#x5BF9;&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x7684;&#x5904;&#x7406;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (lastItem == adapter.getItemCount() + 1 &amp;&amp; newState == RecyclerView.SCROLL_STATE_IDLE &amp;&amp; !isLoad) {</div><div class=\"line\">                    ViewGroup.LayoutParams params = getFooterView(0).getLayoutParams();</div><div class=\"line\">                    params.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">                    params.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\">                    getFooterView(0).setLayoutParams(params);</div><div class=\"line\">                    getFooterView(0).setVisibility(View.VISIBLE);</div><div class=\"line\">                    smoothScrollToPosition(totalCount);</div><div class=\"line\">                    isLoad = true;</div><div class=\"line\">                    loadMoreListener.onLoadMore();</div><div class=\"line\">                }</div><div class=\"line\">                if (firstVisible == 0) {</div><div class=\"line\">                    isTop = true;</div><div class=\"line\">                } else {</div><div class=\"line\">                    isTop = false;</div><div class=\"line\">                    RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) getHeaderView(0).getLayoutParams();</div><div class=\"line\">                    params.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">                    params.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\">                    params.setMargins(0, -getHeaderView(0).getHeight(), 0, 0);</div><div class=\"line\">                    getHeaderView(0).setLayoutParams(params);</div><div class=\"line\">                }</div></pre></td></tr></table></figure>\n<p>&#x7B80;&#x5355;&#x8BF4;&#x660E;&#x4E0B;&#xFF0C;&#x6838;&#x5FC3;&#x5C31;&#x662F;&#x5224;&#x65AD;<code>lastItem</code>&#x662F;&#x5426;&#x5904;&#x5728;&#x6700;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7684;&#x8BDD;&#x5C31;&#x7EE7;&#x7EED;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x91CC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5BF9;&#x6570;&#x636E;&#x5904;&#x7406;&#x7684;&#x63A5;&#x53E3;&#x6240;&#x4EE5;&#x53EA;&#x8981;&#x5B9E;&#x73B0;<code>loadMoreListener.onLoadMore();</code>&#x5373;&#x53EF;&#x3002;</p>\n<blockquote>\n<p><em>&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x6838;&#x5FC3;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6E90;&#x7801;</em></p>\n</blockquote>\n<h2 id=\"OnTouchListener\"><a href=\"#OnTouchListener\" class=\"headerlink\" title=\"OnTouchListener\"></a>OnTouchListener</h2><p>&#x8FD9;&#x4E2A;&#x76D1;&#x542C;&#x5668;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x6211;&#x4EEC;&#x8981;&#x5206;&#x522B;&#x5BF9;&#x5176;&#x4E2D;&#x6211;&#x4EEC;&#x6240;&#x719F;&#x6089;&#x7684;<code>MotionEvent.ACTION_DOWN</code>&#x3001;<code>MotionEvent.ACTION_MOVE</code>&#x4E0E;<code>MotionEvent.ACTION_UP</code>&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;<code>ACTION_DOWN</code>&#x5C31;&#x662F;&#x7B80;&#x5355;&#x7684;&#x83B7;&#x53D6;&#x6309;&#x4E0B;&#x7684;&#x5750;&#x6807;&#x4F4D;&#x7F6E;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x4E3B;&#x8981;&#x7684;&#x9488;&#x5BF9;&#x53E6;&#x5916;&#x7684;&#x4E24;&#x4E2A;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x8BF4;&#x660E;&#x3002;</p>\n<h3 id=\"ACTION-MOVE\"><a href=\"#ACTION-MOVE\" class=\"headerlink\" title=\"ACTION_MOVE\"></a>ACTION_MOVE</h3><p>&#x8FD9;&#x505A;&#x7684;&#x903B;&#x8F91;&#x5C31;&#x662F;&#x5BF9;&#x89E6;&#x6478;&#x540E;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x6839;&#x636E;&#x6ED1;&#x52A8;&#x7684;&#x8DDD;&#x79BB;&#x6765;&#x52A8;&#x6001;&#x7684;&#x6539;&#x53D8;<code>header</code>&#x7684;&#x6587;&#x672C;&#x4E0E;&#x5E03;&#x5C40;&#x89C6;&#x56FE;&#x7684;&#x663E;&#x793A;&#x3002;    </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void touchMove(MotionEvent event) {</div><div class=\"line\">        endY = event.getY();</div><div class=\"line\">        moveY = endY - startY;</div><div class=\"line\">        //&#x9632;&#x6B62;item&#x5411;&#x4E0A;&#x6ED1;&#x51FA;</div><div class=\"line\">        if (moveY &gt; 0 &amp;&amp; !isRefreshing) {</div><div class=\"line\">            //&#x9632;&#x6B62;&#x56DE;&#x9000;&#x6587;&#x672C;&#x663E;&#x793A;&#x5F02;&#x5E38;</div><div class=\"line\">            scrollToPosition(0);</div><div class=\"line\"></div><div class=\"line\">            if (getHeaderView(0).getVisibility() == GONE)</div><div class=\"line\">                getHeaderView(0).setVisibility(VISIBLE);</div><div class=\"line\"></div><div class=\"line\">            RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) getHeaderView(0).getLayoutParams();</div><div class=\"line\">            params.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">            params.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\">            //&#x4F7F;header&#x968F;moveY&#x7684;&#x503C;&#x4ECE;&#x9876;&#x90E8;&#x6E10;&#x6E10;&#x51FA;&#x73B0;</div><div class=\"line\">            if (moveY &gt;= 400) {</div><div class=\"line\">                moveY = 100 + moveY / 4;</div><div class=\"line\">            } else {</div><div class=\"line\">                moveY = moveY / 2;</div><div class=\"line\">            }</div><div class=\"line\">            viewHeight = getHeaderView(0).getHeight();</div><div class=\"line\">            if (viewHeight &lt;= 0)</div><div class=\"line\">                viewHeight = 130;</div><div class=\"line\">            moveY = moveY - viewHeight;</div><div class=\"line\">            params.setMargins(0, (int) moveY, 0, 0);</div><div class=\"line\">            getHeaderView(0).setLayoutParams(params);</div><div class=\"line\">            if (moveY &gt; 80) {</div><div class=\"line\">                text.setText(getResources().getString(R.string.release_to_refresh));</div><div class=\"line\">            } else {</div><div class=\"line\">                text.setText(getResources().getString(R.string.pull_to_refresh));</div><div class=\"line\">            }</div><div class=\"line\">        } else {</div><div class=\"line\">            if (getHeaderView(0).getVisibility() != GONE &amp;&amp; !isRefreshing) {</div><div class=\"line\">                getHeaderView(0).setVisibility(GONE);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x4E0B;&#x62C9;&#x65F6;&#x4E0E;&#x9876;&#x90E8;&#x7684;&#x8DDD;&#x79BB;&#x53D8;&#x5316;&#x662F;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;<code>margin</code>&#x6765;&#x52A8;&#x6001;&#x6539;&#x53D8;&#x7684;&#x3002;</p>\n<h3 id=\"ACTION-UP\"><a href=\"#ACTION-UP\" class=\"headerlink\" title=\"ACTION_UP\"></a>ACTION_UP</h3><p>&#x6700;&#x540E;&#x7684;&#x89E6;&#x6478;&#x5904;&#x7406;&#x5C31;&#x662F;&#x5728;&#x79BB;&#x5F00;&#x5C4F;&#x5E55;&#x65F6;&#x6839;&#x636E;&#x6ED1;&#x52A8;&#x7684;&#x8DDD;&#x79BB;&#xFF0C;&#x662F;&#x5426;&#x8C03;&#x7528;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x6216;&#x8005;&#x9690;&#x85CF;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x5934;&#x90E8;&#xFF0C;&#x5177;&#x4F53;&#x8FD8;&#x662F;&#x770B;&#x4EE3;&#x7801;&#x5427;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void touchUp() {</div><div class=\"line\">        if (!isRefreshing &amp;&amp; (endY -startY) != 0 ) {</div><div class=\"line\"></div><div class=\"line\">            RecyclerView.LayoutParams params1 = (RecyclerView.LayoutParams) getHeaderView(0).getLayoutParams();</div><div class=\"line\">            params1.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">            params1.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\"></div><div class=\"line\">            if (moveY &gt;= 80) {</div><div class=\"line\">                text.setText(getResources().getString(R.string.refreshing));</div><div class=\"line\">                params1.setMargins(0, 0, 0, 0);</div><div class=\"line\">                isRefreshing = true;</div><div class=\"line\">                //&#x5237;&#x65B0;&#x6570;&#x636E;</div><div class=\"line\">                pullToRefresh.onRefreshing();</div><div class=\"line\">            } else {</div><div class=\"line\">                if (viewHeight &lt;= 0)</div><div class=\"line\">                    viewHeight = 130;</div><div class=\"line\">                params1.setMargins(0, -viewHeight, 0, 0);</div><div class=\"line\">                getHeaderView(0).setVisibility(GONE);</div><div class=\"line\">            }</div><div class=\"line\">            getHeaderView(0).setLayoutParams(params1);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x4EE3;&#x7801;&#x4E2D;&#x91CD;&#x8981;&#x7684;&#x5730;&#x65B9;&#x90FD;&#x6709;&#x6307;&#x51FA;&#x76F8;&#x4FE1;&#x90FD;&#x80FD;&#x770B;&#x61C2;&#xFF0C;&#x8FD9;&#x6837;&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x7684;&#x903B;&#x8F91;&#x5C31;&#x57FA;&#x672C;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x63A5;&#x53E3;&#x7684;&#x8BBE;&#x8BA1;&#x5427;</em></p>\n</blockquote>\n<h2 id=\"&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x63A5;&#x53E3;\"><a href=\"#&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x63A5;&#x53E3;\" class=\"headerlink\" title=\"&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x63A5;&#x53E3;\"></a>&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x63A5;&#x53E3;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface PullToRefreshListener {</div><div class=\"line\">        void onRefreshing();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setPullToRefreshListener(PullToRefreshListener pullToRefresh) {</div><div class=\"line\">        if (loadMoreListener == null) {</div><div class=\"line\">            initListener();</div><div class=\"line\">        }</div><div class=\"line\">        this.pullToRefresh = pullToRefresh;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public interface LoadMoreListener {</div><div class=\"line\">        void onLoadMore();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setLoadMoreListener(LoadMoreListener loadMoreListener) {</div><div class=\"line\">        if (pullToRefresh == null) {</div><div class=\"line\">            initListener();</div><div class=\"line\">        }</div><div class=\"line\">        this.loadMoreListener = loadMoreListener;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD0;&#x7528;&#x662F;&#x6DFB;&#x52A0;&#x63A5;&#x53E3;&#x76D1;&#x542C;&#x65F6;&#x521D;&#x59CB;&#x5316;&#x524D;&#x9762;&#x4E3A;<code>EnhanceRecyclerView</code>&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x76D1;&#x542C;&#x3002;</p>\n<h2 id=\"&#x72B6;&#x6001;&#x91CD;&#x7F6E;&#x8BBE;&#x7F6E;\"><a href=\"#&#x72B6;&#x6001;&#x91CD;&#x7F6E;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"&#x72B6;&#x6001;&#x91CD;&#x7F6E;&#x8BBE;&#x7F6E;\"></a>&#x72B6;&#x6001;&#x91CD;&#x7F6E;&#x8BBE;&#x7F6E;</h2><p>&#x5728;&#x8C03;&#x7528;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x6216;&#x8005;&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x4E3A;&#x5176;&#x6784;&#x9020;&#x901A;&#x7528;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#xFF0C;&#x72B6;&#x6001;&#x7684;&#x91CD;&#x7F6E;&#x4E0E;&#x6570;&#x636E;&#x7684;&#x66F4;&#x65B0;&#xFF0C;&#x65B9;&#x4FBF;&#x7EDF;&#x4E00;&#x8C03;&#x7528;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void setLoadMoreComplete() {</div><div class=\"line\">       RecyclerView.LayoutParams params = (LayoutParams) getFooterView(0).getLayoutParams();</div><div class=\"line\">       params.width = 0;</div><div class=\"line\">       params.height = 0;</div><div class=\"line\">       getFooterView(0).setLayoutParams(params);</div><div class=\"line\">       getFooterView(0).setVisibility(View.GONE);</div><div class=\"line\">       this.getAdapter().notifyDataSetChanged();</div><div class=\"line\">       isLoad = false;</div><div class=\"line\">   }</div><div class=\"line\"></div><div class=\"line\">   public void setRefreshComplete() {</div><div class=\"line\">       RecyclerView.LayoutParams params1 = (RecyclerView.LayoutParams) getHeaderView(0).getLayoutParams();</div><div class=\"line\">       params1.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">       params1.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\">       params1.setMargins(0, -getHeaderView(0).getHeight(), 0, 0);</div><div class=\"line\">       getHeaderView(0).setLayoutParams(params1);</div><div class=\"line\">       getHeaderView(0).setVisibility(GONE);</div><div class=\"line\">       this.getAdapter().notifyDataSetChanged();</div><div class=\"line\">       isRefreshing = false;</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6240;&#x7528;&#x5DE5;&#x4F5C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E0B;&#x9762;&#x6765;&#x505A;&#x4E2A;&#x8C03;&#x7528;&#x793A;&#x8303;</em></p>\n</blockquote>\n<h2 id=\"&#x4F7F;&#x7528;\"><a href=\"#&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;\"></a>&#x4F7F;&#x7528;</h2><h3 id=\"xml&#x4E2D;&#x5F15;&#x7528;\"><a href=\"#xml&#x4E2D;&#x5F15;&#x7528;\" class=\"headerlink\" title=\"xml&#x4E2D;&#x5F15;&#x7528;\"></a>xml&#x4E2D;&#x5F15;&#x7528;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;com.idisfkj.mylibrary.EnhanceRecyclerView</div><div class=\"line\">        android:id=&quot;@+id/recyclerView&quot;</div><div class=\"line\">        android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">        android:layout_height=&quot;match_parent&quot;&gt;</div><div class=\"line\">&lt;/com.idisfkj.mylibrary.EnhanceRecyclerView&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"&#x8BBE;&#x7F6E;&#x76D1;&#x542C;\"><a href=\"#&#x8BBE;&#x7F6E;&#x76D1;&#x542C;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x76D1;&#x542C;\"></a>&#x8BBE;&#x7F6E;&#x76D1;&#x542C;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">mRecyclerView.setPullToRefreshListener(new com.idisfkj.mylibrary.EnhanceRecyclerView.PullToRefreshListener() {</div><div class=\"line\">           @Override</div><div class=\"line\">           public void onRefreshing() {</div><div class=\"line\">               refreshData();</div><div class=\"line\">           }</div><div class=\"line\">       });</div><div class=\"line\">       mRecyclerView.setLoadMoreListener(new EnhanceRecyclerView.LoadMoreListener() {</div><div class=\"line\">           @Override</div><div class=\"line\">           public void onLoadMore() {</div><div class=\"line\">               loadMoreData();</div><div class=\"line\">           }</div><div class=\"line\">       });</div></pre></td></tr></table></figure>\n<p><code>refreshData()</code>&#x4E0E;<code>loadMoreData()</code>&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x7684;&#x903B;&#x8F91;&#x5C31;&#x4E0D;&#x5C55;&#x793A;&#x4E86;&#xFF0C;&#x53EA;&#x662F;&#x8981;&#x8BB0;&#x4F4F;&#x5728;&#x8BF7;&#x6C42;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5B8C;&#x4E4B;&#x540E;&#x8981;&#x5728;&#x4ED6;&#x4EEC;&#x4E2D;&#x8C03;&#x7528;&#x76F8;&#x5E94;&#x7684;<code>mRecyclerView.setRefreshComplete()</code>&#x4E0E;<code>mRecyclerView.setLoadMoreComplete()</code>&#x6765;&#x91CD;&#x7F6E;&#x72B6;&#x6001;&#x3002;</p>\n<p>&#x81F3;&#x4E8E;&#x5176;&#x4ED6;&#x7684;<code>Adapter</code>&#x3001;<code>LayoutManager</code>&#x7B49;&#x7684;&#x8BBE;&#x7F6E;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x4E0E;&#x539F;&#x751F;&#x7684;<code>RecyclerView</code>&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>\n<h2 id=\"&#x6548;&#x679C;\"><a href=\"#&#x6548;&#x679C;\" class=\"headerlink\" title=\"&#x6548;&#x679C;\"></a>&#x6548;&#x679C;</h2><p><img src=\"/2016/08/03/RecyclerView&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x4E0E;&#x4E0A;&#x62C9;&#x66F4;&#x591A;/1.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x5176;&#x5B9E;&#x603B;&#x7684;&#x6765;&#x8BF4;&#x96BE;&#x70B9;&#x6709;&#x4E24;&#x4E2A;</p>\n<ul>\n<li>&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#x3002;&#x8FD9;&#x4E2A;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x653B;&#x514B;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x539F;&#x7406;&#x4E5F;&#x76F8;&#x5BF9;&#x7B80;&#x5355;</li>\n<li>&#x5B9E;&#x73B0;&#x89E6;&#x6478;&#x4E0E;&#x6ED1;&#x52A8;&#x76D1;&#x542C;&#x903B;&#x8F91;&#x3002;&#x8FD9;&#x4E2A;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x903B;&#x8F91;&#x7684;&#x7406;&#x89E3;&#xFF0C;&#x5BF9;&#x6574;&#x4E2A;&#x5237;&#x65B0;&#x7684;&#x8FC7;&#x7A0B;&#x505A;&#x4E2A;&#x6574;&#x4F53;&#x5206;&#x6790;&#xFF0C;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x7406;&#x89E3;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x5BF9;&#x5176;&#x4E2D;&#x89C6;&#x56FE;&#x7684;&#x52A8;&#x6001;&#x663E;&#x793A;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x53D8;&#x5316;&#x4E0E;&#x63A5;&#x53E3;&#x7684;&#x8C03;&#x7528;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x5DE5;&#x7A0B;&#x3002;</li>\n</ul>\n<p>&#x5F53;&#x7136;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x80FD;&#x8FD8;&#x6709;&#x7455;&#x75B5;&#xFF0C;&#x5E0C;&#x671B;&#x6307;&#x51FA;&#xFF0C;&#x6211;&#x4F1A;&#x76F8;&#x5E94;&#x7684;&#x505A;&#x4FEE;&#x6539;&#x6216;&#x8005;&#x4F60;&#x4EEC;&#x4FEE;&#x6539;&#x540E;&#x53EF;&#x4EE5;&#x63D0;&#x4EA4;&#x7ED9;&#x6211;&#xFF0C;&#x6211;&#x7EDF;&#x4E00;&#x505A;&#x4FEE;&#x6539;&#xFF0C;&#x8C22;&#x8C22;&#xFF01;</p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;:<a href=\"https://github.com/idisfkj/EnhanceRecyclerView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/EnhanceRecyclerView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView添加header与footer","url":"https://idisfkj.github.io/2016/07/05/RecyclerView添加header与footer/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x8FD9;&#x6B21;&#x4E3B;&#x8981;&#x5173;&#x4E8E;<code>RecyclerView</code>&#x6DFB;&#x52A0;<code>header</code>&#x548C;<code>footer</code>&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x5728;&#x4F7F;&#x7528;<code>ListView</code>&#x7684;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x80FD;&#x81EA;&#x7531;&#x7684;&#x7ED9;&#x81EA;&#x5DF1;&#x7684;<code>ListView</code>&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x3002;&#x4F7F;&#x7528;<code>addHeaderView()</code>&#x4E0E;<code>addFooterView()</code>&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x3002;&#x53EA;&#x8981;&#x81EA;&#x5DF1;&#x81EA;&#x5B9A;&#x4E49;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#xFF0C;&#x6DFB;&#x52A0;&#x8FDB;&#x53BB;&#x5373;&#x53EF;&#x3002;&#x4F46;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x4FBF;&#x7684;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x4E86;&#x3002;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x65F6;&#x8981;&#x600E;&#x4E48;&#x529E;&#x5462;&#xFF1F;&#x4E0D;&#x6025;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x719F;&#x6089;&#x4E0B;<code>ListView</code>&#x7684;&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x3002;</p>\n<h1 id=\"ListView&#x6E90;&#x7801;\"><a href=\"#ListView&#x6E90;&#x7801;\" class=\"headerlink\" title=\"ListView&#x6E90;&#x7801;\"></a>ListView&#x6E90;&#x7801;</h1><p>&#x65E2;&#x7136;<code>ListView</code>&#x5B9E;&#x73B0;&#x4E86;&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5148;&#x8FDB;&#x5165;<code>ListView</code>&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x67E5;&#x770B;&#x5176;&#x4E2D;&#x7684;<code>addHeaderView()</code>&#x65B9;&#x6CD5;&#x4E0E;<code>addFooterView()</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void addHeaderView(View v, Object data, boolean isSelectable) {</div><div class=\"line\">        final FixedViewInfo info = new FixedViewInfo();</div><div class=\"line\">        info.view = v;</div><div class=\"line\">        info.data = data;</div><div class=\"line\">        info.isSelectable = isSelectable;</div><div class=\"line\">        mHeaderViewInfos.add(info);</div><div class=\"line\">        mAreAllItemsSelectable &amp;= isSelectable;</div><div class=\"line\"></div><div class=\"line\">        // Wrap the adapter if it wasn&apos;t already wrapped.</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            if (!(mAdapter instanceof HeaderViewListAdapter)) {</div><div class=\"line\">                mAdapter = new HeaderViewListAdapter(mHeaderViewInfos, mFooterViewInfos, mAdapter);</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            // In the case of re-adding a header view, or adding one later on,</div><div class=\"line\">            // we need to notify the observer.</div><div class=\"line\">            if (mDataSetObserver != null) {</div><div class=\"line\">                mDataSetObserver.onChanged();</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x91CC;&#x7701;&#x7565;addFooterView()&#x6E90;&#x7801;&#xFF0C;&#x5176;&#x5B9E;&#x8DDF;addHeaderView()&#x57FA;&#x672C;&#x4E00;&#x81F4;</em></p>\n</blockquote>\n<p>&#x901A;&#x8FC7;<code>addHeaderView()</code>&#x7684;&#x6E90;&#x7801;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x5B83;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;<code>FixedViewInfo</code>&#x7C7B;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class FixedViewInfo {</div><div class=\"line\">        /** The view to add to the list */</div><div class=\"line\">        public View view;</div><div class=\"line\">        /** The data backing the view. This is returned from {@link ListAdapter#getItem(int)}. */</div><div class=\"line\">        public Object data;</div><div class=\"line\">        /** &lt;code&gt;true&lt;/code&gt; if the fixed view should be selectable in the list */</div><div class=\"line\">        public boolean isSelectable;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x4EE3;&#x7801;&#x5C31;&#x662F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (!(mAdapter instanceof HeaderViewListAdapter)) {</div><div class=\"line\">               mAdapter = new HeaderViewListAdapter(mHeaderViewInfos, mFooterViewInfos, mAdapter);</div><div class=\"line\">           }</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;<code>new</code>&#x4E86;&#x4E00;&#x4E2A;<code>HeaderViewListAdapter</code>&#x7C7B;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x518D;&#x8FDB;&#x5165;<code>HeaderViewListAdapter</code>&#x6E90;&#x7801;&#x4E2D;&#xFF0C;&#x53D1;&#x73B0;&#x4ED6;&#x5C31;&#x76F8;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>Adapter</code>&#x5BF9;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;&#x5C01;&#x88C5;&#x3002;</p>\n<p>&#x4EE3;&#x7801;&#x90FD;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x601D;&#x60F3;&#xFF0C;&#x5176;&#x4E2D;&#x4E3B;&#x8981;&#x7684;&#x662F;&#x6709;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public int getCount() {</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            return getFootersCount() + getHeadersCount() + mAdapter.getCount();</div><div class=\"line\">        } else {</div><div class=\"line\">            return getFootersCount() + getHeadersCount();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;<code>position</code>&#x6765;&#x8BBE;&#x7F6E;<code>ViewType</code>&#x7684;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">public int getItemViewType(int position) {</div><div class=\"line\">       int numHeaders = getHeadersCount();</div><div class=\"line\">       if (mAdapter != null &amp;&amp; position &gt;= numHeaders) {</div><div class=\"line\">           int adjPosition = position - numHeaders;</div><div class=\"line\">           int adapterCount = mAdapter.getCount();</div><div class=\"line\">           if (adjPosition &lt; adapterCount) {</div><div class=\"line\">               return mAdapter.getItemViewType(adjPosition);</div><div class=\"line\">           }</div><div class=\"line\">       }</div><div class=\"line\"></div><div class=\"line\">       return AdapterView.ITEM_VIEW_TYPE_HEADER_OR_FOOTER;</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x770B;<code>getView()</code>&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">public View getView(int position, View convertView, ViewGroup parent) {</div><div class=\"line\">        // Header (negative positions will throw an IndexOutOfBoundsException)</div><div class=\"line\">        int numHeaders = getHeadersCount();</div><div class=\"line\">        if (position &lt; numHeaders) {</div><div class=\"line\">            return mHeaderViewInfos.get(position).view;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        // Adapter</div><div class=\"line\">        final int adjPosition = position - numHeaders;</div><div class=\"line\">        int adapterCount = 0;</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            adapterCount = mAdapter.getCount();</div><div class=\"line\">            if (adjPosition &lt; adapterCount) {</div><div class=\"line\">                return mAdapter.getView(adjPosition, convertView, parent);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        // Footer (off-limits positions will throw an IndexOutOfBoundsException)</div><div class=\"line\">        return mFooterViewInfos.get(adjPosition - adapterCount).view;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4E0E;<code>getItemViewType</code>&#x7C7B;&#x4F3C;&#xFF0C;&#x5F53;<code>position</code>&#x5C0F;&#x4E8E;<code>header</code>&#x7684;<code>count</code>&#x65F6;&#xFF0C;&#x6B64;&#x65F6;&#x8FD4;&#x56DE;&#x5934;&#x90E8;<code>View</code>,&#x5F53;<code>position</code>&#x51CF;&#x53BB;<code>headeer</code>&#x7684;<code>count</code>&#x65F6;&#x4F9D;&#x7136;&#x5C0F;&#x4E8E;&#x6B63;&#x5E38;&#x7684;<code>adapter</code>&#x7684;<code>count</code>,&#x6B64;&#x65F6;&#x8FD4;&#x56DE;&#x6B63;&#x5E38;&#x7684;<code>View</code>&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6709;&#xFF0C;&#x81EA;&#x7136;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;<code>footer</code>&#x4E86;&#x3002;</p>\n<p>&#x6240;&#x4EE5;&#x6839;&#x636E;<code>ListView</code>&#x7684;&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6A21;&#x4EFF;&#x5B9E;&#x73B0;<code>RecyclerView</code>&#x7684;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<h1 id=\"EnhanceRecyclerView\"><a href=\"#EnhanceRecyclerView\" class=\"headerlink\" title=\"EnhanceRecyclerView\"></a>EnhanceRecyclerView</h1><p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6839;&#x636E;<code>ListView</code>&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x80FD;&#x591F;&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;<code>RecyclerView</code>&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x5B9A;&#x4E49;&#x4E3A;<code>EnhanceRecyclerView</code></p>\n<h2 id=\"FixedViewInfo\"><a href=\"#FixedViewInfo\" class=\"headerlink\" title=\"FixedViewInfo\"></a>FixedViewInfo</h2><p>&#x5728;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x770B;&#x5230;<code>ListView</code>&#x4E2D;&#x4F7F;&#x7528;&#x5230;&#x4E86;<code>FixedViewInfo</code>&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#xFF0C;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x505A;&#x9002;&#x5F53;&#x7684;&#x4FEE;&#x6539;&#x5982;&#x4E0B;&#xFF0C;<code>View</code>&#x8FD8;&#x662F;&#x4E0D;&#x53D8;&#xFF0C;&#x4F9D;&#x7136;&#x662F;&#x6DFB;&#x52A0;&#x7684;&#x89C6;&#x56FE;&#xFF0C;&#x5C06;&#x5176;&#x4F59;&#x7684;&#x5220;&#x6389;&#xFF0C;&#x6362;&#x6210;<code>viewType</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class FixedViewInfo {</div><div class=\"line\">        public View view;</div><div class=\"line\">        public int viewType;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"addHeaderView&#x4E0E;addFooterView\"><a href=\"#addHeaderView&#x4E0E;addFooterView\" class=\"headerlink\" title=\"addHeaderView&#x4E0E;addFooterView\"></a>addHeaderView&#x4E0E;addFooterView</h2><p>&#x505A;&#x76F8;&#x5E94;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x5176;&#x4E2D;<code>BASE_HEADER_VIEW_TYPE</code>&#x4E0E;<code>BASE_FOOTER_VIEW_TYPE</code>&#x662F;&#x4E00;&#x4E2A;<code>final</code>&#x7684;<code>int</code>&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void addHeaderView(View view) {</div><div class=\"line\">        FixedViewInfo info = new FixedViewInfo();</div><div class=\"line\">        info.view = view;</div><div class=\"line\">        info.viewType = BASE_HEADER_VIEW_TYPE + mHeaderViewInfos.size();</div><div class=\"line\">        mHeaderViewInfos.add(info);</div><div class=\"line\"></div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            mAdapter.notifyDataSetChanged();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void addFooterView(View view) {</div><div class=\"line\">    FixedViewInfo info = new FixedViewInfo();</div><div class=\"line\">    info.view = view;</div><div class=\"line\">    info.viewType = BASE_FOOTER_VIEW_TYPE + mFooterViewInfos.size();</div><div class=\"line\">    mFooterViewInfos.add(info);</div><div class=\"line\"></div><div class=\"line\">    if (mAdapter != null) {</div><div class=\"line\">        mAdapter.notifyDataSetChanged();</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"setAdapter\"><a href=\"#setAdapter\" class=\"headerlink\" title=\"setAdapter\"></a>setAdapter</h2><p>&#x4E0B;&#x9762;&#x662F;<code>setAdapter()</code>&#xFF0C;&#x4F7F;&#x7528;&#x540E;&#x9762;&#x5C01;&#x88C5;&#x7684;<code>WrapperRecyclerViewAdapter</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">    @Override</div><div class=\"line\">    public void setAdapter(Adapter adapter) {</div><div class=\"line\">        if (!(adapter instanceof WrapperRecyclerViewAdapter))</div><div class=\"line\">            mAdapter = new WrapperRecyclerViewAdapter(mHeaderViewInfos, mFooterViewInfos, adapter);</div><div class=\"line\">        super.setAdapter(mAdapter);</div><div class=\"line\"></div><div class=\"line\">//        if (isShouldSpan) {</div><div class=\"line\">//            ((WrapperRecyclerViewAdapter) mAdapter).adjustSpanSize(this);</div><div class=\"line\">//        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"WrapperRecyclerViewAdapter\"><a href=\"#WrapperRecyclerViewAdapter\" class=\"headerlink\" title=\"WrapperRecyclerViewAdapter\"></a>WrapperRecyclerViewAdapter</h1><p>&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;<code>ListView</code>&#x7684;<code>HeaderViewListAdapter</code>&#x6765;&#x6A21;&#x4EFF;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5C01;&#x88C5;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;<code>adapter</code>&#x3002;&#x6211;&#x8FD9;&#x91CC;&#x5B9A;&#x4E49;&#x4E3A;<code>WrapperRecyclerViewAdapter</code>&#x7EE7;&#x627F;<code>RecyclerView.Adapter</code>&#x6839;&#x636E;&#x60C5;&#x51B5;&#x9002;&#x5F53;&#x4FEE;&#x6539;&#x3002;</p>\n<h2 id=\"getItemCount\"><a href=\"#getItemCount\" class=\"headerlink\" title=\"getItemCount\"></a>getItemCount</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public int getItemCount() {</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            return getHeadersCount() + getFootersCount() + mAdapter.getItemCount();</div><div class=\"line\">        } else {</div><div class=\"line\">            return getHeadersCount() + getFootersCount();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"getItemViewType\"><a href=\"#getItemViewType\" class=\"headerlink\" title=\"getItemViewType\"></a>getItemViewType</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public int getItemViewType(int position) {</div><div class=\"line\">        int numHeaders = getHeadersCount();</div><div class=\"line\">        if (position &lt; numHeaders) {</div><div class=\"line\">            return mHeaderViewInfos.get(position).viewType;</div><div class=\"line\">        }</div><div class=\"line\">        int adjPosition = position - numHeaders;</div><div class=\"line\">        int adapterPosition = 0;</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            adapterPosition = mAdapter.getItemCount();</div><div class=\"line\">            if (adjPosition &lt; adapterPosition) {</div><div class=\"line\">                return mAdapter.getItemViewType(adjPosition);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        return mFooterViewInfos.get(position - adapterPosition - getHeadersCount()).viewType;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x903B;&#x8F91;&#x4E0E;<code>ListView</code>&#x7684;&#x57FA;&#x672C;&#x4E00;&#x81F4;&#x3002;</p>\n<h2 id=\"onCreateViewHolder\"><a href=\"#onCreateViewHolder\" class=\"headerlink\" title=\"onCreateViewHolder\"></a>onCreateViewHolder</h2><p>&#x8FD9;&#x91CC;&#x9700;&#x5C06;<code>HeaderViewListAdapter</code>&#x4E2D;&#x7684;<code>getView()</code>&#x65B9;&#x6CD5;&#x5206;&#x6210;&#x4E24;&#x90E8;&#x5206;&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {</div><div class=\"line\">    if (viewType &gt;= EnhanceRecyclerView.BASE_HEADER_VIEW_TYPE &amp;&amp; viewType &lt; EnhanceRecyclerView.BASE_HEADER_VIEW_TYPE + getHeadersCount()) {</div><div class=\"line\">        View view = mHeaderViewInfos.get(viewType - EnhanceRecyclerView.BASE_HEADER_VIEW_TYPE).view;</div><div class=\"line\">        return viewHolder(view);</div><div class=\"line\">    } else if (viewType &gt;= EnhanceRecyclerView.BASE_FOOTER_VIEW_TYPE &amp;&amp; viewType &lt; EnhanceRecyclerView.BASE_FOOTER_VIEW_TYPE + getFootersCount()) {</div><div class=\"line\">        View view = mFooterViewInfos.get(viewType - EnhanceRecyclerView.BASE_FOOTER_VIEW_TYPE).view;</div><div class=\"line\">        return viewHolder(view);</div><div class=\"line\">    }</div><div class=\"line\">    return mAdapter.onCreateViewHolder(parent, viewType);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;<code>viewType</code>&#x6765;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x7684;&#x5E03;&#x5C40;&#x6587;&#x4EF6;.&#x4E0D;&#x662F;<code>header</code>&#x4E0E;<code>footer</code>&#x5E03;&#x5C40;&#x65F6;&#x5219;&#x76F4;&#x63A5;&#x56DE;&#x8C03;&#x539F;&#x59CB;<code>adapter</code>&#x7684;<code>onCreateViewHolder()</code>&#x65B9;&#x6CD5;&#x3002;&#x5B9E;&#x73B0;&#x6B63;&#x5E38;&#x7684;&#x5E03;&#x5C40;&#x3002;</p>\n<h2 id=\"onBindViewHolder\"><a href=\"#onBindViewHolder\" class=\"headerlink\" title=\"onBindViewHolder\"></a>onBindViewHolder</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {</div><div class=\"line\">    int numHeaders = getHeadersCount();</div><div class=\"line\">    if (position &lt; numHeaders) {</div><div class=\"line\">        return;</div><div class=\"line\">    }</div><div class=\"line\">    int adjPosition = position - numHeaders;</div><div class=\"line\">    int adapterCount = 0;</div><div class=\"line\">    if (mAdapter != null) {</div><div class=\"line\">        adapterCount = mAdapter.getItemCount();</div><div class=\"line\">        if (adjPosition &lt; adapterCount) {</div><div class=\"line\">            mAdapter.onBindViewHolder(holder, adjPosition);</div><div class=\"line\">            return;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;<code>position</code>&#x7684;&#x4F4D;&#x7F6E;&#x6765;&#x9009;&#x62E9;&#xFF0C;&#x5F53;<code>position</code>&#x5C5E;&#x4E8E;&#x6B63;&#x5E38;&#x7684;&#x4F4D;&#x7F6E;&#x8303;&#x56F4;&#x4E4B;&#x5185;&#x65F6;&#xFF0C;&#x5219;&#x56DE;&#x8C03;&#x539F;&#x59CB;&#x7684;<code>adapter</code>&#x7684;<code>onBindViewHolder()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x7ED1;&#x5B9A;&#xFF1B;&#x5BF9;&#x4E8E;&#x5176;&#x5B83;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x65E0;&#x9700;&#x505A;&#x5904;&#x7406;&#x3002;</p>\n<blockquote>\n<p><em>&#x4E3B;&#x8981;&#x7684;&#x6A21;&#x4EFF;&#x53D8;&#x52A8;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#xFF0C;&#x7136;&#x540E;&#x81EA;&#x5DF1;&#x5728;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x8FDB;&#x884C;&#x9002;&#x5F53;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x6700;&#x540E;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>EnhanceRecyclerView</code>&#x66FF;&#x4EE3;<code>RecyclerView</code></em></p>\n</blockquote>\n<h1 id=\"&#x8C03;&#x6574;\"><a href=\"#&#x8C03;&#x6574;\" class=\"headerlink\" title=\"&#x8C03;&#x6574;\"></a>&#x8C03;&#x6574;</h1><p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x5728;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;&#x65F6;&#x5019;&#x8981;&#x8BBE;&#x7F6E;<code>LayoutManager</code>&#xFF0C;&#x5982;&#x679C;&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5F53;<code>LayoutManager</code>&#x8BBE;&#x7F6E;&#x4E3A;<code>LinearLayout</code>&#x65F6;&#xFF0C;&#x81EA;&#x7136;&#x6CA1;&#x4E0A;&#x9762;&#x95EE;&#x9898;&#xFF0C;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x80FD;&#x6B63;&#x5E38;&#x6DFB;&#x52A0;&#xFF1B;&#x4F46;&#x5F53;&#x6211;&#x4EEC;&#x7684;<code>LayoutManager</code>&#x8BBE;&#x7F6E;&#x4E3A;<code>GridLayoutManager</code>&#x4E0E;<code>StaggeredGridLayoutManager</code>&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x6DFB;&#x52A0;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#xFF0C;&#x5C31;&#x662F;&#x4ED6;&#x4EEC;&#x4E0D;&#x80FD;&#x72EC;&#x81EA;&#x5360;&#x4E00;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x4F7F;&#x4ED6;&#x4EEC;&#x5728;&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x65F6;&#x5019;&#x72EC;&#x81EA;&#x5360;&#x4E00;&#x884C;&#x3002;</p>\n<h2 id=\"adjustSpanSize\"><a href=\"#adjustSpanSize\" class=\"headerlink\" title=\"adjustSpanSize\"></a>adjustSpanSize</h2><p>&#x5728;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>WrapperRecyclerViewAdapter</code>&#x4E2D;&#x6DFB;&#x52A0;<code>adjustSpanSize()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x8C03;&#x6574;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void adjustSpanSize(RecyclerView recyclerView) {</div><div class=\"line\">        if (recyclerView.getLayoutManager() instanceof GridLayoutManager) {</div><div class=\"line\">            final GridLayoutManager manager = (GridLayoutManager) recyclerView.getLayoutManager();</div><div class=\"line\">            manager.setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() {</div><div class=\"line\">                @Override</div><div class=\"line\">                public int getSpanSize(int position) {</div><div class=\"line\">                    int numHeaders = getHeadersCount();</div><div class=\"line\">                    int adjPosition = position - numHeaders;</div><div class=\"line\">                    if (position &lt; numHeaders || adjPosition &gt;= mAdapter.getItemCount())</div><div class=\"line\">                        return manager.getSpanCount();</div><div class=\"line\">                    return 1;</div><div class=\"line\">                }</div><div class=\"line\">            });</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        if (recyclerView.getLayoutManager() instanceof StaggeredGridLayoutManager) {</div><div class=\"line\">            isStaggered = true;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5F53;<code>LayoutManager</code>&#x4E3A;<code>GridLayoutManager</code>&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;<code>manager</code>&#x6765;&#x8BBE;&#x7F6E;<code>setSpanSizeLookup()</code>&#x5728;<code>getSpanSize()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6839;&#x636E;&#x5177;&#x4F53;&#x5224;&#x65AD;&#x6765;&#x8C03;&#x7528;<code>manager.getSpanCount()</code>&#x6765;&#x5B9E;&#x73B0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x5360;&#x4E00;&#x884C;&#x7684;&#x6548;&#x679C;&#xFF1B;&#x5BF9;&#x4E8E;<code>StaggeredGridLayoutManager</code>&#x56E0;&#x4E3A;&#x5176;&#x6CA1;&#x6709;<code>setSpanSizeLookup()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5148;&#x505A;&#x6807;&#x8BB0;&#xFF0C;&#x5728;<code>ViewHolder</code>&#x4E2D;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x7684;<code>ItemView</code>&#x6765;&#x8BBE;&#x7F6E;<code>params</code>&#xFF0C;<code>setFullSpa(true)</code>&#x65B9;&#x6CD5;&#x6765;&#x586B;&#x5145;&#x4E00;&#x884C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">private RecyclerView.ViewHolder viewHolder(View itemView) {</div><div class=\"line\"></div><div class=\"line\">    if (isStaggered) {</div><div class=\"line\">        StaggeredGridLayoutManager.LayoutParams params = new StaggeredGridLayoutManager.LayoutParams(StaggeredGridLayoutManager.LayoutParams.MATCH_PARENT,</div><div class=\"line\">                StaggeredGridLayoutManager.LayoutParams.WRAP_CONTENT);</div><div class=\"line\">        params.setFullSpan(true);</div><div class=\"line\">        itemView.setLayoutParams(params);</div><div class=\"line\">    }</div><div class=\"line\">    return new RecyclerView.ViewHolder(itemView) {</div><div class=\"line\">    };</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"setLayoutManager\"><a href=\"#setLayoutManager\" class=\"headerlink\" title=\"setLayoutManager\"></a>setLayoutManager</h2><p>&#x5728;<code>EnhanceRecyclerView</code>&#x4E2D;&#x91CD;&#x5199;<code>setLayoutManager()</code>&#x65B9;&#x6CD5;,&#x6DFB;&#x52A0;&#x6807;&#x8BB0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void setLayoutManager(LayoutManager layout) {</div><div class=\"line\">        if (layout instanceof GridLayoutManager || layout instanceof StaggeredGridLayoutManager)</div><div class=\"line\">            isShouldSpan = true;</div><div class=\"line\">        super.setLayoutManager(layout);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x518D; &#x5728;<code>EnhanceRecyclerView</code>&#x7684;<code>setAdapter()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6839;&#x636E;&#x6807;&#x8BB0;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x8C03;&#x7528;<code>adjustSpanSize()</code>&#x65B9;&#x6CD5;&#x6765;&#x8FDB;&#x884C;&#x8C03;&#x6574;<code>header</code>&#x4E0E;<code>footer</code>.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (isShouldSpan) {</div><div class=\"line\">            ((WrapperRecyclerViewAdapter) mAdapter).adjustSpanSize(this);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x524D;&#x9762;<code>setAdapter()</code>&#x4E2D;&#x6240;&#x6CE8;&#x91CA;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>\n<p>&#x8FD9;&#x6837;&#x6574;&#x4E2A;&#x8C03;&#x6574;&#x90E8;&#x5206;&#x5C31;&#x57FA;&#x672C;&#x5B8C;&#x6210;&#x3002;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;&#x6DFB;&#x52A0;&#x4E5F;&#x5C31;&#x57FA;&#x672C;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x901A;&#x8FC7;<code>RecyclerView</code>&#x7684;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x6DFB;&#x52A0;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x80FD;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x8FD0;&#x7528;&#x539F;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x6765;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;&#x529F;&#x80FD;&#x3002;&#x867D;&#x7136;&#x65B9;&#x6CD5;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x6700;&#x597D;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x4E5F;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982;&#x4E0D;&#x80FD;&#x5728;&#x521D;&#x59CB;&#x5316;&#xFF08;onCreate&#xFF09;&#x4E2D;&#x540C;&#x65F6;&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x5E03;&#x5C40;&#x6DF7;&#x4E71;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x73B0;&#x5728;&#x8FD8;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x4F55;&#x6709;&#x8FD9;&#x79CD;&#x7279;&#x4F8B;&#xFF0C;&#x5E0C;&#x671B;&#x77E5;&#x9053;&#x7684;&#x53EF;&#x4EE5;&#x544A;&#x77E5;&#x89E3;&#x51B3;&#x4E0B;&#xFF0C;&#x4F46;&#x8FD9;&#x79CD;&#x6A21;&#x4EFF;&#x7684;&#x601D;&#x60F3;&#x8FD8;&#x662F;&#x5F88;&#x503C;&#x5F97;&#x63A8;&#x8350;&#x7684;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"多线程下载","url":"https://idisfkj.github.io/2016/06/26/多线程下载/","content":"<h1 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h1><p>&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;&#x7684;&#x539F;&#x7406;&#x5C31;&#x662F;&#x5C06;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x6587;&#x4EF6;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x4EFD;&#xFF0C;&#x5176;&#x4E2D;&#x6BCF;&#x4EFD;&#x90FD;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x4E0B;&#x8F7D;&#xFF0C;&#x8FD9;&#x6837;&#x5BF9;&#x4E8E;&#x6587;&#x4EF6;&#x7684;&#x4E0B;&#x8F7D;&#x901F;&#x5EA6;&#x81EA;&#x7136;&#x5C31;&#x63D0;&#x9AD8;&#x4E86;&#x8BB8;&#x591A;&#x3002;</p>\n<p>&#x65E2;&#x7136;&#x8981;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x90E8;&#x5206;&#x5206;&#x5DE5;&#x4E0B;&#x8F7D;&#xFF0C;&#x81EA;&#x7136;&#x8981;&#x77E5;&#x9053;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x81EA;&#x5DF1;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E0E;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x89E3;&#x51B3;&#x7EBF;&#x7A0B;&#x7684;&#x5206;&#x914D;&#x4E0E;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x5B9A;&#x4F4D;&#x5230;&#x4E0B;&#x8F7D;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<h1 id=\"&#x5C01;&#x88C5;\"><a href=\"#&#x5C01;&#x88C5;\" class=\"headerlink\" title=\"&#x5C01;&#x88C5;\"></a>&#x5C01;&#x88C5;</h1><p>&#x5BF9;&#x4E8E;&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x5C01;&#x88C5;&#x5230;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x7C7B;&#x4E2D;<code>DownUtil</code>&#xFF0C;&#x5411;&#x5176;&#x4E2D;&#x4F20;&#x5165;&#x4E0B;&#x8F7D;&#x7684;&#x94FE;&#x63A5;&#x3001;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x8DEF;&#x5F84;&#x3001;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x7EBF;&#x7A0B;&#x6570;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public DownUtil(String path, String targetFile, int threadNum) {</div><div class=\"line\">        this.path = path;</div><div class=\"line\">        this.targetFile = targetFile;</div><div class=\"line\">        this.threadNum = threadNum;</div><div class=\"line\">        downThreads = new DownThread[threadNum];</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<code>DownThread</code>&#x5B9E;&#x73B0;&#x7684;&#x662F;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x4E0B;&#x8F7D;</p>\n<h1 id=\"&#x5206;&#x914D;&#x7EBF;&#x7A0B;\"><a href=\"#&#x5206;&#x914D;&#x7EBF;&#x7A0B;\" class=\"headerlink\" title=\"&#x5206;&#x914D;&#x7EBF;&#x7A0B;\"></a>&#x5206;&#x914D;&#x7EBF;&#x7A0B;</h1><p>&#x8FD9;&#x91CC;&#x901A;&#x8FC7;<code>HttpURLConnection</code>&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x4E0B;&#x8F7D;&#xFF0C;&#x901A;&#x8FC7;<code>getContentLength()</code>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;&#x7684;&#x603B;&#x5927;&#x5C0F;&#xFF0C;&#x518D;&#x5BF9;&#x5176;&#x5E73;&#x5747;&#x5206;&#x914D;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x786E;&#x5B9A;&#x4E86;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x662F;&#x5B9A;&#x4F4D;&#x5230;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4E0B;&#x8F7D;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>RandomAccessFile</code>&#x6765;&#x8FFD;&#x8E2A;&#x5B9A;&#x4F4D;&#x5230;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5B83;&#x7684;<code>seek()</code>&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5B9A;&#x4F4D;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x8BE6;&#x7EC6;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void download() throws Exception {</div><div class=\"line\">    URL url = new URL(path);</div><div class=\"line\">    HttpURLConnection conn = (HttpURLConnection) url.openConnection();</div><div class=\"line\">    conn.setRequestMethod(&quot;GET&quot;);</div><div class=\"line\">    conn.setConnectTimeout(5000);</div><div class=\"line\">    conn.setRequestProperty(&quot;Accept-Language&quot;, &quot;zh-CN&quot;);</div><div class=\"line\">    conn.setRequestProperty(&quot;Charset&quot;, &quot;UTF-8&quot;);</div><div class=\"line\">    conn.setRequestProperty(&quot;Connection&quot;, &quot;Keep-Alive&quot;);</div><div class=\"line\"></div><div class=\"line\">    fileSize = conn.getContentLength();</div><div class=\"line\">    conn.disconnect();</div><div class=\"line\">    //&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;</div><div class=\"line\">    int currentPartSize = fileSize / threadNum + 1;</div><div class=\"line\">    RandomAccessFile file = new RandomAccessFile(targetFile, &quot;rw&quot;);</div><div class=\"line\"></div><div class=\"line\">    //&#x8BBE;&#x7F6E;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x5927;&#x5C0F;</div><div class=\"line\">    file.setLength(fileSize);</div><div class=\"line\">    file.close();</div><div class=\"line\">    for (int i = 0; i &lt; threadNum; i++) {</div><div class=\"line\">        //&#x4E0B;&#x8F7D;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;</div><div class=\"line\">        int startPos = i * currentPartSize;</div><div class=\"line\">        RandomAccessFile currentPart = new RandomAccessFile(targetFile, &quot;rw&quot;);</div><div class=\"line\">        //&#x5B9A;&#x4F4D;&#x5230;&#x4E0B;&#x8F7D;&#x4F4D;&#x7F6E;</div><div class=\"line\">        currentPart.seek(startPos);</div><div class=\"line\">        //&#x4E0B;&#x8F7D;&#x7EBF;&#x7A0B;</div><div class=\"line\">        downThreads[i] = new DownThread(startPos, currentPartSize, currentPart);</div><div class=\"line\">        downThreads[i].start();</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h1 id=\"&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;\"><a href=\"#&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;\" class=\"headerlink\" title=\"&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;\"></a>&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;</h1><p>&#x4E0B;&#x9762;&#x5C31;&#x662F;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x4E0B;&#x8F7D;<code>DownThread</code>&#xFF0C;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x5F97;&#x5230;&#x4E86;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x521D;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x83B7;&#x53D6;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7684;&#x8F93;&#x5165;&#x6D41;<code>InputStream</code>&#xFF0C;&#x901A;&#x8FC7;<code>skip()</code>&#x65B9;&#x6CD5;&#x8DF3;&#x8DC3;&#x5230;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x518D;&#x5199;&#x5165;&#x5230;<code>RandomAccessFile</code>&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">    public DownThread(int startPos, int currentPartSize, RandomAccessFile currentPart) {</div><div class=\"line\">        this.startPos = startPos;</div><div class=\"line\">        this.currentPartSize = currentPartSize;</div><div class=\"line\">        this.currentPart = currentPart;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void run() {</div><div class=\"line\">        try {</div><div class=\"line\">            URL url = new URL(path);</div><div class=\"line\">            HttpURLConnection conn = (HttpURLConnection) url.openConnection();</div><div class=\"line\">            conn.setRequestMethod(&quot;GET&quot;);</div><div class=\"line\">            conn.setConnectTimeout(5000);</div><div class=\"line\">            conn.setRequestProperty(&quot;Accept-Language&quot;, &quot;zh-CN&quot;);</div><div class=\"line\">            conn.setRequestProperty(&quot;Charset&quot;, &quot;UTF-8&quot;);</div><div class=\"line\">            InputStream in = conn.getInputStream();</div><div class=\"line\">            </div><div class=\"line\">            skipFully(in, startPos);</div><div class=\"line\">            byte[] buffer = new byte[1024];</div><div class=\"line\">            int hasRead = 0;</div><div class=\"line\">            while ((hasRead = in.read(buffer)) &gt; 0 &amp;&amp; length &lt; currentPartSize) {</div><div class=\"line\">                currentPart.write(buffer, 0, hasRead);</div><div class=\"line\">                length += hasRead;</div><div class=\"line\">            }</div><div class=\"line\">            currentPart.close();</div><div class=\"line\">            in.close();</div><div class=\"line\">        } catch (Exception e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4E0B;&#x8F7D;&#xFF0C;&#x6700;&#x540E;&#x8C03;&#x7528;&#x5C01;&#x88C5;&#x7C7B;<code>DownUtil</code>&#x5C31;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x5173;&#x952E;&#x5C31;&#x662F;&#x5206;&#x914D;&#x597D;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5B9A;&#x4F4D;&#x8FDB;&#x7A0B;&#x4E0B;&#x8F7D;&#x7684;&#x51C6;&#x786E;&#x4F4D;&#x7F6E;&#xFF0C;&#x83B7;&#x53D6;&#x8F93;&#x5165;&#x6D41;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x540C;&#x65F6;&#x5199;&#x5165;&#x5230;&#x6587;&#x4EF6;&#x7684;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x3002;&#x53EF;&#x4EE5;&#x501F;&#x52A9;<code>RandomAccessFile</code>&#x6765;&#x8FDB;&#x884C;&#x5B9A;&#x4F4D;&#x3002;</p>\n<p>&#x5F53;&#x7136;&#x4E5F;&#x5E76;&#x975E;&#x5F00;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x8D8A;&#x591A;&#x4E0B;&#x8F7D;&#x7684;&#x901F;&#x5EA6;&#x4E5F;&#x5C31;&#x8D8A;&#x5FEB;&#xFF0C;&#x56E0;&#x4E3A;&#x7EBF;&#x7A0B;&#x8D8A;&#x591A;&#x5BF9;&#x4E8E;&#x7A0B;&#x5E8F;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x8D1F;&#x62C5;&#xFF0C;&#x8FC7;&#x591A;&#x7684;&#x8BDD;&#x53CD;&#x800C;&#x4F1A;&#x964D;&#x4F4E;&#x4E0B;&#x8F7D;&#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5408;&#x7406;&#x8FD0;&#x7528;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"七大排序算法总结","url":"https://idisfkj.github.io/2016/06/19/七大排序算法总结/","content":"<p>&#x524D;&#x9762;&#x4ECB;&#x7ECD;&#x4E86;&#x4E03;&#x5927;&#x7B97;&#x6CD5;&#x7684;&#x601D;&#x60F3;&#x4E0E;&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x505A;&#x4E00;&#x4E2A;&#x5F52;&#x603B;&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">&#x6392;&#x5E8F;&#x65B9;&#x6CD5;</th>\n<th style=\"text-align:center\">&#x5E73;&#x5747;&#x590D;&#x6742;&#x5EA6;</th>\n<th style=\"text-align:center\">&#x6700;&#x574F;&#x590D;&#x6742;&#x5EA6;</th>\n<th style=\"text-align:center\">&#x6700;&#x597D;&#x590D;&#x6742;&#x5EA6;</th>\n<th style=\"text-align:center\">&#x8F85;&#x52A9;&#x7A7A;&#x95F4;</th>\n<th style=\"text-align:center\">&#x7A33;&#x5B9A;&#x6027;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5F52;&#x5E76;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(n)</td>\n<td style=\"text-align:center\">&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5FEB;&#x901F;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x4E0D;&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5E0C;&#x5C14;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(nlogn)~O(n^2)</td>\n<td style=\"text-align:center\">O(n^1.3)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(logn)~O(n)</td>\n<td style=\"text-align:center\">&#x4E0D;&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5806;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x4E0D;&#x7A33;&#x5B9A;</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;\"><a href=\"#&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;\"></a>&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;\"><a href=\"#&#x601D;&#x60F3;\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%80-%E7%9B%B4%E6%8E%A5%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;</a>&#xFF0C;&#x6574;&#x4F53;&#x601D;&#x60F3;&#x662F;&#x5C06;&#x6570;&#x636E;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x533A;&#x57DF;&#xFF0C;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E0E;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x3002;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x662F;&#x6BCF;&#x6B21;&#x4ECE;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x9009;&#x62E9;&#x51FA;&#x6700;&#x5C0F;&#x7684;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x63D2;&#x5165;&#x5230;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x6700;&#x672B;&#x5C3E;&#xFF0C;&#x4ECE;&#x800C;&#x5F62;&#x6210;&#x66F4;&#x5927;&#x7684;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x3002;&#x76F4;&#x5230;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x6570;&#x4E3A;&#x96F6;&#xFF0C;&#x7ED3;&#x675F;&#x6392;&#x5E8F;&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;\"><a href=\"#&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x5047;&#x8BBE;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;a[0&#x2026;n-1];</p>\n<ol>\n<li>&#x9996;&#x5148;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x4E2A;&#x6570;&#x4E3A;0&#xFF0C;&#x4EE4;<code>i = 0</code>&#x3002;&#x4ECE;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x9009;&#x62E9;&#x6700;&#x5C0F;&#x7684;&#x6570;&#xFF0C;&#x52A0;&#x5165;&#x5230;<code>&#x6709;&#x5E8F;&#x533A;a[i]</code>&#x4E2D;&#x3002;&#x4F7F;&#x5F97;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E3A;<code>a[0..i]</code>,<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E3A;<code>a[i...n-1]</code></li>\n<li>&#x5B8C;&#x6210;&#x540E; <code>i++</code> ,&#x7136;&#x540E;&#x7EE7;&#x7EED;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230; <code>i = n-1</code> &#x4E3A;&#x6B62;&#x3002;&#x4F7F;&#x5F97;&#x5168;&#x90E8;&#x6570;&#x90FD;&#x5728;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5192;&#x6CE1;&#x6392;&#x5E8F;\"><a href=\"#&#x5192;&#x6CE1;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5192;&#x6CE1;&#x6392;&#x5E8F;\"></a>&#x5192;&#x6CE1;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-1\"><a href=\"#&#x601D;&#x60F3;-1\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%8C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</a>&#x4E3B;&#x8981;&#x662F;&#x76F8;&#x90BB;&#x7684;&#x4E24;&#x4E2A;&#x6570;&#x4E24;&#x4E24;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x62FF;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x8BF4;&#x660E;&#xFF0C;&#x8FDB;&#x884C;&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x540E;&#x4F1A;&#x5C06;&#x5927;&#x7684;&#x6570;<code>&#x6C89;</code>&#x5230;&#x5E95;&#x90E8;&#xFF0C;&#x5C06;&#x5C0F;&#x5F97;&#x6570;<code>&#x6D6E;</code>&#x5230;&#x9876;&#x90E8;&#x3002;&#x6240;&#x4EE5;&#x5192;&#x6CE1;&#x8BF4;&#x6CD5;&#x7531;&#x6B64;&#x5F97;&#x540D;&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-1\"><a href=\"#&#x6B65;&#x9AA4;-1\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x4EE5;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x4E3A;&#x4F8B;&#xFF0C;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#x4E3A;<code>n</code>&#x3002;</p>\n<ol>\n<li>&#x7B2C;<code>N = 0</code>&#x8D9F;&#x6392;&#x5E8F;&#x5F00;&#x59CB;&#x90FD;&#x4ECE;<code>a[0]</code>&#x5F00;&#x59CB;&#x4E0E;&#x5176;&#x4E0B;&#x9762;&#x7684;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x4E8E;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x5219;&#x4EA4;&#x6362;&#x4ED6;&#x4EEC;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>\n<li>&#x7EE7;&#x7EED;&#x4E0E;&#x4E0B;&#x4E00;&#x4E2A;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5927;&#x4E8E;&#x76F8;&#x90BB;&#x7684;&#x5C31;&#x4EA4;&#x6362;&#xFF0C;&#x6700;&#x540E;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;<code>n-1</code>&#x6B21;&#x540E;&#xFF0C;&#x7B2C;<code>N = 0</code>&#x8D9F;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x6570;&#x5C31;&#x5728;&#x6570;&#x7EC4;&#x7684;<code>a[n-1]</code>&#x5904;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230; <code>N = n-1</code>,&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<h1 id=\"&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\"><a href=\"#&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\"></a>&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-2\"><a href=\"#&#x601D;&#x60F3;-2\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#x7684;&#x57FA;&#x672C;&#x601D;&#x60F3;&#x662F;:<code>&#x5C06;&#x9700;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x5173;&#x952E;&#x6570;&#x4E0E;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x6570;&#x636E;&#x4ECE;&#x540E;&#x5F80;&#x524D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x4F7F;&#x5176;&#x63D2;&#x5165;&#x5230;&#x5408;&#x9002;&#x7684;&#x4F4D;&#x7F6E;</code>&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-2\"><a href=\"#&#x6B65;&#x9AA4;-2\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n]</code></p>\n<ol>\n<li>&#x5C06;<code>a[0]</code>&#x4F5C;&#x4E3A;&#x8D77;&#x59CB;&#x6570;&#x636E;&#xFF0C;&#x4ECE;<code>a[1]</code>&#x5F00;&#x59CB;&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x82E5;&#x5C0F;&#x4E8E;&#x524D;&#x9762;&#x6240;&#x9047;&#x5230;&#x7684;&#x6BD4;&#x8F83;&#x6570;&#xFF0C;&#x5219;&#x4EA4;&#x6362;&#x4E24;&#x4E2A;&#x6BD4;&#x8F83;&#x6570;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x7684;&#x6BD4;&#x8F83;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x5C06;<code>a[n]</code>&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;&#x6BD4;&#x8F83;&#x5B8C;&#x4EE5;&#x540E;&#x5219;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5F52;&#x5E76;&#x6392;&#x5E8F;\"><a href=\"#&#x5F52;&#x5E76;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5F52;&#x5E76;&#x6392;&#x5E8F;\"></a>&#x5F52;&#x5E76;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-3\"><a href=\"#&#x601D;&#x60F3;-3\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E5%9B%9B-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/\">&#x5F52;&#x5E76;&#x6392;&#x5E8F;</a>&#x662F;&#x4E00;&#x4E2A;&#x6548;&#x7387;&#x76F8;&#x5BF9;&#x8F83;&#x9AD8;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#xFF0C;&#x5B83;&#x91C7;&#x7528;&#x7684;&#x662F;<code>&#x5206;&#x6CBB;&#x7684;&#x601D;&#x60F3;</code>&#xFF0C;&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x4FDD;&#x8BC1;&#x6BCF;&#x7EC4;&#x90FD;&#x6709;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#x6392;&#x5E8F;&#xFF0C;&#x6700;&#x7EC8;&#x4F7F;&#x6574;&#x4E2A;&#x5E8F;&#x5217;&#x6709;&#x5E8F;&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-3\"><a href=\"#&#x6B65;&#x9AA4;-3\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><ol>\n<li>&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x5E8F;&#x5217;&#x91C7;&#x7528;<code>&#x5206;&#x6CBB;&#x601D;&#x60F3;</code>&#x5C06;&#x5176;&#x5212;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x4F7F;&#x5176;&#x6709;&#x5E8F;&#xFF0C;&#x5176;&#x4E2D;&#x53EF;&#x91C7;&#x7528;&#x9012;&#x5F52;&#x8FDB;&#x884C;&#x5212;&#x5206;&#x3002;</li>\n<li>&#x5C06;&#x6709;&#x5E8F;&#x7684;&#x7EC4;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x5F52;&#x5E76;&#x64CD;&#x4F5C;&#xFF0C;&#x5176;&#x4E2D;&#x501F;&#x52A9;&#x4E00;&#x4E2A;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#xFF0C;&#x5C06;&#x5DE6;&#x53F3;&#x5212;&#x5206;&#x7684;&#x6709;&#x5E8F;&#x7EC4;&#x4ECE;&#x5934;&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5C06;&#x8F83;&#x5C0F;&#x7684;&#x6570;&#x52A0;&#x5165;&#x5230;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;&#x4E14;&#x8F83;&#x5C0F;&#x7684;&#x6240;&#x5728;&#x6709;&#x5E8F;&#x6570;&#x7EC4;&#x5411;&#x540E;&#x81EA;&#x589E;&#xFF0C;&#x518D;&#x4E0E;&#x539F;&#x6765;&#x6BD4;&#x8F83;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;<code>2</code>&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x6570;&#x636E;&#x6BD4;&#x8F83;&#x5B8C;&#x6BD5;&#xFF0C;&#x6216;&#x8005;&#x5C06;&#x8FD8;&#x6709;&#x5269;&#x4F59;&#x6570;&#x672A;&#x6BD4;&#x8F83;&#x7684;&#x6709;&#x5E8F;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x6309;&#x539F;&#x6709;&#x7684;&#x987A;&#x5E8F;&#x52A0;&#x5165;&#x5230;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x4E2D;,&#x6700;&#x540E;&#x5C06;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x52A0;&#x5165;&#x5230;&#x539F;&#x6709;&#x6570;&#x7EC4;&#x7684;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;<code>2</code>&#x3001;<code>3</code>&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x7684;&#x5DE6;&#x53F3;&#x5212;&#x5206;&#x5F52;&#x5E76;&#x5B8C;&#x6BD5;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5FEB;&#x901F;&#x6392;&#x5E8F;\"><a href=\"#&#x5FEB;&#x901F;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5FEB;&#x901F;&#x6392;&#x5E8F;\"></a>&#x5FEB;&#x901F;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-4\"><a href=\"#&#x601D;&#x60F3;-4\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%94-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/\">&#x5FEB;&#x901F;&#x6392;&#x5E8F;</a>&#x7684;&#x4E3B;&#x8981;&#x601D;&#x60F3;&#x662F;&#xFF1A;<code>&#x5C06;&#x4E00;&#x4E2A;&#x5F85;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x4EE5;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x5206;&#x754C;&#x7EBF;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x90E8;&#x5206;&#x5C0F;&#x4E8E;&#x8FD9;&#x4E2A;&#x5206;&#x754C;&#x7EBF;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x5927;&#x4E8E;&#x8FD9;&#x4E2A;&#x5206;&#x754C;&#x7EBF;&#x7684;&#x6570;&#x636E;&#x3002;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x9012;&#x5F52;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x518D;&#x5BF9;&#x8FD9;&#x4E24;&#x4E2A;&#x5E8F;&#x5217;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x4EE5;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x6709;&#x5E8F;&#x7684;</code>&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-4\"><a href=\"#&#x6B65;&#x9AA4;-4\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x5047;&#x8BBE;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<ol>\n<li>&#x4E00;&#x822C;&#x90FD;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x6570;<code>a[i]</code> (<code>i = 0</code>) &#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x6570;&#xFF0C;&#x5373;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x5206;&#x754C;&#x6570;&#x3002;&#x5148;&#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x540E;&#x9762;&#x5F00;&#x59CB;&#x5373;&#x521D;&#x503C;<code>j = n-1</code>&#xFF0C;&#x9010;&#x4E2A;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x904D;&#x5386;&#x4E0E;&#x9009;&#x7684;&#x7684;&#x5173;&#x952E;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;(<code>j--</code>)&#xFF0C;&#x82E5;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x7EE7;&#x7EED;&#x904D;&#x5386;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5176;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x5E76;&#x505C;&#x6B62;&#x904D;&#x5386;&#x4E14;<code>i++</code>&#x8BB0;&#x5F55;&#x6B64;&#x65F6;&#x7684;<code>i</code>&#x3001;<code>j</code>&#x3002;</li>\n<li>&#x505C;&#x6B62;&#x524D;&#x9762;&#x7684;&#x904D;&#x5386;&#xFF0C;&#x518D;&#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<code>i</code>&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5411;&#x540E;&#x8FDB;&#x884C;&#x904D;&#x5386;&#xFF0C;&#x9010;&#x4E2A;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;(<code>i++</code>)&#xFF0C;&#x82E5;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x7EE7;&#x7EED;&#x904D;&#x5386;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5176;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x5E76;&#x505C;&#x6B62;&#x904D;&#x5386;&#x4E14;<code>j--</code>&#x8BB0;&#x5F55;&#x6B64;&#x65F6;&#x7684;<code>i</code>&#x3001;<code>j</code>&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;<code>i==j</code>&#x5C31;&#x7ED3;&#x675F;&#x672C;&#x6B21;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x3002;</li>\n<li>&#x6B64;&#x65F6;&#x5DF2;&#x7ECF;&#x5C06;&#x5176;&#x6309;&#x5173;&#x952E;&#x6570;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x518D;&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5BF9;&#x5212;&#x5206;&#x7684;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x76F4;&#x5230;&#x5212;&#x5206;&#x7684;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4E2A;&#x6570;&#x4E3A;<code>1</code>&#x5373;&#x6B64;&#x65F6;&#x6240;&#x6709;&#x6570;&#x636E;&#x6709;&#x5E8F;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5E0C;&#x5C14;&#x6392;&#x5E8F;\"><a href=\"#&#x5E0C;&#x5C14;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5E0C;&#x5C14;&#x6392;&#x5E8F;\"></a>&#x5E0C;&#x5C14;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-5\"><a href=\"#&#x601D;&#x60F3;-5\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/19/%E7%AE%97%E6%B3%95-%E5%85%AD-%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F/\">&#x5E0C;&#x5C14;&#x6392;&#x5E8F;</a>&#x662F;&#x8BB0;&#x5F55;&#x589E;&#x91CF;&#x6765;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x518D;&#x5BF9;&#x5206;&#x7EC4;&#x5185;&#x90E8;&#x8FDB;&#x884C;<a href=\"http://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x968F;&#x7740;&#x589E;&#x91CF;&#x7684;&#x4E0D;&#x65AD;&#x51CF;&#x5C0F;&#xFF0C;&#x76F4;&#x5230;&#x589E;&#x91CF;&#x51CF;&#x5C0F;&#x5230;<code>1</code>&#x65F6;&#xFF0C;&#x5373;&#x6BCF;&#x4E2A;&#x5206;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x91CF;&#x4E3A;<code>1</code>&#xFF0C;&#x6B64;&#x65F6;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-5\"><a href=\"#&#x6B65;&#x9AA4;-5\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x8BBE;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<ol>\n<li>&#x4E00;&#x822C;&#x5F00;&#x59CB;&#x53D6;&#x589E;&#x91CF;&#x6570;<code>d=n/2</code>&#x3002;&#x4ECE;<code>a[0]~a[d-1]</code>&#x5C06;&#x6570;&#x7EC4;&#x4E2D;&#x6570;&#x636E;&#x4E4B;&#x95F4;&#x7684;&#x95F4;&#x9694;&#x4E3A;&#x589E;&#x91CF;&#x6570;<code>d</code>&#x7684;&#x500D;&#x6570;&#x5F52;&#x4E3A;&#x76F8;&#x540C;&#x7EC4;&#x3002;</li>\n<li>&#x4F9D;&#x6B21;&#x5BF9;&#x6BCF;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;<a href=\"http://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x4F7F;&#x5176;&#x6709;&#x5E8F;&#x3002;</li>\n<li>&#x518D;&#x589E;&#x91CF;&#x6570;<code>d=d/2</code>&#xFF0C;&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;<code>d=1</code>&#x4E3A;&#x6B62;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5806;&#x6392;&#x5E8F;\"><a href=\"#&#x5806;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5806;&#x6392;&#x5E8F;\"></a>&#x5806;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-6\"><a href=\"#&#x601D;&#x60F3;-6\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/19/%E7%AE%97%E6%B3%95-%E4%B8%83-%E5%A0%86%E6%8E%92%E5%BA%8F/\">&#x5806;&#x6392;&#x5E8F;</a>&#x662F;&#x91C7;&#x7528;&#x6811;&#x7684;&#x5F62;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x6765;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x7684;&#xFF0C;&#x5176;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x5806;&#x90FD;&#x662F;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x3002;&#x5806;&#x6392;&#x5E8F;&#x5206;&#x4E3A;&#x5927;&#x6839;&#x5806;&#x4E0E;&#x5C0F;&#x6839;&#x5806;&#xFF0C;<code>&#x5927;&#x6839;&#x5806;&#xFF08;&#x5C0F;&#x6839;&#x5806;&#xFF09;&#x8868;&#x793A;&#x5728;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x4E2D;&#xFF0C;&#x6240;&#x7528;&#x7684;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#xFF08;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#xFF09;&#x4ED6;&#x4EEC;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#xFF08;&#x5B58;&#x5728;&#xFF09;</code>&#x3002;&#x6240;&#x4EE5;&#x5806;&#x7684;&#x9876;&#x70B9;&#x4E0D;&#x662F;&#x6700;&#x5927;&#x6570;&#x5C31;&#x662F;&#x6700;&#x5C0F;&#x6570;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8FD9;&#x79CD;&#x6027;&#x8D28;&#xFF0C;<code>&#x6BCF;&#x6B21;&#x90FD;&#x53D6;&#x51FA;&#x5927;&#x6839;&#x5806;&#xFF08;&#x5C0F;&#x6839;&#x5806;&#xFF09;&#x7684;&#x9876;&#x70B9;&#x6570;&#xFF0C;&#x5F62;&#x6210;&#x6709;&#x5E8F;&#x5E8F;&#x5217;</code>&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-6\"><a href=\"#&#x6B65;&#x9AA4;-6\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><ol>\n<li>&#x9996;&#x5148;&#x751F;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x6216;&#x5927;&#x6839;&#x5806;&#xFF0C;&#x8FD9;&#x91CC;&#x4EE5;&#x5C0F;&#x6839;&#x5806;&#x4E3A;&#x4F8B;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x6BCF;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x770B;&#x505A;&#x662F;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x7684;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x5C06;&#x4ED6;&#x4EEC;&#x90FD;&#x751F;&#x6210;&#x5C0F;&#x6839;&#x5806;&#xFF0C;&#x4ECE;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#xFF0C;&#x628A;&#x5176;&#x5F53;&#x505A;&#x662F;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x9010;&#x6B65;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x5C0F;&#x6839;&#x5806;&#x3002;&#x4F8B;&#x5982;&#x4E0A;&#x56FE;&#x4E2D;&#x7684;&#x5927;&#x6839;&#x5806;&#xFF0C;&#x5C06;&#x5176;&#x53D8;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5148;&#x4EE5;<code>30</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x6839;&#x636E;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x9700;&#x8981;&#x4E0E;<code>10</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;;&#x518D;&#x4EE5;<code>60</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x53D1;&#x73B0;&#x9700;&#x8981;&#x4E0E;<code>15</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF1B;&#x6700;&#x540E;&#x4E0E;<code>70</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x9700;&#x8981;&#x4E0E;&#x539F;&#x6765;<code>30</code>&#x7684;&#x4F4D;&#x7F6E;&#x5373;&#x73B0;&#x5728;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#x7684;<code>10</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF0C;&#x6700;&#x7EC8;&#x5F62;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x3002;</li>\n<li>&#x7136;&#x540E;&#x5C31;&#x662F;&#x53D6;&#x51FA;&#x5F62;&#x6210;&#x7684;&#x5C0F;&#x6839;&#x5806;&#x5F97;&#x9876;&#x70B9;&#x503C;&#xFF0C;&#x5C06;&#x5176;&#x4E0E;&#x5806;&#x4E2D;&#x7B2C;<code>N</code>(N=n)&#x4E2A;&#x8282;&#x70B9;&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF0C;&#x5373;<code>a[N-1]</code>&#x3002;</li>\n<li>&#x6B64;&#x65F6;&#x5C0F;&#x6839;&#x5806;&#x88AB;&#x7834;&#x574F;&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x751F;&#x4EA7;&#x5C0F;&#x6839;&#x5806;<code>N--</code>&#xFF0C;&#x4F46;&#x6B64;&#x65F6;&#x8981;&#x751F;&#x6210;&#x7684;&#x6570;&#x7684;&#x8303;&#x56F4;&#x4E3A;<code>a[0...N-1]</code>&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;<code>2</code>&#x3001;<code>3</code>&#xFF0C;&#x76F4;&#x5230;<code>N=1</code>&#xFF0C;&#x5373;<code>a[0]</code>&#xFF0C;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<p>&#x5982;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6307;&#x51FA;&#xFF0C;&#x5168;&#x90E8;&#x4EE3;&#x7801;&#x5DF2;&#x7ECF;&#x653E;&#x5230;github&#x4E0A;&#xFF0C;&#x6709;&#x9700;&#x8981;&#x7684;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#x3002;</p>\n<p>github&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/Arithmetic\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/Arithmetic</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(七)堆排序","url":"https://idisfkj.github.io/2016/06/19/算法-七-堆排序/","content":"<p>&#x5806;&#x6392;&#x5E8F;&#x662F;&#x91C7;&#x7528;&#x6811;&#x7684;&#x5F62;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x6765;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x7684;&#xFF0C;&#x5176;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x5806;&#x90FD;&#x662F;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x3002;&#x5806;&#x6392;&#x5E8F;&#x5206;&#x4E3A;&#x5927;&#x6839;&#x5806;&#x4E0E;&#x5C0F;&#x6839;&#x5806;&#xFF0C;<code>&#x5927;&#x6839;&#x5806;&#xFF08;&#x5C0F;&#x6839;&#x5806;&#xFF09;&#x8868;&#x793A;&#x5728;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x4E2D;&#xFF0C;&#x6240;&#x7528;&#x7684;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#xFF08;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#xFF09;&#x4ED6;&#x4EEC;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#xFF08;&#x5B58;&#x5728;&#xFF09;</code>&#x3002;&#x6240;&#x4EE5;&#x5806;&#x7684;&#x9876;&#x70B9;&#x4E0D;&#x662F;&#x6700;&#x5927;&#x6570;&#x5C31;&#x662F;&#x6700;&#x5C0F;&#x6570;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8FD9;&#x79CD;&#x6027;&#x8D28;&#xFF0C;<code>&#x6BCF;&#x6B21;&#x90FD;&#x53D6;&#x51FA;&#x5927;&#x6839;&#x5806;&#xFF08;&#x5C0F;&#x6839;&#x5806;&#xFF09;&#x7684;&#x9876;&#x70B9;&#x6570;&#xFF0C;&#x5F62;&#x6210;&#x6709;&#x5E8F;&#x5E8F;&#x5217;</code>&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><p>&#x9996;&#x5148;&#x8981;&#x660E;&#x767D;&#x5806;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x8868;&#x793A;&#x65B9;&#x5F0F;&#x3002;<code>&#x662F;&#x6309;&#x7167;&#x4ECE;&#x5806;&#x5F97;&#x9876;&#x70B9;&#x5F00;&#x59CB;&#x4ECE;&#x4E0A;&#x5F80;&#x4E0B;&#xFF0C;&#x4ECE;&#x5DE6;&#x5F80;&#x53F3;&#x5B58;&#x653E;&#x5230;&#x6570;&#x7EC4;&#x4E2D;</code>&#x3002;</p>\n<p><img src=\"/2016/06/19/&#x7B97;&#x6CD5;-&#x4E03;-&#x5806;&#x6392;&#x5E8F;/1.jpg\" alt=\"&#x5806;&#x56FE;\"></p>\n<blockquote>\n<p><em>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x5E94;&#x8BE5;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x5806;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;</em></p>\n</blockquote>\n<p>&#x8BBE;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<p>&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x7684;<code>i</code>&#x7684;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;(&#x5B58;&#x5728;)&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#x5206;&#x522B;&#x4E3A;<code>i*2+1</code>&#x3001;<code>i*2+2</code>&#x3002;&#x800C;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x4E3A;<code>n/2-1</code>(n&#x4E3A;&#x6570;&#x7EC4;&#x7684;&#x5927;&#x5C0F;)&#x3002;&#x501F;&#x52A9;&#x8FD9;&#x4E9B;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5C0F;&#x6839;&#x5806;&#x4E0E;&#x5927;&#x6839;&#x5806;&#x7684;&#x5F62;&#x6210;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x80FD;&#x5B9E;&#x73B0;&#x5806;&#x6392;&#x5E8F;&#x3002;</p>\n<ol>\n<li>&#x9996;&#x5148;&#x751F;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x6216;&#x5927;&#x6839;&#x5806;&#xFF0C;&#x8FD9;&#x91CC;&#x4EE5;&#x5C0F;&#x6839;&#x5806;&#x4E3A;&#x4F8B;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x6BCF;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x770B;&#x505A;&#x662F;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x7684;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x5C06;&#x4ED6;&#x4EEC;&#x90FD;&#x751F;&#x6210;&#x5C0F;&#x6839;&#x5806;&#xFF0C;&#x4ECE;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#xFF0C;&#x628A;&#x5176;&#x5F53;&#x505A;&#x662F;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x9010;&#x6B65;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x5C0F;&#x6839;&#x5806;&#x3002;&#x4F8B;&#x5982;&#x4E0A;&#x56FE;&#x4E2D;&#x7684;&#x5927;&#x6839;&#x5806;&#xFF0C;&#x5C06;&#x5176;&#x53D8;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5148;&#x4EE5;<code>30</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x6839;&#x636E;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x9700;&#x8981;&#x4E0E;<code>10</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;;&#x518D;&#x4EE5;<code>60</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x53D1;&#x73B0;&#x9700;&#x8981;&#x4E0E;<code>15</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF1B;&#x6700;&#x540E;&#x4E0E;<code>70</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x9700;&#x8981;&#x4E0E;&#x539F;&#x6765;<code>30</code>&#x7684;&#x4F4D;&#x7F6E;&#x5373;&#x73B0;&#x5728;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#x7684;<code>10</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF0C;&#x6700;&#x7EC8;&#x5F62;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x3002;</li>\n<li>&#x7136;&#x540E;&#x5C31;&#x662F;&#x53D6;&#x51FA;&#x5F62;&#x6210;&#x7684;&#x5C0F;&#x6839;&#x5806;&#x5F97;&#x9876;&#x70B9;&#x503C;&#xFF0C;&#x5C06;&#x5176;&#x4E0E;&#x5806;&#x4E2D;&#x7B2C;<code>N</code>(N=n)&#x4E2A;&#x8282;&#x70B9;&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF0C;&#x5373;<code>a[N-1]</code>&#x3002;</li>\n<li>&#x6B64;&#x65F6;&#x5C0F;&#x6839;&#x5806;&#x88AB;&#x7834;&#x574F;&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x751F;&#x4EA7;&#x5C0F;&#x6839;&#x5806;<code>N--</code>&#xFF0C;&#x4F46;&#x6B64;&#x65F6;&#x8981;&#x751F;&#x6210;&#x7684;&#x6570;&#x7684;&#x8303;&#x56F4;&#x4E3A;<code>a[0...N-1]</code>&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;<code>2</code>&#x3001;<code>3</code>&#xFF0C;&#x76F4;&#x5230;<code>N=1</code>&#xFF0C;&#x5373;<code>a[0]</code>&#xFF0C;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><p>&#x4E0D;&#x7BA1;&#x662F;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x521B;&#x5EFA;&#x5C0F;&#x6839;&#x5806;&#x8FD8;&#x662F;&#x6BCF;&#x6B21;&#x53D6;&#x4E86;&#x9876;&#x70B9;&#x6570;&#x4E4B;&#x540E;&#x518D;&#x8C03;&#x6574;&#x6210;&#x5C0F;&#x8DDF;&#x5806;&#xFF0C;&#x4ED6;&#x4EEC;&#x7684;&#x903B;&#x8F91;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;<code>&#x5373;&#x90FD;&#x662F;&#x4E0E;&#x5176;&#x5173;&#x952E;&#x5B57;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x9009;&#x51FA;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x5C06;&#x5176;&#x653E;&#x5230;&#x7236;&#x8282;&#x70B9;&#x5904;&#x7684;&#x4F4D;&#x7F6E;</code>&#x3002;&#x6240;&#x4EE5;&#x8C03;&#x6574;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">/**</div><div class=\"line\">     * &#x8C03;&#x6574;&#x6210;&#x6700;&#x5C0F;&#x5806;</div><div class=\"line\">     * @param arr &#x6570;&#x7EC4;</div><div class=\"line\">     * @param top &#x5806;&#x9876;&#x4F4D;&#x7F6E;</div><div class=\"line\">     * @param tail &#x5806;&#x672A;&#x4F4D;&#x7F6E;</div><div class=\"line\">     */</div><div class=\"line\">    public static void fitToMinHeap(int[] arr, int top, int tail) {</div><div class=\"line\">        int i = top;</div><div class=\"line\">        int temp = arr[i];</div><div class=\"line\">        int j = 2 * i + 1;//&#x627E;&#x5230;&#x5B50;&#x8282;&#x70B9;</div><div class=\"line\">        while (j &lt; tail) {</div><div class=\"line\">            if (j + 1 &lt; tail &amp;&amp; arr[j + 1] &lt; arr[j])//&#x627E;&#x51FA;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#x4E2D;&#x7684;&#x6700;&#x5C0F;</div><div class=\"line\">                j++;</div><div class=\"line\"></div><div class=\"line\">            if (arr[j] &gt;= temp)//&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x5927;&#x4E8E;&#x7236;&#x8282;&#x70B9;&#x5219;&#x8DF3;&#x51FA;</div><div class=\"line\">                break;</div><div class=\"line\"></div><div class=\"line\">            arr[i] = arr[j];//&#x5C06;&#x5B50;&#x8282;&#x70B9;&#x5411;&#x4E0A;&#x79FB;,&#x5373;&#x79FB;&#x5230;&#x7236;&#x8282;&#x70B9;</div><div class=\"line\">            i = j;</div><div class=\"line\">            j = 2 * i + 1;</div><div class=\"line\">        }</div><div class=\"line\">        arr[i] = temp;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x7684;&#x4F4D;&#x7F6E;&#x4EA4;&#x6362;&#x6CA1;&#x6709;&#x76F4;&#x63A5;&#x6BCF;&#x6B21;&#x90FD;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x800C;&#x662F;&#x4E0E;&#x524D;&#x9762;&#x7684;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%94-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/\">&#x5FEB;&#x901F;&#x6392;&#x5E8F;</a>&#x4E00;&#x6837;&#xFF0C;&#x6700;&#x540E;&#x624D;&#x5C06;&#x5173;&#x952E;&#x5B57;&#x653E;&#x5230;&#x4ED6;&#x6240;&#x8981;&#x5B58;&#x653E;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<p>&#x4E3B;&#x8981;&#x7684;&#x751F;&#x6210;&#x6700;&#x5C0F;&#x5806;&#x7684;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x662F;&#x53D6;&#x6570;&#xFF0C;&#x518D;&#x8C03;&#x6574;&#xFF0C;&#x518D;&#x53D6;&#x6570;&#x7684;&#x5FAA;&#x73AF;&#x5B9E;&#x73B0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void heapSort(int[] arr) {</div><div class=\"line\">        int n = arr.length;</div><div class=\"line\">        for (int j = n / 2 - 1; j &gt;= 0; j--)//&#x4ECE;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5F00;&#x59CB;,&#x521D;&#x59CB;&#x5316;&#x751F;&#x6210;&#x6570;&#x7EC4;&#x8868;&#x793A;&#x7684;&#x6700;&#x5C0F;&#x5806;</div><div class=\"line\">            fitToMinHeap(arr, j, n);</div><div class=\"line\"></div><div class=\"line\">        for (int i = n - 1; i &gt; 0; i--) {//&#x6BCF;&#x6B21;&#x62FF;&#x51FA;&#x5806;&#x7684;&#x9876;&#x70B9;&#x503C;</div><div class=\"line\">            //&#x628A;&#x5806;&#x4E2D;&#x7684;&#x9876;&#x70B9;&#x4E0E;a[i]&#x70B9;&#x4E92;&#x6362;</div><div class=\"line\">            int temp = arr[0];</div><div class=\"line\">            arr[0] = arr[i];</div><div class=\"line\">            arr[i] = temp;</div><div class=\"line\">            fitToMinHeap(arr, 0, i);//&#x4EA4;&#x6362;&#x540E;&#x518D;&#x5BF9;&#x524D;i&#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x6700;&#x5C0F;&#x5806;&#x5316;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5F53;&#x7136;&#x4F7F;&#x7528;&#x5C0F;&#x6839;&#x5806;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x9006;&#x5E8F;&#x5E8F;&#x5217;&#xFF0C;&#x5373;&#x4ECE;&#x5927;&#x5230;&#x5C0F;&#x7684;&#x6392;&#x5E8F;</em></p>\n</blockquote>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;&#xFF0C;&#x5806;&#x6392;&#x5E8F;&#x8981;&#x7406;&#x89E3;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;</p>\n<ul>\n<li>&#x4F55;&#x4E3A;&#x5C0F;&#x6839;&#x5806;&#x3001;&#x5927;&#x6839;&#x5806;</li>\n<li>&#x5806;&#x7684;&#x521B;&#x5EFA;&#x539F;&#x7406;</li>\n<li>&#x5806;&#x6392;&#x5E8F;&#x7684;&#x53D6;&#x6570;&#x539F;&#x7406;</li>\n</ul>\n<p>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x51E0;&#x70B9;&#x7684;&#x7406;&#x89E3;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x638C;&#x63E1;&#x5806;&#x6392;&#x5E8F;&#x3002;&#x6700;&#x540E;&#x5806;&#x6392;&#x5E8F;&#x4E3A;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x4E14;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(nlogn)</code>&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(六)希尔排序","url":"https://idisfkj.github.io/2016/06/19/算法-六-希尔排序/","content":"<p>&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x662F;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x662F;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#x7684;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x6539;&#x8FDB;&#x7248;&#x3002;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x662F;&#x8BB0;&#x5F55;&#x589E;&#x91CF;&#x6765;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x518D;&#x5BF9;&#x5206;&#x7EC4;&#x5185;&#x90E8;&#x8FDB;&#x884C;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x968F;&#x7740;&#x589E;&#x91CF;&#x7684;&#x4E0D;&#x65AD;&#x51CF;&#x5C0F;&#xFF0C;&#x76F4;&#x5230;&#x589E;&#x91CF;&#x51CF;&#x5C0F;&#x5230;<code>1</code>&#x65F6;&#xFF0C;&#x5373;&#x6BCF;&#x4E2A;&#x5206;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x91CF;&#x4E3A;<code>1</code>&#xFF0C;&#x6B64;&#x65F6;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><p>&#x8BBE;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<ol>\n<li>&#x4E00;&#x822C;&#x5F00;&#x59CB;&#x53D6;&#x589E;&#x91CF;&#x6570;<code>d=n/2</code>&#x3002;&#x4ECE;<code>a[0]~a[d-1]</code>&#x5C06;&#x6570;&#x7EC4;&#x4E2D;&#x6570;&#x636E;&#x4E4B;&#x95F4;&#x7684;&#x95F4;&#x9694;&#x4E3A;&#x589E;&#x91CF;&#x6570;<code>d</code>&#x7684;&#x500D;&#x6570;&#x5F52;&#x4E3A;&#x76F8;&#x540C;&#x7EC4;&#x3002;</li>\n<li>&#x4F9D;&#x6B21;&#x5BF9;&#x6BCF;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x4F7F;&#x5176;&#x6709;&#x5E8F;&#x3002;</li>\n<li>&#x518D;&#x589E;&#x91CF;&#x6570;<code>d=d/2</code>&#xFF0C;&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;<code>d=1</code>&#x4E3A;&#x6B62;&#x3002;</li>\n</ol>\n<p>&#x4F8B;&#x5982;&#x53D6;<code>d=10</code>&#x4E3A;&#x4F8B;&#xFF1A;</p>\n<p><code>23, 4, 6, 34, 35, 47, 546, 32, 6,10</code></p>\n<p>&#x53D6;<code>d=5</code>,&#x4EE5;&#x540E;&#x4F9D;&#x6B21;&#x533A;<code>d</code>&#x7684;&#x4E00;&#x534A;</p>\n<p><code>23, 4, 6, 34, 35, 47, 546, 32, 6,10</code><br><code>23</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014; <code>47</code><br>&#x2014;&#x2013;<code>4</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;<code>546</code><br>&#x2014;&#x2014;&#x2014;<code>6</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014; <code>32</code><br>&#x2014;&#x2014;&#x2014;&#x2014;<code>34</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014; <code>6</code><br>&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014; <code>35</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013; <code>10</code><br>&#x7B2C;&#x4E00;&#x8D9F;&#x7ED3;&#x679C;&#xFF1A;<br><code>23, 4, 6, 6, 10, 47, 546, 32, 34, 35</code></p>\n<p><code>d=2</code></p>\n<p><code>23</code>&#x2014;<code>6</code>&#x2014;<code>10</code>&#x2014; <code>546</code>&#x2014;&#x2013;<code>34</code><br>&#x2014;&#x2013;<code>4</code>&#x2013;<code>6</code>&#x2014; <code>47</code>&#x2014;&#x2014; <code>32</code>&#x2014; <code>35</code><br>&#x7B2C;&#x4E8C;&#x8D9F;&#x7ED3;&#x679C;&#xFF1A;<br><code>6, 4, 10, 6, 23, 32, 34, 35, 546, 47</code></p>\n<p><code>d=1</code></p>\n<p><code>6, 4, 10, 6, 23, 32, 34, 35, 546, 47</code><br>&#x7B2C;&#x4E09;&#x8D9F;&#x7ED3;&#x679C;&#xFF1A;<br><code>4, 6, 6, 10, 23, 32, 34, 35, 47, 546</code></p>\n<p>&#x5E8F;&#x5217;&#x6709;&#x5E8F;&#xFF0C;&#x6B64;&#x65F6;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</p>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><p>&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#x6B65;&#x9AA4;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x4E3B;&#x8981;&#x662F;&#x5BF9;<code>d</code>&#x7684;&#x503C;&#x8FDB;&#x884C;&#x63A7;&#x5236;&#xFF0C;&#x6240;&#x4EE5;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void shellSort(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        //&#x589E;&#x91CF;&#x503C;</div><div class=\"line\">        int d = arr.length / 2;</div><div class=\"line\">        while (true) {</div><div class=\"line\">            for (int i = 0; i &lt; d; i++) {//&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</div><div class=\"line\">                for (int j = i; j + d &lt; arr.length; j += d) {</div><div class=\"line\">                    for (int k = j + d; k - d &gt;= 0; k -= d) {//&#x4F7F;&#x7528;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</div><div class=\"line\">                        if (arr[k] &lt; arr[k - d]) {</div><div class=\"line\">                            temp = arr[k];</div><div class=\"line\">                            arr[k] = arr[k - d];</div><div class=\"line\">                            arr[k - d] = temp;</div><div class=\"line\">                        } else {</div><div class=\"line\">                            break;</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">            if (d == 1) break;</div><div class=\"line\">            d = d / 2;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x662F;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x867D;&#x7136;&#x5BF9;&#x6BCF;&#x7EC4;&#x7684;&#x6392;&#x5E8F;&#x662F;&#x4F7F;&#x7528;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x5728;&#x5206;&#x7EC4;&#x4E2D;&#x662F;&#x7A33;&#x5B9A;&#x7684;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x4F1A;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x6240;&#x5728;&#x7EC4;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x5B83;&#x6574;&#x4F53;&#x662F;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#x3002;&#x81F3;&#x4E8E;<code>d</code>&#x7684;&#x53D6;&#x503C;&#x4E5F;&#x6CA1;&#x6709;&#x7EDD;&#x5BF9;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x53D6;&#x503C;&#x4E0E;&#x53D8;&#x5316;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(五)快速排序","url":"https://idisfkj.github.io/2016/06/18/算法-五-快速排序/","content":"<p>&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x662F;&#x5BF9;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%8C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</a>&#x7684;&#x4E00;&#x79CD;&#x6539;&#x8FDB;&#x3002;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7531;<code>C. A. R. Hoare</code>&#x5728;<code>1962</code>&#x5E74;&#x63D0;&#x51FA;&#x3002;&#x5B83;&#x7684;&#x4E3B;&#x8981;&#x601D;&#x60F3;&#x662F;&#xFF1A;<code>&#x5C06;&#x4E00;&#x4E2A;&#x5F85;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x4EE5;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x5206;&#x754C;&#x7EBF;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x90E8;&#x5206;&#x5C0F;&#x4E8E;&#x8FD9;&#x4E2A;&#x5206;&#x754C;&#x7EBF;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x5927;&#x4E8E;&#x8FD9;&#x4E2A;&#x5206;&#x754C;&#x7EBF;&#x7684;&#x6570;&#x636E;&#x3002;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x9012;&#x5F52;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x518D;&#x5BF9;&#x8FD9;&#x4E24;&#x4E2A;&#x5E8F;&#x5217;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x4EE5;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x6709;&#x5E8F;&#x7684;</code>&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><p>&#x5047;&#x8BBE;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<ol>\n<li>&#x4E00;&#x822C;&#x90FD;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x6570;<code>a[i]</code> (<code>i = 0</code>) &#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x6570;&#xFF0C;&#x5373;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x5206;&#x754C;&#x6570;&#x3002;&#x5148;&#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x540E;&#x9762;&#x5F00;&#x59CB;&#x5373;&#x521D;&#x503C;<code>j = n-1</code>&#xFF0C;&#x9010;&#x4E2A;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x904D;&#x5386;&#x4E0E;&#x9009;&#x7684;&#x7684;&#x5173;&#x952E;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;(<code>j--</code>)&#xFF0C;&#x82E5;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x7EE7;&#x7EED;&#x904D;&#x5386;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5176;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x5E76;&#x505C;&#x6B62;&#x904D;&#x5386;&#x4E14;<code>i++</code>&#x8BB0;&#x5F55;&#x6B64;&#x65F6;&#x7684;<code>i</code>&#x3001;<code>j</code>&#x3002;</li>\n<li>&#x505C;&#x6B62;&#x524D;&#x9762;&#x7684;&#x904D;&#x5386;&#xFF0C;&#x518D;&#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<code>i</code>&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5411;&#x540E;&#x8FDB;&#x884C;&#x904D;&#x5386;&#xFF0C;&#x9010;&#x4E2A;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;(<code>i++</code>)&#xFF0C;&#x82E5;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x7EE7;&#x7EED;&#x904D;&#x5386;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5176;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x5E76;&#x505C;&#x6B62;&#x904D;&#x5386;&#x4E14;<code>j--</code>&#x8BB0;&#x5F55;&#x6B64;&#x65F6;&#x7684;<code>i</code>&#x3001;<code>j</code>&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;<code>i==j</code>&#x5C31;&#x7ED3;&#x675F;&#x672C;&#x6B21;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x3002;</li>\n<li>&#x6B64;&#x65F6;&#x5DF2;&#x7ECF;&#x5C06;&#x5176;&#x6309;&#x5173;&#x952E;&#x6570;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x518D;&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5BF9;&#x5212;&#x5206;&#x7684;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x76F4;&#x5230;&#x5212;&#x5206;&#x7684;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4E2A;&#x6570;&#x4E3A;<code>1</code>&#x5373;&#x6B64;&#x65F6;&#x6240;&#x6709;&#x6570;&#x636E;&#x6709;&#x5E8F;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5148;&#x8FDB;&#x884C;&#x5173;&#x952E;&#x5B57;&#x5212;&#x5206;&#x7684;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><h2 id=\"&#x6392;&#x5E8F;\"><a href=\"#&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x6392;&#x5E8F;\"></a>&#x6392;&#x5E8F;</h2><p>&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;<code>1</code>&#x3001;<code>2</code>&#x3001;<code>3</code>&#x5B9E;&#x73B0;&#x5173;&#x952E;&#x5B57;&#x7684;&#x5212;&#x5206;&#x5373;&#x4E00;&#x8D9F;&#x5B8C;&#x6574;&#x7684;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x3002;<br>&#x6211;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x7684;&#x9891;&#x7E41;&#x4EA4;&#x6362;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x4E0E;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x6700;&#x540E;&#x8FD9;&#x8D9F;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x5B8C;&#x4E86;&#x4EE5;&#x540E;&#x518D;&#x5C06;&#x5176;&#x653E;&#x5230;&#x4ED6;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;&#x3002;&#x76F8;&#x5F53;&#x4E8E;&#x6570;&#x636E;&#x7684;&#x4F20;&#x9012;<code>a=b,b=c,c=d,d=e</code>&#x6700;&#x7EC8;&#x5C31;&#x662F;<code>a=e</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static int sort(int[] arr, int low, int height) {</div><div class=\"line\">        int i = low;</div><div class=\"line\">        int j = height;</div><div class=\"line\">        int k = arr[low];//&#x8BB0;&#x5F55;&#x5F00;&#x59CB;&#x7684;&#x5173;&#x952E;&#x6570;</div><div class=\"line\">        while (i &lt; j) {</div><div class=\"line\">            while (i &lt; j &amp;&amp; arr[j] &gt;= k) //&#x5148;&#x4ECE;&#x53F3;&#x5411;&#x5DE6;&#x627E;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x5C0F;&#x4E8E;k&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">                j--;</div><div class=\"line\">            if (i &lt; j) {</div><div class=\"line\">                arr[i] = arr[j];//&#x5C06;&#x627E;&#x5230;&#x7684;&#x6570;&#x66FF;&#x6362;&#x5230;i&#x4F4D;&#x7F6E;</div><div class=\"line\">                i++;</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            while (i &lt; j &amp;&amp; arr[i] &lt;= k) //&#x518D;&#x4ECE;&#x5DE6;&#x5411;&#x53F3;&#x627E;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x5927;&#x4E8E;k&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">                i++;</div><div class=\"line\">            if (i &lt; j) {</div><div class=\"line\">                arr[j] = arr[i];//&#x5C06;&#x627E;&#x5230;&#x7684;&#x6570;&#x66FF;&#x6362;&#x5230;j&#x4F4D;&#x7F6E;</div><div class=\"line\">                j--;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        arr[i] = k;//&#x5F53;i == j &#x65F6;,&#x6700;&#x540E;&#x5C06;&#x6700;&#x521D;&#x7684;&#x5173;&#x952E;&#x6570;&#x66FF;&#x4EE3;&#x5230;i&#x4F4D;&#x7F6E;</div><div class=\"line\">        return i;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"&#x5206;&#x6CBB;&#x9012;&#x5F52;\"><a href=\"#&#x5206;&#x6CBB;&#x9012;&#x5F52;\" class=\"headerlink\" title=\"&#x5206;&#x6CBB;&#x9012;&#x5F52;\"></a>&#x5206;&#x6CBB;&#x9012;&#x5F52;</h2><p>&#x7136;&#x540E;&#x5C31;&#x662F;&#x5BF9;&#x6574;&#x4E2A;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x8FDB;&#x884C;<code>&#x5206;&#x6CBB;&#x9012;&#x5F52;</code>&#x9010;&#x4E2A;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;,&#x76F4;&#x5230;&#x5212;&#x5206;&#x7684;&#x5E8F;&#x5217;&#x4E2D;&#x7684;&#x4E2A;&#x6570;&#x4E3A;<code>1</code>&#x4E3A;&#x6B62;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">ublic static void quickSort(int[] arr, int low, int height) {</div><div class=\"line\">        if (low &lt; height) {</div><div class=\"line\">            int mid = sort(arr, low, height);</div><div class=\"line\">            quickSort(arr, low, mid - 1);</div><div class=\"line\">            quickSort(arr, mid + 1, height);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x5F53;&#x7136;&#x5BF9;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x7684;&#x9009;&#x53D6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#xFF0C;&#x4F8B;&#x5982;&#x9009;&#x53D6;&#x4E2D;&#x95F4;&#x7684;&#x503C;&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x6570;&#xFF0C;&#x81F3;&#x4E8E;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x6700;&#x597D;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(logn)</code>&#xFF0C;&#x6700;&#x574F;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n^2)</code>&#x4E14;&#x5176;&#x4E3A;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(四)归并排序","url":"https://idisfkj.github.io/2016/06/18/算法-四-归并排序/","content":"<p>&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x662F;&#x4E00;&#x4E2A;&#x6548;&#x7387;&#x76F8;&#x5BF9;&#x8F83;&#x9AD8;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#xFF0C;&#x5B83;&#x91C7;&#x7528;&#x7684;&#x662F;<code>&#x5206;&#x6CBB;&#x7684;&#x601D;&#x60F3;</code>&#xFF0C;&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x4FDD;&#x8BC1;&#x6BCF;&#x7EC4;&#x90FD;&#x6709;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#x6392;&#x5E8F;&#xFF0C;&#x6700;&#x7EC8;&#x4F7F;&#x6574;&#x4E2A;&#x5E8F;&#x5217;&#x6709;&#x5E8F;&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><ol>\n<li>&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x5E8F;&#x5217;&#x91C7;&#x7528;<code>&#x5206;&#x6CBB;&#x601D;&#x60F3;</code>&#x5C06;&#x5176;&#x5212;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x4F7F;&#x5176;&#x6709;&#x5E8F;&#xFF0C;&#x5176;&#x4E2D;&#x53EF;&#x91C7;&#x7528;&#x9012;&#x5F52;&#x8FDB;&#x884C;&#x5212;&#x5206;&#x3002;</li>\n<li>&#x5C06;&#x6709;&#x5E8F;&#x7684;&#x7EC4;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x5F52;&#x5E76;&#x64CD;&#x4F5C;&#xFF0C;&#x5176;&#x4E2D;&#x501F;&#x52A9;&#x4E00;&#x4E2A;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#xFF0C;&#x5C06;&#x5DE6;&#x53F3;&#x5212;&#x5206;&#x7684;&#x6709;&#x5E8F;&#x7EC4;&#x4ECE;&#x5934;&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5C06;&#x8F83;&#x5C0F;&#x7684;&#x6570;&#x52A0;&#x5165;&#x5230;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;&#x4E14;&#x8F83;&#x5C0F;&#x7684;&#x6240;&#x5728;&#x6709;&#x5E8F;&#x6570;&#x7EC4;&#x5411;&#x540E;&#x81EA;&#x589E;&#xFF0C;&#x518D;&#x4E0E;&#x539F;&#x6765;&#x6BD4;&#x8F83;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;<code>2</code>&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x6570;&#x636E;&#x6BD4;&#x8F83;&#x5B8C;&#x6BD5;&#xFF0C;&#x6216;&#x8005;&#x5C06;&#x8FD8;&#x6709;&#x5269;&#x4F59;&#x6570;&#x672A;&#x6BD4;&#x8F83;&#x7684;&#x6709;&#x5E8F;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x6309;&#x539F;&#x6709;&#x7684;&#x987A;&#x5E8F;&#x52A0;&#x5165;&#x5230;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x4E2D;,&#x6700;&#x540E;&#x5C06;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x52A0;&#x5165;&#x5230;&#x539F;&#x6709;&#x6570;&#x7EC4;&#x7684;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;<code>2</code>&#x3001;<code>3</code>&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x7684;&#x5DE6;&#x53F3;&#x5212;&#x5206;&#x5F52;&#x5E76;&#x5B8C;&#x6BD5;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x6B65;&#x9AA4;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5148;&#x5BF9;&#x4E24;&#x4E2A;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x5F52;&#x5E76;&#x7684;&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><h2 id=\"&#x5408;&#x5E76;\"><a href=\"#&#x5408;&#x5E76;\" class=\"headerlink\" title=\"&#x5408;&#x5E76;\"></a>&#x5408;&#x5E76;</h2><p>&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;<code>2</code>&#x3001;<code>3</code>&#x6B65;&#x9AA4;&#xFF0C;&#x5B9E;&#x73B0;&#x5408;&#x5E76;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void merge(int[] arr, int low, int mid, int height) {</div><div class=\"line\">        int i = low;</div><div class=\"line\">        int j = mid + 1;</div><div class=\"line\">        int k = 0;</div><div class=\"line\">        int[] temp = new int[height - low + 1];</div><div class=\"line\">        while (i &lt;= mid &amp;&amp; j &lt;= height) {</div><div class=\"line\">            if (arr[i] &lt;= arr[j]) {//&#x5DE6;&#x8FB9;&#x52A0;&#x5165;</div><div class=\"line\">                temp[k++] = arr[i++];</div><div class=\"line\">            } else {//&#x53F3;&#x8FB9;&#x52A0;&#x5165;</div><div class=\"line\">                temp[k++] = arr[j++];</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        while (i &lt;= mid) {//&#x5DE6;&#x8FB9;&#x5269;&#x4F59;&#x5168;&#x90E8;&#x52A0;&#x5165;</div><div class=\"line\">            temp[k++] = arr[i++];</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        while (j &lt;= height) {//&#x53F3;&#x8FB9;&#x5269;&#x4F59;&#x5168;&#x90E8;&#x52A0;&#x5165;</div><div class=\"line\">            temp[k++] = arr[j++];</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        for (int m = 0; m &lt; temp.length; m++) {//&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x8FD8;&#x539F;&#x5230;&#x539F;&#x6570;&#x7EC4;</div><div class=\"line\">            arr[low + m] = temp[m];</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x5C31;&#x662F;&#x91C7;&#x7528;<code>&#x5206;&#x6CBB;</code>&#x8FDB;&#x884C;&#x5212;&#x5206;</p>\n<h2 id=\"&#x5206;&#x6CBB;\"><a href=\"#&#x5206;&#x6CBB;\" class=\"headerlink\" title=\"&#x5206;&#x6CBB;\"></a>&#x5206;&#x6CBB;</h2><p>&#x8FD9;&#x91CC;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x7591;&#x95EE;&#xFF0C;&#x5982;&#x4F55;&#x5C06;&#x5212;&#x5206;&#x7684;&#x5E8F;&#x5217;&#x751F;&#x6210;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x91C7;&#x7528;&#x7684;&#x662F;<code>&#x5206;&#x6CBB;&#x7684;&#x601D;&#x60F3;</code>&#x4E0E;<code>&#x9012;&#x5F52;&#x601D;&#x60F3;</code>&#xFF0C;&#x53EA;&#x8981;&#x5E8F;&#x5217;&#x80FD;&#x8FDB;&#x884C;&#x5212;&#x5206;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4E00;&#x76F4;&#x5212;&#x5206;&#x4E0B;&#x53BB;&#xFF0C;&#x76F4;&#x5230;&#x5212;&#x5206;&#x7684;&#x5E8F;&#x5217;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x8BE5;&#x5212;&#x5206;&#x7684;&#x5E8F;&#x5217;&#x81EA;&#x7136;&#x5C31;&#x6709;&#x5E8F;&#x4E86;&#xFF0C;&#x540C;&#x65F6;&#x518D;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#xFF0C;&#x81EA;&#x7136;&#x5408;&#x5E76;&#x7684;&#x5E8F;&#x5217;&#x4E5F;&#x5C31;&#x4E00;&#x76F4;&#x6709;&#x5E8F;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void mergeSort(int[] arr, int low, int height) {</div><div class=\"line\">        if (low &lt; height) {</div><div class=\"line\">            int mid = (low + height) / 2;</div><div class=\"line\">            mergeSort(arr, low, mid);//&#x5DE6;&#x5212;&#x5206;</div><div class=\"line\">            mergeSort(arr, mid + 1, height);//&#x53F3;&#x5212;&#x5206;</div><div class=\"line\">            merge(arr, low, mid, height);//&#x5DE6;&#x53F3;&#x5F52;&#x5E76;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x6392;&#x5E8F;&#x540E;&#x76F8;&#x540C;&#x6570;&#x7684;&#x76F8;&#x5BF9;&#x4F4D;&#x7F6E;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x3002;&#x7531;&#x4E0A;&#x9762;&#x7684;&#x601D;&#x60F3;&#x53EF;&#x77E5;&#xFF0C;&#x5C06;&#x5E8F;&#x5217;&#x5212;&#x5206;&#x6210;&#x7EC4;&#x9700;&#x8981;<code>logn</code>&#x6B21;&#xFF0C;&#x5C06;&#x5212;&#x5206;&#x7684;&#x7EC4;&#x5408;&#x5E76;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n)</code>&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(nlogn)</code>&#x3002;&#x6240;&#x4EE5;&#x901A;&#x8FC7;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7684;&#x6548;&#x7387;&#x8981;&#x6BD4;&#x5176;&#x4ED6;&#x7684;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%8C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</a>&#x3001;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#x3001;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%80-%E7%9B%B4%E6%8E%A5%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/\">&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;</a>&#x7B49;&#x8981;&#x9AD8;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(三)直接插入排序","url":"https://idisfkj.github.io/2016/06/18/算法-三-直接插入排序/","content":"<p>&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7684;&#x57FA;&#x672C;&#x601D;&#x60F3;&#x662F;:<code>&#x5C06;&#x9700;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x5173;&#x952E;&#x6570;&#x4E0E;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x6570;&#x636E;&#x4ECE;&#x540E;&#x5F80;&#x524D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x4F7F;&#x5176;&#x63D2;&#x5165;&#x5230;&#x5408;&#x9002;&#x7684;&#x4F4D;&#x7F6E;</code>&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><p>&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n]</code></p>\n<ol>\n<li>&#x5C06;<code>a[0]</code>&#x4F5C;&#x4E3A;&#x8D77;&#x59CB;&#x6570;&#x636E;&#xFF0C;&#x4ECE;<code>a[1]</code>&#x5F00;&#x59CB;&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x82E5;&#x5C0F;&#x4E8E;&#x524D;&#x9762;&#x6240;&#x9047;&#x5230;&#x7684;&#x6BD4;&#x8F83;&#x6570;&#xFF0C;&#x5219;&#x4EA4;&#x6362;&#x4E24;&#x4E2A;&#x6BD4;&#x8F83;&#x6570;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x7684;&#x6BD4;&#x8F83;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x5C06;<code>a[n]</code>&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;&#x6BD4;&#x8F83;&#x5B8C;&#x4EE5;&#x540E;&#x5219;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x8BE5;&#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#x8FD8;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6B65;&#x9AA4;&#x8FC5;&#x901F;&#x5199;&#x51FA;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void insertSort(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        for (int i = 1; i &lt; arr.length; i++) {</div><div class=\"line\">            for (int j = i; j &gt; 0; j--) {</div><div class=\"line\">                if (arr[j] &lt; arr[j - 1]) {//&#x4EA4;&#x6362;</div><div class=\"line\">                    temp = arr[j];</div><div class=\"line\">                    arr[j] = arr[j - 1];</div><div class=\"line\">                    arr[j - 1] = temp;</div><div class=\"line\">                } else {//&#x53EA;&#x8981;&#x6BD4;&#x8F83;&#x4E0D;&#x5C0F;&#x4E8E;&#x7684;&#x8BDD;&#x5C31;&#x76F4;&#x63A5;&#x8DF3;&#x51FA;</div><div class=\"line\">                    break;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x601D;&#x60F3;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x8BE5;&#x6392;&#x5E8F;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x4E14;&#x6700;&#x597D;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3001;&#x6700;&#x574F;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x4E0E;&#x524D;&#x9762;&#x7684;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%8C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</a>&#x4E00;&#x6837;&#x662F;<code>O(n)</code>&#x4E0E;<code>O(n^2)</code>&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(二)冒泡排序","url":"https://idisfkj.github.io/2016/06/18/算法-二-冒泡排序/","content":"<p>&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x4E3B;&#x8981;&#x662F;&#x76F8;&#x90BB;&#x7684;&#x4E24;&#x4E2A;&#x6570;&#x4E24;&#x4E24;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x62FF;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x8BF4;&#x660E;&#xFF0C;&#x8FDB;&#x884C;&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x540E;&#x4F1A;&#x5C06;&#x5927;&#x7684;&#x6570;<code>&#x6C89;</code>&#x5230;&#x5E95;&#x90E8;&#xFF0C;&#x5C06;&#x5C0F;&#x5F97;&#x6570;<code>&#x6D6E;</code>&#x5230;&#x9876;&#x90E8;&#x3002;&#x6240;&#x4EE5;&#x5192;&#x6CE1;&#x8BF4;&#x6CD5;&#x7531;&#x6B64;&#x5F97;&#x540D;&#x3002;</p>\n<h1 id=\"&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;\"><a href=\"#&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;\"></a>&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;</h1><p>&#x4EE5;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x4E3A;&#x4F8B;&#xFF0C;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#x4E3A;<code>n</code>&#x3002;</p>\n<ol>\n<li>&#x7B2C;<code>N = 0</code>&#x8D9F;&#x6392;&#x5E8F;&#x5F00;&#x59CB;&#x90FD;&#x4ECE;<code>a[0]</code>&#x5F00;&#x59CB;&#x4E0E;&#x5176;&#x4E0B;&#x9762;&#x7684;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x4E8E;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x5219;&#x4EA4;&#x6362;&#x4ED6;&#x4EEC;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>\n<li>&#x7EE7;&#x7EED;&#x4E0E;&#x4E0B;&#x4E00;&#x4E2A;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5927;&#x4E8E;&#x76F8;&#x90BB;&#x7684;&#x5C31;&#x4EA4;&#x6362;&#xFF0C;&#x6700;&#x540E;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;<code>n-1</code>&#x6B21;&#x540E;&#xFF0C;&#x7B2C;<code>N = 0</code>&#x8D9F;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x6570;&#x5C31;&#x5728;&#x6570;&#x7EC4;&#x7684;<code>a[n-1]</code>&#x5904;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230; <code>N = n-1</code>,&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x601D;&#x60F3;&#x5B9E;&#x73B0;&#x5C31;&#x4E0D;&#x96BE;&#x4E86;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void bubbleSort(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        for (int n = 0; n &lt; arr.length - 1; n++)//&#x9700;&#x8981;n-1&#x6B21;</div><div class=\"line\">            for (int j = 0; j &lt; arr.length - n - 1; j++) {</div><div class=\"line\">                if (arr[j] &gt; arr[j + 1]) {//&#x4EA4;&#x6362;</div><div class=\"line\">                    temp = arr[j];</div><div class=\"line\">                    arr[j] = arr[j + 1];</div><div class=\"line\">                    arr[j + 1] = temp;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5B9E;&#x73B0;&#x5B8C;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x662F;&#x5426;&#x5FC3;&#x4E2D;&#x6709;&#x70B9;&#x7591;&#x95EE;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x8981;&#x9010;&#x4E2A;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x540E;&#x9762;&#x7684;&#x4E00;&#x4E9B;&#x6570;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x5462;&#xFF0C;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x6392;&#x5E8F;&#x7684;&#x6B21;&#x6570;&#x5462;&#xFF1F;&#x7ED3;&#x679C;&#x662F;&#x80AF;&#x5B9A;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x6570;&#x7EC4;&#x540E;&#x9762;&#x7684;<code>30</code>&#x4E2A;&#x6570;&#x662F;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5728;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5FFD;&#x7565;&#x540E;&#x9762;&#x7684;&#x6570;&#xFF0C;&#x53EA;&#x8003;&#x8651;&#x4ED6;&#x4EEC;&#x524D;&#x9762;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x8BBE;&#x8BA1;&#x4E2A;&#x6807;&#x8BC6;<code>flag</code>,&#x5F53;&#x4ECE;&#x7B2C;<code>j</code>&#x5F00;&#x59CB;&#x90FD;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x4EA4;&#x6362;&#xFF0C;&#x5373;&#x6709;&#x5E8F;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x628A;&#x539F;&#x6765;&#x7684;&#x6570;&#x636E;&#x5207;&#x6BB5;&#x53EA;&#x5BF9;<code>j</code>&#x524D;&#x9762;&#x7684;&#x6570;&#x7EE7;&#x7EED;&#x6BD4;&#x8F83;&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E;&#x5F62;&#x6210;&#x65B0;&#x7684;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x5BF9;&#x539F;&#x6765;&#x7684;&#x6392;&#x5E8F;&#x8FDB;&#x884C;&#x4E86;&#x4E00;&#x4E9B;&#x4F18;&#x5316;&#x3002;</p>\n<h1 id=\"&#x4F18;&#x5316;\"><a href=\"#&#x4F18;&#x5316;\" class=\"headerlink\" title=\"&#x4F18;&#x5316;\"></a>&#x4F18;&#x5316;</h1><p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void bubbleSort2(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        int flag = arr.length - 1;</div><div class=\"line\">        while (flag &gt; 0) {</div><div class=\"line\">            int n = flag;</div><div class=\"line\">            flag = 0;</div><div class=\"line\">            for (int j = 0; j &lt; n; j++) {</div><div class=\"line\">                if (arr[j] &gt; arr[j + 1]) {</div><div class=\"line\">                    temp = arr[j];</div><div class=\"line\">                    arr[j] = arr[j + 1];</div><div class=\"line\">                    arr[j + 1] = temp;</div><div class=\"line\">                    flag = j;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x6839;&#x636E;&#x524D;&#x9762;&#x7684;&#x601D;&#x60F3;&#x6211;&#x4EEC;&#x4F1A;&#x77E5;&#x9053;&#x8BE5;&#x6392;&#x5E8F;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n)</code>&#x5373;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x5F00;&#x59CB;&#x5C31;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x4E14;&#x4E0E;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x987A;&#x5E8F;&#x76F8;&#x540C;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x8981;&#x8FDB;&#x884C;&#x4E00;&#x8D9F;&#x6BD4;&#x8F83;&#x6392;&#x5E8F;&#xFF0C;&#x904D;&#x5386;&#x4E00;&#x6B21;&#x6570;&#x7EC4;&#x3002;&#x6700;&#x574F;&#x7684;&#x60C5;&#x51B5;&#x81EA;&#x7136;&#x662F;&#x6570;&#x7EC4;&#x5F00;&#x59CB;&#x65F6;&#x4E0E;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x987A;&#x5E8F;&#x76F8;&#x53CD;&#xFF0C;&#x6240;&#x4EE5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n^2)</code></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(一)直接选择排序","url":"https://idisfkj.github.io/2016/06/18/算法-一-直接选择排序/","content":"<p>&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#xFF0C;&#x6574;&#x4F53;&#x601D;&#x60F3;&#x662F;&#x5C06;&#x6570;&#x636E;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x533A;&#x57DF;&#xFF0C;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E0E;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x3002;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x662F;&#x6BCF;&#x6B21;&#x4ECE;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x9009;&#x62E9;&#x51FA;&#x6700;&#x5C0F;&#x7684;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x63D2;&#x5165;&#x5230;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x6700;&#x672B;&#x5C3E;&#xFF0C;&#x4ECE;&#x800C;&#x5F62;&#x6210;&#x66F4;&#x5927;&#x7684;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x3002;&#x76F4;&#x5230;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x6570;&#x4E3A;&#x96F6;&#xFF0C;&#x7ED3;&#x675F;&#x6392;&#x5E8F;&#x3002;</p>\n<h1 id=\"&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;\"><a href=\"#&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;\"></a>&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;</h1><p>&#x5047;&#x8BBE;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;a[0&#x2026;n-1];</p>\n<ol>\n<li>&#x9996;&#x5148;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x4E2A;&#x6570;&#x4E3A;0&#xFF0C;&#x4EE4;<code>i = 0</code>&#x3002;&#x4ECE;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x9009;&#x62E9;&#x6700;&#x5C0F;&#x7684;&#x6570;&#xFF0C;&#x52A0;&#x5165;&#x5230;<code>&#x6709;&#x5E8F;&#x533A;a[i]</code>&#x4E2D;&#x3002;&#x4F7F;&#x5F97;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E3A;<code>a[0..i]</code>,<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E3A;<code>a[i...n-1]</code></li>\n<li>&#x5B8C;&#x6210;&#x540E; <code>i++</code> ,&#x7136;&#x540E;&#x7EE7;&#x7EED;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230; <code>i = n-1</code> &#x4E3A;&#x6B62;&#x3002;&#x4F7F;&#x5F97;&#x5168;&#x90E8;&#x6570;&#x90FD;&#x5728;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x6240;&#x4EE5;&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x601D;&#x60F3;&#x6B65;&#x9AA4;&#x5C31;&#x80FD;&#x5F88;&#x5BB9;&#x6613;&#x7684;&#x5199;&#x51FA;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x4E86;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void selectSort(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        int mid;</div><div class=\"line\">        for (int i = 0; i &lt; arr.length - 1; i++) {</div><div class=\"line\">            mid = i;//&#x5173;&#x952E;&#x6570;</div><div class=\"line\">            for (int j = mid + 1; j &lt; arr.length; j++) {</div><div class=\"line\">                if (arr[mid] &gt; arr[j])//&#x627E;&#x5230;&#x6700;&#x5C0F;&#x503C;</div><div class=\"line\">                    mid = j;</div><div class=\"line\">            }</div><div class=\"line\">            if (mid != i) {//&#x4E0D;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x4EA4;&#x6362;</div><div class=\"line\">                temp = arr[mid];</div><div class=\"line\">                arr[mid] = arr[i];</div><div class=\"line\">                arr[i] = temp;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x8BE5;&#x6392;&#x5E8F;&#x4E3A;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x9996;&#x5148;&#x8BF4;&#x660E;&#x4F55;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF1A;<code>&#x5728;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x540E;&#x5982;&#x679C;&#x6392;&#x5E8F;&#x4E2D;&#x76F8;&#x540C;&#x5927;&#x5C0F;&#x7684;&#x6570;&#x4E0E;&#x6392;&#x5E8F;&#x524D;&#x7684;&#x76F8;&#x5BF9;&#x4F4D;&#x7F6E;&#x76F8;&#x540C;(&#x5373;&#x524D;&#x540E;&#x4F4D;&#x7F6E;&#x4E0D;&#x53D8;)&#xFF0C;&#x5219;&#x79F0;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;</code> &#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x6211;&#x4EEC;&#x5F88;&#x5BB9;&#x6613;&#x53D1;&#x73B0;&#xFF0C;&#x5982;&#x679C;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;<code>a[11,11,2]</code>&#x5728;&#x8FDB;&#x884C;&#x7B2C;&#x4E00;&#x8D9F;&#x6392;&#x5E8F;&#x4E4B;&#x540E;&#x7B2C;&#x4E00;&#x4E2A;<code>11</code>&#x4E0E;<code>2</code>&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#x4F7F;&#x5F97;&#x539F;&#x6765;&#x524D;&#x9762;&#x7684;<code>11</code>&#x6392;&#x5E8F;&#x5230;&#x540E;&#x9762;&#x7684;<code>11</code>&#x4E4B;&#x540E;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x4E3A;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#x3002;&#x540C;&#x65F6;&#x5B83;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n^2)</code></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"如何使Android Studio项目发布到Jcenter中","url":"https://idisfkj.github.io/2016/06/13/如何使Android-Studio项目发布到Jcenter中/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x5199;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5176;&#x5B9E;&#x6211;&#x662F;&#x75DB;&#x82E6;&#x7684;&#xFF0C;&#x54CE;&#xFF01;&#x8BF4;&#x51FA;&#x6765;&#x90FD;&#x662F;&#x6CEA;&#x554A;&#x3002;&#x3002;&#x3002;&#x4ECA;&#x5929;&#x5728;<code>JFrog Bintray</code>&#x4E2D;&#x4E0D;&#x5C0F;&#x5FC3;&#x628A;&#x6211;<code>Repositories</code>&#x4E2D;&#x539F;&#x6765;&#x7684;<code>maven</code>&#x4E2D;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x7ED9;&#x5220;&#x9664;&#x4E86;&#x3002;&#x5BFC;&#x81F4;&#x539F;&#x6765;&#x7684;&#x4F9D;&#x8D56;&#x5168;&#x90E8;&#x6CA1;&#x4E86;&#xFF0C;&#x627E;&#x4E86;&#x534A;&#x5929;&#x4E5F;&#x6CA1;&#x627E;&#x5230;&#x8981;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x6062;&#x590D;&#x3002;&#x73B0;&#x5728;&#x60F3;&#x5230;&#x7684;&#x4E5F;&#x53EA;&#x80FD;&#x91CD;&#x65B0;&#x53D1;&#x5E03;&#x4E00;&#x4E0B;&#x3002;&#x53EF;&#x80FD;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x4EBA;&#x4E0D;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x50CF;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x6DFB;&#x52A0;&#x522B;&#x4EBA;&#x7684;&#x4F9D;&#x8D56;&#x4E00;&#x6837;&#x8FD9;&#x6837;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x6240;&#x4EE5;&#x987A;&#x4FBF;&#x5728;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;&#x6211;&#x4EEC;&#x5199;&#x7684;&#x9879;&#x76EE;&#x5982;&#x679C;&#x8981;&#x522B;&#x4EBA;&#x4E5F;&#x80FD;&#x968F;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x3002;</p>\n<h2 id=\"Android&#x4ED3;&#x5E93;\"><a href=\"#Android&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"Android&#x4ED3;&#x5E93;\"></a>Android&#x4ED3;&#x5E93;</h2><p>&#x7B80;&#x5355;&#x7684;&#x666E;&#x53CA;&#x4E0B;&#x5173;&#x4E8E;<code>android</code>&#x7684;&#x4F9D;&#x8D56;&#x4ED3;&#x5E93;&#xFF0C;&#x6709;&#x4E24;&#x79CD;&#x5206;&#x522B;&#x662F;<code>Jcenter</code>&#x4E0E;<code>Maven Central</code>&#x5176;&#x5B9E;&#x4E0D;&#x7BA1;&#x662F;<code>Jcenter</code>&#x8FD8;&#x662F;<code>Maven Central</code>&#x90FD;&#x662F;<code>Maven</code>&#x5E93;&#x3002;</p>\n<h3 id=\"Jcenter\"><a href=\"#Jcenter\" class=\"headerlink\" title=\"Jcenter\"></a>Jcenter</h3><p><code>Jcenter</code>&#x662F;&#x7531;<code>bintray.com</code>&#x7EF4;&#x62A4;&#xFF0C;&#x5728;<code>Android Studio</code>&#x7684;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x7684;<code>build.gradle</code>&#x4E2D;&#x6211;&#x4EEC;&#x4F1A;&#x770B;&#x5230;&#x81EA;&#x52A8;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x7684;<code>Jcenter</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript {</div><div class=\"line\">    repositories {</div><div class=\"line\">        jcenter()</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"Maven-Central\"><a href=\"#Maven-Central\" class=\"headerlink\" title=\"Maven Central\"></a>Maven Central</h3><p>&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;<code>build.gradle</code>&#x4E2D;&#x5B9A;&#x4E49;<code>Maven Central</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript {</div><div class=\"line\">    repositories {</div><div class=\"line\">        mavenCentral()</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x5728;<code>Android Studio</code>&#x4E2D;&#x4E3A;&#x4EC0;&#x4E48;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;<code>Jcenter</code>&#x539F;&#x56E0;&#x8FD8;&#x662F;&#x6709;&#x7684;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x53BB;&#x67E5;&#xFF0C;&#x6211;&#x8981;&#x8BF4;&#x7684;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#xFF0C;&#x8FD9;&#x91CC;&#x4F60;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;<code>Jcenter</code>&#x662F;<code>Maven Central</code>&#x7684;&#x8D85;&#x96C6;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x7406;&#x89E3;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;<code>Jcenter</code>&#x4E86;&#x3002;</p>\n<h2 id=\"gradle&#x83B7;&#x53D6;library\"><a href=\"#gradle&#x83B7;&#x53D6;library\" class=\"headerlink\" title=\"gradle&#x83B7;&#x53D6;library\"></a>gradle&#x83B7;&#x53D6;library</h2><p>&#x8FD9;&#x91CC;&#x8981;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x7684;&#x4F9D;&#x8D56;&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5176;&#x5B9E;&#x662F;&#x6709;&#x683C;&#x5F0F;&#x7684;&#x5E76;&#x4E0D;&#x662F;&#x968F;&#x4FBF;&#x4E71;&#x5199;&#x7684;&#x3002;&#x5176;&#x5B9E;&#x4F60;&#x53EA;&#x8981;&#x5E73;&#x5E38;&#x591F;&#x4ED4;&#x7EC6;&#x5C31;&#x80FD;&#x53D1;&#x73B0;&#x4ED6;&#x4EEC;&#x7684;&#x683C;&#x5F0F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;<br>&#x7531;<code>GroupId</code>&#x3001;<code>ArtifactId</code>&#x4E0E;<code>VersionId</code>&#x7EC4;&#x6210;&#x3002;&#x4F8B;&#x5982;<code>com.jakewharton:butterknife:6.1.0&apos;</code>&#x5B83;&#x7684;<code>GroupId</code>&#x662F;<code>com.jakewharton</code>&#xFF0C;<code>ArtifactId</code>&#x662F;<code>butterknife</code>&#xFF0C;<code>VersionId</code>&#x662F;<code>6.1.0</code>&#x3002;&#x73B0;&#x5728;&#x770B;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;&#x662F;&#x4E0D;&#x662F;&#x66F4;&#x6E05;&#x6670;&#x4E86;&#x5462;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;&#x4F9D;&#x8D56;&#x4E4B;&#x540E;<code>gradle</code>&#x4F1A;&#x5148;&#x53BB;<code>Maven</code>&#x4E2D;&#x67E5;&#x627E;&#x662F;&#x5426;&#x6709;&#x8BE5;<code>library</code>&#x5982;&#x679C;&#x6709;&#x5C31;&#x4F1A;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x5F62;&#x5F0F;&#x4E0B;&#x8F7D;<code>http://jcenter.bintray.com/GroupId/ArtifactId/VersionId</code></p>\n<p><code>http://jcenter.bintray.com/com/jakewharton/butterknife/6.1.0</code><br>&#x901A;&#x8FC7;&#x8BE5;&#x94FE;&#x63A5;&#x4E0B;&#x8F7D;&#x5230;&#x672C;&#x5730;&#x518D;&#x4E0E;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x7ED3;&#x5408;&#x3002;</p>\n<blockquote>\n<p><em>&#x4E0B;&#x9762;&#x6B63;&#x5F0F;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x4F9D;&#x8D56;&#x7684;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h2 id=\"&#x6CE8;&#x518C;\"><a href=\"#&#x6CE8;&#x518C;\" class=\"headerlink\" title=\"&#x6CE8;&#x518C;\"></a>&#x6CE8;&#x518C;</h2><p>&#x9996;&#x5148;&#x8981;&#x5728;<a href=\"https://bintray.com\" target=\"_blank\" rel=\"external\">https://bintray.com</a> &#x4E2D;&#x6CE8;&#x518C;&#x8D26;&#x53F7;&#xFF0C;&#x6CE8;&#x518C;&#x90FD;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x5C31;&#x4E0D;&#x6240;&#x8BF4;&#x4E86;&#x3002;<br>&#x7136;&#x540E;&#x56DE;&#x5230;&#x4E3B;&#x9875;&#x5728;&#x4F60;&#x7684;<code>Owned Repositories</code>&#x4E2D;&#x770B;&#x4E0B;&#x4F60;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;<code>maven</code>&#x3002;<br><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/1.png\" alt=\"&#x56FE;\"><br>&#x7B2C;&#x4E00;&#x6B21;&#x6CE8;&#x518C;&#x7684;&#x5E94;&#x8BE5;&#x6CA1;&#x6709;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x5148;<code>New Repository</code>&#x521B;&#x5EFA;<code>maven</code><br><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/2.png\" alt=\"&#x56FE;\"><br>&#x521B;&#x5EFA;&#x4E4B;&#x540E;&#x4F1A;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230;<code>maven</code>&#x4E2D;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x6CA1;&#x6709;<code>package</code>,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;<code>Add New Package</code>&#x8FD9;&#x79CD;&#x76F8;&#x4FE1;&#x90FD;&#x4F1A;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x8981;&#x8BF4;&#x7684;&#x662F;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;<code>Android Studio</code>&#x4E2D;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x7136;&#x540E;&#x4E0A;&#x4F20;&#x5230;<code>Bintray</code>&#x3002;</p>\n<h2 id=\"&#x4EE3;&#x7801;&#x4E2D;&#x914D;&#x7F6E;\"><a href=\"#&#x4EE3;&#x7801;&#x4E2D;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x4EE3;&#x7801;&#x4E2D;&#x914D;&#x7F6E;\"></a>&#x4EE3;&#x7801;&#x4E2D;&#x914D;&#x7F6E;</h2><h3 id=\"&#x5206;&#x79BB;&#x6210;&#x591A;&#x4E2A;Module\"><a href=\"#&#x5206;&#x79BB;&#x6210;&#x591A;&#x4E2A;Module\" class=\"headerlink\" title=\"&#x5206;&#x79BB;&#x6210;&#x591A;&#x4E2A;Module\"></a>&#x5206;&#x79BB;&#x6210;&#x591A;&#x4E2A;Module</h3><p>&#x4E3A;&#x4E86;&#x4F7F;&#x522B;&#x4EBA;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x5728;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x4F9D;&#x8D56;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x628A;&#x5B9E;&#x73B0;&#x7684;&#x8BE5;&#x4F9D;&#x8D56;&#x7684;&#x6E90;&#x7801;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;<code>Module</code>,&#x518D;&#x628A;&#x5B9E;&#x4F8B;&#x4EE3;&#x7801;&#x4F5C;&#x4E3A;<code>Application Module</code>&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x4E8B;&#x5148;&#x5904;&#x7406;&#x597D;<code>Module</code>&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x5F04;&#x597D;&#x7684;&#x793A;&#x4F8B;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/3.png\" alt=\"&#x56FE;\"></p>\n<h3 id=\"&#x6DFB;&#x52A0;bintray&#x63D2;&#x4EF6;\"><a href=\"#&#x6DFB;&#x52A0;bintray&#x63D2;&#x4EF6;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;bintray&#x63D2;&#x4EF6;\"></a>&#x6DFB;&#x52A0;bintray&#x63D2;&#x4EF6;</h3><p>&#x5728;&#x5206;&#x4E86;<code>Module</code>&#x4E4B;&#x540E;&#xFF0C;&#x9996;&#x5148;&#x5728;&#x9879;&#x76EE;&#x7684;<code>&#x6839;&#x76EE;&#x5F55;</code>&#x7684;<code>build.gradle</code>&#x7684;<br><code>dependencies</code>&#x4E2D;&#x6DFB;&#x52A0;<code>bintray</code>&#x63D2;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">classpath &apos;com.jfrog.bintray.gradle:gradle-bintray-plugin:1.2&apos;</div><div class=\"line\">classpath &apos;com.github.dcendents:android-maven-gradle-plugin:1.3</div></pre></td></tr></table></figure>\n<h3 id=\"&#x6DFB;&#x52A0;bintray&#x8BA4;&#x8BC1;\"><a href=\"#&#x6DFB;&#x52A0;bintray&#x8BA4;&#x8BC1;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;bintray&#x8BA4;&#x8BC1;\"></a>&#x6DFB;&#x52A0;bintray&#x8BA4;&#x8BC1;</h3><p>&#x627E;&#x5230;<code>local.properties</code>&#x6587;&#x4EF6;&#x5728;&#x5176;&#x4E2D;&#x6DFB;&#x52A0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">bintray.user=xxxx</div><div class=\"line\">bintray.apikey=xxx</div></pre></td></tr></table></figure>\n<p><code>bintray.user</code>&#x662F;&#x6CE8;&#x518C;&#x7684;user&#xFF0C;&#x81F3;&#x4E8E;<code>bintray.apikey</code>&#x5728;<code>JFrog Bintray</code>&#x4E2D;&#x7684;<code>Your Profile</code>&#x7684;<code>Edit</code>&#x9875;&#x9762;&#x7684;<code>API Key</code>&#x4E2D;&#x80FD;&#x627E;&#x5230;&#x3002;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/4.png\" alt=\"&#x56FE;\"></p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/6.png\" alt=\"&#x56FE;\"></p>\n<h3 id=\"&#x4FEE;&#x6539;Module&#x4E2D;&#x7684;build-gradle\"><a href=\"#&#x4FEE;&#x6539;Module&#x4E2D;&#x7684;build-gradle\" class=\"headerlink\" title=\"&#x4FEE;&#x6539;Module&#x4E2D;&#x7684;build.gradle\"></a>&#x4FEE;&#x6539;Module&#x4E2D;&#x7684;build.gradle</h3><p>&#x5728;&#x5176;&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">apply plugin: &apos;com.android.library&apos;</div><div class=\"line\"></div><div class=\"line\">ext {</div><div class=\"line\">    bintrayRepo = &apos;maven&apos;</div><div class=\"line\">    bintrayName = &apos;mypicker&apos;</div><div class=\"line\"></div><div class=\"line\">    publishedGroupId = &apos;com.idisfkj.picker&apos;</div><div class=\"line\">    libraryName = &apos;MyPicker&apos;</div><div class=\"line\">    artifact = &apos;mypicker&apos;</div><div class=\"line\"></div><div class=\"line\">    libraryDescription = &apos;A pickerView on Android&apos;</div><div class=\"line\"></div><div class=\"line\">    siteUrl = &apos;https://github.com/idisfkj/idisfkj.picker&apos;</div><div class=\"line\">    gitUrl = &apos;https://github.com/idisfkj/idisfkj.picker.git&apos;</div><div class=\"line\"></div><div class=\"line\">    libraryVersion = &apos;1.2.1&apos;</div><div class=\"line\"></div><div class=\"line\">    developerId = &apos;idisfkj&apos;</div><div class=\"line\">    developerName = &apos;idisfkj&apos;</div><div class=\"line\">    developerEmail = &apos;idisfkj@qq.com&apos;</div><div class=\"line\"></div><div class=\"line\">    licenseName = &apos;The Apache Software License, Version 2.0&apos;</div><div class=\"line\">    licenseUrl = &apos;http://www.apache.org/licenses/LICENSE-2.0.txt&apos;</div><div class=\"line\">    allLicenses = [&quot;Apache-2.0&quot;]</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x65F6;&#x5728;&#x6700;&#x540E;&#x6DFB;&#x52A0;&#x4E24;&#x4E2A;&#x811A;&#x672C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apply from: &apos;https://raw.githubusercontent.com/nuuneoi/JCenter/master/installv1.gradle&apos;</div><div class=\"line\">apply from: &apos;https://raw.githubusercontent.com/nuuneoi/JCenter/master/bintrayv1.gradle&apos;</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x6211;&#x8FD9;&#x4E2A;&#x4F9D;&#x8D56;&#x7684;&#x793A;&#x4F8B;&#x3002;&#x5176;&#x4E2D;<code>bintrayRepo</code>&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x4F7F;&#x7528;<code>maven</code>&#xFF0C;<code>mypicker</code>&#x662F;&#x5EFA;&#x7ACB;&#x7684;<code>package name</code>&#xFF0C;<code>siteUrl</code>&#x662F;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF0C;&#x6211;&#x7684;&#x9879;&#x76EE;&#x5728;github&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x662F;github&#x9879;&#x76EE;&#x7684;&#x5730;&#x5740;&#x5F62;&#x5F0F;&#x3002;<code>gitUrl</code>&#x662F;<code>VCS</code>&#x3002;&#x5176;&#x4ED6;&#x5E94;&#x8BE5;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x76F8;&#x5E94;&#x7684;&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>\n<p>&#x8FD9;&#x6837;&#x5C31;&#x6784;&#x5EFA;&#x597D;&#x4E86;&#x4F9D;&#x8D56;<code>com.idisfkj.picker:mypicker:1.2.1</code></p>\n<h2 id=\"&#x4E0A;&#x4F20;&#x5230;bintray\"><a href=\"#&#x4E0A;&#x4F20;&#x5230;bintray\" class=\"headerlink\" title=\"&#x4E0A;&#x4F20;&#x5230;bintray\"></a>&#x4E0A;&#x4F20;&#x5230;bintray</h2><p>&#x6253;&#x5F00;<code>Android Studio</code>&#x7684;&#x7EC8;&#x7AEF;</p>\n<h3 id=\"&#x7F16;&#x8BD1;library&#x6587;&#x4EF6;\"><a href=\"#&#x7F16;&#x8BD1;library&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"&#x7F16;&#x8BD1;library&#x6587;&#x4EF6;\"></a>&#x7F16;&#x8BD1;library&#x6587;&#x4EF6;</h3><p>&#x5728;&#x7EC8;&#x7AEF;&#x8F93;&#x5165;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew install</div></pre></td></tr></table></figure>\n<p>&#x51FA;&#x73B0;<code>BUILD SUCCESSFUL</code>&#x5C31;&#x6CA1;&#x95EE;&#x9898;</p>\n<h3 id=\"&#x4E0A;&#x4F20;\"><a href=\"#&#x4E0A;&#x4F20;\" class=\"headerlink\" title=\"&#x4E0A;&#x4F20;\"></a>&#x4E0A;&#x4F20;</h3><p>&#x5728;&#x7EC8;&#x7AEF;&#x8F93;&#x5165;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew bintrayUpload</div></pre></td></tr></table></figure>\n<p>&#x4E00;&#x6837;&#x7684;&#x51FA;&#x73B0;<code>BUILD SUCCESSFUL</code>&#x5C31;&#x6CA1;&#x95EE;&#x9898;<br>&#x7136;&#x540E;&#x4F60;&#x8FDB;&#x5165;<code>JFrog Bintray</code>&#x8FDB;&#x5165;<code>maven</code>&#x4F60;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x5176;&#x4E2D;&#x591A;&#x4E86;&#x4E00;&#x4E2A;<code>package</code>&#xFF0C;&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;&#x90A3;&#x5C31;&#x8868;&#x793A;&#x5B8C;&#x7F8E;&#x6210;&#x529F;&#x3002;</p>\n<h2 id=\"&#x540C;&#x6B65;&#x5230;Jcenter\"><a href=\"#&#x540C;&#x6B65;&#x5230;Jcenter\" class=\"headerlink\" title=\"&#x540C;&#x6B65;&#x5230;Jcenter\"></a>&#x540C;&#x6B65;&#x5230;Jcenter</h2><p>&#x5B8C;&#x6210;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#x5E76;&#x4E0D;&#x4EE3;&#x8868;&#x522B;&#x4EBA;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    compile &apos;com.idisfkj.picker:mypicker:1.2.1&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD8;&#x8981;&#x6DFB;&#x52A0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">repositories {</div><div class=\"line\">    maven {</div><div class=\"line\">        url &apos;https://dl.bintray.com/idisfkj/maven/&apos;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x540C;&#x6B65;&#x5230;<code>Jcenter</code>&#x4E2D;&#xFF0C;&#x600E;&#x4E48;&#x540C;&#x6B65;&#x5462;&#xFF1F;&#x522B;&#x6025;&#xFF0C;&#x53EA;&#x8981;&#x5728;&#x4F60;&#x521A;&#x521A;&#x751F;&#x6210;&#x7684;<code>package</code>&#x4E2D;&#x70B9;&#x51FB;<code>Add to Jcenter</code>&#x5373;&#x53EF;&#x3002;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/5.png\" alt=\"&#x56FE;\"></p>\n<p>&#x8FDB;&#x53BB;&#x4E4B;&#x540E;&#x76F4;&#x63A5;&#x53D1;&#x9001;&#x5C31;&#x53EF;&#x4EE5;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x586B;&#x5199;&#x4EC0;&#x4E48;&#x3002;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/7.png\" alt=\"&#x56FE;\"></p>\n<p>&#x6700;&#x540E;&#x5C31;&#x662F;&#x7B49;&#x5F85;&#x4E86;&#x3002;&#x51E0;&#x4E2A;&#x5C0F;&#x65F6;&#x4E4B;&#x540E;&#x4F60;&#x4F1A;&#x6536;&#x5230;&#x8003;&#x6838;&#x901A;&#x8FC7;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x518D;&#x8FD4;&#x56DE;<code>package</code>&#x5C31;&#x4F1A;&#x53D1;&#x73B0;<code>Linked to</code>&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#x3002;</p>\n<p>&#x73B0;&#x5728;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<a href=\"http://jcenter.bintray.com/com/idisfkj/picker/mypicker/1.2.1\" target=\"_blank\" rel=\"external\">http://jcenter.bintray.com/com/idisfkj/picker/mypicker/1.2.1</a> &#x67E5;&#x770B;&#x3002;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/8.png\" alt=\"&#x56FE;\"></p>\n<p>&#x540C;&#x65F6;&#x522B;&#x4EBA;&#x4E5F;&#x80FD;&#x4F7F;&#x7528;&#x4F60;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x7B80;&#x5355;&#x7684;&#x914D;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    compile &apos;com.idisfkj.picker:mypicker:1.2.1&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"&#x7248;&#x672C;&#x66F4;&#x65B0;\"><a href=\"#&#x7248;&#x672C;&#x66F4;&#x65B0;\" class=\"headerlink\" title=\"&#x7248;&#x672C;&#x66F4;&#x65B0;\"></a>&#x7248;&#x672C;&#x66F4;&#x65B0;</h2><p>&#x5BF9;&#x4E8E;&#x7248;&#x672C;&#x66F4;&#x65B0;&#xFF0C;&#x53EA;&#x8981;&#x66F4;&#x6539;&#x4E0A;&#x9762;&#x914D;&#x7F6E;&#x7684;&#x7248;&#x672C;&#x53F7;<code>libraryVersion = &apos;1.2.1&apos;</code>&#x6539;&#x6210;&#x4F60;&#x8981;&#x66F4;&#x65B0;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x5176;&#x5B83;&#x4E0D;&#x53D8;&#x3002;&#x518D;&#x91CD;&#x65B0;&#x4E0A;&#x4F20;&#x5230;<code>bintray</code>&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x6211;&#x8FD9;&#x91CC;&#x518D;&#x6765;&#x6574;&#x7406;&#x4E0B;&#x4E0A;&#x4F20;&#x7684;&#x601D;&#x8DEF;&#x3002;</p>\n<ul>\n<li>&#x65E2;&#x7136;&#x8981;&#x4E0A;&#x4F20;&#x5230;<code>Jcenter</code>&#x4E0A;&#xFF0C;&#x81EA;&#x7136;&#x8981;&#x53BB;<a href=\"https://bintray.com\" target=\"_blank\" rel=\"external\">https://bintray.com</a> &#x4E2D;&#x6CE8;&#x518C;&#x8D26;&#x53F7;</li>\n<li>&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x521B;&#x5EFA;<code>maven</code>&#x7684;<code>Repository</code></li>\n<li>&#x628A;&#x9879;&#x76EE;&#x5206;&#x79BB;&#x6210;<code>Module</code></li>\n<li>&#x5728;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x7684;<code>build.gradle</code>&#x4E2D;&#x6DFB;&#x52A0;<code>bintray</code>&#x63D2;&#x4EF6;</li>\n<li>&#x5728;<code>local.properties</code>&#x4E2D;&#x6DFB;&#x52A0;<code>bintray</code>&#x8BA4;&#x8BC1;</li>\n<li>&#x4FEE;&#x6539;<code>Module</code>&#x4E2D;&#x7684;<code>build.gradle</code>&#x4E2D;&#x7684;&#x914D;&#x7F6E;</li>\n<li>&#x5728;<code>Android Studio</code>&#x7EC8;&#x7AEF;&#x4F7F;&#x7528;<code>./gradlew xxx</code>&#x4E0A;&#x4F20;</li>\n<li>&#x6700;&#x540E;&#x5728;<code>JFrog Bintray</code>&#x4E2D;&#x540C;&#x6B65;&#x5230;<code>Jcenter</code>&#x4E2D;</li>\n</ul>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView的拖动、滑动删除","url":"https://idisfkj.github.io/2016/06/04/RecyclerView的拖动、滑动删除/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x524D;&#x4E9B;&#x65F6;&#x5019;&#x63D0;&#x5230;&#x4E86;&#x4E0B;<code>RecyclerView</code>&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4ECA;&#x5929;&#x518D;&#x6765;&#x8BF4;&#x8BF4;<code>RecyclerView</code>&#x7684;&#x62D6;&#x52A8;&#x3001;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x3002;&#x770B;&#x5B8C;&#x4E86;&#x4EE5;&#x540E;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;<code>RecyclerView</code>&#x662F;&#x591A;&#x4E48;&#x7684;&#x7280;&#x5229;&#x3002;&#x6BD4;<code>ListView</code>&#x7B80;&#x5355;&#x7684;&#x591A;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p>&#x4E3B;&#x8981;&#x662F;&#x4F7F;&#x7528;<code>ItemTouchHelper.Callback</code>&#x7C7B;&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x6211;&#x4EEC;&#x8981;&#x7528;&#x5230;&#x7684;&#x65B9;&#x6CD5;&#x4E3B;&#x8981;&#x6709;</p>\n<ul>\n<li>getMovementFlags()</li>\n<li>onMove()</li>\n<li>onSwiped()</li>\n<li>isLongPressDragEnabled()</li>\n<li>onSelectedChanged()</li>\n<li>clearView()</li>\n</ul>\n<p>&#x501F;&#x52A9;&#x8BE5;<code>ItemTouchHelper.Callback</code>&#x4E0E;&#x5176;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5904;&#x7406;&#x5B9E;&#x73B0;&#x62D6;&#x52A8;&#x3001;&#x5220;&#x9664;&#x3002;<br>&#x4E0B;&#x9762;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x7684;&#x7528;&#x5904;&#x4E0E;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x3002;</p>\n<h3 id=\"&#x62D6;&#x52A8;\"><a href=\"#&#x62D6;&#x52A8;\" class=\"headerlink\" title=\"&#x62D6;&#x52A8;\"></a>&#x62D6;&#x52A8;</h3><h4 id=\"getMovementFlags\"><a href=\"#getMovementFlags\" class=\"headerlink\" title=\"getMovementFlags\"></a>getMovementFlags</h4><p>&#x65E2;&#x7136;&#x8981;&#x4F7F;&#x7528;<code>ItemTouchHelper.Callback</code>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x81EA;&#x5B9A;&#x4E49;&#x81EA;&#x5DF1;&#x7684;&#x7C7B;&#x6765;&#x7EE7;&#x627F;&#x5B83;&#xFF0C;&#x91CD;&#x5199;&#x5176;&#x4E2D;&#x7684;&#x76F8;&#x5173;&#x65B9;&#x6CD5;&#x3002;&#x9996;&#x5148;&#x662F;<code>getMovementFlags()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x662F;&#x5B9A;&#x4E49;&#x79FB;&#x52A8;&#x6807;&#x8BC6;&#xFF0C;&#x6240;&#x4EE5;&#x9488;&#x5BF9;&#x62D6;&#x52A8;&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9996;&#x5148;&#x5B9A;&#x4E49;&#x62D6;&#x52A8;&#x6807;&#x8BC6;,&#x901A;&#x8FC7;<code>ItemTouchHelper</code>&#x63D0;&#x4F9B;&#x7684;&#x53C2;&#x6570;&#x6765;&#x5B9A;&#x4E49;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public int getMovementFlags(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder) {</div><div class=\"line\">            dragFlags = 0;</div><div class=\"line\">            swipeFlags = 0;</div><div class=\"line\">            if (recyclerView.getLayoutManager() instanceof GridLayoutManager</div><div class=\"line\">                    || recyclerView.getLayoutManager() instanceof StaggeredGridLayoutManager) {</div><div class=\"line\">                dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN</div><div class=\"line\">                        | ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT;</div><div class=\"line\">            } else {</div><div class=\"line\">                dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN;</div><div class=\"line\">                //if (viewHolder.getAdapterPosition() != 0)</div><div class=\"line\">                  //  swipeFlags = ItemTouchHelper.START | ItemTouchHelper.END;</div><div class=\"line\">            }</div><div class=\"line\">            return makeMovementFlags(dragFlags, swipeFlags);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4F60;&#x7684;<code>RecyclerView</code>&#x7684;<code>LayoutManager</code>&#x60C5;&#x51B5;&#x6765;&#x5B9A;&#x4E49;&#x62D6;&#x52A8;&#x65B9;&#x5411;&#x3002;<code>LinearLayoutManager</code>&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E0A;&#x4E0B;&#x62D6;&#x52A8;<code>dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN;</code>&#x81F3;&#x4E8E;&#x6CE8;&#x91CA;&#x4EE3;&#x7801;<code>swipeFlags</code>&#x8FD9;&#x91CC;&#x5148;&#x4E0D;&#x8981;&#x7BA1;&#xFF0C;&#x8FD9;&#x662F;&#x4E0B;&#x9762;&#x7684;&#x5220;&#x9664;&#x6807;&#x8BC6;&#x3002;&#x6700;&#x540E;&#x518D;&#x8C03;&#x7528;<code>makeMovementFlags</code>&#x8FD4;&#x56DE;&#x3002;</p>\n<h4 id=\"onMove\"><a href=\"#onMove\" class=\"headerlink\" title=\"onMove\"></a>onMove</h4><p>&#x5728;&#x5B9A;&#x4E49;&#x5B8C;<code>MovementFlags</code>&#x4EE5;&#x540E;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x62D6;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x56DE;&#x8C03;&#x7528;<code>onMove</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91CD;&#x5199;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x8FDB;&#x884C;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x6539;&#x53D8;&#x64CD;&#x4F5C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {</div><div class=\"line\">            int fromPosition = viewHolder.getAdapterPosition();</div><div class=\"line\">            int toPosition = target.getAdapterPosition();</div><div class=\"line\">            if (toPosition != 0) {</div><div class=\"line\">                if (fromPosition &lt; toPosition)</div><div class=\"line\">                    //&#x5411;&#x4E0B;&#x62D6;&#x52A8;</div><div class=\"line\">                    for (int i = fromPosition; i &lt; toPosition; i++) {</div><div class=\"line\">                        Collections.swap(mListData, i, i + 1);</div><div class=\"line\">                    }</div><div class=\"line\">                else {</div><div class=\"line\">                    //&#x5411;&#x4E0A;&#x62D6;&#x52A8;</div><div class=\"line\">                    for (int i = fromPosition; i &gt; toPosition; i--) {</div><div class=\"line\">                        Collections.swap(mListData, i, i - 1);</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">                recyclerView.getAdapter().notifyItemMoved(fromPosition, toPosition);</div><div class=\"line\">            }</div><div class=\"line\">            return true;</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x63D0;&#x4F9B;&#x7684;&#x53C2;&#x6570;&#x83B7;&#x53D6;<code>fromPosition</code>&#x521D;&#x59CB;&#x4F4D;&#x7F6E;<code>toPosition</code>&#x76EE;&#x6807;&#x4F4D;&#x7F6E;&#xFF0C;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x6570;&#x636E;&#x6539;&#x53D8;&#xFF0C;&#x6700;&#x540E;&#x8C03;&#x7528;<code>recyclerView.getAdapter().notifyItemMoved(fromPosition, toPosition);</code>&#x6765;&#x66F4;&#x65B0;<code>adapter</code>&#x72B6;&#x6001;&#x3002;</p>\n<h4 id=\"&#x7ED1;&#x5B9A;\"><a href=\"#&#x7ED1;&#x5B9A;\" class=\"headerlink\" title=\"&#x7ED1;&#x5B9A;\"></a>&#x7ED1;&#x5B9A;</h4><p>&#x6700;&#x540E;&#x7528;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#x6765;&#x7ED1;&#x5B9A;&#x76EE;&#x6807;<code>RecyclerView</code>&#x5BF9;&#x8C61;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">final ItemTouchHelper helper = new ItemTouchHelper(new MyCallBack());</div><div class=\"line\">        helper.attachToRecyclerView(recyclerView);</div></pre></td></tr></table></figure>\n<p><code>(new MyCallBack()</code>&#x5C31;&#x662F;&#x524D;&#x9762;&#x6211;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#x3002;&#x8FD9;&#x6837;&#x57FA;&#x672C;&#x7684;&#x62D6;&#x52A8;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x3002;&#x4F46;&#x662F;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x5C31;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x4F60;&#x5728;&#x62D6;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x56DE;&#x6CA1;&#x6709;&#x80CC;&#x666F;&#x6548;&#x679C;&#x7684;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x4E00;&#x4E0B;</p>\n<h4 id=\"onSelectedChanged\"><a href=\"#onSelectedChanged\" class=\"headerlink\" title=\"onSelectedChanged\"></a>onSelectedChanged</h4><p>&#x901A;&#x8FC7;&#x91CD;&#x5199;&#x8BE5;&#x65B9;&#x6CD5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x81EA;&#x5DF1;&#x7684;&#x62D6;&#x52A8;&#x80CC;&#x666F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public void onSelectedChanged(RecyclerView.ViewHolder viewHolder, int actionState) {</div><div class=\"line\">            if (actionState != ItemTouchHelper.ACTION_STATE_IDLE) {</div><div class=\"line\">                viewHolder.itemView.setPressed(true);</div><div class=\"line\">            }</div><div class=\"line\">            super.onSelectedChanged(viewHolder, actionState);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#x524D;&#x63D0;&#x662F;&#x4F60;&#x7684;<code>RecyclerView</code>&#x7684;<code>Item</code>&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;<code>android:background=&quot;@drawable/item_bg</code>&#x5C5E;&#x6027;&#x3002;&#x4F8B;&#x5982;<code>item_bg</code>&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\">    &lt;item android:state_pressed=&quot;true&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;rectangle&quot;&gt;</div><div class=\"line\">            &lt;solid android:color=&quot;@android:color/darker_gray&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\">    &lt;item android:state_pressed=&quot;false&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;rectangle&quot;&gt;</div><div class=\"line\">            &lt;solid android:color=&quot;@android:color/white&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\">&lt;/selector&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"clearView\"><a href=\"#clearView\" class=\"headerlink\" title=\"clearView\"></a>clearView</h4><p>&#x6700;&#x540E;&#x518D;&#x91CD;&#x5199;<code>clearViwe()</code>&#x62D6;&#x52A8;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x4F1A;&#x8C03;&#x7528;&#xFF0C;&#x7528;&#x6765;&#x6E05;&#x9664;&#x80CC;&#x666F;&#x72B6;&#x6001;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public void clearView(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder) {</div><div class=\"line\">            super.clearView(recyclerView, viewHolder);</div><div class=\"line\">            viewHolder.itemView.setPressed(false);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x65E5;&#x5E38;&#x6211;&#x4EEC;&#x6240;&#x8981;&#x7684;&#x62D6;&#x52A8;&#x6548;&#x679C;&#x3002;&#x81F3;&#x4E8E;&#x5BF9;&#x4E2A;&#x522B;&#x7684;<code>Item</code>&#x5C4F;&#x853D;&#x62D6;&#x52A8;&#x6548;&#x679C;&#x53EF;&#x4EE5;&#x91CD;&#x5199;<code>isLongPressDragEnabled()</code>&#x65B9;&#x6CD5;</p>\n<h3 id=\"isLongPressDragEnabled\"><a href=\"#isLongPressDragEnabled\" class=\"headerlink\" title=\"isLongPressDragEnabled\"></a>isLongPressDragEnabled</h3><p>&#x8BE5;&#x65B9;&#x6CD5;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;<code>true</code>&#x5C31;&#x662F;&#x4E0D;&#x5C4F;&#x853D;&#x62D6;&#x52A8;&#x6548;&#x679C;&#xFF0C;&#x6240;&#x6709;&#x7684;<code>Item</code>&#x90FD;&#x80FD;&#x88AB;&#x62D6;&#x52A8;&#x3002;&#x5982;&#x679C;&#x8981;&#x5B9E;&#x73B0;&#x5C4F;&#x853D;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x8FD4;&#x56DE;<code>false</code>&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public boolean isLongPressDragEnabled() {</div><div class=\"line\">            return false;</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x5728;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x6587;&#x7AE0;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;<code>Item</code>&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x4E2D;&#x7684;<code>onItemLongPressClick()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;<code>helper.startDrag(vh)</code>&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x8981;&#x62D6;&#x52A8;&#x7684;<code>Item</code>,&#x901A;&#x8FC7;&#x4F20;&#x5165;&#x8981;&#x62D6;&#x52A8;&#x7684;<code>ViewHolder</code>&#x6765;&#x6807;&#x8BC6;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">            public void onItemLongPressClick(RecyclerView.ViewHolder vh) {</div><div class=\"line\">                if (vh.getAdapterPosition() != 0) {</div><div class=\"line\">                    helper.startDrag(vh);</div><div class=\"line\">                }</div><div class=\"line\">            }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x56FA;&#x5B9A;&#x4E86;&#x7B2C;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x662F;&#x4E0D;&#x80FD;&#x88AB;&#x62D6;&#x52A8;&#x7684;&#x3002;</p>\n<blockquote>\n<p><em>&#x5982;&#x679C;&#x5BF9;&#x4E8E;RecyclerView&#x7684;Item&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x8FD8;&#x4E0D;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x9605;&#x8BFB;&#x6211;&#x524D;&#x9762;&#x7684;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/05/22/RecyclerView-item%E7%82%B9%E5%87%BB%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BC%9A%E4%B9%88/\">RecyclerView item&#x70B9;&#x51FB;&#x4F60;&#x771F;&#x7684;&#x4F1A;&#x4E48;</a></em></p>\n</blockquote>\n<h3 id=\"&#x6ED1;&#x52A8;&#x5220;&#x9664;\"><a href=\"#&#x6ED1;&#x52A8;&#x5220;&#x9664;\" class=\"headerlink\" title=\"&#x6ED1;&#x52A8;&#x5220;&#x9664;\"></a>&#x6ED1;&#x52A8;&#x5220;&#x9664;</h3><p>&#x5230;&#x8FD9;&#x91CC;&#x76F8;&#x4FE1;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x5E94;&#x8BE5;&#x6709;&#x70B9;&#x7709;&#x76EE;&#x4E86;&#x5427;&#x3002;&#x5BF9;&#xFF0C;&#x5C31;&#x662F;&#x524D;&#x9762;<code>getMovementFlags()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6240;&#x5B9A;&#x4E49;&#x7684;<code>swipeFlags</code>&#x6807;&#x8BC6;&#xFF0C;<code>ItemTouchHelper</code>&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x5DE6;&#x53F3;&#x5220;&#x9664;&#x6807;&#x8BC6;<code>ItemTouchHelper.START</code>&#x4E0E;<code>ItemTouchHelper.END</code>,&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5148;&#x6253;&#x5F00;&#x524D;&#x9762;&#x6CE8;&#x91CA;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>\n<h4 id=\"onSwiped\"><a href=\"#onSwiped\" class=\"headerlink\" title=\"onSwiped\"></a>onSwiped</h4><p>&#x6700;&#x540E;&#x53EF;&#x4EE5;&#x5728;<code>onSwiped()</code>&#x4E2D;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5220;&#x9664;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {</div><div class=\"line\">            int positon = viewHolder.getAdapterPosition();</div><div class=\"line\">            recyclerView.getAdapter().notifyItemRemoved(positon);</div><div class=\"line\">            mListData.remove(positon);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x57FA;&#x672C;&#x7684;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x4E86;&#x3002;&#x81F3;&#x4E8E;&#x5BF9;&#x4E2A;&#x522B;&#x7684;<code>Item</code>&#x5C4F;&#x853D;&#x5220;&#x9664;&#x6548;&#x679C;&#x53EF;&#x4EE5;&#x91CD;&#x5199;<code>isItemViewSwipeEnabled()</code>&#x65B9;&#x6CD5;</p>\n<h3 id=\"isItemViewSwipeEnabled\"><a href=\"#isItemViewSwipeEnabled\" class=\"headerlink\" title=\"isItemViewSwipeEnabled\"></a>isItemViewSwipeEnabled</h3><p>&#x8BE5;&#x65B9;&#x6CD5;&#x4E0E;&#x524D;&#x9762;&#x7684;&#x62D6;&#x52A8;&#x7684;&#x5C4F;&#x853D;<code>isItemViewSwipeEnabled()</code>&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x5B83;&#x4E5F;&#x662F;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;<code>true</code>&#xFF0C;&#x4E0D;&#x5BF9;<code>Item</code>&#x8FDB;&#x884C;&#x5C4F;&#x853D;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x3002;&#x5982;&#x679C;&#x8981;&#x5C4F;&#x853D;&#x7684;&#x8BDD;&#x4E5F;&#x662F;&#x91CD;&#x5199;&#x65B9;&#x6CD5;&#x518D;&#x8FD4;&#x56DE;<code>false</code>&#xFF0C;&#x6700;&#x540E;&#x5728;&#x901A;&#x8FC7;&#x5BF9;&#x5E94;&#x7684;<code>startSwipe(ViewHolder)</code>&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x524D;&#x9762;&#x7684;&#x5C4F;&#x853D;&#x62D6;&#x52A8;&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x8981;&#x5F04;&#x660E;&#x767D;&#x4E0A;&#x9762;&#x6240;&#x63D0;&#x5230;&#x7684;6&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x4E0E;&#x8C03;&#x7528;&#x65F6;&#x673A;&#x3002;&#x4E3B;&#x8981;&#x5C31;&#x662F;<code>getMovementFlags()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5B9A;&#x4E49;&#x597D;&#x62D6;&#x52A8;&#x4E0E;&#x6ED1;&#x52A8;&#x6807;&#x8BC6;&#x3002;&#x62D6;&#x52A8;&#x65F6;&#x4F1A;&#x56DE;&#x8C03;<code>onMove()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x65F6;&#x8981;&#x5904;&#x7406;&#x6570;&#x636E;&#x7684;&#x5220;&#x9664;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x56DE;&#x8C03;<code>onSwiped()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x81F3;&#x4E8E;&#x5176;&#x5B83;&#x7684;&#x72B6;&#x6001;&#x6548;&#x679C;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x89C6;&#x9700;&#x6C42;&#x6765;&#x7075;&#x6D3B;&#x53D8;&#x5316;&#x3002;</p>\n<p>Demo&#x5730;&#x5740;:<a href=\"https://github.com/idisfkj/RecyclerView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/RecyclerView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Socket的简单通信","url":"https://idisfkj.github.io/2016/05/28/Socket的简单通信/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;<code>Socket</code>&#x901A;&#x4FE1;&#xFF0C;&#x662F;&#x4E00;&#x7BC7;&#x5165;&#x95E8;&#x6587;&#x7AE0;&#x3002;&#x6240;&#x6709;&#x8FD8;&#x6CA1;&#x6709;&#x63A5;&#x89E6;&#xFF0C;&#x4F46;&#x53C8;&#x60F3;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0B;&#x3002;&#x5E0C;&#x671B;&#x5BF9;&#x4F60;&#x4EEC;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#x3002;</p>\n<h2 id=\"Socket\"><a href=\"#Socket\" class=\"headerlink\" title=\"Socket\"></a>Socket</h2><p>&#x9996;&#x5148;&#x4E00;&#x53E5;&#x8BDD;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;<code>Socket</code>:&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x4E24;&#x4E2A;&#x7A0B;&#x5E8F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x53CC;&#x5411;&#x7684;&#x901A;&#x4FE1;&#x8FDE;&#x63A5;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x4EA4;&#x6362;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x4E00;&#x7AEF;&#x79F0;&#x4E3A;&#x4E00;&#x4E2A;<code>socket</code>&#x3002;<br>&#x6240;&#x6709;&#x6211;&#x4EEC;&#x4E0B;&#x9762;&#x8981;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7AEF;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x901A;&#x4FE1;&#x3002;</p>\n<blockquote>\n<p><em>&#x563F;&#x563F;&#xFF0C;&#x5176;&#x5B9E;&#x4E0A;&#x9762;&#x7684;&#x90A3;&#x53E5;&#x8BDD;&#x662F;&#x767E;&#x5EA6;&#x767E;&#x79D1;&#x7684;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;&#x4F60;&#x4EEC;&#x53D1;&#x73B0;&#x4E86;&#x6CA1;&#x6709;</em></p>\n</blockquote>\n<h2 id=\"&#x670D;&#x52A1;&#x7AEF;\"><a href=\"#&#x670D;&#x52A1;&#x7AEF;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x7AEF;\"></a>&#x670D;&#x52A1;&#x7AEF;</h2><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x65B0;&#x5EFA;&#x4E86;&#x4E2A;&#x7B80;&#x5355;&#x7684;<code>Java</code>&#x7C7B;&#xFF0C;&#x53EA;&#x662F;&#x5B9E;&#x73B0;&#x5F00;&#x542F;&#x540E;&#x7B49;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#x3002;</p>\n<h3 id=\"&#x5B9E;&#x4F8B;&#x5316;ServerSocket\"><a href=\"#&#x5B9E;&#x4F8B;&#x5316;ServerSocket\" class=\"headerlink\" title=\"&#x5B9E;&#x4F8B;&#x5316;ServerSocket\"></a>&#x5B9E;&#x4F8B;&#x5316;ServerSocket</h3><p>&#x7ED1;&#x5B9A;&#x901A;&#x4FE1;&#x7AEF;&#x53E3;&#xFF0C;&#x6700;&#x597D;&#x7AEF;&#x53E3;&#x8BBE;&#x5927;&#x70B9;&#xFF0C;&#x9632;&#x6B62;&#x7AEF;&#x53E3;&#x88AB;&#x5360;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">java.net.ServerSocket serverSocket = new java.net.ServerSocket(30000);</div></pre></td></tr></table></figure>\n<h3 id=\"&#x7B49;&#x5F85;&#x8FDE;&#x63A5;\"><a href=\"#&#x7B49;&#x5F85;&#x8FDE;&#x63A5;\" class=\"headerlink\" title=\"&#x7B49;&#x5F85;&#x8FDE;&#x63A5;\"></a>&#x7B49;&#x5F85;&#x8FDE;&#x63A5;</h3><p>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x8BBE;&#x8BA1;&#x4E86;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x53EA;&#x8981;&#x5F00;&#x542F;&#x4E86;&#x5C31;&#x4E00;&#x76F4;&#x7B49;&#x5F85;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">while (true) {</div><div class=\"line\">                        //&#x63A5;&#x6536;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;</div><div class=\"line\">                        Socket s = serverSocket.accept();</div><div class=\"line\">                        list.add(s);</div><div class=\"line\">                        //&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x7684;&#x7EBF;&#x7A0B;</div><div class=\"line\">                        new Thread(new ServiceRunnable(s)).start();</div><div class=\"line\">                    }</div></pre></td></tr></table></figure>\n<p>&#x56E0;&#x4E3A;&#x6211;&#x5B9E;&#x73B0;&#x7684;&#x662F;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x5F97;&#x901A;&#x4FE1;&#xFF0C;&#x6240;&#x6709;&#x5C06;&#x6BCF;&#x4E2A;<code>Socket</code>&#x52A0;&#x5165;&#x5230;<code>List</code>&#x4E2D;&#x5E76;&#x4E14;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;<code>Socket</code>&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x7EBF;&#x7A0B;&#x3002;</p>\n<h3 id=\"&#x901A;&#x4FE1;\"><a href=\"#&#x901A;&#x4FE1;\" class=\"headerlink\" title=\"&#x901A;&#x4FE1;\"></a>&#x901A;&#x4FE1;</h3><p>&#x5982;&#x4F55;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x6765;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x5411;&#x6BCF;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;<code>Socket</code>&#x53D1;&#x9001;&#x8BE5;&#x6D88;&#x606F;&#xFF0C;&#x6240;&#x6709;&#x9996;&#x5148;&#x8981;&#x83B7;&#x53D6;&#x8F93;&#x5165;&#x6D41;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">br = new BufferedReader(new InputStreamReader(s.getInputStream(), &quot;utf-8&quot;));</div></pre></td></tr></table></figure>\n<p>&#x8BFB;&#x53D6;&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public String readContent() {</div><div class=\"line\">    try {</div><div class=\"line\">        return br.readLine();</div><div class=\"line\">    } catch (IOException e) {</div><div class=\"line\">        list.remove(s);</div><div class=\"line\">        e.printStackTrace();</div><div class=\"line\">    }</div><div class=\"line\">    return null;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x83B7;&#x53D6;&#x8F93;&#x51FA;&#x6D41;&#x53D1;&#x9001;&#x6D88;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">while ((content = readContent()) != null) {</div><div class=\"line\">                //&#x904D;&#x5386;&#x6240;&#x6709;&#x8FDE;&#x63A5;&#x4E86;&#x7684;Socket&#xFF0C;&#x5411;&#x6240;&#x6709;&#x5BA2;&#x6237;&#x7AEF;Socket&#x53D1;&#x9001;&#x6D88;&#x606F;</div><div class=\"line\">                for (Iterator&lt;Socket&gt; it = list.iterator(); it.hasNext(); ) {</div><div class=\"line\">                    Socket socket = it.next();</div><div class=\"line\">                    try {</div><div class=\"line\">                        pw = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);</div><div class=\"line\">                        pw.println(content);</div><div class=\"line\">                    } catch (IOException e) {</div><div class=\"line\">                        it.remove();</div><div class=\"line\">                        e.printStackTrace();</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">            }</div></pre></td></tr></table></figure>\n<p>&#x670D;&#x52A1;&#x7AEF;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x5BA2;&#x6237;&#x7AEF;</p>\n<h2 id=\"&#x5BA2;&#x6237;&#x7AEF;\"><a href=\"#&#x5BA2;&#x6237;&#x7AEF;\" class=\"headerlink\" title=\"&#x5BA2;&#x6237;&#x7AEF;\"></a>&#x5BA2;&#x6237;&#x7AEF;</h2><p>&#x5BA2;&#x6237;&#x7AEF;&#x5E03;&#x5C40;&#x53EA;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x53D1;&#x9001;&#x754C;&#x9762;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#x3002;&#x76F4;&#x63A5;&#x8BF4;<code>Socket</code>&#x3002;</p>\n<h3 id=\"&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;\"><a href=\"#&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;\" class=\"headerlink\" title=\"&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;\"></a>&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;</h3><p>&#x6307;&#x5B9A;&#x670D;&#x52A1;&#x4E3B;&#x673A;&#x540D;&#x6216;<code>IP</code>&#x5730;&#x5740;&#x4E0E;&#x8FDE;&#x63A5;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x5E94;&#x4E3A;&#x662F;&#x672C;&#x5730;&#x670D;&#x52A1;&#x5668;&#x6240;&#x6709;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x672C;&#x5730;<code>IP</code>&#x5730;&#x5740;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">socket = new Socket(&quot;192.168.56.1&quot;, 30000);</div></pre></td></tr></table></figure>\n<h3 id=\"&#x901A;&#x4FE1;-1\"><a href=\"#&#x901A;&#x4FE1;-1\" class=\"headerlink\" title=\"&#x901A;&#x4FE1;\"></a>&#x901A;&#x4FE1;</h3><p>&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x901A;&#x4FE1;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x7C7B;&#x4F3C;&#xFF0C;&#x83B7;&#x53D6;&#x8F93;&#x5165;&#x6D41;&#xFF0C;&#x8BFB;&#x53D6;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x6765;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x5E76;&#x663E;&#x793A;&#x5230;&#x754C;&#x9762;&#x4E2D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">br = new BufferedReader(new InputStreamReader(socket.getInputStream()));</div><div class=\"line\"></div><div class=\"line\">                new Thread(new Runnable() {</div><div class=\"line\">                    String line;</div><div class=\"line\"></div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void run() {</div><div class=\"line\">                        try {</div><div class=\"line\">                            //&#x8BFB;&#x53D6;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x6765;&#x7684;&#x6D88;&#x606F;</div><div class=\"line\">                            while ((line = br.readLine()) != null) {</div><div class=\"line\">                                Message message = new Message();</div><div class=\"line\">                                message.what = 1;</div><div class=\"line\">                                message.obj = line;</div><div class=\"line\">                                handler.sendMessage(message);</div><div class=\"line\">                            }</div><div class=\"line\">                        } catch (IOException e) {</div><div class=\"line\">                            e.printStackTrace();</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                }).start();</div></pre></td></tr></table></figure>\n<p>&#x70B9;&#x51FB;&#x53D1;&#x9001;&#xFF0C;&#x83B7;&#x53D6;&#x8F93;&#x51FA;&#x6D41;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x6D88;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void onClick(View v) {</div><div class=\"line\">    Message message = new Message();</div><div class=\"line\">    message.what = 2;</div><div class=\"line\">    message.obj = et.getText().toString();</div><div class=\"line\">    clientThread.clientHandler.sendMessage(message);</div><div class=\"line\">    et.setText(&quot;&quot;);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">clientHandler = new Handler(Looper.getMainLooper()) {</div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void handleMessage(Message msg) {</div><div class=\"line\">                        if (msg.what == 2) {</div><div class=\"line\">                            try {</div><div class=\"line\">                                //&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x9001;&#x6D88;&#x606F;</div><div class=\"line\">                                pw = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);</div><div class=\"line\">                                pw.println(msg.obj);</div><div class=\"line\">                            } catch (IOException e) {</div><div class=\"line\">                                e.printStackTrace();</div><div class=\"line\">                            }</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                };</div></pre></td></tr></table></figure>\n<p>&#x5230;&#x6B64;&#x6574;&#x4E2A;&#x7684;<code>Socket</code>&#x901A;&#x4FE1;&#x5C31;&#x57FA;&#x672C;&#x4E0A;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h2><p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4F7F;&#x7528;<code>Socket</code>&#x5B9E;&#x73B0;&#x901A;&#x4FE1;&#xFF0C;&#x4E3B;&#x8981;&#x5206;&#x4E3A;&#x4E09;&#x6B65;</p>\n<ul>\n<li>&#x5B9E;&#x4F8B;&#x5316;<code>Socket</code>,&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;</li>\n<li>&#x83B7;&#x53D6;&#x8F93;&#x5165;&#x6D41;&#xFF0C;&#x8BFB;&#x53D6;&#x6570;&#x636E;</li>\n<li>&#x83B7;&#x53D6;&#x8F93;&#x51FA;&#x6D41;&#xFF0C;&#x53D1;&#x9001;&#x6570;&#x636E;</li>\n</ul>\n<p>&#x5F53;&#x7136;&#x8FD9;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5E26;&#x9886;&#x6211;&#x4EEC;&#x5165;&#x95E8;&#x800C;&#x5DF2;&#x3002;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x4E0B;&#x9762;&#x7684;Demo&#x5B66;&#x4E60;&#x3002;</p>\n<p>Demo&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/Socket\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/Socket</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"android 软键盘显隐","url":"https://idisfkj.github.io/2016/05/24/android-软键盘显隐/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x6700;&#x8FD1;&#x9047;&#x5230;&#x8F6F;&#x952E;&#x76D8;&#x7684;&#x663E;&#x9690;&#x5224;&#x65AD;&#x95EE;&#x9898;&#xFF0C;&#x539F;&#x6765;&#x4E5F;&#x9047;&#x8FC7;&#x4E00;&#x6B21;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x6B21;&#x9488;&#x5BF9;&#x8FD9;&#x7C7B;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x505A;&#x4E0B;&#x8BB0;&#x5F55;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x5E2E;&#x52A9;&#x540E;&#x9762;&#x78B0;&#x5230;&#x76F8;&#x540C;&#x95EE;&#x9898;&#x7684;&#x4F60;&#x4EEC;&#x3002;</p>\n<p>&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x7ECF;&#x9A8C;&#xFF0C;&#x8FD9;&#x91CC;&#x6709;&#x4E09;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x5B9E;&#x539F;&#x7406;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x8F6F;&#x4EF6;&#x76D8;&#x7684;&#x5F39;&#x51FA;&#xFF0C;&#x89C6;&#x56FE;&#x7684;&#x5E03;&#x5C40;&#x4F1A;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5E03;&#x5C40;&#x7684;&#x6539;&#x53D8;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x663E;&#x793A;&#x4E86;&#x8F6F;&#x4EF6;&#x76D8;&#x3002;</p>\n<h2 id=\"&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;\"><a href=\"#&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;\"></a>&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;</h2><p>&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x5B83;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x76F8;&#x5BF9;&#x4E8E;&#x522B;&#x7684;&#x66F4;&#x9AD8;&#x3002;&#x56E0;&#x4E3A;&#x8FD9;&#x53EA;&#x662F;&#x5728;&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x8F6F;&#x952E;&#x76D8;&#x89E6;&#x53D1;&#x4E86;&#x3002;&#x8FD9;&#x6837;&#x4F60;&#x53EF;&#x4EE5;&#x8FD0;&#x7528;&#x5230;&#x4EFB;&#x4F55;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#x4E2D;&#x6765;&#x83B7;&#x53D6;&#x8F6F;&#x4EF6;&#x76D8;&#x7684;&#x72B6;&#x6001;&#x3002;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p>&#x5224;&#x65AD;&#x72B6;&#x6001;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">private boolean isKeyboardShown(View rootView) {</div><div class=\"line\">        final int softKeyboardHeight = 100;</div><div class=\"line\">        Rect r = new Rect();</div><div class=\"line\">        //&#xA0;&#x83B7;&#x53D6;&#x6839;&#x5E03;&#x5C40;&#x7684;&#x53EF;&#x89C6;&#x533A;&#x57DF;r</div><div class=\"line\">        rootView.getWindowVisibleDisplayFrame(r);</div><div class=\"line\">        DisplayMetrics dm = rootView.getResources().getDisplayMetrics();</div><div class=\"line\">        // &#x672C;&#x6765;&#x7684;&#x5B9E;&#x9645;&#x5E95;&#x90E8;&#x8DDD;&#x79BB; - &#x53EF;&#x89C6;&#x7684;&#x5E95;&#x90E8;&#x8DDD;&#x79BB;</div><div class=\"line\">        int heightDiff = rootView.getBottom() - r.bottom;</div><div class=\"line\">        return heightDiff &gt; softKeyboardHeight * dm.density;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4F8B;&#x5982;&#x5728;<code>onTouch</code>&#x4E2D;&#x5224;&#x65AD;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public boolean onTouch(View v, MotionEvent event) {</div><div class=\"line\">        if (event.getAction() == MotionEvent.ACTION_DOWN &amp;&amp; isKeyboardShown(chatContent.getRootView()))</div><div class=\"line\">            manager.toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS);</div><div class=\"line\">        return false;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"&#x8C03;&#x7528;Android-API\"><a href=\"#&#x8C03;&#x7528;Android-API\" class=\"headerlink\" title=\"&#x8C03;&#x7528;Android API\"></a>&#x8C03;&#x7528;Android API</h2><p>&#x5176;&#x5B9E;&#x67E5;&#x9605;<code>API</code>&#x53D1;&#x73B0;<code>Android</code>&#x5DF2;&#x7ECF;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x5E03;&#x5C40;&#x6539;&#x53D8;&#x7684;&#x76D1;&#x542C;&#x7684;&#x7C7B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>addOnGlobalLayoutListener</code>&#x6765;&#x76D1;&#x542C;&#x6574;&#x4E2A;&#x5E03;&#x5C40;&#x7684;&#x72B6;&#x6001;&#x3002;&#x8FD9;&#x4E2A;&#x76D1;&#x542C;&#x5668;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x5E03;&#x5C40;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#x4F1A;&#x8C03;&#x7528;<code>onGlobalLayout</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x4E2D;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x5F53;&#x7136;&#x5728;&#x4F7F;&#x7528;&#x8BE5;&#x76D1;&#x542C;&#x65F6;&#x8981;&#x5148;&#x83B7;&#x53D6;&#x6574;&#x4E2A;&#x89C6;&#x56FE;&#x6811;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">final View root = findViewById(R.id.main);</div><div class=\"line\">        ViewTreeObserver observer = root.getViewTreeObserver();</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x6DFB;&#x52A0;&#x76D1;&#x542C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">observer.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onGlobalLayout() {</div><div class=\"line\">                int heightDiff = root.getRootView().getHeight() - root.getHeight();</div><div class=\"line\">                if (heightDiff &gt; 100){ //&#x4E00;&#x822C;&#x8D85;&#x8FC7;100&#x89C6;&#x4E3A;&#x5F39;&#x51FA;</div><div class=\"line\">                \t//&#x663E;&#x793A;&#x64CD;&#x4F5C;</div><div class=\"line\">                }else{</div><div class=\"line\">                \t//&#x9690;&#x85CF;&#x64CD;&#x4F5C;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<h2 id=\"&#x81EA;&#x5B9A;&#x4E49;&#x5916;&#x90E8;&#x7C7B;\"><a href=\"#&#x81EA;&#x5B9A;&#x4E49;&#x5916;&#x90E8;&#x7C7B;\" class=\"headerlink\" title=\"&#x81EA;&#x5B9A;&#x4E49;&#x5916;&#x90E8;&#x7C7B;\"></a>&#x81EA;&#x5B9A;&#x4E49;&#x5916;&#x90E8;&#x7C7B;</h2><p>&#x5176;&#x5B9E;&#x4F7F;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5E03;&#x5C40;&#x7EE7;&#x627F;<code>Android</code>&#x57FA;&#x672C;&#x5E03;&#x5C40;&#x63A7;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5176;&#x4E2D;&#x91CD;&#x5199;<code>onMeasure</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x4E0E;&#x524D;&#x9762;&#x7684;&#x57FA;&#x672C;&#x7C7B;&#x4F3C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {</div><div class=\"line\">        int height = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">        Activity activity = (Activity) getContext();</div><div class=\"line\">        Rect rect = new Rect();</div><div class=\"line\">        activity.getWindow().getDecorView().getWindowVisibleDisplayFrame(rect);</div><div class=\"line\">        int statusBarHeight = rect.top;</div><div class=\"line\">        int screenHeight = activity.getWindowManager().getDefaultDisplay().getHeight();</div><div class=\"line\">        int diff = (screenHeight - statusBarHeight) - height;</div><div class=\"line\">        if (listener != null) {</div><div class=\"line\">            listener.onSoftKeyboardShown(diff &gt; 100);</div><div class=\"line\">        }</div><div class=\"line\">        super.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x81EA;&#x5B9A;&#x4E49;&#x4E0E;&#x5B9E;&#x73B0;&#x4E86;&#x76D1;&#x542C;&#x63A5;&#x53E3;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface Listener {</div><div class=\"line\">        void onSoftKeyboardShown(boolean isShowing);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    private Listener listener;</div><div class=\"line\"></div><div class=\"line\">    public void setListener(Listener listener) {</div><div class=\"line\">        this.listener = listener;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5728;xml&#x4E2D;&#x4F7F;&#x7528;&#x8BE5;&#x81EA;&#x5B9A;&#x4E49;&#x5E03;&#x5C40;&#xFF0C;&#x76EE;&#x6807;&#x7C7B;&#x4E2D;&#x7ED1;&#x5B9A;&#x8C03;&#x7528;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">RelativeLayoutThatDetectsSoftKeyboard chatLayout = (RelativeLayoutThatDetectsSoftKeyboard) findViewById(R.id.chat_bottm);</div><div class=\"line\">        chatLayout.setListener(this);</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void onSoftKeyboardShown(boolean isShowing) {</div><div class=\"line\">        if (isShowing)</div><div class=\"line\">            //&#x663E;&#x793A;&#x64CD;&#x4F5C;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x7684;&#x597D;&#x5904;&#x5C31;&#x662F;&#x903B;&#x8F91;&#x5BF9;&#x5916;&#x5C01;&#x88C5;&#x3001;&#x89E3;&#x8026;&#x4E86;&#xFF0C;&#x53EA;&#x8981;&#x6839;&#x636E;<code>isShowing</code>&#x7684;&#x503C;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>\n<blockquote>\n<p><em>&#x597D;&#x4E86;&#xFF0C;&#x6211;&#x53EA;&#x662F;&#x5927;&#x81EA;&#x7136;&#x7684;&#x642C;&#x8FD0;&#x5DE5;&#xFF0C;&#x5230;&#x5E95;&#x8981;&#x7528;&#x54EA;&#x79CD;&#x5C31;&#x81EA;&#x5DF1;&#x89C6;&#x60C5;&#x51B5;&#x800C;&#x5B9A;&#x5427;</em></p>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView item点击你真的会么","url":"https://idisfkj.github.io/2016/05/22/RecyclerView-item点击你真的会么/","content":"<p>&#x73B0;&#x5728;<code>RecyclerView</code>&#x90FD;&#x4F7F;&#x7528;&#x7684;&#x76F8;&#x5BF9;&#x9891;&#x7E41;&#x4E86;&#xFF0C;&#x5728;&#x5F00;&#x59CB;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5927;&#x5BB6;&#x90FD;&#x5E94;&#x8BE5;&#x90FD;&#x9047;&#x5230;&#x8FC7;<code>RecyclerView</code>&#x5C45;&#x7136;&#x6CA1;&#x6709;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;<code>Item</code>&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#xFF0C;&#x987F;&#x65F6;&#x611F;&#x89C9;&#x4E0D;&#x77E5;&#x6240;&#x63AA;&#x4E86;&#x3002;&#x67E5;&#x9605;<code>API</code>&#x53D1;&#x73B0;&#x786E;&#x5B9E;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x8BE5;&#x4E8B;&#x4EF6;&#xFF0C;&#x6700;&#x540E;&#x7ECF;&#x8FC7;&#x82E6;&#x601D;&#x51A5;&#x60F3;&#xFF0C;&#x8FD8;&#x662F;&#x6A21;&#x4EFF;<code>ListView</code>&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#xFF0C;&#x5728;<code>onCreateViewHolder</code>&#x4E2D;&#x4E3A;&#x6BCF;&#x4E2A;<code>Item</code>&#x6DFB;&#x52A0;<code>View</code>&#x7684;<code>setOnClickListener</code>&#x4E8B;&#x4EF6;&#xFF0C;&#x5236;&#x5B9A;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5728;&#x4E3B;&#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528;&#x3002;&#x77AC;&#x95F4;&#x89E3;&#x51B3;&#x4E86;&#xFF0C;&#x4E00;&#x4E0B;&#x611F;&#x89C9;<code>so easy</code>&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x771F;&#x7684;&#x597D;&#x5417;&#xFF1F;&#x6211;&#x4EEC;&#x60F3;&#x60F3;&#x4E00;&#x65E6;<code>Item</code>&#x7684;&#x6570;&#x91CF;&#x66B4;&#x589E;&#x8FD9;&#x53EF;&#x4F1A;&#x5F71;&#x54CD;&#x6027;&#x80FD;&#x554A;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x60F3;&#x51FA;&#x522B;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x4EE3;&#x66FF;&#x5B83;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x5C31;&#x4ECB;&#x7ECD;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x9AD8;&#x5927;&#x4E0A;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x6559;&#x4F60;&#x5982;&#x4F55;&#x771F;&#x6B63;&#x7684;&#x4E3A;<code>RecyclerView</code>&#x7684;<code>Item</code>&#x6DFB;&#x52A0;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3002;</p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p>&#x867D;&#x7136;<code>RecyclerView</code>&#x6CA1;&#x6709;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x76F8;&#x5E94;&#x7684;&#x70B9;&#x51FB;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x67E5;&#x8BE2;&#x5B83;&#x7684;<code>API</code>&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x6709;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x5C31;&#x662F;<code>addOnItemTouchListener</code>&#x89E6;&#x6478;&#x5B9E;&#x4E8B;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8BE5;&#x76D1;&#x542C;&#x6765;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x7684;&#x89E6;&#x6478;&#x53CD;&#x5E94;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x76F8;&#x540C;&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x6548;&#x679C;&#x3002;&#x5F53;&#x7136;&#x5176;&#x4E2D;&#x6211;&#x4EEC;&#x8FD8;&#x8981;&#x501F;&#x52A9;<code>GestureDetectorCompat</code>&#x6839;&#x636E;&#x89E6;&#x6478;&#x624B;&#x52BF;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3002;</p>\n<h2 id=\"addOnItemTouchListener\"><a href=\"#addOnItemTouchListener\" class=\"headerlink\" title=\"addOnItemTouchListener\"></a>addOnItemTouchListener</h2><p>&#x4E3A;<code>RecyclerView</code>&#x6DFB;&#x52A0;<code>addOnItemTouchListener</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">recyclerView.addOnItemTouchListener(new OnItemTouchListener(recyclerView) {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onItemClick(RecyclerView.ViewHolder vh) {</div><div class=\"line\">            //item &#x64CD;&#x4F5C;</div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x53BB;&#x5B9E;&#x73B0;<code>RecyclerView.OnItemTouchListener</code>&#x63A5;&#x53E3;</p>\n<h3 id=\"&#x5B9E;&#x73B0;OnItemTouchListener\"><a href=\"#&#x5B9E;&#x73B0;OnItemTouchListener\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;OnItemTouchListener\"></a>&#x5B9E;&#x73B0;OnItemTouchListener</h3><p>&#x5728;&#x5B9E;&#x73B0;&#x8BE5;&#x63A5;&#x53E3;&#x65F6;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x6709;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;</p>\n<ul>\n<li>onTouchEvent</li>\n<li>onInterceptTouchEvent</li>\n<li>onRequestDisallowInterceptTouchEvent</li>\n</ul>\n<p>&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x5904;&#x7406;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#x7684;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x662F;&#x62E6;&#x622A;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#x7684;&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x662F;&#x5904;&#x7406;&#x89E6;&#x6478;&#x51B2;&#x7A81;&#x7684;&#x3002;&#x7B2C;&#x4E09;&#x4E2A;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7528;&#x4E0D;&#x5230;&#xFF0C;&#x4E0D;&#x7528;&#x7BA1;&#xFF0C;&#x81F3;&#x4E8E;&#x524D;&#x4E24;&#x4E2A;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x5411;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x7528;&#x5230;&#x7684;<code>GestureDetectorCompat</code>&#x4F20;&#x9012;<code>MotionEvent</code>&#x4E3A;&#x4E86;&#x83B7;&#x53D6;&#x89E6;&#x6478;&#x7684;&#x5750;&#x6807;,&#x6700;&#x540E;&#x518D;&#x5B9A;&#x4E49;&#x4E2A;<code>abstract</code>&#x56DE;&#x8C03;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">public abstract class OnItemTouchListener implements RecyclerView.OnItemTouchListener {</div><div class=\"line\"></div><div class=\"line\">    private GestureDetectorCompat mGestureDetectorCompat;</div><div class=\"line\">    private RecyclerView mRecyclerView;</div><div class=\"line\"></div><div class=\"line\">    public OnItemTouchListener(RecyclerView recyclerView) {</div><div class=\"line\">        mRecyclerView = recyclerView;</div><div class=\"line\">        mGestureDetectorCompat = new GestureDetectorCompat(mRecyclerView.getContext(),</div><div class=\"line\">                new MyGestureListener());</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void onTouchEvent(RecyclerView rv, MotionEvent e) {</div><div class=\"line\">        mGestureDetectorCompat.onTouchEvent(e);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public boolean onInterceptTouchEvent(RecyclerView rv, MotionEvent e) {</div><div class=\"line\">        mGestureDetectorCompat.onTouchEvent(e);</div><div class=\"line\">        return false;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void onRequestDisallowInterceptTouchEvent(boolean disallowIntercept) {</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public abstract void onItemClick(RecyclerView.ViewHolder vh);</div></pre></td></tr></table></figure>\n<h2 id=\"GestureDetectorCompat\"><a href=\"#GestureDetectorCompat\" class=\"headerlink\" title=\"GestureDetectorCompat\"></a>GestureDetectorCompat</h2><p>&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x5B9E;&#x4F8B;&#x5316;&#x4E86;<code>GestureDetectorCompat</code>&#x7C7B;&#x5176;&#x4E2D;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x624B;&#x52BF;&#x76D1;&#x542C;<code>OnGestureListener</code>&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5B83;&#x7684;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;&#x7C7B;<code>SimpleOnGestureListener</code>&#x5B83;&#x91CC;&#x9762;&#x5B9E;&#x73B0;&#x7684;&#x90FD;&#x7684;&#x7A7A;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7279;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x6267;&#x884C;&#x6211;&#x4EEC;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>\n<h3 id=\"SimpleOnGestureListener\"><a href=\"#SimpleOnGestureListener\" class=\"headerlink\" title=\"SimpleOnGestureListener\"></a>SimpleOnGestureListener</h3><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;</p>\n<ul>\n<li>onSingleTapUp</li>\n<li>onLongPress</li>\n</ul>\n<p>&#x5176;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x7B80;&#x5355;&#x7684;&#x70B9;&#x51FB;&#x5C4F;&#x5E55;&#x65F6;&#x6267;&#x884C;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x662F;&#x957F;&#x6309;&#x5C4F;&#x5E55;&#x65F6;&#x6267;&#x884C;&#x3002;&#x6240;&#x4EE5;&#x6839;&#x636E;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4ECE;&#x524D;&#x9762;<code>OnItemTouchListener</code>&#x4F20;&#x8FC7;&#x6765;&#x7684;<code>MotionEvent</code>&#x83B7;&#x53D6;&#x70B9;&#x51FB;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x6839;&#x636E;&#x4F4D;&#x7F6E;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;<code>findChildViewUnder</code>&#x83B7;&#x53D6;&#x5230;&#x70B9;&#x51FB;&#x7684;<code>ItemView</code>,&#x518D;&#x901A;&#x8FC7;<code>RecyclerView</code>&#x7684;<code>getChildViewHolder</code>&#x83B7;&#x53D6;<code>ItemView</code>&#x7684;<code>ViewHolder</code>&#x6700;&#x540E;&#x518D;&#x8C03;&#x7528;<code>OnItemClick</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">private class MyGestureListener extends GestureDetector.SimpleOnGestureListener {</div><div class=\"line\">        @Override</div><div class=\"line\">        public boolean onSingleTapUp(MotionEvent e) {</div><div class=\"line\">            View childe = mRecyclerView.findChildViewUnder(e.getX(), e.getY());</div><div class=\"line\">            if (childe != null) {</div><div class=\"line\">                RecyclerView.ViewHolder VH = mRecyclerView.getChildViewHolder(childe);</div><div class=\"line\">                onItemClick(VH);</div><div class=\"line\">            }</div><div class=\"line\">            return true;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        @Override</div><div class=\"line\">        public void onLongPress(MotionEvent e) {</div><div class=\"line\">            View childe = mRecyclerView.findChildViewUnder(e.getX(), e.getY());</div><div class=\"line\">            if (childe != null) {</div><div class=\"line\">                RecyclerView.ViewHolder VH = mRecyclerView.getChildViewHolder(childe);</div><div class=\"line\">                onItemClick(VH);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x597D;&#x4E86;&#x6574;&#x4E2A;&#x7684;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#xFF0C;&#x770B;&#x4E86;&#x4EE5;&#x540E;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x66F4;&#x9AD8;&#x5927;&#x4E0A;&#x4E86;&#x5462;&#x3002;&#x5982;&#x679C;&#x5BF9;<code>RecyclerView</code>&#x8FD8;&#x4E0D;&#x662F;&#x5F88;&#x719F;&#x6089;&#x7684;&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x6211;&#x524D;&#x9762;&#x7684;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;<a href=\"http://idisfkj.github.io/2016/04/02/RecyclerView%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/\">RecyclerView&#x6DF1;&#x5165;&#x6D45;&#x51FA;</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android高仿微信之mvp实现(四)","url":"https://idisfkj.github.io/2016/05/15/Android高仿微信之mvp实现-四/","content":"<p>&#x524D;&#x9762;&#x628A;&#x804A;&#x5929;&#x7684;&#x57FA;&#x672C;&#x529F;&#x80FD;&#x90FD;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x6700;&#x8FD1;&#x6709;&#x70B9;&#x5FD9;&#xFF0C;&#x56E0;&#x4E3A;&#x5FEB;&#x5230;&#x5B66;&#x671F;&#x672B;&#x4E86;&#xFF0C;&#x8003;&#x8BD5;&#x5C31;&#x6765;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x540E;&#x9762;&#x53EF;&#x80FD;&#x4F1A;&#x6162;&#x70B9;&#x3002;&#x5927;&#x5BB6;&#x90FD;&#x53CD;&#x6620;&#x6CA1;&#x6709;&#x6D88;&#x606F;&#x63D0;&#x9192;&#xFF0C;&#x6240;&#x4EE5;&#x62BD;&#x4E86;&#x70B9;&#x65F6;&#x95F4;&#x628A;&#x804A;&#x5929;&#x7684;&#x63D0;&#x9192;&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x73B0;&#x4E86;&#x4E0B;&#xFF0C;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;&#x3002;</p>\n<h1 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h1><p>&#x6211;&#x8FD9;&#x91CC;&#x7528;&#x5230;&#x5F97;&#x539F;&#x7406;&#x4E3B;&#x8981;&#x5C31;&#x4E24;&#x4E2A;&#x77E5;&#x8BC6;&#x70B9;</p>\n<ul>\n<li>Notification</li>\n<li>BadgeView</li>\n</ul>\n<p>&#x53EA;&#x8981;&#x4F60;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E24;&#x9879;&#x4EE5;&#x540E;&#x7684;&#x6D88;&#x606F;&#x63D0;&#x9192;&#x795E;&#x9A6C;&#x7684;&#x90FD;&#x80FD;&#x8F7B;&#x677E;&#x641E;&#x5B9A;&#x3002;&#x9996;&#x5148;&#x6765;&#x89E3;&#x91CA;&#x4E0B;&#x4ED6;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x5BF9;&#x4E8E;<strong>Notification</strong>&#x6211;&#x60F3;&#x5E94;&#x8BE5;&#x5F88;&#x591A;&#x90FD;&#x63A5;&#x89E6;&#x4E86;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x4E0B;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5B83;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x770B;&#x5230;&#x7684;&#x6D88;&#x606F;&#x901A;&#x77E5;&#x6846;&#x7684;&#x51FA;&#x73B0;&#xFF0C;&#x4E0D;&#x8FC7;&#x5176;&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x8981;&#x6CE8;&#x610F;&#x51E0;&#x70B9;&#xFF0C;&#x4E0B;&#x9762;&#x4F1A;&#x8BE6;&#x7EC6;&#x6307;&#x51FA;&#x3002;&#x81F3;&#x4E8E;<strong>BadgeView</strong>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x5E93;&#xFF0C;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x770B;&#x5230;&#x7684;&#x5728;&#x5E94;&#x7528;&#x4E2D;&#x663E;&#x793A;&#x7684;&#x672A;&#x8BFB;&#x6D88;&#x606F;&#x6570;&#x3002;</p>\n<blockquote>\n<p><em>&#x539F;&#x7406;&#x4ECB;&#x7ECD;&#x5B8C;&#x4E86;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x770B;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h2 id=\"&#x901A;&#x77E5;&#x680F;&#x7684;&#x663E;&#x793A;\"><a href=\"#&#x901A;&#x77E5;&#x680F;&#x7684;&#x663E;&#x793A;\" class=\"headerlink\" title=\"&#x901A;&#x77E5;&#x680F;&#x7684;&#x663E;&#x793A;\"></a>&#x901A;&#x77E5;&#x680F;&#x7684;&#x663E;&#x793A;</h2><p>&#x8FD9;&#x91CC;&#x9664;&#x4E86;<strong>Notification</strong>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x662F;<strong>PendingIntent</strong>&#xFF08;&#x5EF6;&#x8FDF;&#x610F;&#x56FE;&#xFF09;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x70B9;&#x51FB;&#x901A;&#x77E5;&#x680F;&#x540E;&#x7684;&#x64CD;&#x4F5C;</p>\n<h3 id=\"&#x5EF6;&#x8FDF;&#x610F;&#x56FE;PendingIntent\"><a href=\"#&#x5EF6;&#x8FDF;&#x610F;&#x56FE;PendingIntent\" class=\"headerlink\" title=\"&#x5EF6;&#x8FDF;&#x610F;&#x56FE;PendingIntent\"></a>&#x5EF6;&#x8FDF;&#x610F;&#x56FE;PendingIntent</h3><p>&#x65E2;&#x7136;&#x662F;&#x610F;&#x56FE;&#x81EA;&#x7136;&#x8981;&#x4F7F;&#x7528;Intent&#x6307;&#x5B9A;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x540E;&#x7684;&#x5E94;&#x7528;&#x64CD;&#x4F5C;</p>\n<h4 id=\"&#x914D;&#x7F6E;Intent\"><a href=\"#&#x914D;&#x7F6E;Intent\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;Intent\"></a>&#x914D;&#x7F6E;Intent</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Intent intent = new Intent(App.getAppContext(), MainActivity.class);</div><div class=\"line\">                //&#x9632;&#x6B62;&#x5F00;&#x542F;&#x91CD;&#x590D;&#x7684;Activity</div><div class=\"line\">                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);</div><div class=\"line\">                Bundle bundle = new Bundle();</div><div class=\"line\">                //&#x9632;&#x6B62;pendingIntent&#x76F8;&#x540C;</div><div class=\"line\">                intent.setData(Uri.parse(&quot;message://&quot; + regId));</div><div class=\"line\">                bundle.putInt(&quot;_id&quot;, _id);</div><div class=\"line\">                intent.putExtras(bundle);</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x8FD9;&#x91CC;&#x662F;&#x70B9;&#x51FB;&#x90FD;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230;&#x4E3B;&#x754C;&#x9762;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x4E3B;&#x754C;&#x9762;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x4E0B;&#x6211;&#x524D;&#x9762;&#x8BF4;&#x7684;&#x6CE8;&#x610F;&#x70B9;&#x3002;</p>\n<h5 id=\"&#x6CE8;&#x610F;&#x70B9;\"><a href=\"#&#x6CE8;&#x610F;&#x70B9;\" class=\"headerlink\" title=\"&#x6CE8;&#x610F;&#x70B9;\"></a>&#x6CE8;&#x610F;&#x70B9;</h5><h6 id=\"&#x7B2C;&#x4E00;&#x70B9;\"><a href=\"#&#x7B2C;&#x4E00;&#x70B9;\" class=\"headerlink\" title=\"&#x7B2C;&#x4E00;&#x70B9;\"></a>&#x7B2C;&#x4E00;&#x70B9;</h6><p><code>intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);</code></p>\n<p>&#x8FD9;&#x53E5;&#x4EE3;&#x7801;&#x662F;&#x9632;&#x6B62;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x901A;&#x77E5;&#x680F;&#x540E;&#x5F00;&#x542F;&#x6307;&#x5B9A;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x540E;&#x9000;&#x6808;&#x65F6;&#x754C;&#x9762;&#x91CD;&#x590D;&#x3002;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x6E05;&#x7A7A;&#x6808;&#xFF0C;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x91CD;&#x590D;&#x521B;&#x5EFA;&#x7684;&#x73B0;&#x8C61;&#x3002;&#x53EF;&#x80FD;&#x8FD9;&#x91CC;&#x6709;&#x4EBA;&#x4F1A;&#x8BF4;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<strong>launchMode</strong>&#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x6CA1;&#x9519;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;signalTop&#x6216;&#x8005;&#x5176;&#x5B83;&#x7684;&#x5982;<strong>singleTask</strong>&#x80FD;&#x89E3;&#x51B3;&#x91CD;&#x590D;&#x754C;&#x9762;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x95EE;&#x9898;&#x5982;<strong>signalTop</strong>&#x5F53;&#x5728;&#x6808;&#x9876;&#x662F;&#x5E76;&#x4E0D;&#x4F1A;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x8BE5;<strong>Activity</strong>&#x800C;&#x662F;&#x4F1A;&#x76F4;&#x63A5;&#x590D;&#x7528;&#x539F;&#x6765;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x9875;&#x9762;&#x4E0D;&#x4F1A;&#x66F4;&#x65B0;&#x672A;&#x8BFB;&#x6D88;&#x606F;&#x6570;&#x3002;</p>\n<h6 id=\"&#x7B2C;&#x4E8C;&#x70B9;\"><a href=\"#&#x7B2C;&#x4E8C;&#x70B9;\" class=\"headerlink\" title=\"&#x7B2C;&#x4E8C;&#x70B9;\"></a>&#x7B2C;&#x4E8C;&#x70B9;</h6><p><code>intent.setData(Uri.parse(&quot;message://&quot; + regId));</code><br>&#x4E3A;<strong>intent</strong>&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x867D;&#x7136;<strong>PendingIntent</strong>&#x63D0;&#x4F9B;&#x4E86;&#x56DB;&#x4E2A;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x4F46;&#x90FD;&#x662F;&#x9488;&#x5BF9;&#x76F8;&#x540C;&#x5BF9;&#x8C61;&#x7684;&#x5EF6;&#x8FDF;&#x610F;&#x56FE;</p>\n<ul>\n<li>FLAG_ONE_SHOT <code>&#x610F;&#x601D;&#x5C31;&#x662F;&#x4F60;&#x8BBE;&#x7F6E;&#x7684;&#x5EF6;&#x8FDF;&#x610F;&#x56FE;&#x53EA;&#x53EF;&#x4F7F;&#x7528;&#x4E00;&#x6B21;&#xFF0C;&#x8BF4;&#x660E;&#x4EE5;&#x540E;&#x901A;&#x8FC7;&#x5B83;&#x7684;&#x90FD;&#x4E0D;&#x4F1A;&#x5B9E;&#x73B0;</code></li>\n<li>FLAG_NO_CREATE <code>&#x8FD9;&#x4E2A;&#x66F4;&#x7B80;&#x5355;&#x4E86;&#x5C31;&#x662F;&#x4E0D;&#x5B58;&#x5728;&#x4E5F;&#x5C31;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x4E86;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;null</code> </li>\n<li>FLAG_CANCEL_CURRENT <code>&#x8FD9;&#x4E2A;&#x5C31;&#x662F;&#x5B58;&#x5728;&#x5C31;&#x53D6;&#x6D88;&#x539F;&#x6765;&#x7684;&#xFF0C;&#x4F7F;&#x7528;&#x65B0;&#x7684;&#xFF0C;&#x65B0;&#x7684;&#x53EA;&#x6539;&#x53D8;&#x8981;&#x4F20;&#x9012;&#x7684;&#x6570;&#x636E;</code></li>\n<li>FLAG_UPDATE_CURRENT <code>&#x8DDF;&#x4E0A;&#x9762;&#x7684;&#x76F8;&#x5DEE;&#x4E0D;&#x5927;&#xFF0C;&#x5B83;&#x4F1A;&#x66F4;&#x65B0;&#x539F;&#x6765;&#x7684;&#x6570;&#x636E;</code></li>\n</ul>\n<p>&#x4E0A;&#x9762;&#x7684;&#x5BF9;&#x8981;&#x5F00;&#x542F;&#x4E0D;&#x540C;&#x7684;&#x754C;&#x9762;&#x90FD;&#x6CA1;&#x6709;&#x4F5C;&#x7528;&#xFF0C;&#x90FD;&#x4F1A;&#x8986;&#x76D6;&#x539F;&#x6765;&#x7684;&#x610F;&#x56FE;&#xFF0C;&#x5BFC;&#x81F4;&#x4E0D;&#x540C;&#x7684;&#x4EBA;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x65F6;&#xFF0C;&#x70B9;&#x51FB;&#x901A;&#x77E5;&#x680F;&#x7684;&#x4E0D;&#x540C;&#x901A;&#x77E5;&#x663E;&#x793A;&#x540C;&#x4E00;&#x4E2A;&#x804A;&#x5929;&#x754C;&#x9762;&#x3002;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;<strong>regId</strong>&#x505A;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x5C31;&#x80FD;&#x6D88;&#x9664;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<h4 id=\"&#x521B;&#x5EFA;PendingIntent\"><a href=\"#&#x521B;&#x5EFA;PendingIntent\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;PendingIntent\"></a>&#x521B;&#x5EFA;PendingIntent</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">PendingIntent pi = PendingIntent.getActivity(App.getAppContext(), 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);</div></pre></td></tr></table></figure>\n<h3 id=\"&#x901A;&#x77E5;Notification&#x6784;&#x5EFA;\"><a href=\"#&#x901A;&#x77E5;Notification&#x6784;&#x5EFA;\" class=\"headerlink\" title=\"&#x901A;&#x77E5;Notification&#x6784;&#x5EFA;\"></a>&#x901A;&#x77E5;Notification&#x6784;&#x5EFA;</h3><p>&#x8FD9;&#x91CC;&#x6211;&#x5C31;&#x76F4;&#x63A5;&#x8D34;&#x4EE3;&#x7801;&#x4E86;&#x90FD;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x7684;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Notification notification = new Notification.Builder(App.getAppContext())</div><div class=\"line\">                        .setSmallIcon(R.drawable.icon)</div><div class=\"line\">                        .setAutoCancel(true)</div><div class=\"line\">                        .setTicker(&quot;&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x6709;&#x65B0;&#x6D88;&#x606F;&quot;)</div><div class=\"line\">                        .setContentTitle(userName)</div><div class=\"line\">                        .setContentText(&quot;[&quot; + unReadNum + &quot;&#x6761;] &quot; + rMessage)</div><div class=\"line\">                        .setDefaults(Notification.DEFAULT_SOUND | Notification.DEFAULT_LIGHTS)</div><div class=\"line\">                        .setContentIntent(pi)</div><div class=\"line\">                        .setWhen(System.currentTimeMillis())</div><div class=\"line\">                        .build();</div></pre></td></tr></table></figure>\n<h3 id=\"&#x53D1;&#x9001;&#x901A;&#x77E5;\"><a href=\"#&#x53D1;&#x9001;&#x901A;&#x77E5;\" class=\"headerlink\" title=\"&#x53D1;&#x9001;&#x901A;&#x77E5;\"></a>&#x53D1;&#x9001;&#x901A;&#x77E5;</h3><p>&#x83B7;&#x53D6;&#x7CFB;&#x7EDF;&#x901A;&#x77E5;&#x7BA1;&#x7406;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">manager = (NotificationManager) App.getAppContext().getSystemService(Context.NOTIFICATION_SERVICE);</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x9001;&#x901A;&#x77E5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">manager.notify(_id, notification);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x901A;&#x77E5;&#x680F;&#x7684;&#x6784;&#x5EFA;&#x5C31;&#x5B8C;&#x7F8E;&#x7ED3;&#x675F;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"&#x6D88;&#x606F;&#x6570;&#x7684;&#x663E;&#x793A;\"><a href=\"#&#x6D88;&#x606F;&#x6570;&#x7684;&#x663E;&#x793A;\" class=\"headerlink\" title=\"&#x6D88;&#x606F;&#x6570;&#x7684;&#x663E;&#x793A;\"></a>&#x6D88;&#x606F;&#x6570;&#x7684;&#x663E;&#x793A;</h2><p>&#x65E2;&#x7136;&#x524D;&#x9762;&#x90FD;&#x8BF4;&#x4E86;&#x501F;&#x52A9;&#x4E86;&#x5F00;&#x6E90;&#x5E93;&#xFF0C;&#x6240;&#x4EE5;&#x5B9E;&#x73B0;&#x5C31;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x5C31;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x628A;&#x5B83;&#x603B;&#x7ED3;&#x6210;&#x4E09;&#x6B65;</p>\n<h3 id=\"&#x521B;&#x5EFA;BadgeView&#x5B9E;&#x4F8B;\"><a href=\"#&#x521B;&#x5EFA;BadgeView&#x5B9E;&#x4F8B;\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;BadgeView&#x5B9E;&#x4F8B;\"></a>&#x521B;&#x5EFA;<strong>BadgeView</strong>&#x5B9E;&#x4F8B;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">BadgeView badgeView = new BadgeView(context, view);</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<strong>view</strong>&#x4EE3;&#x8868;&#x4F60;&#x8981;&#x4F9D;&#x9644;&#x7684;&#x89C6;&#x56FE;</p>\n<h3 id=\"&#x6784;&#x5EFA;&#x6587;&#x672C;\"><a href=\"#&#x6784;&#x5EFA;&#x6587;&#x672C;\" class=\"headerlink\" title=\"&#x6784;&#x5EFA;&#x6587;&#x672C;\"></a>&#x6784;&#x5EFA;&#x6587;&#x672C;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">badgeView.setTextColor(Color.WHITE);</div><div class=\"line\">        badgeView.setText(textValue);</div><div class=\"line\">        badgeView.setBackground(context.getResources().getDrawable(R.drawable.dot_bg));</div><div class=\"line\">        badgeView.setTextSize(12);</div><div class=\"line\">        badgeView.setBadgePosition(BadgeView.POSITION_TOP_RIGHT);</div><div class=\"line\">        badgeView.setBadgeMargin(0, 0);</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x7684;&#x80AF;&#x5B9A;&#x6CA1;&#x95EE;&#x9898;&#x5427;&#xFF0C;&#x7B80;&#x5355;&#x660E;&#x4E86;&#xFF0C;&#x663E;&#x793A;&#x4F4D;&#x7F6E;<code>badgeView.setBadgePosition</code>&#x9ED8;&#x8BA4;&#x662F;&#x53F3;&#x4E0A;&#x89D2;&#xFF0C;&#x4F46;&#x6211;&#x611F;&#x89C9;&#x6548;&#x679C;&#x4E0D;&#x660E;&#x663E;&#xFF0C;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x5F97;&#x6548;&#x679C;&#xFF0C;&#x6CA1;&#x6709;&#x50CF;&#x5FAE;&#x4FE1;&#x90A3;&#x6837;&#x89C6;&#x56FE;&#x51FA;&#x53BB;&#x4E86;&#x90E8;&#x5206;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x90FD;&#x540E;&#x9762;&#x770B;&#x4E86;&#x4E0B;&#x6E90;&#x7801;&#xFF0C;&#x53D1;&#x73B0;&#x4E86;<code>badgeView.setBadgeMargin(0, 0);</code>&#x80FD;&#x4F7F;&#x8BE5;&#x6548;&#x679C;&#x660E;&#x663E;&#x4E9B;&#x3002;</p>\n<h3 id=\"&#x663E;&#x793A;\"><a href=\"#&#x663E;&#x793A;\" class=\"headerlink\" title=\"&#x663E;&#x793A;\"></a>&#x663E;&#x793A;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">badgeView.show();</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5230;&#x8FD9;&#x91CC;&#x6240;&#x6709;&#x7684;&#x6D88;&#x606F;&#x63D0;&#x9192;&#x529F;&#x80FD;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x6700;&#x540E;&#x770B;&#x4E0B;&#x6548;&#x679C;</em></p>\n</blockquote>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/05/15/Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;-&#x56DB;/1.gif\" alt=\"&#x6548;&#x679C;\"></p>\n<h1 id=\"&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x7AE0;\"><a href=\"#&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x7AE0;\"></a>&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x7AE0;</h1><p><a href=\"https://idisfkj.github.io/2016/04/23/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%B8%80/\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E00;)</a><br><a href=\"https://idisfkj.github.io/2016/05/01/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%BA%8C/\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E8C;)</a><br><a href=\"https://idisfkj.github.io/2016/05/08/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%B8%89/\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E09;)</a></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/HightCopyWX\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/HightCopyWX</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android高仿微信之mvp实现(三)","url":"https://idisfkj.github.io/2016/05/08/Android高仿微信之mvp实现-三/","content":"<p>&#x524D;&#x9762;&#x8BF4;&#x5230;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5C0F;&#x7C73;&#x7684;&#x63A8;&#x9001;&#x6765;&#x5B9E;&#x73B0;&#x7B80;&#x5355;&#x7684;&#x804A;&#x5929;&#x7CFB;&#x7EDF;&#xFF0C;&#x867D;&#x7136;&#x7B80;&#x5355;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x4F60;&#x4EEC;&#x6765;&#x8BF4;&#x60F3;&#x8981;&#x771F;&#x6B63;&#x7684;&#x4F53;&#x9A8C;&#x6548;&#x679C;&#x5C31;&#x53EA;&#x80FD;&#x8DDF;&#x6211;&#x4E92;&#x52A8;&#xFF0C;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x7F3A;&#x70B9;&#xFF0C;&#x6211;&#x6700;&#x8FD1;&#x5B8C;&#x5584;&#x4E86;&#x4E0B;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x6DFB;&#x52A0;&#x670B;&#x53CB;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x62FF;&#x4E24;&#x4E2A;&#x6D4B;&#x8BD5;&#x673A;&#x4E92;&#x76F8;&#x6D4B;&#x8BD5;&#x3002;&#x5C31;&#x80FD;&#x4F53;&#x9A8C;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E0B;&#x9762;&#x8FD8;&#x662F;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x4E0B;&#x3002;</p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p>&#x5176;&#x5B9E;&#x4E3B;&#x8981;&#x7528;&#x5230;&#x7684;&#x5C31;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x6211;&#x8FD9;&#x91CC;&#x4E0D;&#x8BB2;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x65B9;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x6709;&#x70B9;&#x591A;&#xFF0C;&#x5C31;&#x4E0D;&#x5230;&#x8FD9;&#x91CC;&#x5C55;&#x5F00;&#xFF0C;&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x5C55;&#x5F00;&#x3002;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/05/01/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%BA%8C/\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E8C;)</a>&#x5DF2;&#x7ECF;&#x8BB2;&#x5230;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x8BE5;&#x8F6F;&#x4EF6;&#x662F;&#x5FC5;&#x987B;&#x5148;&#x6CE8;&#x518C;&#xFF0C;&#x5728;&#x6CE8;&#x518C;&#x7684;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5411;&#x6240;&#x6709;&#x5B89;&#x88C5;&#x8BE5;&#x5E94;&#x7528;&#x7684;&#x8BBE;&#x5907;&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x6761;&#x5305;&#x88C5;&#x4E86;&#x6211;&#x4EEC;&#x8BBE;&#x5907;&#x6807;&#x8BC6;<strong>&#xFF08;regId&#xFF09;</strong>&#x3001;&#x7528;&#x6237;&#x540D;<strong>&#xFF08;userName&#xFF09;</strong>&#x3001;&#x8D26;&#x53F7;<strong>&#xFF08;userPhone&#xFF09;</strong>&#x3002;&#x53EA;&#x8981;&#x662F;&#x6CE8;&#x518C;&#x4FE1;&#x606F;&#x6211;&#x4EEC;&#x5C31;&#x4F1A;&#x628A;&#x5B83;&#x5B58;&#x50A8;&#x5230;&#x672C;&#x5730;&#x6570;&#x636E;&#x5E93;<strong>register</strong>&#x8868;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C31;&#x662F;&#x4ECE;<strong>register</strong>&#x4E2D;&#x901A;&#x8FC7;<strong>userPhone</strong>&#x6807;&#x8BC6;&#x67E5;&#x8BE2;&#x4F60;&#x8981;&#x6DFB;&#x52A0;&#x7684;&#x670B;&#x53CB;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x5B58;&#x5728;&#x5C31;&#x663E;&#x793A;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x4E5F;&#x8981;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;&#x8BE5;&#x597D;&#x53CB;&#xFF0C;&#x6CA1;&#x6709;&#x7684;&#x8BDD;&#x5C31;&#x6267;&#x884C;&#x6700;&#x540E;&#x7684;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#xFF0C;&#x5411;&#x8BE5;&#x7528;&#x6237;&#x53D1;&#x9001;&#x4E00;&#x6761;&#x6DFB;&#x52A0;&#x597D;&#x53CB;&#x7684;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#xFF0C;&#x540C;&#x65F6;&#x628A;&#x8BE5;&#x7528;&#x6237;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x6DFB;&#x52A0;&#x5230;&#x804A;&#x5929;&#x8BB0;&#x5F55;&#x754C;&#x9762;&#x7684;&#x6570;&#x636E;&#x8868;&#x3002;&#x4E3A;&#x4E86;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x53D6;&#x4E86;&#x4E00;&#x70B9;&#x5DE7;&#xFF0C;&#x53EA;&#x8981;&#x5BF9;&#x65B9;&#x63A5;&#x53D7;&#x5230;&#x6DFB;&#x52A0;&#x597D;&#x53CB;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#xFF0C;&#x5BF9;&#x65B9;&#x5C31;&#x9ED8;&#x8BA4;&#x6DFB;&#x52A0;&#x4E86;&#x81EA;&#x5DF1;&#x4E3A;&#x597D;&#x53CB;&#xFF0C;&#x65E0;&#x9700;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x6574;&#x4E2A;&#x7684;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0B;&#x9762;&#x5C55;&#x793A;&#x4E00;&#x70B9;&#x4EE3;&#x7801;&#x3002;</p>\n<h2 id=\"&#x6DFB;&#x52A0;\"><a href=\"#&#x6DFB;&#x52A0;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;\"></a>&#x6DFB;&#x52A0;</h2><p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x8F93;&#x5165;&#x8981;&#x6DFB;&#x52A0;&#x7684;&#x8D26;&#x6237;&#x53F7;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4F7F;&#x7528;&#x7684;&#x662F;<strong>MVP</strong>&#x6A21;&#x5F0F;&#xFF0C;&#x4EE3;&#x7801;&#x8FC7;&#x591A;&#x6240;&#x4EE5;&#x6211;&#x8FD9;&#x91CC;&#x628A;&#x4E00;&#x4E9B;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x8D34;&#x51FA;&#x4E86;,&#x5177;&#x4F53;&#x7684;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6E90;&#x7801;&#x3002;</p>\n<p><strong>View</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface AddFriendsView {</div><div class=\"line\">    void showSearch();</div><div class=\"line\"></div><div class=\"line\">    void goneSearch();</div><div class=\"line\"></div><div class=\"line\">    void jumpSearchResult(String text);</div><div class=\"line\"></div><div class=\"line\">    void changeText(CharSequence text);</div><div class=\"line\"></div><div class=\"line\">    void showToast(String text);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><strong>Presenter</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface AddFriendsPresenter {</div><div class=\"line\">    void switchView(CharSequence text);</div><div class=\"line\"></div><div class=\"line\">    void switchActicity(TextView searchContent, RegisterDataHelper helper);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x56E0;&#x4E3A;&#x8BE5;&#x754C;&#x9762;&#x6CA1;&#x6709;&#x5BF9;&#x5E94;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#x7B49;&#xFF0C;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x754C;&#x9762;&#x663E;&#x793A;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x6709;Model</em></p>\n</blockquote>\n<h2 id=\"&#x641C;&#x5BFB;\"><a href=\"#&#x641C;&#x5BFB;\" class=\"headerlink\" title=\"&#x641C;&#x5BFB;\"></a>&#x641C;&#x5BFB;</h2><p>&#x8FD9;&#x91CC;&#x4E5F;&#x662F;&#x63A5;&#x53E3;</p>\n<p><strong>View</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface SearchResultView {</div><div class=\"line\">    void succeedToFinish();</div><div class=\"line\"></div><div class=\"line\">    void hideProgressDialog(ProgressDialog pd);</div><div class=\"line\"></div><div class=\"line\">    void showSucceedToast();</div><div class=\"line\"></div><div class=\"line\">    void showErrorToast();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><strong>Presenter</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface SearchResultPresenter {</div><div class=\"line\">    void checkSelection(Context context, String number, View view, SearchResultAdapter mAdapter);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><strong>Model</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface SearchResultModel {</div><div class=\"line\">    void buildDialog(Context context, String number, View view, SearchResultAdapter adapter,SearchResultModelImp.requestListener listener);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"&#x903B;&#x8F91;\"><a href=\"#&#x903B;&#x8F91;\" class=\"headerlink\" title=\"&#x903B;&#x8F91;\"></a>&#x903B;&#x8F91;</h2><p>&#x4E0B;&#x9762;&#x662F;&#x6267;&#x884C;&#x6DFB;&#x52A0;&#x7684;&#x4E3B;&#x8981;&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void buildDialog(final Context context, String number, final View view,</div><div class=\"line\">                            final SearchResultAdapter adapter, final requestListener listener) {</div><div class=\"line\">        new AlertDialog.Builder(context)</div><div class=\"line\">                .setIcon(R.drawable.icon)</div><div class=\"line\">                .setTitle(R.string.dialog_tip)</div><div class=\"line\">                .setMessage(String.format(context.getResources().getString(R.string.dialog_message), number))</div><div class=\"line\">                .setPositiveButton(R.string.dialog_positive, new DialogInterface.OnClickListener() {</div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void onClick(DialogInterface dialog, int which) {</div><div class=\"line\">                        Cursor cursor = adapter.getCursor();</div><div class=\"line\">                        if (cursor.moveToPosition(view.getId())) {</div><div class=\"line\">                            String number = CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.NUMBER);</div><div class=\"line\">                            String regId = CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.REGID);</div><div class=\"line\">                            String userName = CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.USER_NAME);</div><div class=\"line\"></div><div class=\"line\">                            WXDataHelper wxHelper = new WXDataHelper(context);</div><div class=\"line\">                            Cursor wxCursor = wxHelper.query(number, regId, userName);</div><div class=\"line\">                            if (wxCursor.getCount() &gt; 0 || (number.equals(SPUtils.getString(&quot;userPhone&quot;))</div><div class=\"line\">                                    &amp;&amp; regId.equals(SPUtils.getString(&quot;regId&quot;)))) {</div><div class=\"line\">                                ToastUtils.showShort(&quot;&#x4F60;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;&#x8BE5;&#x597D;&#x53CB;&#xFF01;&quot;);</div><div class=\"line\">                            } else {</div><div class=\"line\">                                //&#x53D1;&#x9001;&#x6DFB;&#x52A0;&#x597D;&#x53CB;&#x8BF7;&#x6C42;</div><div class=\"line\">                                pd = ProgressDialog.show(context, &quot;&#x6DFB;&#x52A0;&#x8BF7;&#x6C42;&#x4E2D;...&quot;, &quot;&#x8BF7;&#x7A0D;&#x540E;...&quot;, true);</div><div class=\"line\">                                request(userName, number, regId, listener, cursor);</div><div class=\"line\">                            }</div><div class=\"line\">                            wxCursor.close();</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                })</div><div class=\"line\">                .setNegativeButton(R.string.dialog_negative, new DialogInterface.OnClickListener() {</div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void onClick(DialogInterface dialog, int which) {</div><div class=\"line\"></div><div class=\"line\">                    }</div><div class=\"line\">                }).show();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6700;&#x540E;&#x770B;&#x4E0B;&#x64CD;&#x4F5C;&#x6548;&#x679C;&#x5427;</em></p>\n</blockquote>\n<h2 id=\"&#x6548;&#x679C;\"><a href=\"#&#x6548;&#x679C;\" class=\"headerlink\" title=\"&#x6548;&#x679C;\"></a>&#x6548;&#x679C;</h2><p><img src=\"/2016/05/08/Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;-&#x4E09;/1.gif\" alt=\"picture\"></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/HightCopyWX\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/HightCopyWX</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android高仿微信之mvp实现(二)","url":"https://idisfkj.github.io/2016/05/01/Android高仿微信之mvp实现-二/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4E0A;&#x6B21;&#x8BF4;&#x4E86;&#x4E0B;&#x7B80;&#x5355;&#x7684;&#x6846;&#x67B6;&#x6784;&#x67B6;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x89E3;&#x91CA;&#x4E86;&#x4E0B;<strong>MVP</strong>&#x7684;&#x539F;&#x7406;&#x5B9E;&#x73B0;&#x3002;&#x867D;&#x7136;&#x4E0A;&#x6B21;&#x7684;&#x529F;&#x80FD;&#x6CA1;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x4F46;&#x4E3B;&#x8981;&#x662F;&#x628A;&#x6846;&#x67B6;&#x642D;&#x597D;&#xFF0C;&#x624D;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x8FDB;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x8FD8;&#x6709;&#x4E0D;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x4E0B;&#x6211;&#x524D;&#x9762;&#x7684;&#x6587;&#x7AE0;&#xFF1A;<a href=\"https://idisfkj.github.io/2016/04/23/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%B8%80/\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E00;)</a><br>&#x597D;&#x4E86;&#xFF0C;&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x8981;&#x4ECB;&#x7ECD;&#x7684;&#x662F;&#x5FAE;&#x4FE1;&#x804A;&#x5929;&#x754C;&#x9762;&#x529F;&#x80FD;&#x7684;&#x7B80;&#x5355;&#x5B9E;&#x73B0;&#x3002;</p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p>&#x5176;&#x5B9E;&#x77E5;&#x9053;&#x4E86;&#x539F;&#x7406;&#x4F60;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x662F;&#x591A;&#x4E48;&#x7684;&#x7B80;&#x5355;&#x3002;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x670D;&#x52A1;&#x5668;&#x6240;&#x4EE5;&#x662F;&#x57FA;&#x4E8E;&#x63A8;&#x9001;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x7F51;&#x4E0A;&#x4E5F;&#x6709;&#x4E00;&#x4E9B;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x8D44;&#x6599;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x57FA;&#x4E8E;&#x767E;&#x5EA6;&#x4E91;&#x7684;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x662F;&#x57FA;&#x4E8E;&#x5C0F;&#x7C73;&#x63A8;&#x9001;&#x6765;&#x5B9E;&#x73B0;&#x6D88;&#x606F;&#x7684;&#x4F20;&#x9012;&#x3002;&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;&#x73B0;&#x5728;&#x63A8;&#x9001;&#x65E0;&#x5904;&#x4E0D;&#x5728;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6CA1;&#x6709;&#x63A5;&#x89E6;&#x63A8;&#x9001;&#x7684;&#x8BDD;&#xFF0C;&#x8FD8;&#x662F;&#x5148;&#x53BB;&#x7B80;&#x5355;&#x7684;&#x8865;&#x4E0B;&#x529F;&#x8BFE;&#x5728;&#x6765;&#x770B;&#x5C31;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x4E86;&#x89E3;&#x4E0B;&#x9762;&#x8BF4;&#x7684;&#x3002;</p>\n<p>&#x8981;&#x60F3;&#x5B9E;&#x73B0;&#x6D88;&#x606F;&#x7684;&#x4F20;&#x9012;&#xFF0C;&#x5C31;&#x8981;&#x6709;&#x53D1;&#x9001;&#x4E0E;&#x63A5;&#x6536;&#x529F;&#x80FD;&#xFF0C;&#x9996;&#x5148;&#x5BF9;&#x4E8E;&#x63A5;&#x6536;so easy &#x4E86;&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x5728;&#x81EA;&#x5DF1;&#x7684;<strong>Android</strong>&#x5E94;&#x7528;&#x4E2D;&#x96C6;&#x6210;&#x5C0F;&#x7C73;&#x7684;I<strong>SDK</strong>(&#x6211;&#x8FD9;&#x91CC;&#x662F;&#x4EE5;&#x5C0F;&#x7C73;&#x63A8;&#x9001;&#x4E3A;&#x4F8B;&#x7684;)&#x3002;&#x5C31;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x7684;&#x63A5;&#x6536;&#x529F;&#x80FD;&#xFF0C;&#x5BF9;&#x4E8E;&#x63A5;&#x6536;&#x6211;&#x5206;&#x4E86;&#x4E24;&#x79CD;&#xFF0C;&#x4E00;&#x79CD;&#x7684;&#x6B63;&#x5E38;&#x804A;&#x5929;&#x5F97;&#x4FE1;&#x606F;&#xFF0C;&#x800C;&#x53E6;&#x4E00;&#x79CD;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x6CE8;&#x518C;&#x65F6;&#x53D1;&#x9001;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E00;&#x79CD;&#x6D88;&#x606F;&#x6211;&#x4EEC;&#x8981;&#x6839;&#x636E;&#x7528;&#x6237;&#x8BBE;&#x5907;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x4E0E;&#x7528;&#x6237;&#x8D26;&#x53F7;&#x6765;&#x5B58;&#x50A8;&#x4E0B;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x4E3A;&#x4EE5;&#x540E;&#x663E;&#x793A;&#x4E0D;&#x540C;&#x7528;&#x6237;&#x804A;&#x5929;&#x8BB0;&#x5F55;&#x3002;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E8C;&#x4E2D;&#xFF0C;&#x662F;&#x5728;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x65F6;&#x5FC5;&#x987B;&#x5148;&#x6CE8;&#x518C;&#xFF0C;&#x4E00;&#x65E6;&#x6CE8;&#x518C;&#x6210;&#x529F;&#x5C31;&#x4F1A;&#x5411;&#x6240;&#x6709;&#x7684;&#x7528;&#x6237;&#x53D1;&#x9001;&#x4E00;&#x6761;&#x6CE8;&#x518C;&#x4FE1;&#x606F;&#xFF0C;&#x8BE5;&#x6D88;&#x606F;&#x5305;&#x62EC;&#x7528;&#x6237;&#x7684;&#x57FA;&#x672C;&#x4FE1;&#x606F;&#x4E0E;&#x8BBE;&#x5907;&#x6807;&#x8BC6;&#xFF0C;&#x53EA;&#x8981;&#x5728;&#x4FE1;&#x606F;&#x65F6;&#x95F4;&#x7684;&#x6709;&#x6548;&#x65F6;&#x95F4;&#x4E4B;&#x5185;&#xFF0C;&#x6CE8;&#x518C;&#x4E86;&#x5F97;&#x7528;&#x6237;&#x5C31;&#x80FD;&#x63A5;&#x6536;&#x8BE5;&#x6CE8;&#x518C;&#x6D88;&#x606F;&#x3002;&#x8FD9;&#x4E2A;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x8EAB;&#x4EFD;&#x8BC6;&#x522B;&#xFF0C;&#x5BF9;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;&#xFF0C;&#x7528;&#x6237;&#x7684;&#x6DFB;&#x52A0;&#x90FD;&#x662F;&#x91CD;&#x8981;&#x7684;&#x6807;&#x8BC6;&#x3002;&#x8BF4;&#x4E86;&#x63A5;&#x6536;&#xFF0C;&#x53CD;&#x8FC7;&#x6765;&#x53D1;&#x9001;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x5206;&#x4E24;&#x79CD;&#xFF0C;&#x53EA;&#x662F;&#x65CB;&#x8F6C;&#x4E00;&#x4E0B;&#x4F4D;&#x7F6E;&#x800C;&#x5DF2;&#x3002;</p>\n<h2 id=\"&#x914D;&#x7F6E;&#x5C0F;&#x7C73;SDK\"><a href=\"#&#x914D;&#x7F6E;&#x5C0F;&#x7C73;SDK\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;&#x5C0F;&#x7C73;SDK\"></a>&#x914D;&#x7F6E;&#x5C0F;&#x7C73;SDK</h2><p>&#x9996;&#x5148;&#x8FDB;&#x5165;&#x5C0F;&#x7C73;&#x5F00;&#x53D1;&#x5E73;&#x53F0;&#xFF0C;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x5E94;&#x7528;&#x5F00;&#x542F;&#x63A8;&#x9001;&#x529F;&#x80FD;&#xFF0C;&#x7136;&#x540E;&#x4E0B;&#x8F7D;<a href=\"http://dev.xiaomi.com/mipush/downpage/\" target=\"_blank\" rel=\"external\">SDK</a>&#x6839;&#x636E;<a href=\"http://dev.xiaomi.com/doc/?p=3080\" target=\"_blank\" rel=\"external\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x505A;&#x597D;&#x76F8;&#x5E94;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x524D;&#x671F;&#x5C31;&#x5927;&#x529F;&#x544A;&#x6210;&#x4E86;&#x3002;</p>\n<blockquote>\n<p><em>&#x5982;&#x679C;&#x6CA1;&#x63A5;&#x89E6;&#x8FC7;&#x7684;&#x53EA;&#x8981;&#x8010;&#x5FC3;&#x770B;&#x6587;&#x6863;&#x5C31;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x6587;&#x6863;&#x5F88;&#x8BE6;&#x7EC6;</em></p>\n</blockquote>\n<h2 id=\"&#x63A5;&#x6536;\"><a href=\"#&#x63A5;&#x6536;\" class=\"headerlink\" title=\"&#x63A5;&#x6536;\"></a>&#x63A5;&#x6536;</h2><p>&#x524D;&#x9762;&#x6211;&#x5DF2;&#x7ECF;&#x8BF4;&#x4E86;&#x63A5;&#x6536;&#x662F;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x524D;&#x9762;&#x914D;&#x7F6E;&#x597D;&#x4E86;&#x5C0F;&#x7C73;&#x7684;<strong>SDK</strong>&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C31;&#x6709;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<strong>extends</strong> <strong>PushMessageReceiver</strong>&#x7684;&#x7C7B;&#xFF0C;&#x5728;&#x8BE5;&#x7C7B;&#x4E2D;&#x7528;&#x5404;&#x79CD;&#x76F8;&#x5E94;&#x7684;&#x63A5;&#x6536;&#x4FE1;&#x606F;&#x65B9;&#x6CD5;&#xFF0C;&#x5BF9;&#x4E86;&#x5FD8;&#x4E86;&#x8BF4;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x91CC;&#x5206;&#x4E3A;&#x4E24;&#x79CD;</p>\n<ul>\n<li>&#x901A;&#x77E5;&#x680F;&#x663E;&#x793A;&#x7684;&#x6D88;&#x606F;</li>\n<li>&#x900F;&#x4F20;&#x6D88;&#x606F;</li>\n</ul>\n<p>&#x901A;&#x77E5;&#x680F;&#x663E;&#x793A;&#x7684;&#x6D88;&#x606F;&#x4E0D;&#x7528;&#x6211;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x81F3;&#x4E8E;&#x900F;&#x4F20;&#x6D88;&#x606F;&#x7B80;&#x5355;&#x70B9;&#x5C31;&#x662F;&#x4E0D;&#x7528;&#x901A;&#x77E5;&#x680F;&#x663E;&#x793A;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x5185;&#x90E8;&#x63A5;&#x6536;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;&#x3002;</p>\n<p>&#x6211;&#x4EEC;&#x804A;&#x5929;&#x4F7F;&#x7528;&#x7684;&#x5F53;&#x7136;&#x7684;&#x900F;&#x4F20;&#x6D88;&#x606F;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;&#x63A5;&#x6536;&#x5230;&#x900F;&#x4F20;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;&#x5BF9;&#x4E8E;&#x4E24;&#x79CD;&#x63A5;&#x6536;&#x6D88;&#x606F;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div></pre></td><td class=\"code\"><pre><div class=\"line\">/**</div><div class=\"line\">     * &#x63A5;&#x6536;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x7684;&#x900F;&#x4F20;&#x6D88;&#x606F;</div><div class=\"line\">     *</div><div class=\"line\">     * @param context</div><div class=\"line\">     * @param message</div><div class=\"line\">     */</div><div class=\"line\">    @Override</div><div class=\"line\">    public void onReceivePassThroughMessage(Context context, MiPushMessage message) {</div><div class=\"line\">        mMessage = message.getContent();</div><div class=\"line\">        if (!TextUtils.isEmpty(message.getTopic())) {</div><div class=\"line\">            mTopic = message.getTopic();</div><div class=\"line\">        } else if (!TextUtils.isEmpty(message.getAlias())) {</div><div class=\"line\">            mAlias = message.getAlias();</div><div class=\"line\">        }</div><div class=\"line\">        Intent intent = new Intent();</div><div class=\"line\">        //user information</div><div class=\"line\">        if (mMessage.indexOf(&quot;^&quot;) != -1 &amp;&amp; mMessage.indexOf(&quot;@&quot;) != -1) {</div><div class=\"line\">            int index1 = mMessage.lastIndexOf(&quot;^&quot;);</div><div class=\"line\">            int index2 = mMessage.lastIndexOf(&quot;@&quot;);</div><div class=\"line\">            String userName = mMessage.substring(0, index1);</div><div class=\"line\">            String regId = mMessage.substring(index1 + 1, index2);</div><div class=\"line\">            String number = mMessage.substring(index2 + 1);</div><div class=\"line\"></div><div class=\"line\">            RegisterInfo info = new RegisterInfo();</div><div class=\"line\">            info.setUserName(userName);</div><div class=\"line\">            info.setNumber(number);</div><div class=\"line\">            info.setRegId(regId);</div><div class=\"line\">            RegisterDataHelper helper = new RegisterDataHelper(App.getAppContext());</div><div class=\"line\">            Cursor cursor = helper.query(number, regId);</div><div class=\"line\">            if (cursor != null &amp;&amp; cursor.getCount() &gt; 0) {</div><div class=\"line\">                for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {</div><div class=\"line\">                    if (CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.REGID).equals(regId)</div><div class=\"line\">                            &amp;&amp; CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.NUMBER).equals(number)) {</div><div class=\"line\">                        if (!CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.USER_NAME).equals(userName))</div><div class=\"line\">                            // update user information</div><div class=\"line\">                            helper.update(info, number, regId);</div><div class=\"line\">                        cursor.close();</div><div class=\"line\">                        return;</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">                cursor.close();</div><div class=\"line\">            }</div><div class=\"line\">            // insert user information</div><div class=\"line\">            helper.insert(info);</div><div class=\"line\">            if (SPUtils.getString(&quot;regId&quot;).equals(App.DEVELOPER_ID)){</div><div class=\"line\">                WXDataHelper wxHelper = new WXDataHelper(App.getAppContext());</div><div class=\"line\">                WXItemInfo itemInfo = new WXItemInfo();</div><div class=\"line\">                itemInfo.setRegId(regId);</div><div class=\"line\">                itemInfo.setTitle(userName);</div><div class=\"line\">                itemInfo.setNumber(number);</div><div class=\"line\">                itemInfo.setContent(String.format(App.HELLO_MESSAGE, userName));</div><div class=\"line\">                itemInfo.setCurrentAccount(SPUtils.getString(&quot;userPhone&quot;));</div><div class=\"line\">                itemInfo.setTime(CalendarUtils.getCurrentDate());</div><div class=\"line\">                wxHelper.insert(itemInfo);</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">        } else {</div><div class=\"line\">            // chat information</div><div class=\"line\">            int index1 = mMessage.lastIndexOf(&quot;(&quot;);</div><div class=\"line\">            String rMessage = mMessage.substring(0, index1);</div><div class=\"line\">            String extraMessage = mMessage.substring(index1 + 1);</div><div class=\"line\"></div><div class=\"line\">            int index2 = extraMessage.indexOf(&quot;@&quot;);</div><div class=\"line\">            int index3 = extraMessage.indexOf(&quot;@&quot;, index2 + 1);</div><div class=\"line\">            String receiverNumber = extraMessage.substring(0, index2);</div><div class=\"line\">            String regId = extraMessage.substring(index2 + 1, index3);</div><div class=\"line\">            String sendNumber = extraMessage.substring(index3 + 1);</div><div class=\"line\"></div><div class=\"line\">            ChatMessageInfo chatMessageInfo = new ChatMessageInfo();</div><div class=\"line\">            chatMessageInfo.setMessage(rMessage);</div><div class=\"line\">            chatMessageInfo.setFlag(0);</div><div class=\"line\">            chatMessageInfo.setTime(CalendarUtils.getCurrentDate());</div><div class=\"line\">            chatMessageInfo.setReceiverNumber(receiverNumber);</div><div class=\"line\">            chatMessageInfo.setRegId(regId);</div><div class=\"line\">            chatMessageInfo.setSendNumber(sendNumber);</div><div class=\"line\"></div><div class=\"line\">            if (App.mNumber.equals(sendNumber) &amp;&amp; App.mRegId.equals(regId)) {</div><div class=\"line\">                //&#x5728;&#x5F53;&#x524D;&#x804A;&#x5929;&#x754C;&#x9762;</div><div class=\"line\">                intent.setAction(&quot;com.idisfkj.hightcopywx.chat&quot;);</div><div class=\"line\">                Bundle bundle = new Bundle();</div><div class=\"line\">                bundle.putSerializable(&quot;chatMessageInfo&quot;, chatMessageInfo);</div><div class=\"line\">                intent.putExtras(bundle);</div><div class=\"line\">                App.getAppContext().sendBroadcast(intent);</div><div class=\"line\">            } else {</div><div class=\"line\">                //&#x4E0D;&#x5728;&#x5F53;&#x524D;&#x804A;&#x5929;&#x754C;&#x9762;</div><div class=\"line\">                ChatMessageDataHelper helper = new ChatMessageDataHelper(App.getAppContext());</div><div class=\"line\">                helper.insert(chatMessageInfo);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x4EE3;&#x7801;&#x5C31;&#x4E0D;&#x89E3;&#x91CA;&#x4E86;&#xFF0C;&#x81EA;&#x5DF1;&#x7814;&#x7A76;&#x7814;&#x7A76;</em></p>\n</blockquote>\n<h2 id=\"&#x53D1;&#x9001;\"><a href=\"#&#x53D1;&#x9001;\" class=\"headerlink\" title=\"&#x53D1;&#x9001;\"></a>&#x53D1;&#x9001;</h2><p>&#x5982;&#x679C;&#x4F60;&#x770B;&#x4E86;&#x6587;&#x6863;&#x7684;&#x8BDD;&#x5C31;&#x5E94;&#x8BE5;&#x6709;&#x70B9;&#x5934;&#x7EEA;&#x4E86;&#xFF0C;&#x53D1;&#x9001;&#x5C31;&#x662F;&#x4F7F;&#x7528;HTTP&#x8BF7;&#x6C42;&#x5411;&#x5C0F;&#x7C73;&#x6240;&#x63D0;&#x4F9B;&#x7684;API&#x6839;&#x636E;&#x4F60;&#x63D0;&#x4F9B;&#x7684;<strong>regId</strong>&#x3001;<strong>userAccount</strong>&#x3001;<strong>alias</strong>&#x3001;<strong>topic</strong>&#x7B49;&#x53D1;&#x9001;&#x4F60;&#x8981;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x5185;&#x5BB9;&#xFF0C;&#x6211;&#x7528;&#x7684;&#x662F;<strong>regId</strong> API&#xFF1A;<a href=\"https://api.xmpush.xiaomi.com/v2/message/regid\" target=\"_blank\" rel=\"external\">https://api.xmpush.xiaomi.com/v2/message/regid</a></p>\n<p><a href=\"http://dev.xiaomi.com/doc/?p=533\" target=\"_blank\" rel=\"external\">&#x53C2;&#x8003;&#x6587;&#x6863;</a></p>\n<p>&#x4E0B;&#x9762;&#x662F;&#x53D1;&#x9001;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void requestData(final requestListener listener, final String chatContent, final String number, final String regId, final ChatMessageDataHelper helper) {</div><div class=\"line\">        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.POST, UrlUtils.ChatUrl(chatContent, number, regId)</div><div class=\"line\">                , null, new Response.Listener&lt;JSONObject&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(JSONObject jsonObject) {</div><div class=\"line\">                mChatMessageInfo = new ChatMessageInfo();</div><div class=\"line\">                mChatMessageInfo.setMessage(chatContent);</div><div class=\"line\">                mChatMessageInfo.setFlag(1);</div><div class=\"line\">                mChatMessageInfo.setTime(CalendarUtils.getCurrentDate());</div><div class=\"line\">                mChatMessageInfo.setReceiverNumber(number);</div><div class=\"line\">                mChatMessageInfo.setRegId(regId);</div><div class=\"line\">                mChatMessageInfo.setSendNumber(SPUtils.getString(&quot;userPhone&quot;, &quot;&quot;));</div><div class=\"line\">                listener.onSucceed(mChatMessageInfo, helper);</div><div class=\"line\">            }</div><div class=\"line\">        }, new Response.ErrorListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError volleyError) {</div><div class=\"line\">                Log.d(&quot;TAG&quot;, volleyError.getMessage());</div><div class=\"line\">                listener.onError(volleyError.getMessage());</div><div class=\"line\">            }</div><div class=\"line\">        }) {</div><div class=\"line\">            @Override</div><div class=\"line\">            public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {</div><div class=\"line\">                HashMap&lt;String, String&gt; header = new HashMap&lt;&gt;();</div><div class=\"line\">                header.put(&quot;Authorization&quot;, &quot;key=&quot; + App.APP_SECRET_KEY);</div><div class=\"line\">                return header;</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">        VolleyUtils.addQueue(jsonObjectRequest, &quot;chatRequest&quot;);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x4E8E;&#x6D89;&#x53CA;&#x7684;&#x4EE3;&#x7801;&#x8FD8;&#x662F;&#x6709;&#x70B9;&#x591A;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x4E00;&#x4E00;&#x5C55;&#x5F00;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x6839;&#x636E;&#x540E;&#x9762;&#x7684;&#x5730;&#x5740;<strong>Star</strong>&#x3001;<strong>Fork</strong>&#x4E0B;&#x8F7D;&#x4EE3;&#x7801;&#x67E5;&#x770B;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x5B89;&#x88C5;&#x6CE8;&#x518C;&#x4E86;&#xFF0C;&#x7531;&#x4E8E;&#x65F6;&#x95F4;&#x539F;&#x56E0;&#xFF0C;&#x76EE;&#x524D;&#x804A;&#x5929;&#x754C;&#x9762;&#x53EA;&#x4F1A;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x6211;&#x4E3A;&#x597D;&#x53CB;&#xFF0C;&#x4F60;&#x4EEC;&#x5982;&#x679C;&#x7528;&#x4E0D;&#x61C2;&#x5F97;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x53D1;&#x6D88;&#x606F;&#x7ED9;&#x6211;&#xFF0C;&#x4F46;&#x4E0D;&#x4E00;&#x5B9A;&#x90FD;&#x4F1A;&#x56DE;&#x3002;&#x597D;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x770B;&#x770B;&#x6548;&#x679C;&#x5427;</p>\n<h2 id=\"&#x6548;&#x679C;\"><a href=\"#&#x6548;&#x679C;\" class=\"headerlink\" title=\"&#x6548;&#x679C;\"></a>&#x6548;&#x679C;</h2><p><img src=\"/2016/05/01/Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;-&#x4E8C;/1.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/HightCopyWX\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/HightCopyWX</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android高仿微信之mvp实现(一)","url":"https://idisfkj.github.io/2016/04/23/Android高仿微信之mvp实现-一/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4E3A;&#x4E86;&#x5DE9;&#x56FA;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#x5BF9;<strong>mvp</strong>&#x67B6;&#x6784;&#x7684;&#x7406;&#x89E3;&#xFF0C;&#x4E8E;&#x662F;&#x7A81;&#x751F;&#x4E00;&#x4E2A;&#x60F3;&#x6CD5;&#xFF0C;&#x7528;<strong>mvp</strong>&#x67B6;&#x6784;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x70B9;&#x7C7B;&#x4F3C;&#x4E8E;&#x5FAE;&#x4FE1;&#x7684;&#x529F;&#x80FD;&#x3002;&#x6240;&#x4EE5;&#x5C31;&#x6709;&#x4E86;&#x73B0;&#x5728;&#x7684;&#x6807;&#x9898;&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;&#x3002;&#x5E0C;&#x671B;&#x81EA;&#x5DF1;&#x5728;&#x5B9E;&#x73B0;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x80FD;&#x719F;&#x7EC3;&#x638C;&#x63E1;<strong>mvp</strong>&#x67B6;&#x6784;&#x7684;&#x7CBE;&#x9AD3;&#xFF0C;&#x540C;&#x65F6;&#x6211;&#x4E5F;&#x5728;&#x8FD9;&#x5199;&#x4E0B;&#x81EA;&#x5DF1;&#x5728;&#x8FD9;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x6210;&#x957F;&#x4E0E;&#x6240;&#x601D;&#x3002;&#x8BE5;&#x7247;&#x6587;&#x7AE0;&#x4E3A;&#x7B2C;&#x4E00;&#x7CFB;&#x5217;&#xFF0C;&#x4EE5;&#x540E;&#x4F1A;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x8FDB;&#x5EA6;&#x6765;&#x5199;&#x4E0B;&#x5269;&#x4F59;&#x7684;&#x7CFB;&#x5217;&#x3002;&#x8FD8;&#x6CA1;&#x63A5;&#x89E6;&#x7684;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x6765;&#x5B66;&#x4E60;&#x4E0B;&#xFF0C;&#x5F53;&#x7136;&#x5982;&#x6709;&#x4E0D;&#x5BF9;&#x7684;&#x6B22;&#x8FCE;&#x6765;&#x6307;&#x6559;&#x3002;</p>\n<h2 id=\"MVP\"><a href=\"#MVP\" class=\"headerlink\" title=\"MVP\"></a>MVP</h2><p>&#x9996;&#x5148;&#x6211;&#x6765;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x91CA;&#x4E0B;&#x4F55;&#x4E3A;<strong>mvp</strong></p>\n<ul>\n<li><strong>M</strong>&#x5C31;&#x662F;<strong>Model</strong> &#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x8D1F;&#x8D23;&#x7684;&#x5C31;&#x662F;&#x4E1A;&#x52A1;&#x5904;&#x7406;&#xFF0C;&#x6570;&#x636E;&#x7684;&#x83B7;&#x53D6;&#xFF0C;&#x4F8B;&#x5982;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8BFB;&#x5199;&#xFF0C;<strong>http</strong>&#x7684;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x7684;&#x5904;&#x7406;&#x3002;</li>\n<li><strong>V</strong>&#x5C31;&#x662F;<strong>View</strong> &#xFF0C;&#x987E;&#x540D;&#x601D;&#x4E49;&#x89C6;&#x56FE;&#x7684;&#x610F;&#x601D;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x7684;&#x4EFB;&#x52A1;&#x5C31;&#x662F;&#x5904;&#x7406;&#x5404;&#x4E2A;&#x754C;&#x9762;<strong>ui</strong>&#x63A7;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x3002;</li>\n<li><strong>P</strong>&#x5C31;&#x662F;<strong>Presenter</strong> &#xFF0C;&#x63A7;&#x5236;&#x5668;&#xFF0C;&#x8FD9;&#x91CC;&#x8D1F;&#x8D23;&#x7684;&#x662F;<strong>Model</strong>&#x4E0E;<strong>View</strong>&#x4E4B;&#x95F4;&#x7684;&#x8054;&#x7CFB;&#x64CD;&#x4F5C;&#x3002;</li>\n</ul>\n<p>&#x90A3;&#x4E48;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x5230;&#x5E95;&#x662F;&#x5982;&#x4F55;&#x8054;&#x7CFB;&#x5728;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x7684;&#x5462;&#xFF1F;&#x5F53;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x88AB;&#x521B;&#x5EFA;&#x65F6;&#x9996;&#x5148;&#x8C03;&#x7528;<strong>View</strong>&#xFF0C;<strong>View</strong>&#x8C03;&#x7528;<strong>Presenter</strong>&#x4E2D;&#x7684;&#x76F8;&#x5E94;&#x64CD;&#x4F5C;&#xFF0C;&#x5728;<strong>Presenter</strong>&#x4E2D;&#x5219;&#x8C03;&#x7528;&#x4E86;<strong>Model</strong>&#x7684;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x65B9;&#x6CD5;&#xFF0C;<strong>Presenter</strong>&#x4E2D;&#x83B7;&#x5F97;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5219;&#x53CD;&#x8FC7;&#x6765;&#x8C03;&#x7528;<strong>View</strong>&#x4E2D;&#x63A5;&#x53E3;&#x4F20;&#x56DE;&#x7ED9;<strong>View</strong>&#x5C42;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x73B0;&#x4E86;<strong>MVP</strong>&#x4E2D;&#x7684;&#x5408;&#x4F5C;&#x6D41;&#x7A0B;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x4E00;&#x4E2A;&#x660E;&#x663E;&#x7684;&#x597D;&#x5904;&#x5C31;&#x662F;&#x628A;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x4E0E;&#x4E3B;&#x754C;&#x9762;&#x5206;&#x79BB;&#xFF0C;&#x5B8C;&#x5168;&#x9694;&#x79BB;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#xFF0C;&#x4F7F;&#x5F97;&#x5404;&#x4E2A;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x6A21;&#x5757;&#x5316;&#xFF0C;&#x964D;&#x4F4E;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x6027;&#xFF0C;&#x53EA;&#x8981;&#x547D;&#x540D;&#x5408;&#x7406;&#x5C31;&#x80FD;&#x8FC5;&#x901F;&#x660E;&#x767D;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x4E0B;&#x9762;&#x4EE5;&#x8BE5;&#x9879;&#x76EE;&#x4E3A;&#x4F8B;&#x3002;</p>\n<blockquote>\n<p><em>&#x672C;&#x6765;&#x60F3;&#x4EE5;&#x4E3B;&#x6846;&#x67B6;&#x4E3A;&#x4F8B;&#x7684;&#xFF0C;&#x4F46;&#x4E3B;&#x6846;&#x67B6;&#x76EE;&#x524D;&#x6CA1;&#x6709;Model&#x5C42;&#xFF0C;&#x6240;&#x4EE5;&#x4E0B;&#x9762;&#x4EE5;&#x5FAE;&#x4FE1;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x804A;&#x5929;&#x5FAE;&#x4FE1;&#x7A97;&#x53E3;&#x4E3A;&#x4F8B;&#xFF0C;&#x7528;MVP&#x6765;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h2 id=\"View&#x5C42;\"><a href=\"#View&#x5C42;\" class=\"headerlink\" title=\"View&#x5C42;\"></a>View&#x5C42;</h2><p>&#x5F53;&#x6211;&#x4EEC;&#x6253;&#x5F00;&#x5FAE;&#x4FE1;&#x804A;&#x5929;&#x754C;&#x9762;&#x65F6;&#xFF0C;&#x8981;&#x5148;&#x8C03;&#x7528;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x4E2D;&#x5B9E;&#x73B0;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface WXView {</div><div class=\"line\">    void setData(List&lt;WXItemInfo&gt; list);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x4E00;&#x770B;&#x65B9;&#x6CD5;&#x540D;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7406;&#x89E3;&#x8BE5;&#x65B9;&#x6CD5;&#x8981;&#x505A;&#x7684;&#x64CD;&#x4F5C;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"Model&#x5C42;\"><a href=\"#Model&#x5C42;\" class=\"headerlink\" title=\"Model&#x5C42;\"></a>Model&#x5C42;</h2><p>&#x65E2;&#x7136;&#x8BE5;&#x5C42;&#x662F;&#x5B9E;&#x73B0;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x81EA;&#x7136;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5B9E;&#x73B0;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface WXModel {</div><div class=\"line\">    List&lt;WXItemInfo&gt; initData();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B9A;&#x4E49;&#x5B8C;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x518D;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7C7B;&#x5B9E;&#x73B0;&#x8BE5;&#x63A5;&#x53E3;&#xFF0C;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x52A0;&#x8F7D;&#xFF1B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class WXModleImp implements WXModel{</div><div class=\"line\">    private List&lt;WXItemInfo&gt; mList;</div><div class=\"line\">    private WXItemInfo wxItemInfo;</div><div class=\"line\">    @Override</div><div class=\"line\">    public List&lt;WXItemInfo&gt; initData() {</div><div class=\"line\">        mList = new ArrayList&lt;&gt;();</div><div class=\"line\">        for (int i = 0; i &lt; 10; i++) {</div><div class=\"line\">            wxItemInfo = new WXItemInfo();</div><div class=\"line\">            wxItemInfo.setTitle(&quot;&#x6D4B;&#x8BD5;&#x6807;&#x9898;&quot; + i);</div><div class=\"line\">            wxItemInfo.setContent(&quot;&#x6D4B;&#x8BD5;&#x5185;&#x5BB9;&quot; + i);</div><div class=\"line\">            wxItemInfo.setTime(i + &quot;:11&quot;);</div><div class=\"line\">            mList.add(wxItemInfo);</div><div class=\"line\">        }</div><div class=\"line\">        return mList;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x73B0;&#x5728;&#x4E3A;&#x4E86;&#x6D4B;&#x8BD5;&#xFF0C;&#x6240;&#x4EE5;&#x505A;&#x4E86;&#x5047;&#x6570;&#x636E;&#x3002;&#x73B0;&#x5728;&#x662F;&#x4E0D;&#x662F;&#x660E;&#x767D;&#x4E86;&#x4E00;&#x70B9;&#x5462;&#xFF1F;&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x63A5;&#x53E3;&#x4E2D;&#x5728;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x8BE5;&#x64CD;&#x4F5C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;<strong>WXModelImp</strong>&#x4E2D;&#x5B9E;&#x73B0;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>\n<h2 id=\"Presenter&#x5C42;\"><a href=\"#Presenter&#x5C42;\" class=\"headerlink\" title=\"Presenter&#x5C42;\"></a>Presenter&#x5C42;</h2><p>&#x5230;&#x8FD9;&#x91CC;&#x662F;&#x4E0D;&#x662F;&#x60F3;&#x5230;&#x4E5F;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x76F8;&#x5173;&#x63A5;&#x53E3;&#xFF0C;&#x4EE5;&#x4FBF;&#x5B9E;&#x73B0;&#x76F8;&#x5173;&#x65B9;&#x6CD5;&#xFF0C;&#x6CA1;&#x9519;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x628A;<strong>View</strong>&#x4E0E;<strong>Model</strong>&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface WXPresent {</div><div class=\"line\">    void loadData();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7C7B;&#x5B9E;&#x73B0;&#x8BE5;&#x63A5;&#x53E3;,&#x5728;&#x5176;&#x4E2D;&#x5F15;&#x7528;<strong>View</strong>&#x4E0E;<strong>Model</strong>&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class WXPresentImp implements WXPresent{</div><div class=\"line\"></div><div class=\"line\">    private WXModel mWXModle;</div><div class=\"line\">    private WXView mWXView;</div><div class=\"line\">    private List&lt;WXItemInfo&gt; mList;</div><div class=\"line\"></div><div class=\"line\">    public WXPresentImp(WXView wxView) {</div><div class=\"line\">        mWXView = wxView;</div><div class=\"line\">        mWXModle = new WXModleImp();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void loadData() {</div><div class=\"line\">        mList = mWXModle.initData();</div><div class=\"line\">        mWXView.setData(mList);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5230;&#x8FD9;&#x91CC;&#x57FA;&#x672C;&#x7684;<strong>MVP</strong>&#x5C31;&#x8981;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x6700;&#x540E;&#x53EA;&#x8981;&#x5728;&#x5FAE;&#x4FE1;&#x804A;&#x5929;&#x754C;&#x9762;&#x5B9E;&#x73B0;<strong>View</strong>&#x5C42;&#x7684;<strong>WXView</strong>&#x63A5;&#x53E3;&#x5728;&#x5176;&#x4E2D;&#x586B;&#x5145;&#x6570;&#x636E;&#xFF0C;&#x5B9E;&#x4F8B;&#x5316;<strong>Presenter</strong>&#x5C42;&#x7684;<strong>WXPresentImp</strong>&#x7C7B;&#xFF0C;&#x8C03;&#x7528;&#x5176;&#x65B9;&#x6CD5;<strong>loadData()</strong>&#xFF1B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class WXFragment extends Fragment implements WXView{</div><div class=\"line\">    @InjectView(R.id.wx_recyclerView)</div><div class=\"line\">    RecyclerView wxRecyclerView;</div><div class=\"line\">    private WXAdapter wxAdapter;</div><div class=\"line\">    private WXPresentImp mWXPresentImp;</div><div class=\"line\"></div><div class=\"line\">    @Nullable</div><div class=\"line\">    @Override</div><div class=\"line\">    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {</div><div class=\"line\">        View view = LayoutInflater.from(getContext()).inflate(R.layout.wx_layout, null);</div><div class=\"line\">        ButterKnife.inject(this, view);</div><div class=\"line\">        wxAdapter = new WXAdapter(getContext());</div><div class=\"line\">        mWXPresentImp = new WXPresentImp(this);</div><div class=\"line\">        mWXPresentImp.loadData();</div><div class=\"line\">        wxRecyclerView.setLayoutManager(new LinearLayoutManager(getContext()));</div><div class=\"line\">        wxRecyclerView.addItemDecoration(new WXItemDecoration(getContext()));</div><div class=\"line\">        wxRecyclerView.setAdapter(wxAdapter);</div><div class=\"line\">        return view;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void onDestroyView() {</div><div class=\"line\">        super.onDestroyView();</div><div class=\"line\">        ButterKnife.reset(this);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void setData(List&lt;WXItemInfo&gt; list) {</div><div class=\"line\">       wxAdapter.addData(list);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5230;&#x8FD9;&#x91CC;&#x6574;&#x4E2A;&#x7684;&#x5FAE;&#x4FE1;&#x804A;&#x5929;&#x7684;<strong>MVP</strong>&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x56DE;&#x8FC7;&#x53BB;&#x518D;&#x6574;&#x7406;&#x4E0B;&#x601D;&#x8DEF;&#x53D1;&#x73B0;&#x662F;&#x4E0D;&#x662F;&#x6E05;&#x695A;&#x4E86;&#x5F88;&#x591A;&#x3002;&#x4E00;&#x65E6;&#x4F60;&#x5B9E;&#x73B0;&#x4E86;<strong>MVP</strong>&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#x660E;&#x4E86;&#xFF0C;&#x601D;&#x8DEF;&#x6E05;&#x6670;&#x3002;&#x540E;&#x9762;&#x9879;&#x76EE;&#x7684;&#x5DE5;&#x7A0B;&#x91CF;&#x5927;&#x4E86;&#xFF0C;&#x66F4;&#x52A0;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x6A21;&#x5F0F;&#x4E86;&#x7BA1;&#x7406;&#x9879;&#x76EE;&#x3002;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x503C;&#x5F97;&#x63A8;&#x8350;&#x7684;&#x3002;</p>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/04/23/Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;-&#x4E00;/1.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/HightCopyWX\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/HightCopyWX</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android二维码扫描","url":"https://idisfkj.github.io/2016/04/16/Android二维码扫描/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x5FAE;&#x4FE1;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x63CF;&#x7528;&#x7684;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x8FD1;&#x5C31;&#x60F3;&#x5F04;&#x660E;&#x767D;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4E8E;&#x662F;&#x627E;&#x4E86;&#x70B9;&#x8D44;&#x6599;&#xFF0C;&#x53D1;&#x73B0;&#x90FD;&#x662F;&#x8BF4;&#x4F7F;&#x7528;zxing&#x7684;&#x5F00;&#x6E90;&#x5E93;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5F3A;&#x5927;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x5F15;&#x7528;&#x8BE5;&#x9879;&#x76EE;&#x53EA;&#x8981;&#x7B80;&#x5355;&#x7684;&#x51E0;&#x6B65;&#x4EE3;&#x7801;&#x5C31;&#x80FD;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x63CF;&#x4E0E;&#x751F;&#x6210;&#x7684;&#x6548;&#x679C;&#x3002;&#x8FD9;&#x91CC;&#x505A;&#x70B9;&#x7B14;&#x8BB0;&#x8BB0;&#x4E0B;&#xFF0C;&#x8FD8;&#x4E0D;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#x4E5F;&#x53EF;&#x4EE5;&#x6765;&#x5B66;&#x4E60;&#x4E0B;&#x3002;</p>\n<h2 id=\"&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\"><a href=\"#&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\" class=\"headerlink\" title=\"&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\"></a>&#x51C6;&#x5907;&#x5DE5;&#x4F5C;</h2><p>&#x5148;&#x4E0B;&#x8F7D;zxing&#x9879;&#x76EE;&#xFF0C;&#x4E0D;&#x8FC7;&#x63A8;&#x8350;&#x4E0B;&#x8F7D;&#x7CBE;&#x7B80;&#x7248;&#xFF0C;<strong>BarCodeTest</strong>&#x8FD9;&#x4E2A;&#x5C31;&#x8DB3;&#x591F;&#x5B9E;&#x73B0;&#x8BE5;&#x529F;&#x80FD;&#x4E86;&#x3002;&#x628A;&#x4E0B;&#x8F7D;&#x7684;&#x9879;&#x76EE;&#x6DFB;&#x52A0;&#x5230;&#x81EA;&#x5DF1;&#x9879;&#x76EE;&#x7684;&#x4F9D;&#x8D56;&#x4E2D;&#xFF0C;&#x5F15;&#x7528;&#x8BE5;&#x9879;&#x76EE;&#x3002;&#x5982;&#x4F55;&#x6DFB;&#x52A0;Module&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x90FD;&#x80FD;&#x81EA;&#x5DF1;&#x89E3;&#x51B3;&#x3002;&#x4E0B;&#x9762;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x64CD;&#x4F5C;&#x3002;</p>\n<h2 id=\"&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;\"><a href=\"#&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;\" class=\"headerlink\" title=\"&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;\"></a>&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;</h2><p>&#x56E0;&#x4E3A;&#x662F;&#x5F15;&#x7528;&#x522B;&#x4EBA;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x80FD;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x4F7F;&#x7528;&#x522B;&#x4EBA;&#x5B9A;&#x4E49;&#x597D;&#x7684;&#x7C7B;&#x6765;&#x5B9E;&#x73B0;&#x8BE5;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x91CC;&#x7528;&#x5230;&#x7684;&#x4E3B;&#x8981;&#x662F;<strong>CaptureActivit</strong>&#x7C7B;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x626B;&#x63CF;&#x65F6;&#x8DF3;&#x8F6C;&#x5230;&#x8BE5;&#x7C7B;&#x5F00;&#x542F;&#x626B;&#x63CF;&#x529F;&#x80FD;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x6253;&#x5F00;&#x626B;&#x63CF;&#x754C;&#x9762;&#x626B;&#x63CF;&#x6761;&#x5F62;&#x7801;&#x6216;&#x4E8C;&#x7EF4;&#x7801;</div><div class=\"line\">Intent openCameraIntent = new Intent(BarCodeTestActivity.this,CaptureActivity.class);</div><div class=\"line\">\t\t\t\tstartActivityForResult(openCameraIntent, 0);</div></pre></td></tr></table></figure>\n<p>&#x91CD;&#x5199;<strong>onActivityResult</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x8FC7;<strong>TextView</strong>&#x663E;&#x793A;&#x51FA;&#x626B;&#x63CF;&#x7684;&#x7ED3;&#x679C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">\tprotected void onActivityResult(int requestCode, int resultCode, Intent data) {</div><div class=\"line\">\t\tsuper.onActivityResult(requestCode, resultCode, data);</div><div class=\"line\">\t\t//&#x5904;&#x7406;&#x626B;&#x63CF;&#x7ED3;&#x679C;&#xFF08;&#x5728;&#x754C;&#x9762;&#x4E0A;&#x663E;&#x793A;&#xFF09;</div><div class=\"line\">\t\tif (resultCode == RESULT_OK) {</div><div class=\"line\">\t\t\tBundle bundle = data.getExtras();</div><div class=\"line\">\t\t\tString scanResult = bundle.getString(&quot;result&quot;);</div><div class=\"line\">\t\t\tresultTextView.setText(scanResult);</div><div class=\"line\">\t\t}</div><div class=\"line\">\t}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x901A;&#x8FC7;<strong>bundle.getString(&#x201C;result&#x201D;)</strong>&#x5C31;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x626B;&#x63CF;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;<strong>CaptureActivity</strong>&#x4E2D;&#x7684;<strong>handleDecode</strong>&#x5DF2;&#x7ECF;&#x5BF9;&#x5176;&#x505A;&#x4E86;&#x5904;&#x7406;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void handleDecode(Result result, Bitmap barcode) {</div><div class=\"line\">\t\tinactivityTimer.onActivity();</div><div class=\"line\">\t\tplayBeepSoundAndVibrate();</div><div class=\"line\">\t\tString resultString = result.getText();</div><div class=\"line\">\t\t//FIXME</div><div class=\"line\">\t\tif (resultString.equals(&quot;&quot;)) {</div><div class=\"line\">\t\t\tToast.makeText(CaptureActivity.this, &quot;Scan failed!&quot;, Toast.LENGTH_SHORT).show();</div><div class=\"line\">\t\t}else {</div><div class=\"line\">//\t\t\tSystem.out.println(&quot;Result:&quot;+resultString);</div><div class=\"line\">\t\t\tIntent resultIntent = new Intent();</div><div class=\"line\">\t\t\tBundle bundle = new Bundle();</div><div class=\"line\">\t\t\tbundle.putString(&quot;result&quot;, resultString);</div><div class=\"line\">\t\t\tresultIntent.putExtras(bundle);</div><div class=\"line\">\t\t\tthis.setResult(RESULT_OK, resultIntent);</div><div class=\"line\">\t\t}</div><div class=\"line\">\t\tCaptureActivity.this.finish();</div><div class=\"line\">\t}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x626B;&#x63CF;&#x7684;&#x529F;&#x80FD;&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x7ED3;&#x675F;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;\"><a href=\"#&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;\" class=\"headerlink\" title=\"&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;\"></a>&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;</h2><p>&#x8FD9;&#x91CC;&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x662F;&#x8981;&#x8C03;&#x7528;&#x8BE5;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x7684;<strong>EncodingHandler</strong>&#x7684;<strong>createQRCode</strong>&#x65B9;&#x6CD5;&#x751F;&#x6210;Bitmap&#x5BF9;&#x8C61;,&#x901A;&#x8FC7;ImageView&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">try {</div><div class=\"line\">                    String contentString = qrStrEditText.getText().toString();</div><div class=\"line\">                    if (!contentString.equals(&quot;&quot;)) {</div><div class=\"line\">                        //&#x6839;&#x636E;&#x5B57;&#x7B26;&#x4E32;&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;&#x56FE;&#x7247;&#x5E76;&#x663E;&#x793A;&#x5728;&#x754C;&#x9762;&#x4E0A;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x56FE;&#x7247;&#x7684;&#x5927;&#x5C0F;&#xFF08;450*450&#xFF09;</div><div class=\"line\">                        Bitmap qrCodeBitmap = EncodingHandler.createQRCode(contentString, 450);</div><div class=\"line\">                        qrImgImageView.setImageBitmap(qrCodeBitmap);</div><div class=\"line\">                    } else {</div><div class=\"line\">                        Toast.makeText(BarCodeTestActivity.this, &quot;Text can not be empty&quot;, Toast.LENGTH_SHORT).show();</div><div class=\"line\">                    }</div><div class=\"line\">                } catch (WriterException e) {</div><div class=\"line\">                    // TODO Auto-generated catch block</div><div class=\"line\">                    e.printStackTrace();</div><div class=\"line\">                }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x592A;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x6CA1;&#x9519;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x5176;&#x5B9E;&#x521A;&#x5F00;&#x59CB;&#x4E86;&#x89E3;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x60CA;&#x5446;&#x4E86;&#xFF0C;&#x4E0D;&#x7981;&#x611F;&#x53F9;&#x5F00;&#x6E90;&#x771F;&#x662F;&#x725B;&#x53C9;&#x554A;&#xFF01;</em></p>\n</blockquote>\n<h2 id=\"&#x754C;&#x9762;&#x4FEE;&#x6539;\"><a href=\"#&#x754C;&#x9762;&#x4FEE;&#x6539;\" class=\"headerlink\" title=\"&#x754C;&#x9762;&#x4FEE;&#x6539;\"></a>&#x754C;&#x9762;&#x4FEE;&#x6539;</h2><p>&#x5176;&#x5B9E;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x529F;&#x80FD;&#x662F;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x4F46;&#x754C;&#x9762;&#x771F;&#x662F;&#x770B;&#x4E0D;&#x8FC7;&#x53BB;&#x4E86;&#xFF0C;&#x611F;&#x89C9;&#x77AC;&#x95F4;&#x56DE;&#x5230;&#x4E86;&#x89E3;&#x653E;&#x524D;&#x4F3C;&#x5F97;&#xFF0C;&#x6709;&#x6728;&#x6709;&#x8FD9;&#x79CD;&#x611F;&#x89C9;&#x3002;&#x770B;&#x591A;&#x4E86;&#x5FAE;&#x4FE1;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x63CF;&#xFF0C;&#x4E00;&#x4E0B;&#x770B;&#x8FD9;&#x4E48;low&#x6211;&#x5B9E;&#x5728;&#x662F;&#x770B;&#x4E0D;&#x60EF;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x505A;&#x4E0B;&#x4FEE;&#x6539;&#x3002;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x627E;&#x5230;<strong>CameraManager</strong>&#x7C7B;&#xFF0C;&#x5728;&#x8BE5;&#x7C7B;&#x4E2D;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x662F;&#x4FEE;&#x6539;&#x4E0B;&#x626B;&#x63CF;&#x6846;&#x7684;&#x5927;&#x5C0F;&#xFF08;&#x539F;&#x6765;&#x7684;&#x5B9E;&#x5728;&#x662F;&#x611F;&#x89C9;&#x592A;&#x5C0F;&#x6C14;&#x4E86;&#xFF09;&#x628A;&#x76F8;&#x5E94;&#x7684;&#x53C2;&#x6570;&#x6539;&#x5927;&#x70B9;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x81EA;&#x5DF1;&#x4FEE;&#x6539;&#x7684;&#x5927;&#x5C0F;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static final int MIN_FRAME_WIDTH = 400;</div><div class=\"line\">private static final int MIN_FRAME_HEIGHT = 400;</div><div class=\"line\">private static final int MAX_FRAME_WIDTH = 600;</div><div class=\"line\">private static final int MAX_FRAME_HEIGHT = 600;</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x8981;&#x8BE5;&#x7684;&#x5C31;&#x662F;&#x6DFB;&#x52A0;&#x8DDF;&#x5FAE;&#x4FE1;&#x4E00;&#x6837;&#x7684;&#x79FB;&#x52A8;&#x6FC0;&#x5149;&#x6761;&#x3001;&#x56DB;&#x4E2A;&#x89D2;&#x7684;&#x7B80;&#x5355;&#x88C5;&#x9970;&#x4E0E;&#x6587;&#x5B57;&#x663E;&#x793A;&#x3002;&#x6211;&#x4EEC;&#x8981;&#x627E;&#x5230;<strong>ViewfinderView</strong>&#x7C7B;&#xFF0C;&#x5728;<strong>onDraw</strong>&#x65B9;&#x6CD5;&#x4E2D;&#x505A;&#x7ED8;&#x5236;&#x7684;&#x4FEE;&#x6539;&#x3002;&#x9996;&#x5148;&#x628A;&#x539F;&#x6765;&#x7684;&#x63CF;&#x8FB9;&#x7684;&#x989C;&#x8272;&#x6539;&#x6210;&#x7070;&#x8272;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">paint.setColor(Color.GRAY);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.top, frame.right + 1, frame.top + 2, paint);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.top + 2, frame.left + 2, frame.bottom - 1, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - 1, frame.top, frame.right + 1, frame.bottom - 1, paint);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.bottom - 1, frame.right + 1, frame.bottom + 1, paint);</div></pre></td></tr></table></figure>\n<p>&#x9ED8;&#x8BA4;&#x4E3A;&#x7EFF;&#x8272;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8981;&#x753B;&#x8DDF;&#x5FAE;&#x4FE1;&#x4E00;&#x6837;&#x7684;&#x7EFF;&#x8272;&#x7684;&#x56DB;&#x4E2A;&#x89D2;&#xFF0C;&#x989C;&#x8272;&#x4E00;&#x6837;&#x5C31;&#x6709;&#x70B9;&#x4E0D;&#x534F;&#x8C03;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x753B;&#x626B;&#x63CF;&#x6846;&#x7684;&#x56DB;&#x4E2A;&#x88C5;&#x9970;&#x89D2;</div><div class=\"line\">      paint.setColor(FRAME_COLOR);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.top, frame.left + FRAME_WIDTH, frame.top + FRAME_HEIGHT, paint);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.top, frame.left + FRAME_HEIGHT, frame.top + FRAME_WIDTH, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - FRAME_WIDTH, frame.top, frame.right, frame.top + FRAME_HEIGHT, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - FRAME_HEIGHT, frame.top, frame.right, frame.top + FRAME_WIDTH, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - FRAME_HEIGHT, frame.bottom - FRAME_WIDTH, frame.right, frame.bottom, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - FRAME_WIDTH, frame.bottom - FRAME_HEIGHT, frame.right, frame.bottom, paint);</div><div class=\"line\">      canvas.drawRect(frame.left,frame.bottom-FRAME_WIDTH,frame.left+FRAME_HEIGHT,frame.bottom,paint);</div><div class=\"line\">      canvas.drawRect(frame.left,frame.bottom-FRAME_HEIGHT,frame.left+FRAME_WIDTH,frame.bottom,paint);</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x7684;&#x6839;&#x636E;<strong>frame</strong>&#x7684;<strong>top</strong>&#x3001;<strong>left</strong>&#x3001;<strong>right</strong>&#x4E0E;<strong>bottom</strong>&#x53C2;&#x6570;&#x6765;&#x7ED8;&#x5236;&#xFF0C;&#x6BCF;&#x4E2A;&#x89D2;&#x8981;&#x7ED8;&#x5236;&#x4E24;&#x6B21;&#x3002;<strong>FRAME_HEIGHT</strong>&#x4E0E;<strong>FRAME_WIDTH</strong>&#x5206;&#x522B;&#x4E3A;&#x81EA;&#x5DF1;&#x8BBE;&#x7F6E;&#x7684;&#x89D2;&#x7684;&#x5BBD;&#x9AD8;&#x3002;&#x53EF;&#x4EE5;&#x62FF;&#x5FAE;&#x4FE1;&#x7684;&#x5BF9;&#x7167;&#x3002;<br>&#x4E0B;&#x9762;&#x4FEE;&#x6539;&#x6FC0;&#x5149;&#x7EBF;&#xFF0C;&#x628A;&#x539F;&#x6765;&#x7684;&#x6FC0;&#x5149;&#x7ED8;&#x5236;&#x53BB;&#x6389;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x521D;&#x59CB;&#x5316;laser</div><div class=\"line\">      if (!isStart){</div><div class=\"line\">        isStart = true;</div><div class=\"line\">        laserTop = frame.top;</div><div class=\"line\">        laserBottom = frame.bottom;</div><div class=\"line\">      }</div><div class=\"line\">//&#x7ED8;&#x5236;laser</div><div class=\"line\">      laserTop += LASER_SPEED;//&#x6BCF;&#x6B21;&#x7684;&#x79FB;&#x52A8;&#x8DDD;&#x79BB;</div><div class=\"line\">      if (laserTop &gt;= frame.bottom){</div><div class=\"line\">        laserTop = frame.top;</div><div class=\"line\">      }</div><div class=\"line\">      canvas.drawRect(frame.left + LASER_WIDTH, laserTop - LASER_WIDTH / 2, frame.right - LASER_WIDTH, laserTop + LASER_WIDTH / 2, paint);</div><div class=\"line\">      //&#x66F4;&#x65B0;laser&#x5B9E;&#x73B0;&#x79FB;&#x52A8;</div><div class=\"line\">      postInvalidateDelayed(ANIMATION_DELAY, frame.left, frame.top, frame.right, frame.bottom);</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x6587;&#x5B57;&#x7684;&#x7ED8;&#x5236;&#x4E5F;&#x662F;&#x54CD;&#x5E94;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x627E;&#x5230;&#x8981;&#x7ED8;&#x5236;&#x7684;&#x5750;&#x6807;&#xFF0C;&#x8C03;&#x7528;<strong>canvas.drawText</strong>&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x753B;&#x7B14;<strong>paint.setTextSize()</strong>&#x5355;&#x4F4D;&#x662F;px&#xFF08;&#x50CF;&#x7D20;&#xFF09;&#xFF0C;&#x8FD9;&#x70B9;&#x611F;&#x89C9;&#x6709;&#x70B9;&#x9EBB;&#x70E6;&#xFF0C;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x8FA8;&#x7387;&#x7684;&#x673A;&#x578B;&#x4E0B;&#x5B57;&#x4F53;&#x7684;&#x5927;&#x5C0F;&#x4F1A;&#x76F8;&#x5DEE;&#x5F88;&#x5927;&#x3002;&#x3002;&#x6709;&#x70B9;&#x86CB;&#x75BC;&#x3002;&#x5E0C;&#x671B;&#x6709;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x7684;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x544A;&#x8BC9;&#x6211;&#x3002;</p>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/04/16/Android&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x63CF;/1.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<blockquote>\n<p><em>&#x6587;&#x5B57;&#x6211;&#x6CA1;&#x6709;&#x8C03;&#xFF0C;&#x81EA;&#x5DF1;&#x53EF;&#x4EE5;&#x8C03;&#x4E0B;&#x3002;&#x6211;&#x662F;&#x6309;&#x6211;&#x624B;&#x673A;&#x5C45;&#x4E2D;&#x6765;&#x8C03;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;768 x 1280&#x7684;&#xFF0C;&#x6587;&#x5B57;&#x5B8C;&#x5168;&#x53D8;&#x6837;&#x4E86;&#x3002;&#x3002;&#x3002;</em> </p>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"php与android的简单交互","url":"https://idisfkj.github.io/2016/04/09/php与android的简单交互/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><strong>web</strong>&#x5F00;&#x53D1;&#x6709;&#x524D;&#x6BB5;&#x4E0E;&#x540E;&#x7AEF;&#x4E4B;&#x5206;&#xFF0C;&#x5176;&#x5B9E;<strong>android</strong>&#x4E5F;&#x6709;&#x524D;&#x540E;&#x7AEF;&#x4E4B;&#x5206;&#x3002;<strong>android</strong>&#x5F00;&#x53D1;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x624B;&#x673A;<strong>App</strong>&#x7684;&#x524D;&#x7AEF;&#x3002;&#x4E00;&#x822C;&#x90FD;&#x662F;<strong>php+android</strong>&#x6216;&#x8005;<strong>jsp+android</strong>&#x5F00;&#x53D1;&#xFF0C;&#x6240;&#x4EE5;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5408;&#x683C;&#x7684;<strong>android</strong>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x6709;&#x5FC5;&#x8981;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;<strong>android</strong>&#x4E0E;&#x540E;&#x7AEF;&#x7684;&#x7B80;&#x5355;&#x4EA4;&#x4E92;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4EE5;<strong>php+android</strong>&#x4EA4;&#x4E92;&#x7684;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x3002;</p>\n<h2 id=\"PHP&#x6570;&#x636E;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;\"><a href=\"#PHP&#x6570;&#x636E;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;\" class=\"headerlink\" title=\"PHP&#x6570;&#x636E;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;\"></a>PHP&#x6570;&#x636E;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;</h2><p><strong>php</strong>&#x7AEF;&#x7684;&#x5F00;&#x53D1;&#x4E3B;&#x8981;&#x662F;&#x5B9E;&#x73B0;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6570;&#x636E;&#x5236;&#x5B9A;&#x6210;<strong>json</strong>&#x7C7B;&#x578B;&#xFF0C;&#x5236;&#x5B9A;&#x4F9B;<strong>android</strong>&#x83B7;&#x53D6;&#x7684;&#x63A5;&#x53E3;&#x3002;&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x5236;&#x5B9A;&#x6210;json&#x7C7B;&#x578B;&#xFF0C;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x90FD;&#x660E;&#x767D;&#xFF0C;&#x73B0;&#x5728;<strong>android</strong>&#x7AEF;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x4EE5;<strong>json</strong>&#x7684;&#x683C;&#x5F0F;&#x5C01;&#x88C5;&#x7684;&#x3002;&#x597D;&#x4E86;&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x64CD;&#x4F5C;&#x3002;</p>\n<h3 id=\"&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x5EFA;&#x7ACB;\"><a href=\"#&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x5EFA;&#x7ACB;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x5EFA;&#x7ACB;\"></a>&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x5EFA;&#x7ACB;</h3><p>&#x9996;&#x5148;&#x5EFA;&#x8868;&#x5B9A;&#x4E49;&#x597D;&#x63D0;&#x4F9B;&#x8BF7;&#x6C42;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7B80;&#x5355;&#x70B9;&#xFF0C;&#x4E0A;&#x5F20;&#x56FE;&#xFF1A;</p>\n<p><img src=\"/2016/04/09/php&#x4E0E;android&#x7684;&#x7B80;&#x5355;&#x4EA4;&#x4E92;/1.png\" alt=\"iamge\"></p>\n<h3 id=\"&#x6570;&#x636E;&#x5E93;&#x7684;&#x8FDE;&#x63A5;\"><a href=\"#&#x6570;&#x636E;&#x5E93;&#x7684;&#x8FDE;&#x63A5;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x5E93;&#x7684;&#x8FDE;&#x63A5;\"></a>&#x6570;&#x636E;&#x5E93;&#x7684;&#x8FDE;&#x63A5;</h3><p>&#x5EFA;&#x5B8C;&#x8868;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x5F00;&#x59CB;&#x5728;<strong>PHP</strong>&#x4E2D;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4EE5;<strong>pdo</strong>&#x7684;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;&#x4E3A;&#x4F8B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?php</div><div class=\"line\">/**</div><div class=\"line\"> * &#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;</div><div class=\"line\"> */</div><div class=\"line\"></div><div class=\"line\">try{</div><div class=\"line\">    $pdo = new PDO(&quot;mysql:host=localhost:3306;dbname=blog;&quot;,&quot;root&quot;,&quot;666666&quot;);</div><div class=\"line\">    //&#x8BBE;&#x7F6E;&#x7F16;&#x7801;</div><div class=\"line\">    $pdo-&gt;exec(&quot;set names utf8&quot;);</div><div class=\"line\">}catch(PDOException $e){</div><div class=\"line\">    die(&quot;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x5931;&#x8D25;&quot;.$e-&gt;getMessage());</div><div class=\"line\">}</div><div class=\"line\">?&gt;</div></pre></td></tr></table></figure>\n<p>&#x53EA;&#x8981;&#x4F20;&#x5165;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x540D;&#xFF0C;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x5BC6;&#x7801;&#x5373;&#x53EF;&#x3002;</p>\n<h3 id=\"&#x83B7;&#x53D6;&#x4E0E;&#x5236;&#x5B9A;json\"><a href=\"#&#x83B7;&#x53D6;&#x4E0E;&#x5236;&#x5B9A;json\" class=\"headerlink\" title=\"&#x83B7;&#x53D6;&#x4E0E;&#x5236;&#x5B9A;json\"></a>&#x83B7;&#x53D6;&#x4E0E;&#x5236;&#x5B9A;json</h3><p>&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x904D;&#x5386;&#x8868;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$sql = &quot;SELECT * FROM blog&quot;;</div></pre></td></tr></table></figure>\n<p>&#x67E5;&#x8BE2;&#x4E0E;&#x904D;&#x5386;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">$stmt = $pdo-&gt;query($sql);</div><div class=\"line\">while($row = $stmt-&gt;fetch(PDO::FETCH_ASSOC)){</div><div class=\"line\">    $list[&quot;blog&quot;][] = $row;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5C06;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x6570;&#x636E;&#x8F6C;&#x5C01;&#x88C5;&#x6210;json&#x7C7B;&#x578B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">print_r(json_encode($list));</div></pre></td></tr></table></figure>\n<p>&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;&#x540E;&#x7684;&#x6570;&#x636E;&#x5C31;&#x662F;json&#x7C7B;&#x578B;&#x4E86;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x8BBF;&#x95EE;&#x7684;&#x662F;&#xFF1A;<a href=\"http://192.168.56.1/WebBlog/json/getBlogJson.php&quot;&#xFF08;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x672C;&#x673A;&#x7684;ip&#x5730;&#x5740;&#x4E0E;&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF09;\" target=\"_blank\" rel=\"external\">http://192.168.56.1/WebBlog/json/getBlogJson.php&quot;&#xFF08;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x672C;&#x673A;&#x7684;ip&#x5730;&#x5740;&#x4E0E;&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF09;</a><br><img src=\"/2016/04/09/php&#x4E0E;android&#x7684;&#x7B80;&#x5355;&#x4EA4;&#x4E92;/2.png\" alt=\"iamge\"></p>\n<blockquote>\n<p><em>&#x597D;&#x4E86;PHP&#x7AEF;&#x7684;&#x5C31;&#x53EF;&#x4EE5;&#x5230;&#x8FD9;&#x91CC;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x8FDB;&#x5165;android&#x7AEF;</em></p>\n</blockquote>\n<h2 id=\"Android&#x7AEF;&#x6570;&#x636E;&#x83B7;&#x53D6;\"><a href=\"#Android&#x7AEF;&#x6570;&#x636E;&#x83B7;&#x53D6;\" class=\"headerlink\" title=\"Android&#x7AEF;&#x6570;&#x636E;&#x83B7;&#x53D6;\"></a>Android&#x7AEF;&#x6570;&#x636E;&#x83B7;&#x53D6;</h2><p><strong>Android</strong>&#x7AEF;&#x4E3B;&#x8981;&#x7684;&#x662F;<strong>json</strong>&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5EFA;&#x7ACB;&#x4E0E;&#x4ECE;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x501F;&#x53E3;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x8981;&#x7528;&#x5230;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;&#x3002;</p>\n<h3 id=\"Json&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;\"><a href=\"#Json&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;\" class=\"headerlink\" title=\"Json&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;\"></a>Json&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;</h3><p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#xFF0C;&#x628A;<strong>GsonFormat</strong>&#x96C6;&#x6210;&#x5230;<strong>AS</strong>&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x751F;&#x6210;&#x5B9E;&#x4F53;&#x7C7B;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x8981;&#x6839;&#x636E;&#x524D;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x6765;&#x8FDB;&#x884C;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x6309;&#x4E0A;&#x9762;&#x7684;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#x7684;&#x5B9E;&#x4F53;&#x7C7B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div></pre></td><td class=\"code\"><pre><div class=\"line\">private List&lt;BlogBean&gt; blog;</div><div class=\"line\"></div><div class=\"line\">public List&lt;BlogBean&gt; getBlog() {</div><div class=\"line\">    return blog;</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">public void setBlog(List&lt;BlogBean&gt; blog) {</div><div class=\"line\">    this.blog = blog;</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">public static class BlogBean {</div><div class=\"line\">    private String id;</div><div class=\"line\">    private String title;</div><div class=\"line\">    private String time;</div><div class=\"line\">    private String content_url;</div><div class=\"line\">    private String image_url;</div><div class=\"line\"></div><div class=\"line\">    public String getId() {</div><div class=\"line\">        return id;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setId(String id) {</div><div class=\"line\">        this.id = id;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public String getTitle() {</div><div class=\"line\">        return title;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setTitle(String title) {</div><div class=\"line\">        this.title = title;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public String getTime() {</div><div class=\"line\">        return time;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setTime(String time) {</div><div class=\"line\">        this.time = time;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public String getContent_url() {</div><div class=\"line\">        return content_url;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setContent_url(String content_url) {</div><div class=\"line\">        this.content_url = content_url;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public String getImage_url() {</div><div class=\"line\">        return image_url;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setImage_url(String image_url) {</div><div class=\"line\">        this.image_url = image_url;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h3 id=\"&#x81EA;&#x5B9A;&#x4E49;GsonRequest\"><a href=\"#&#x81EA;&#x5B9A;&#x4E49;GsonRequest\" class=\"headerlink\" title=\"&#x81EA;&#x5B9A;&#x4E49;GsonRequest\"></a>&#x81EA;&#x5B9A;&#x4E49;GsonRequest</h3><p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;<strong>volley</strong>&#x4E0E;<strong>gson</strong>&#x6765;&#x89E3;&#x6790;<strong>json</strong>&#x6570;&#x636E;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x5148;&#x81EA;&#x5B9A;&#x4E49;<strong>GsonRequest</strong>&#xFF0C;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x7EE7;&#x627F;<strong>volley</strong>&#x7684;<strong>Request</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class GsonRequest&lt;T&gt; extends Request&lt;T&gt; {</div><div class=\"line\"></div><div class=\"line\">    private Class&lt;T&gt; mClass;</div><div class=\"line\">    private final Response.Listener&lt;T&gt; mListener;</div><div class=\"line\">    private Gson mGson;</div><div class=\"line\">    private List&lt;T&gt; mList;</div><div class=\"line\"></div><div class=\"line\">    public GsonRequest(int method, String url, Class&lt;T&gt; tClass, Response.Listener&lt;T&gt; listener, Response.ErrorListener errorListener) {</div><div class=\"line\">        super(method, url, errorListener);</div><div class=\"line\">        mClass = tClass;</div><div class=\"line\">        mListener = listener;</div><div class=\"line\">        mGson = new Gson();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public GsonRequest(String url, Class&lt;T&gt; tClass, Response.Listener&lt;T&gt; listener, Response.ErrorListener errorListener) {</div><div class=\"line\">        this(Method.GET, url, tClass, listener, errorListener);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected Response&lt;T&gt; parseNetworkResponse(NetworkResponse networkResponse) {</div><div class=\"line\">        try {</div><div class=\"line\">            mList = new ArrayList&lt;&gt;();</div><div class=\"line\">            String jsonString = new String(networkResponse.data,</div><div class=\"line\">                    HttpHeaderParser.parseCharset(networkResponse.headers));</div><div class=\"line\">            return Response.success(mGson.fromJson(jsonString, mClass),</div><div class=\"line\">                    HttpHeaderParser.parseCacheHeaders(networkResponse));</div><div class=\"line\">        } catch (UnsupportedEncodingException e) {</div><div class=\"line\">            return Response.error(new ParseError(e));</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected void deliverResponse(T t) {</div><div class=\"line\">        mListener.onResponse(t);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"Volley&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6570;&#x636E;\"><a href=\"#Volley&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6570;&#x636E;\" class=\"headerlink\" title=\"Volley&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6570;&#x636E;\"></a>Volley&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6570;&#x636E;</h3><p>&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<strong>GsonRequest</strong>&#x6765;&#x8BF7;&#x6C42;&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">String url = &quot;http://192.168.56.1/WebBlog/json/getBlogJson.php&quot;;</div><div class=\"line\">        GsonRequest&lt;BlogInfo&gt; gsonRequest = new GsonRequest&lt;BlogInfo&gt;(url, BlogInfo.class, new Response.Listener&lt;BlogInfo&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(BlogInfo info) {</div><div class=\"line\">                mList = info.getBlog();</div><div class=\"line\">                BlogAdapter mAdapter = new BlogAdapter(MainActivity.this,mList,R.layout.blog_item);</div><div class=\"line\">                blogLv.setAdapter(mAdapter);</div><div class=\"line\">            }</div><div class=\"line\">        }, new Response.ErrorListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError volleyError) {</div><div class=\"line\">                Log.e(&quot;TAG&quot;, volleyError.getMessage(), volleyError);</div><div class=\"line\"></div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">        //&#x6DFB;&#x52A0;&#x5230;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x4E2D;</div><div class=\"line\">        RequestManager.addRequest(gsonRequest, &quot;blogRequest&quot;);</div></pre></td></tr></table></figure>\n<p>&#x6570;&#x636E;&#x5728;<strong>onResponse</strong>&#x4E2D;&#x8BF7;&#x6C42;&#x5230;&#x4E86;&#xFF0C;&#x5B58;&#x50A8;&#x5230;<strong>List</strong>&#x96C6;&#x5408;&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;<strong>adapter</strong>&#x663E;&#x793A;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x5C55;&#x5F00;adapter&#x7684;&#x4F7F;&#x7528;</p>\n<h3 id=\"&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;\"><a href=\"#&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;\" class=\"headerlink\" title=\"&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;\"></a>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;</h3><p>&#x8FD8;&#x662F;&#x8BF4;&#x4E0B;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x56FE;&#x7247;&#x7684;&#x7F13;&#x5B58;&#x5904;&#x7406;&#xFF0C;&#x4E5F;&#x662F;&#x901A;&#x8FC7;<strong>volley</strong>&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E00;&#x5957;&#x7684;&#x4F7F;&#x7528;<strong>volley</strong>&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8BB8;&#x591A;&#x57FA;&#x672C;&#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;<br>&#x4F7F;&#x7528;&#x5230;&#x7684;&#x662F;<strong>LruCache</strong>&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;&#x5B83;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">protected int sizeOf(String key, Bitmap value) {</div><div class=\"line\">    if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.HONEYCOMB_MR1){</div><div class=\"line\">        return value.getByteCount();</div><div class=\"line\">    }</div><div class=\"line\">    return value.getRowBytes() * value.getHeight();</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">@Override</div><div class=\"line\">public Bitmap getBitmap(String s) {</div><div class=\"line\">    return get(s);</div><div class=\"line\">}</div><div class=\"line\">   </div><div class=\"line\"></div><div class=\"line\">@Override</div><div class=\"line\">public void putBitmap(String s, Bitmap bitmap) {</div><div class=\"line\">    put(s,bitmap);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x518D;&#x81EA;&#x5B9A;&#x4E49;<strong>ImageCacheManager</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ImageCacheManager {</div><div class=\"line\">    private static final int CACHE_SIZE = 1024 * 1024 * ((ActivityManager) App.getAppContext()</div><div class=\"line\">            .getSystemService(Context.ACTIVITY_SERVICE)).getMemoryClass() / 8;</div><div class=\"line\"></div><div class=\"line\">    public ImageCacheManager() {</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    private static ImageLoader mImageLoader = new ImageLoader(RequestManager.mRequestQueue, new BitmapLruCache(CACHE_SIZE));</div><div class=\"line\"></div><div class=\"line\">    public static ImageLoader.ImageContainer loadImage(String requestUrl, ImageLoader.ImageListener listener, int maxWidth, int maxHeight) {</div><div class=\"line\">        return mImageLoader.get(requestUrl, listener, maxWidth, maxHeight);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public static ImageLoader.ImageContainer loadImage(String requestUrl, ImageLoader.ImageListener listener) {</div><div class=\"line\">        return loadImage(requestUrl, listener, 0, 0);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public static ImageLoader.ImageListener getImageListener(final ImageView view, final Drawable defaultImageDrawable, final Drawable errorImageDrawable) {</div><div class=\"line\">        return new ImageLoader.ImageListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(ImageLoader.ImageContainer imageContainer, boolean b) {</div><div class=\"line\">                if (imageContainer.getBitmap() != null) {</div><div class=\"line\">                    if (!b &amp;&amp; defaultImageDrawable != null) {</div><div class=\"line\">                        TransitionDrawable transitionDrawable = new TransitionDrawable(</div><div class=\"line\">                                new Drawable[]{defaultImageDrawable</div><div class=\"line\">                                        , new BitmapDrawable(App.getAppContext().getResources(), imageContainer.getBitmap())}</div><div class=\"line\">                        );</div><div class=\"line\">                        transitionDrawable.setCrossFadeEnabled(true);</div><div class=\"line\">                        view.setImageDrawable(transitionDrawable);</div><div class=\"line\">                        transitionDrawable.startTransition(100);</div><div class=\"line\">                    } else {</div><div class=\"line\">                        view.setImageBitmap(imageContainer.getBitmap());</div><div class=\"line\">                    }</div><div class=\"line\">                } else if (defaultImageDrawable != null) {</div><div class=\"line\">                    view.setImageDrawable(defaultImageDrawable);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError volleyError) {</div><div class=\"line\">                if (errorImageDrawable != null) {</div><div class=\"line\">                    view.setImageDrawable(errorImageDrawable);</div><div class=\"line\">                }</div><div class=\"line\">                Log.e(&quot;TAG&quot;,volleyError.getMessage());</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<strong>ImageCacheManager</strong>&#x6765;&#x52A0;&#x8F7D;&#x7F51;&#x7EDC;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;&#x56FE;&#x7247;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">ImageCacheManager.loadImage(mList.get(position).getImage_url()</div><div class=\"line\">                , ImageCacheManager.getImageListener((ImageView) holder.getView(R.id.item_image)</div><div class=\"line\">                , App.getAppContext().getResources().getDrawable(R.drawable.blog_default), App.getAppContext().getResources().getDrawable(R.drawable.blog_default))</div><div class=\"line\">                ,0,0);</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;<strong>volley</strong>&#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x4E0D;&#x6B62;&#x8FD9;&#x4E9B;&#xFF0C;&#x5C31;&#x62FF;&#x56FE;&#x7247;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD8;&#x6709;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<strong>ImageRequest</strong>&#x4E0E;<strong>NetworkImageView</strong>&#xFF0C;&#x672C;&#x6765;&#x8FD8;&#x60F3;&#x8BF4;&#x70B9;<strong>webview</strong>&#x7684;&#x4E00;&#x70B9;&#x77E5;&#x8BC6;&#xFF0C;&#x4ECA;&#x5929;&#x6709;&#x70B9;&#x665A;&#xFF0C;&#x5728;&#x5BBF;&#x820D;&#x8981;&#x65AD;&#x7535;&#x65AD;&#x7F51;&#x4E86;&#xFF0C;&#x5C31;&#x4E0D;&#x5C55;&#x5F00;&#x4E86;&#x3002;<br>&#x8FD8;&#x662F;&#x6267;&#x884C;&#x6211;&#x4E00;&#x8D2F;&#x7684;&#x505A;&#x6CD5;&#x4E0A;&#x5F20;&#x6548;&#x679C;&#x56FE;&#x5427;</p>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/04/09/php&#x4E0E;android&#x7684;&#x7B80;&#x5355;&#x4EA4;&#x4E92;/3.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"pickerView的开源依赖","url":"https://idisfkj.github.io/2016/04/04/pickerView的开源依赖/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4E0A;&#x4E2A;&#x6708;&#x7684;&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x4ECA;&#x5929;&#x6211;&#x628A;&#x5B83;&#x4FEE;&#x6539;&#x4E86;&#x4E0B;&#xFF0C;&#x4E0A;&#x4F20;&#x5230;&#x4E86;&#x5F00;&#x6E90;&#x5E93;&#x4E2D;&#xFF0C;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x4E0B;&#x9762;&#x8BF4;&#x4E0B;&#x7B80;&#x5355;&#x7684;&#x53D8;&#x5316;.</p>\n<h2 id=\"&#x5B9E;&#x4F8B;&#x5316;&#x7C7B;&#x7684;&#x6539;&#x53D8;\"><a href=\"#&#x5B9E;&#x4F8B;&#x5316;&#x7C7B;&#x7684;&#x6539;&#x53D8;\" class=\"headerlink\" title=\"&#x5B9E;&#x4F8B;&#x5316;&#x7C7B;&#x7684;&#x6539;&#x53D8;\"></a>&#x5B9E;&#x4F8B;&#x5316;&#x7C7B;&#x7684;&#x6539;&#x53D8;</h2><p>&#x539F;&#x5148;&#x662F;&#x4F7F;&#x7528;TextPicker&#x7C7B;&#x6765;&#x5B9E;&#x4F8B;&#x5316;&#xFF0C;&#x73B0;&#x5728;&#x4FEE;&#x6539;&#x6210;MyPicker.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">MyPicker picker = new MyPicker();</div></pre></td></tr></table></figure>\n<h2 id=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;&#x7684;&#x589E;&#x5220;\"><a href=\"#&#x5BF9;&#x5916;&#x65B9;&#x6CD5;&#x7684;&#x589E;&#x5220;\" class=\"headerlink\" title=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;&#x7684;&#x589E;&#x5220;\"></a>&#x5BF9;&#x5916;&#x65B9;&#x6CD5;&#x7684;&#x589E;&#x5220;</h2><ul>\n<li>&#x5220;&#x9664;&#x4E86;&#x539F;&#x6765;&#x7684;&#x83B7;&#x53D6;&#x786E;&#x5B9A;&#x63A7;&#x4EF6; getOK()&#x65B9;&#x6CD5;</li>\n<li>&#x589E;&#x52A0;&#x4E86;&#x663E;&#x793A;&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x7684;&#x4E2A;&#x6570; setShowNum()&#x65B9;&#x6CD5;</li>\n<li>&#x589E;&#x52A0;&#x4E86;&#x5B8C;&#x6210;&#x76D1;&#x542C;&#x4E8B;&#x4EF6; setSelectedFinishListener()&#x65B9;&#x6CD5;</li>\n</ul>\n<h2 id=\"&#x4F7F;&#x7528;Demo\"><a href=\"#&#x4F7F;&#x7528;Demo\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;Demo\"></a>&#x4F7F;&#x7528;Demo</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">tp = new MyPicker(this);</div><div class=\"line\">        //init data</div><div class=\"line\">        initData();</div><div class=\"line\">        //loding data</div><div class=\"line\">        tp.setData(leftList, 1);</div><div class=\"line\">        tp.setData(middleList, 2);</div><div class=\"line\">        tp.setData(rightList, 3);</div><div class=\"line\">        //set title</div><div class=\"line\">        tp.setPickerTitle(getResources().getString(R.string.title_name));</div><div class=\"line\">        //set the default centered text</div><div class=\"line\">        //if not set,show centered text in the data</div><div class=\"line\">        tp.setMiddleText(5, 1);</div><div class=\"line\">        tp.setMiddleText(2, 2);</div><div class=\"line\">        tp.setMiddleText(25, 3);</div><div class=\"line\">        //redy</div><div class=\"line\">        tp.setPrepare();</div><div class=\"line\">        // default show three</div><div class=\"line\">//        tp.setShowNum(3);</div><div class=\"line\">        tp.setSelectedFinishListener(new MyPicker.SelectedFinishListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onFinish() {</div><div class=\"line\">                leftText = String.valueOf(tp.getText(1));</div><div class=\"line\">                middleText = String.valueOf(tp.getText(2));</div><div class=\"line\">                rightText = String.valueOf(tp.getText(3));</div><div class=\"line\">                tv.setText(leftText+&quot;-&quot;+middleText+&quot;-&quot;+rightText);</div><div class=\"line\">                tp.dismiss();</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">        tp.showAtLocation(this.findViewById(R.id.main), Gravity.CENTER, 0, 0);</div></pre></td></tr></table></figure>\n<h2 id=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"><a href=\"#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    compile &apos;com.idisfkj.picker:mypicker:1.2.1&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x73B0;&#x5728;&#x4F7F;&#x7528;&#x53EA;&#x8981;&#x5982;&#x4E0A;&#x4E00;&#x53E5;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x8BB8;&#x591A;</em></p>\n</blockquote>\n<h2 id=\"&#x7ED3;&#x8BED;\"><a href=\"#&#x7ED3;&#x8BED;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BED;\"></a>&#x7ED3;&#x8BED;</h2><p>&#x5982;&#x679C;&#x8FD8;&#x60F3;&#x8981;&#x77E5;&#x9053;&#x5177;&#x4F53;&#x539F;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x6211;&#x539F;&#x6765;&#x7684;&#x6587;&#x7AE0;&#xFF1A;</p>\n<p><a href=\"http://idisfkj.github.io/2016/03/13/PickerView/\">&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x5668;</a></p>\n<p>Github&#x94FE;&#x63A5;&#xFF1A;<a href=\"https://github.com/idisfkj/idisfkj.picker\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/idisfkj.picker</a><br>&#x6B22;&#x8FCE;Fork Star</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView深入浅出","url":"https://idisfkj.github.io/2016/04/02/RecyclerView深入浅出/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><strong>RecyclerView</strong>&#x5DF2;&#x7ECF;&#x51FA;&#x6765;&#x597D;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;&#x5BF9;&#x4E8E;&#x65B0;&#x63A5;&#x89E6;<strong>Android</strong>&#x7684;&#x5B66;&#x5458;&#x6765;&#x8BF4;&#x5927;&#x591A;&#x6570;&#x4F7F;&#x7528;&#x7684;&#x662F;<strong>ListView</strong>&#x4E0E;<strong>GridView</strong>&#xFF0C;&#x5BF9;&#x4E8E;<strong>RecyclerView</strong>&#x7684;&#x4F7F;&#x7528;&#x53EF;&#x80FD;&#x90FD;&#x4E0D;&#x662F;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x76F8;&#x4FE1;&#x8FD9;&#x7247;&#x6587;&#x7AE0;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5E26;&#x4F60;&#x8FDB;&#x53BB;<strong>RecyclerView</strong>&#x7684;&#x5927;&#x95E8;&#xFF0C;&#x5FEB;&#x901F;&#x4E86;&#x89E3;&#x4E0E;&#x638C;&#x63E1;&#x65B0;&#x6280;&#x672F;&#x3002;</p>\n<h2 id=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"><a href=\"#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h2><p>&#x5927;&#x5BB6;&#x4F7F;&#x7528;<strong>ListView</strong>&#x4E0E;<strong>GridView</strong>&#x53EA;&#x8981;&#x5728;<strong>xml</strong>&#x4E2D;&#x5F15;&#x7528;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x6CA1;&#x9519;<strong>RecyclerView</strong>&#x4E5F;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x5728;&#x5F15;&#x7528;&#x524D;&#x8981;&#x5148;&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;,&#x5728;&#x9879;&#x76EE;&#x7684;<strong>app</strong>&#x76EE;&#x5F55;&#x4E0B;&#x7684;<strong>build.gradl</strong>&#x7684;dependencies&#x4E2D;&#x6DFB;&#x52A0;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.android.support:recyclerview-v7:23.2.0&apos;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5B8C;&#x4E86;&#x4E4B;&#x540E;&#x522B;&#x5FD8;&#x4E86;Sync Now</em></p>\n</blockquote>\n<h2 id=\"Adapter&#x53D8;&#x5316;\"><a href=\"#Adapter&#x53D8;&#x5316;\" class=\"headerlink\" title=\"Adapter&#x53D8;&#x5316;\"></a>Adapter&#x53D8;&#x5316;</h2><p>&#x65E2;&#x7136;&#x8981;&#x6709;<strong>ListView</strong>&#x4E0E;<strong>GridView</strong>&#x7684;&#x6548;&#x679C;&#x81EA;&#x7136;&#x4E0D;&#x80FD;&#x5C11;&#x4E86;<strong>adapter</strong>,&#x800C;<strong>RecyclerView</strong>&#x7684;<strong>adapter</strong>&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x4E2A;&#x91CD;&#x5927;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x539F;&#x6765;<strong>adapter</strong>&#x4E2D;&#x7684;<strong>getView()</strong>&#x65B9;&#x6CD5;&#x53D6;&#x6D88;&#x4E86;&#xFF0C;&#x66FF;&#x6362;&#x6210;&#x4E86;<strong>onCreateViewHolder()</strong>&#x4E0E;<strong>onBindViewHolder()</strong>&#x3002;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5206;&#x6210;&#x4E86;&#x4E24;&#x90E8;&#x5206;&#xFF0C;&#x4E00;&#x90E8;&#x5206;&#x521B;&#x5EFA;&#x89C6;&#x56FE;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x7ED1;&#x5B9A;&#x6570;&#x636E;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5C42;&#x6B21;&#x66F4;&#x6E05;&#x6670;&#x4E86;&#x5462;&#xFF0C;&#x4E0B;&#x9762;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E4B;&#x4E24;&#x5927;&#x65B9;&#x6CD5;&#x7684;&#x4F7F;&#x7528;&#x3002;</p>\n<h3 id=\"onCreateViewHolder\"><a href=\"#onCreateViewHolder\" class=\"headerlink\" title=\"onCreateViewHolder\"></a>onCreateViewHolder</h3><p>&#x8BF4;&#x767D;&#x4E86;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x521B;&#x5EFA;&#x89C6;&#x56FE;&#xFF0C;&#x5728;&#x521B;&#x5EFA;&#x4E4B;&#x524D;&#x8981;&#x521B;&#x5EFA;&#x4E2A;<strong>ViewHolder</strong>&#x76F8;&#x4FE1;&#x5728;&#x539F;&#x6765;&#x7684;<strong>adapter</strong>&#x4E2D;&#x5E94;&#x8BE5;&#x6709;&#x4F7F;&#x7528;&#x8FC7;&#x5427;.&#x8FD9;&#x91CC;&#x7EE7;&#x627F;<strong>RecyclerView.ViewHolder</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static class NormalViewHolder extends RecyclerView.ViewHolder {</div><div class=\"line\">        @Bind(R.id.item_tv)</div><div class=\"line\">        TextView itemTv;</div><div class=\"line\">        public NormalViewHolder(View itemView) {</div><div class=\"line\">            super(itemView);</div><div class=\"line\">            ButterKnife.bind(this, itemView);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x5728;<strong>onCreateViewHolder</strong>&#x4E2D;&#x8C03;&#x7528;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">   public NormalViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {</div><div class=\"line\">       return new NormalViewHolder(mLayoutInflater.inflate(R.layout.item_text, parent, false));</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<h3 id=\"onBindViewHolder\"><a href=\"#onBindViewHolder\" class=\"headerlink\" title=\"onBindViewHolder\"></a>onBindViewHolder</h3><p>&#x89C6;&#x56FE;&#x521B;&#x5EFA;&#x5B8C;&#x6BD5;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x7684;&#x7ED1;&#x5B9A;&#x4E86;&#xFF0C;&#x4F7F;&#x7528;holder&#x5BF9;&#x63A7;&#x4EF6;&#x8FDB;&#x884C;&#x7ED1;&#x5B9A;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void onBindViewHolder(NormalViewHolder holder, int position) {</div><div class=\"line\">    holder.itemTv.setText((CharSequence) mListData.get(position));</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>OK&#x4E86;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5F88;&#x7B80;&#x5355;&#x5462;&#xFF1F;&#x662F;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x81F3;&#x4E8E;&#x8BBE;&#x7F6E;adapter&#x5C31;&#x4E0D;&#x8BF4;&#x4E86;&#x76F8;&#x4FE1;&#x4E4B;&#x540E;&#x7684;&#x6B65;&#x9AA4;&#x5927;&#x5BB6;&#x90FD;&#x4F1A;&#x4E86;&#x3002;</p>\n<h3 id=\"setLayoutManager\"><a href=\"#setLayoutManager\" class=\"headerlink\" title=\"setLayoutManager\"></a>setLayoutManager</h3><p>&#x4F60;&#x662F;&#x4E0D;&#x662F;&#x60F3;&#x8BF4;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x7684;&#x65B9;&#x5F0F;&#x662F;<strong>ListView</strong>&#x4E0E;<strong>GridView</strong>&#xFF0C;&#x8FD9;&#x4E2A;&#x5176;&#x5B9E;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x53EA;&#x9700;&#x4E00;&#x53E5;&#x4EE3;&#x7801;&#xFF0C;<strong>setLayoutManager()</strong>&#x5373;&#x53EF;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">switch (type) {</div><div class=\"line\">            case App.LINEAR_LAYOUT:</div><div class=\"line\">            \t//ListView</div><div class=\"line\">                recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));</div><div class=\"line\">                break;</div><div class=\"line\">            case App.GRID_LAYOUT:</div><div class=\"line\">            \t//GridView</div><div class=\"line\">                gridLayoutManager = new GridLayoutManager(getActivity(),3);</div><div class=\"line\">                recyclerView.setLayoutManager(gridLayoutManager);</div><div class=\"line\">                break;                </div><div class=\"line\">            case App.STAGGERED_GRID_LAYOUT:</div><div class=\"line\">            \t//Can customize the waterfall flow</div><div class=\"line\">                recyclerView.setLayoutManager(new StaggeredGridLayoutManager(2, OrientationHelper.VERTICAL));</div><div class=\"line\">                break;</div><div class=\"line\">            default:</div><div class=\"line\">                break;</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8BBE;&#x7F6E;&#x4E86;&#x663E;&#x793A;&#x7684;&#x65B9;&#x5F0F;&#x540E;&#x518D;setAdapter()&#x5373;&#x53EF;,&#x6548;&#x679C;&#x56FE;&#x8FD8;&#x662F;&#x653E;&#x5230;&#x6700;&#x540E;&#x4E00;&#x8D77;&#x663E;&#x793A;&#x5427;</em></p>\n</blockquote>\n<h2 id=\"ListView&#x4E0E;GridView&#x5D4C;&#x5957;&#x6548;&#x679C;\"><a href=\"#ListView&#x4E0E;GridView&#x5D4C;&#x5957;&#x6548;&#x679C;\" class=\"headerlink\" title=\"ListView&#x4E0E;GridView&#x5D4C;&#x5957;&#x6548;&#x679C;\"></a>ListView&#x4E0E;GridView&#x5D4C;&#x5957;&#x6548;&#x679C;</h2><p>&#x5982;&#x679C;&#x8981;&#x5B9E;&#x73B0;&#x9996;&#x5C3E;&#x662F;<strong>ListView</strong>&#x5E03;&#x5C40;&#x6548;&#x679C;&#xFF0C;&#x4E2D;&#x95F4;&#x7684;<strong>GridView</strong>&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<strong>RecyclerView.Adapter</strong>&#x63D0;&#x4F9B;&#x7684;<strong>getItemViewType(int position)</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x4E0E;<strong>ListView</strong>&#x7684;<strong>adapter</strong>&#x4E0D;&#x540C;&#x53EA;&#x6709;&#x8FD9;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6CA1;&#x6709;<strong>getViewTypeCount() </strong>&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x9996;&#x5C3E;&#x8981;&#x663E;&#x793A;&#x7684;&#x884C;&#x6570;&#x6765;&#x63A7;&#x5236;&#x663E;&#x793A;&#x7684;&#x5E03;&#x5C40;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public int getItemViewType(int position) {</div><div class=\"line\">        mHeadCount = getHeadCount();</div><div class=\"line\">        mContentCount = getContentCount();</div><div class=\"line\">        mBottomCount = mHeadCount + mContentCount;</div><div class=\"line\">        if (mHeadCount &gt; position) {</div><div class=\"line\">            return App.LINEAR_LAYOUT;//ListView</div><div class=\"line\">        } else if (mBottomCount &lt;= position) {</div><div class=\"line\">            return App.STAGGERED_GRID_LAYOUT;//Can customize the waterfall flow</div><div class=\"line\">        } else {</div><div class=\"line\">            return App.GRID_LAYOUT;//GridView</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;viewtype&#x8FD4;&#x56DE;&#x4E0D;&#x540C;&#x7684;&#x5E03;&#x5C40;</em></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {</div><div class=\"line\">        switch (viewType) {</div><div class=\"line\">            case App.LINEAR_LAYOUT:</div><div class=\"line\">                return onCreateHeadViewHolder(parent);</div><div class=\"line\">            case App.GRID_LAYOUT:</div><div class=\"line\">                return onCreateContentViewHolder(parent);</div><div class=\"line\">            case App.STAGGERED_GRID_LAYOUT:</div><div class=\"line\">                return onCreateBottomViewHolder(parent);</div><div class=\"line\">            default:</div><div class=\"line\">                return null;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"RecyclerView&#x52A8;&#x753B;\"><a href=\"#RecyclerView&#x52A8;&#x753B;\" class=\"headerlink\" title=\"RecyclerView&#x52A8;&#x753B;\"></a>RecyclerView&#x52A8;&#x753B;</h2><p><strong>RecyclerView</strong>&#x7684;<strong>adapter</strong>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x90E8;&#x5206;:</p>\n<ul>\n<li>notifyItemRemoved(int position)</li>\n<li>notifyItemInserted(int position)</li>\n<li>notifyItemChanged(int position)</li>\n<li>notifyItemRangeChanged(int positionStart,int itemCount)</li>\n</ul>\n<p>&#x53EA;&#x8981;&#x5728;&#x6570;&#x636E;&#x6539;&#x53D8;&#x65F6;&#x901A;&#x8FC7;<strong>adapter</strong>&#x8C03;&#x7528;&#x5C31;&#x884C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">@OnClick(R.id.item_tv)</div><div class=\"line\">       public void onClick() {</div><div class=\"line\">           if (getLayoutPosition() != 1) {</div><div class=\"line\">               animationAdapter.mListData.add(&quot;add&quot;+getLayoutPosition());</div><div class=\"line\">               animationAdapter.notifyItemInserted(getLayoutPosition());</div><div class=\"line\">           } else {</div><div class=\"line\">               animationAdapter.mListData.remove(getLayoutPosition());</div><div class=\"line\">               animationAdapter.notifyItemRemoved(getLayoutPosition());</div><div class=\"line\">           }</div><div class=\"line\">       }</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;<strong>recyclerView</strong>&#x7684;<strong>setItemAnimator()</strong>&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x52A8;&#x753B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">recyclerView.setItemAnimator(new DefaultItemAnimator());</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x53EA;&#x8981;<strong>extends</strong> ItemAnimator&#x91CD;&#x5199;&#x51E0;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x5C55;&#x5F00;&#x4E86;&#xFF0C;&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x53BB;&#x8BD5;&#x8BD5;&#x3002;</p>\n<h2 id=\"RecyclerView&#x7684;CursorAdapter\"><a href=\"#RecyclerView&#x7684;CursorAdapter\" class=\"headerlink\" title=\"RecyclerView&#x7684;CursorAdapter\"></a>RecyclerView&#x7684;CursorAdapter</h2><p>&#x8BB2;&#x5230;&#x8FD9;&#x91CC;&#x4E86;&#x4F60;&#x53EF;&#x4EE5;&#x80FD;&#x4F1A;&#x8BA4;&#x4E3A;<strong>CursorAdapter</strong>&#x4E5F;&#x662F;&#x8DDF;&#x539F;&#x6765;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x4F46;&#x6211;&#x8981;&#x8BF4;&#x7684;&#x662F;<strong>RecyclerView</strong>&#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x6709;&#x5173;&#x4E0E;<strong>CursorAdapter</strong>&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x6240;&#x4EE5;&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x4F7F;&#x7528;<strong>CursorAdapter</strong>&#x65F6;&#x8981;&#x600E;&#x4E48;&#x529E;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;<strong>CursorAdapter</strong>&#x7684;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5934;&#x75DB;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x770B;&#x8D77;&#x6765;&#x786E;&#x5B9E;&#x6709;&#x70B9;&#x9EBB;&#x70E6;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x544A;&#x8BC9;&#x4F60;&#x4EEC;&#x5B9E;&#x73B0;&#x4E5F;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E48;&#x8BF4;&#x5462;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x4EFF;&#x9020;<strong>ListView</strong>&#x7684;<strong>CursorAdapter</strong>&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>\n<h3 id=\"CursorFilter\"><a href=\"#CursorFilter\" class=\"headerlink\" title=\"CursorFilter\"></a>CursorFilter</h3><p>&#x8FD9;&#x4E2A;&#x662F;<strong>Cursor</strong>&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x627E;&#x5230;<strong>ListView</strong>&#x7684;<strong>CursorFilter</strong>&#x590D;&#x5236;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x4EE3;&#x7801;&#x6CA1;&#x4EC0;&#x4E48;&#x8D34;&#x7684;&#xFF0C;&#x90FD;&#x662F;&#x6E90;&#x7801;&#xFF0C;&#x81EA;&#x5DF1;&#x53EF;&#x4EE5;&#x53BB;&#x67E5;&#x770B;.</p>\n<h3 id=\"RecyclerBaseCursorAdapter\"><a href=\"#RecyclerBaseCursorAdapter\" class=\"headerlink\" title=\"RecyclerBaseCursorAdapter\"></a>RecyclerBaseCursorAdapter</h3><p>&#x8FD9;&#x4E2A;&#x62BD;&#x8C61;&#x7C7B;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x662F;&#x4E0E;<strong>ListView</strong>&#x7684;<strong>CursorAdapter</strong>&#x76F8;&#x540C;&#xFF0C;&#x53EA;&#x662F;&#x6709;&#x51E0;&#x4E2A;&#x5730;&#x65B9;&#x9700;&#x8981;&#x7279;&#x522B;&#x63D0;&#x9192;&#x4E0B;</p>\n<ul>\n<li>&#x539F;&#x6765;&#x7684;&#x6709;notifyDataSetInvalidated()&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;RecyclerView&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;notifyDataSetChanged()&#x66FF;&#x4EE3;</li>\n<li>&#x539F;&#x6765;&#x7684;hasStableIds() &#x65B9;&#x6CD5;&#x4E5F;&#x6CA1;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;setHasStableIds(true)&#x8BBE;&#x7F6E;&#x4E3A;ture&#x6765;&#x5B9E;&#x73B0;&#x76F8;&#x540C;&#x7684;&#x6548;&#x679C;</li>\n<li>&#x539F;&#x6765;&#x7684;<strong>getView()</strong>&#x65B9;&#x6CD5;&#x8981;&#x66FF;&#x6362;&#x6210;<strong>onBindViewHolder()</strong>&#x65B9;&#x6CD5;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">void init(Context context, Cursor c, int flags) {</div><div class=\"line\">        boolean cursorPresent = c != null;</div><div class=\"line\">        mCursor = c;</div><div class=\"line\">        mDataValid = cursorPresent;</div><div class=\"line\">        mContext = context;</div><div class=\"line\">        mRowIDColumn = cursorPresent ? c.getColumnIndexOrThrow(&quot;_id&quot;) : -1;</div><div class=\"line\">        if ((flags &amp; FLAG_REGISTER_CONTENT_OBSERVER) == FLAG_REGISTER_CONTENT_OBSERVER) {</div><div class=\"line\">            mChangeObserver = new ChangeObserver();</div><div class=\"line\">            mDataSetObserver = new MyDataSetObserver();</div><div class=\"line\">        } else {</div><div class=\"line\">            mChangeObserver = null;</div><div class=\"line\">            mDataSetObserver = null;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        if (cursorPresent) {</div><div class=\"line\">            if (mChangeObserver != null) c.registerContentObserver(mChangeObserver);</div><div class=\"line\">            if (mDataSetObserver != null) c.registerDataSetObserver(mDataSetObserver);</div><div class=\"line\">        }</div><div class=\"line\">        //should set true to init</div><div class=\"line\">        setHasStableIds(true);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public void onInvalidated() {</div><div class=\"line\">            mDataValid = false;</div><div class=\"line\">//            notifyDataSetInvalidated();</div><div class=\"line\">            //there is no notifyDataSetInvalidated method we should use notifyDataSetChanged method;</div><div class=\"line\">            notifyDataSetChanged();</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x57FA;&#x672C;&#x4E0A;&#x4E3B;&#x8981;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#x4E86;&#xFF0C;&#x66F4;&#x591A;&#x8BE6;&#x60C5;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x540E;&#x9762;&#x7684;<strong>Demo</strong>&#x94FE;&#x63A5;&#xFF0C;&#x6700;&#x540E;&#x4F7F;&#x7528;&#x90FD;&#x76F8;&#x540C;&#x7684;&#x5957;&#x8DEF;&#xFF0C;&#x7EE7;&#x627F;&#x8BE5;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x76F8;&#x4FE1;&#x5E94;&#x8BE5;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;</em></p>\n</blockquote>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/04/02/RecyclerView&#x6DF1;&#x5165;&#x6D45;&#x51FA;/RecyclerView.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<h1 id=\"&#x7ED3;&#x8BED;\"><a href=\"#&#x7ED3;&#x8BED;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BED;\"></a>&#x7ED3;&#x8BED;</h1><p>&#x6E90;&#x7801;&#x5730;&#x5740;&#x94FE;&#x63A5;&#xFF1A;<a href=\"https://github.com/idisfkj/RecyclerView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/RecyclerView</a><br>&#x6700;&#x540E;&#x611F;&#x8C22;&#x5927;&#x5BB6;&#x7684;&#x9605;&#x8BFB;&#xFF0C;&#x6709;&#x4E0D;&#x8DB3;&#x7684;&#x5730;&#x65B9;&#x6B22;&#x8FCE;&#x6307;&#x51FA;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android 开源SlideSwitch源码分析","url":"https://idisfkj.github.io/2016/03/26/Android-开源SlideSwitch源码分析/","content":"<p>&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;<strong>android</strong>&#x7684;&#x6700;&#x5927;&#x597D;&#x5904;&#x5C31;&#x662F;&#x5F00;&#x6E90;&#xFF0C;&#x5176;&#x5B9E;&#x5F88;&#x591A;&#x9879;&#x76EE;&#x80FD;&#x5168;&#x90E8;&#x7528;&#x5F00;&#x6E90;&#x5C31;&#x80FD;&#x641E;&#x5B9A;&#x3002;&#x4F46;&#x662F;&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x7528;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x61C2;&#x5F97;&#x5B83;&#x4EEC;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x8FC7;&#x773C;&#x4E91;&#x70DF;&#xFF0C;&#x884C;&#x5C38;&#x8D70;&#x8089;&#xFF0C;&#x53EA;&#x6709;&#x7A7A;&#x58F3;&#x6CA1;&#x6709;&#x5B9D;&#x8D35;&#x7684;&#x601D;&#x60F3;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4E00;&#x65E6;&#x8981;&#x7EF4;&#x62A4;&#x4E8E;&#x4F18;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9002;&#x5E94;&#x9700;&#x6C42;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x90A3;&#x4E9B;&#x53EA;&#x4F1A;&#x62FF;&#x6765;&#x7528;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x53EA;&#x80FD;&#x76EE;&#x77AA;&#x53E3;&#x5446;&#x3002;&#x8FD9;&#x6837;&#x4E0D;&#x4EC5;&#x6CA1;&#x6709;&#x52A0;&#x5FEB;&#x6211;&#x4EEC;&#x7684;&#x5F00;&#x53D1;&#x901F;&#x5EA6;&#x800C;&#x4E14;&#x8FD8;&#x4F1A;&#x8BA9;&#x6211;&#x4EEC;&#x5168;&#x76D8;&#x7686;&#x8F93;&#x3002;&#x597D;&#x4E86;&#x5176;&#x5B83;&#x7684;&#x4E5F;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x6B63;&#x5F0F;&#x8FDB;&#x5165;&#x4E3B;&#x9898;&#xFF0C;&#x5206;&#x4EAB;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#x6700;&#x8FD1;&#x5BF9;<strong>SlideSwitch</strong>&#x5F00;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x7406;&#x89E3;&#x3002;</p>\n<hr>\n<h1 id=\"&#x8BF4;&#x660E;\"><a href=\"#&#x8BF4;&#x660E;\" class=\"headerlink\" title=\"&#x8BF4;&#x660E;\"></a>&#x8BF4;&#x660E;</h1><p>&#x9996;&#x5148;&#x8FD8;&#x662F;&#x8981;&#x8BF4;&#x660E;&#x4E0B;<strong>SlideSwitch</strong>&#x662F;&#x4EC0;&#x4E48;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x5176;&#x5B9E;&#x5B83;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6211;&#x4EEC;&#x51E0;&#x4E4E;&#x6BCF;&#x4E2A;&#x9879;&#x76EE;&#x4E2D;&#x90FD;&#x4F1A;&#x9047;&#x5230;&#x7684;&#x6ED1;&#x52A8;&#x5F00;&#x5173;&#xFF0C;&#x8FD8;&#x4E0D;&#x61C2;&#x8BF7;&#x770B;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<h1 id=\"&#x5206;&#x6790;&#x8981;&#x70B9;\"><a href=\"#&#x5206;&#x6790;&#x8981;&#x70B9;\" class=\"headerlink\" title=\"&#x5206;&#x6790;&#x8981;&#x70B9;\"></a>&#x5206;&#x6790;&#x8981;&#x70B9;</h1><ul>\n<li>TypedArray &#x7684;&#x4F7F;&#x7528;</li>\n<li>onMeasure &#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x521D;&#x59CB;&#x5316;</li>\n<li>onDraw &#x7ED8;&#x5236;&#x56FE;&#x5F62;</li>\n<li>onTouchEvent &#x76D1;&#x542C;&#x89E6;&#x6478;&#x70B9;&#x51FB;</li>\n<li>ValueAnimator &#x52A8;&#x753B;&#x5B9E;&#x73B0;</li>\n<li>SlideSwitchListener &#x63A5;&#x53E3;</li>\n</ul>\n<h2 id=\"TypedArray\"><a href=\"#TypedArray\" class=\"headerlink\" title=\"TypedArray\"></a>TypedArray</h2><p>&#x4E00;&#x822C;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#x90FD;&#x8981;&#x7528;&#x5230;<strong>TypedArray</strong>&#xFF0C;&#x6240;&#x4EE5;<strong>SlideSwitch</strong>&#x81EA;&#x7136;&#x5C11;&#x4E0D;&#x4E86;&#x3002;&#x5B83;&#x5C31;&#x7EE7;&#x627F;&#x4E86;<strong>Android</strong>&#x539F;&#x751F;&#x7684;<strong>View</strong>&#x3002;&#x800C;<strong>TypedArray</strong>&#x662F;&#x83B7;&#x53D6;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x7684;&#x53C2;&#x6570;&#x503C;&#x3002;<br>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x4F1A;&#x5728;<strong>styles</strong>&#x6216;&#x8005;<strong>attrs</strong>&#x4E2D;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x53C2;&#x6570;</p>\n<pre><code>&lt;declare-styleable name=&quot;slideswitchview&quot; &gt;\n    &lt;attr name=&quot;themeColor&quot; format=&quot;color&quot;&gt;&lt;/attr&gt;\n    &lt;attr name=&quot;isOpen&quot; format=&quot;boolean&quot;&gt;&lt;/attr&gt;\n    &lt;attr name=&quot;shape&quot; format=&quot;integer&quot;&gt;&lt;/attr&gt;\n&lt;/declare-styleable&gt;      \n</code></pre><p><strong>format</strong>&#x5C5E;&#x6027;&#x7C7B;&#x578B;&#xFF0C;&#x7136;&#x540E;&#x5728;<strong>XML</strong>&#x4E2D;&#x5F15;&#x7528;&#xFF0C;&#x5F15;&#x7528;&#x4E4B;&#x524D;&#x4E00;&#x5B9A;&#x8981;&#x52A0;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x58F0;&#x660E;</p>\n<pre><code>xmlns:slideswitch=&quot;http://schemas.android.com/apk/res/xxx&quot;    \n</code></pre><p>xxx:&#x4EE3;&#x8868;&#x5305;&#x540D;&#x3002;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x5C31;&#x884C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">slideswitch:themeColor=&quot;#ffaaff&quot;</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5728;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#x83B7;&#x53D6;&#x8BBE;&#x7F6E;&#x7684;&#x53C2;&#x6570;&#x503C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.slideswitchview);</div><div class=\"line\">       theme_color = \tta.getColor(R.styleable.slideswitchview_themeColor, DEFAULT_THEME_COLOR);</div><div class=\"line\">       ta.recycle();</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x4F7F;&#x7528;&#x5B8C;&#x540E;&#x52A1;&#x5FC5;recycle&#x5426;&#x5219;&#x4F1A;&#x5BF9;&#x4E0B;&#x6B21;&#x7684;&#x4F7F;&#x7528;&#x9020;&#x6210;&#x5F71;&#x54CD;</em></p>\n</blockquote>\n<h2 id=\"onMeasure\"><a href=\"#onMeasure\" class=\"headerlink\" title=\"onMeasure\"></a>onMeasure</h2><p>&#x6BCF;&#x6B21;&#x89C6;&#x56FE;&#x7684;&#x521B;&#x5EFA;&#x90FD;&#x8981;&#x5148;&#x83B7;&#x53D6;&#x89C6;&#x56FE;&#x7684;&#x5BBD;&#x9AD8;&#xFF0C;&#x6B21;&#x65B9;&#x6CD5;&#x5C31;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x53C2;&#x6570;<strong>widthMeasureSpec</strong>&#x4E0E;<strong>heightMeasuerSpec</strong>&#x4E0D;&#x662F;&#x4E00;&#x822C;&#x7684;&#x5C3A;&#x5BF8;&#xFF0C;&#x800C;&#x662F;&#x5305;&#x62EC;&#x4E86;<strong>size</strong>&#x4E0E;<strong>mode</strong>&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x83B7;&#x53D6;&#x5B9E;&#x9645;&#x7684;&#x5BBD;&#x9AD8;&#xFF0C;&#x8981;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;&#x5206;&#x522B;&#x83B7;&#x53D6;<strong>size</strong>&#x4E0E;<strong>mode</strong>&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">int size = MeasureSpec.getSize(measureSpec);</div><div class=\"line\">int mode = MeasureSpec.getMode(measureSpec);</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<strong>mode</strong>&#x6765;&#x83B7;&#x53D6;<strong>size</strong>&#xFF0C;<strong>mode</strong>&#x6709;&#x4E09;&#x79CD;&#xFF1A;</p>\n<ul>\n<li>EXACTLY  &#x7CBE;&#x786E;&#x5C3A;&#x5BF8;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x6307;&#x5B9A;&#x7684;&#x5C3A;&#x5BF8;</li>\n<li>UNSPECIFIED &#x4E3A;&#x6307;&#x5B9A;&#x7684; </li>\n<li>AT_MOST    &#x6700;&#x5927;&#x5C3A;&#x5BF8; &#x5F62;&#x5982;&#x6307;&#x5B9A;WRAP_CONTENT&#x5728;&#x7236;&#x63A7;&#x4EF6;&#x5141;&#x8BB8;&#x7684;&#x8303;&#x56F4;&#x5185;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (mode == MeasureSpec.EXACTLY) {</div><div class=\"line\">           result = size;</div><div class=\"line\">       } else {</div><div class=\"line\">           result = DefaultSize; //UNSPECIFIED</div><div class=\"line\">           if (mode == MeasureSpec.AT_MOST) {</div><div class=\"line\">               result = Math.min(size, result);</div><div class=\"line\">           }</div><div class=\"line\">       }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5176;&#x5B83;&#x7B80;&#x5355;&#x7684;&#x53C2;&#x6570;&#x503C;&#x8BBE;&#x7F6E;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x8BF7;&#x79FB;&#x6B65;&#x6700;&#x540E;&#x7684;&#x6E90;&#x7801;</em></p>\n</blockquote>\n<h2 id=\"onDraw\"><a href=\"#onDraw\" class=\"headerlink\" title=\"onDraw\"></a>onDraw</h2><p>&#x5C3A;&#x5EA6;&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x540E;&#xFF0C;&#x4E0B;&#x9762;&#x81EA;&#x7136;&#x5C31;&#x662F;&#x7ED8;&#x5236;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x9009;&#x62E9;&#x5F00;&#x5173;&#x5F62;&#x72B6;&#x6709;&#x77E9;&#x5F62;&#x7684;&#x4E5F;&#x6709;&#x5706;&#x89D2;&#x77E9;&#x5F62;&#x6240;&#x4EE5;&#x6839;&#x636E;<strong>shpe</strong>&#x7684;&#x503C;&#x6765;&#x7ED8;&#x5236;&#x76F8;&#x5E94;&#x7684;&#x5F62;&#x72B6;&#xFF0C;&#x8FD9;&#x91CC;&#x4EE5;&#x77E9;&#x5F62;&#x4E3A;&#x4F8B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (shape == 1) {</div><div class=\"line\">           mPaint.setColor(Color.GRAY);</div><div class=\"line\">           //&#x7ED8;&#x5236;close&#x65F6;&#x7684;&#x7070;&#x8272;&#x80CC;&#x666F;</div><div class=\"line\">           canvas.drawRect(backRect, mPaint);</div><div class=\"line\">           mPaint.setColor(theme_color);</div><div class=\"line\">           mPaint.setAlpha(alpha);</div><div class=\"line\">           //&#x7ED8;&#x5236;open&#x65F6;&#x7684;&#x5F69;&#x8272;&#x6E10;&#x53D8;&#x80CC;&#x666F;</div><div class=\"line\">           canvas.drawRect(backRect, mPaint);</div><div class=\"line\">           mPaint.setColor(Color.WHITE);</div><div class=\"line\">           frontRect.set(front_left, pandding, front_left + getMeasuredWidth() / 2 - pandding</div><div class=\"line\">                   , getMeasuredHeight() - pandding);</div><div class=\"line\">           //&#x7ED8;&#x5236;&#x6ED1;&#x52A8;&#x5668;</div><div class=\"line\">           canvas.drawRect(frontRect, mPaint);</div><div class=\"line\">       }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<strong>padding</strong>&#x4EE3;&#x8868;&#x5185;&#x8FB9;&#x8DDD;&#xFF0C;&#x5C31;&#x662F;&#x6ED1;&#x52A8;&#x5668;&#x8DDD;&#x8FB9;&#x6846;&#x7684;&#x8DDD;&#x79BB;</p>\n<h2 id=\"onTouchEvent\"><a href=\"#onTouchEvent\" class=\"headerlink\" title=\"onTouchEvent\"></a>onTouchEvent</h2><p>&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x7684;&#x89E6;&#x6478;&#x6ED1;&#x52A8;&#xFF0C;&#x6839;&#x636E;<strong>ACTION_DOWN</strong>&#xFF0C;<strong>ACTION_MOVE</strong>&#xFF0C;<strong>ACTION_UP</strong>&#x6765;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x6548;&#x679C;&#xFF0C;&#x81F3;&#x4E8E;&#x70B9;&#x5750;&#x6807;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x6E90;&#x7801;&#x5F88;&#x6E05;&#x695A;&#x3002;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x63D0;&#x4E0B;<strong>alpha</strong>&#x53C2;&#x6570;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x662F;&#x5B9E;&#x73B0;&#x989C;&#x8272;&#x7684;&#x900F;&#x660E;&#x6548;&#x679C;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x901A;&#x8FC7;&#x89E6;&#x6478;&#x6ED1;&#x52A8;&#x7684;&#x95F4;&#x8DDD;&#xFF0C;&#x52A8;&#x6001;&#x7684;&#x6539;&#x53D8;<strong>alpha</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">alpha = (int) (255 * (float) front_left / (float) max_left);</div></pre></td></tr></table></figure>\n<h2 id=\"ValueAnimator\"><a href=\"#ValueAnimator\" class=\"headerlink\" title=\"ValueAnimator\"></a>ValueAnimator</h2><p>&#x8FD9;&#x4E2A;&#x7C7B;&#x662F;&#x52A8;&#x753B;&#x6548;&#x679C;&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x901A;&#x8FC7;&#x7B80;&#x5355;&#x7684;&#x51E0;&#x6B65;&#x5C31;&#x80FD;&#x8FC5;&#x901F;&#x7684;&#x5B9E;&#x73B0;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x52A8;&#x753B;<br>&#x9996;&#x5148;&#x5B9E;&#x4F8B;&#x5316;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F;<strong>ofInt()</strong>&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x6709;<strong>ofFloat()</strong>&#x7B49;&#x9759;&#x6001;&#x5B9E;&#x4F8B;&#x5316;&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ValueAnimator valueAnimator = ValueAnimator.ofInt(front_left, toRight ? max_left : min_left);</div></pre></td></tr></table></figure>\n<p>&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x521D;&#x503C;&#x4E0E;&#x7ED3;&#x675F;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x8BBE;&#x7F6E;&#x63D2;&#x503C;&#x5668;</div><div class=\"line\"> \tvalueAnimator.setInterpolator(new  AccelerateDecelerateInterpolator());</div><div class=\"line\">   valueAnimator.setDuration(500);</div><div class=\"line\">   valueAnimator.start();</div></pre></td></tr></table></figure>\n<p><strong>Interpolator</strong>&#x662F;&#x5B9A;&#x4E49;&#x52A8;&#x753B;&#x7684;&#x53D8;&#x5316;&#x8FC7;&#x7A0B;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x53C2;&#x6570;</p>\n<ul>\n<li>AccelerateDecelerateInterpolator &#x5F00;&#x59CB;&#x7ED3;&#x675F;&#x6162; &#x4E2D;&#x95F4;&#x8FC7;&#x7A0B;&#x5FEB;</li>\n<li>AccelerateInterpolator &#x52A0;&#x901F;&#x72B6;&#x6001;</li>\n<li>AnticipateInterpolator &#x5148;&#x540E;&#x79FB;&#x4E00;&#x70B9;&#xFF0C;&#x518D;&#x5FEB;&#x901F;&#x79FB;&#x52A8;</li>\n<li>BounceInterpolator &#x5728;&#x6700;&#x540E;&#x6709;&#x5F39;&#x7403;&#x6548;&#x679C; </li>\n</ul>\n<p>&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x6548;&#x679C;&#xFF0C;&#x53EA;&#x8981;&#x7EE7;&#x627F;T<strong>imeInterpolator</strong>&#x7C7B;&#xFF0C;&#x91CD;&#x5199;<strong>getInterpolation</strong>&#x65B9;&#x6CD5;&#x81EA;&#x5B9A;&#x4E49;&#x8BA1;&#x7B97;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override  </div><div class=\"line\">   public float getInterpolation(float input) {  </div><div class=\"line\">       // &#x7F16;&#x5199;&#x76F8;&#x5173;&#x7684;&#x903B;&#x8F91;&#x8BA1;&#x7B97;  </div><div class=\"line\">       return input;  </div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<p>&#x65E2;&#x7136;&#x662F;&#x52A8;&#x753B;&#x81EA;&#x7136;&#x6709;&#x76D1;&#x542C;&#x8BBE;&#x7F6E;<strong>addUpdateListener</strong>&#x5B9E;&#x65F6;&#x6539;&#x53D8;&#x6ED1;&#x52A8;&#x521D;&#x59CB;&#x503C;&#x96E8;<strong>alpha</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {</div><div class=\"line\">           @Override</div><div class=\"line\">           public void onAnimationUpdate(ValueAnimator animation) {</div><div class=\"line\">               front_left = (int) animation.getAnimatedValue();</div><div class=\"line\">               alpha = (int) (255 * (float) front_left / (float) max_left);</div><div class=\"line\">               initloop();</div><div class=\"line\">           }</div><div class=\"line\">       });</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x589E;&#x52A0;<strong>addListener</strong>&#x8C03;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x63A5;&#x53E3;<strong>SlideSwitchListener</strong>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">valueAnimator.addListener(new AnimatorListenerAdapter() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onAnimationEnd(Animator animation) {</div><div class=\"line\">                if (toRight) {</div><div class=\"line\">                    isOpen = true;</div><div class=\"line\">                    if (mSlideSwitchListener != null)</div><div class=\"line\">                        mSlideSwitchListener.onOpen();</div><div class=\"line\">                    front_start_left = max_left;</div><div class=\"line\">                } else {</div><div class=\"line\">                    isOpen = false;</div><div class=\"line\">                    if (mSlideSwitchListener != null)</div><div class=\"line\">                        mSlideSwitchListener.onClose();</div><div class=\"line\">                    front_start_left = min_left;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<h2 id=\"SlideSwitchListener\"><a href=\"#SlideSwitchListener\" class=\"headerlink\" title=\"SlideSwitchListener\"></a>SlideSwitchListener</h2><p>&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;&#x4F7F;&#x5F97;&#x5728;&#x64CD;&#x4F5C;&#x7C7B;&#x4E2D;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x5B9E;&#x73B0;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x540E;&#x7684;&#x76F8;&#x5173;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void setSlideSwitchListener(SlideSwitchListener sideSwitchListener) {</div><div class=\"line\">        mSlideSwitchListener = sideSwitchListener;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public interface SlideSwitchListener {</div><div class=\"line\">        public void onOpen();</div><div class=\"line\"></div><div class=\"line\">        public void onClose();</div><div class=\"line\"></div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/03/26/Android-&#x5F00;&#x6E90;SlideSwitch&#x6E90;&#x7801;&#x5206;&#x6790;/2.gif\" alt=\"icon\"></p>\n<p>&#x53EA;&#x8981;&#x7A0D;&#x5FAE;&#x590D;&#x6742;&#x7684;&#x5728;&#x8FD9;&#x91CC;&#x90FD;&#x8BB2;&#x5230;&#x4E86;&#xFF0C;&#x8FD8;&#x6709;&#x4E0D;&#x660E;&#x767D;&#x7684;&#x53EF;&#x4EE5;&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x4E0B;&#x9762;&#x6211;&#x6CE8;&#x91CA;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x6216;&#x8005;&#x7559;&#x8A00;&#xFF0C;&#x8C22;&#x8C22;&#x6D4F;&#x89C8;&#x3002;</p>\n<p>&#x6CE8;&#x91CA;&#x6E90;&#x7801;&#x94FE;&#x63A5;&#xFF1A;<a href=\"https://github.com/idisfkj/SlideSwitchView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/SlideSwitchView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"圆形头像","url":"https://idisfkj.github.io/2016/03/20/circleView/","content":"<p>&#x73B0;&#x5728;&#x7684;App&#x5934;&#x50CF;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x662F;&#x5706;&#x5F62;&#x7684;&#x4E86;&#xFF0C;&#x867D;&#x7136;&#x4E0D;&#x77E5;&#x9053;&#x8FD9;&#x8D8B;&#x52BF;&#x662F;&#x600E;&#x4E48;&#x6D41;&#x884C;&#x8D77;&#x6765;&#x7684;&#xFF0C;&#x4F46;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;<strong>Android</strong>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x8FD8;&#x662F;&#x8981;&#x968F;&#x7740;&#x6F6E;&#x6D41;&#x524D;&#x8FDB;&#x3002;&#x6240;&#x4EE5;&#x81EA;&#x5DF1;&#x5C31;&#x7814;&#x7A76;&#x4E86;&#x4E00;&#x4E0B;&#x5706;&#x5F62;&#x5934;&#x50CF;&#x7684;&#x5236;&#x4F5C;&#xFF0C;&#x867D;&#x7136;&#x4E5F;&#x6709;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x5F00;&#x6E90;&#x5E93;&#xFF0C;&#x4F46;&#x81EA;&#x5DF1;&#x61C2;&#x5F97;&#x539F;&#x7406;&#x8FD8;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x5C31;&#x5206;&#x4EAB;&#x4E0B;&#x81EA;&#x5DF1;&#x7684;&#x6240;&#x5F97;&#xFF0C;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6307;&#x6559;&#x3002;</p>\n<hr>\n<h1 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h1><p>&#x5706;&#x5F62;&#x5934;&#x50CF;&#x561B;&#x8BF4;&#x5230;&#x5E95;&#x5C31;&#x662F;&#x5F20;&#x56FE;&#x7247;&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x5706;&#x5F62;&#x56FE;&#x7247;&#x63A7;&#x4EF6;&#x81EA;&#x7136;&#x8981;&#x7EE7;&#x627F;<strong>Android</strong>&#x539F;&#x751F;&#x7684;<strong>ImgaeView</strong>,&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;<strong>setImageBitmap</strong>&#xFF0C;<strong>setImageDrawable</strong>&#xFF0C;<strong>setImageURI</strong>&#xFF0C;<strong>setImageResource</strong>&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5F53;&#x7136;&#x4E3B;&#x8981;&#x7684;<strong>onDraw</strong>&#x65B9;&#x6CD5;&#x4E5F;&#x4E0D;&#x80FD;&#x7F3A;&#x5C11;&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x8981;&#x5B9E;&#x73B0;&#x5706;&#x5F62;&#x5934;&#x50CF;&#x7684;&#x7ED8;&#x5236;&#x3002;&#x8FD9;&#x91CC;&#x8FD8;&#x8981;&#x501F;&#x52A9;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x7684;&#x7C7B;<strong>Matrix</strong>&#x4E0E;<strong>BitmapShader</strong>&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E24;&#x4E2A;&#x7C7B;&#x5B9E;&#x73B0;&#x56FE;&#x7247;&#x7684;&#x7F29;&#x653E;&#x6548;&#x679C;&#x3002;</p>\n<h2 id=\"BitmapShader&#x89E3;&#x91CA;\"><a href=\"#BitmapShader&#x89E3;&#x91CA;\" class=\"headerlink\" title=\"BitmapShader&#x89E3;&#x91CA;\"></a>BitmapShader&#x89E3;&#x91CA;</h2><p><strong>BitmapShader</strong>&#x6709;&#x4E09;&#x4E2A;&#x53C2;&#x6570;  </p>\n<ul>\n<li>bitmap - The bitmap to use inside the shader</li>\n<li>tileX - The tiling mode for x to draw the bitmap in.</li>\n<li>tileY - The tiling mode for y to draw the bitmap in.</li>\n</ul>\n<p><strong>tileX</strong>&#x4E0E;<strong>tileY</strong>&#x90FD;&#x662F;<strong>Shader.TileMode</strong>&#x7C7B;&#x578B;&#xFF0C;&#x6709;&#x4E09;&#x4E2A;&#x9009;&#x62E9;&#x503C;</p>\n<ul>\n<li>CLAMP &#x62C9;&#x4F38; </li>\n<li>PEREAT &#x91CD;&#x590D;</li>\n<li>MIRROR &#x955C;&#x50CF;</li>\n</ul>\n<blockquote>\n<p><em>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x53EA;&#x8981;&#x4F7F;&#x7528;CLAMP&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x60F3;&#x77E5;&#x9053;&#x5176;&#x5B83;&#x7684;&#x9009;&#x62E9;&#x503C;&#x7684;&#x5177;&#x4F53;&#x6548;&#x679C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://blog.csdn.net/sjf0115/article/details/7267532\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/sjf0115/article/details/7267532</a></em></p>\n</blockquote>\n<h2 id=\"&#x83B7;&#x53D6;&#x7F29;&#x653E;&#x503C;\"><a href=\"#&#x83B7;&#x53D6;&#x7F29;&#x653E;&#x503C;\" class=\"headerlink\" title=\"&#x83B7;&#x53D6;&#x7F29;&#x653E;&#x503C;\"></a>&#x83B7;&#x53D6;&#x7F29;&#x653E;&#x503C;</h2><p>&#x56FE;&#x7247;&#x8FC7;&#x5927;&#x4E0E;&#x8FC7;&#x5C0F;&#x90FD;&#x4E0D;&#x597D;&#xFF0C;&#x4E0D;&#x53EF;&#x80FD;&#x7EDD;&#x5BF9;&#x7684;&#x9002;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x7F29;&#x653E;&#x503C;&#x7684;&#x83B7;&#x53D6;&#x662F;&#x6700;&#x91CD;&#x8981;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x8981;&#x6BD4;&#x8F83;&#x56FE;&#x7247;&#x5BBD;&#x9AD8;&#x4E0E;&#x63A7;&#x4EF6;&#x5BBD;&#x9AD8;&#xFF0C;&#x901A;&#x8FC7;&#x9519;&#x4F4D;&#x76F8;&#x4E58;&#x6765;&#x6BD4;&#x8F83;&#x56FE;&#x7247;&#x7684;&#x5BBD;&#x9AD8;&#x54EA;&#x4E2A;&#x4E0E;&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x9AD8;&#x76F8;&#x5DEE;&#x66F4;&#x5927;&#x3002;&#x53D6;&#x76F8;&#x5DEE;&#x5927;&#x7684;&#x503C;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x5F97;&#x5230;&#x7F29;&#x653E;&#x503C;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mDrawableRec.set(0, 0, getWidth(), getHeight());</div><div class=\"line\">        if (mBitmapWidth * mDrawableRec.height() &gt; mDrawableRec.width() * mBitmapheight) {</div><div class=\"line\">            scal = mDrawableRec.height() / mBitmapheight;</div><div class=\"line\">        } else {</div><div class=\"line\">            scal = mDrawableRec.width() / mBitmapWidth;</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<h3 id=\"&#x8BBE;&#x7F6E;BitmapShader\"><a href=\"#&#x8BBE;&#x7F6E;BitmapShader\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;BitmapShader\"></a>&#x8BBE;&#x7F6E;BitmapShader</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mBitmapShader = new BitmapShader(mBitmap, \tShader.TileMode.CLAMP, Shader.TileMode.CLAMP);</div><div class=\"line\">mPaint.setShader(mBitmapShader);</div></pre></td></tr></table></figure>\n<h3 id=\"&#x8BBE;&#x7F6E;&#x7F29;&#x653E;&#x4E0E;&#x77E9;&#x9635;\"><a href=\"#&#x8BBE;&#x7F6E;&#x7F29;&#x653E;&#x4E0E;&#x77E9;&#x9635;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x7F29;&#x653E;&#x4E0E;&#x77E9;&#x9635;\"></a>&#x8BBE;&#x7F6E;&#x7F29;&#x653E;&#x4E0E;&#x77E9;&#x9635;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mMatrix.setScale(scal, scal);</div><div class=\"line\">mBitmapShader.setLocalMatrix(mMatrix);</div></pre></td></tr></table></figure>\n<h2 id=\"onDraw&#x7ED8;&#x5236;\"><a href=\"#onDraw&#x7ED8;&#x5236;\" class=\"headerlink\" title=\"onDraw&#x7ED8;&#x5236;\"></a>onDraw&#x7ED8;&#x5236;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">protected void onDraw(Canvas canvas) {</div><div class=\"line\">    if (mBitmap == null) {</div><div class=\"line\">        return;</div><div class=\"line\">    }</div><div class=\"line\">    //&#x586B;&#x5145;</div><div class=\"line\">    canvas.drawCircle(getWidth() / 2.0f, getHeight() / 2.0f, mRadius, mFillPaint);</div><div class=\"line\">    canvas.drawCircle(getWidth() / 2.0f, getHeight() / 2.0f, mRadius, mPaint);</div><div class=\"line\">    //&#x63CF;&#x8FB9;</div><div class=\"line\">    if (mStrokeWidth != 0)</div><div class=\"line\">    canvas.drawCircle(getWidth() / 2.0f, getHeight() / 2.0f, mRadius, mBorderPaint);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x91CC;&#x7684;&#x987A;&#x5E8F;&#x4E0D;&#x8981;&#x6253;&#x4E71;&#xFF0C;&#x5426;&#x5219;&#x56DE;&#x5F71;&#x54CD;&#x56FE;&#x7247;&#x539F;&#x6709;&#x7684;&#x989C;&#x8272;&#x6548;&#x679C;</em></p>\n</blockquote>\n<p>&#x597D;&#x4E86;&#x4E3B;&#x8981;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#x4E86;&#xFF0C;&#x5176;&#x5B9E;&#x53EA;&#x8981;&#x7406;&#x89E3;&#x4E0A;&#x9762;&#x7684;&#x5C31;&#x57FA;&#x672C;&#x4E0A;&#x638C;&#x63E1;&#x4E86;&#x5706;&#x5F62;&#x5934;&#x50CF;&#x7684;&#x8BBE;&#x7F6E;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\"><a href=\"#&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\"></a>&#x5BF9;&#x5916;&#x65B9;&#x6CD5;</h2><ul>\n<li>setBorderColor(); &#x8BBE;&#x7F6E;&#x8FB9;&#x754C;&#x989C;&#x8272;</li>\n<li>setFillColor();    &#x586B;&#x5145;&#x989C;&#x8272;</li>\n<li>setStrokeWidth(); &#x63CF;&#x8FB9;&#x5BBD;&#x5EA6;</li>\n</ul>\n<h2 id=\"&#x5F15;&#x7528;\"><a href=\"#&#x5F15;&#x7528;\" class=\"headerlink\" title=\"&#x5F15;&#x7528;\"></a>&#x5F15;&#x7528;</h2><p>&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#x76F4;&#x63A5;&#x5728;xml&#x6587;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x81EA;&#x5DF1;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<strong>CircleImageView</strong>&#x63A7;&#x4EF6;&#xFF0C;</p>\n<p><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>&#x5982;&#x679C;&#x8981;&#x5728;xml&#x4E2D;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x663E;&#x793A;&#x56FE;&#x7247;&#x65F6;&#x4E0D;&#x8981;&#x4F7F;&#x7528;background&#x8BBE;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x5DEE;&#x9519;&#xFF0C;&#x4F7F;&#x7528;src&#x5C31;&#x4E0D;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/03/20/circleView/CircleImageView.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<hr>\n<p>&#x66F4;&#x591A;&#x6E90;&#x7801;&#xFF1A;<a href=\"https://github.com/idisfkj/CircleImageView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/CircleImageView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"github中README.md插入图片","url":"https://idisfkj.github.io/2016/03/13/github-README/","content":"<p>&#x5728;<strong>Github</strong>&#x4E0A;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x6709;&#x4E2A;README.md&#x6587;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x5728;&#x5176;&#x4E2D;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x683C;&#x5F0F;&#x95EE;&#x9898;&#xFF0C;&#x56FA;&#x5B9A;&#x7684;&#x8BB0;&#x4F4F;&#x5C31;&#x884C;</p>\n<h3 id=\"&#x94FE;&#x63A5;&#x683C;&#x5F0F;&#xFF1A;\"><a href=\"#&#x94FE;&#x63A5;&#x683C;&#x5F0F;&#xFF1A;\" class=\"headerlink\" title=\"&#x94FE;&#x63A5;&#x683C;&#x5F0F;&#xFF1A;\"></a>&#x94FE;&#x63A5;&#x683C;&#x5F0F;&#xFF1A;</h3><p>(<a href=\"https://github.com/yourname/your-repository/raw/master/images-folder/xxx.png\" target=\"_blank\" rel=\"external\">https://github.com/yourname/your-repository/raw/master/images-folder/xxx.png</a>)</p>\n<hr>\n<h3 id=\"&#x89E3;&#x91CA;\"><a href=\"#&#x89E3;&#x91CA;\" class=\"headerlink\" title=\"&#x89E3;&#x91CA;\"></a>&#x89E3;&#x91CA;</h3><ul>\n<li>yourname Github&#x5E10;&#x53F7;&#x540D;</li>\n<li>your-repository Github&#x5F53;&#x524D;&#x4ED3;&#x5E93;&#x540D;</li>\n<li>raw/master &#x539F;&#x751F; &#x56FA;&#x5B9A;&#x4E0D;&#x53D8;</li>\n<li>images-folder &#x653E;&#x56FE;&#x7247;&#x7684;&#x6587;&#x4EF6;&#x5939; &#x6CE8;&#x610F;&#x8BE5;&#x6587;&#x4EF6;&#x5939;&#x5728;&#x4F60;&#x672C;&#x5730;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x4E0B;</li>\n<li>xxx.png &#x56FE;&#x7247;</li>\n</ul>\n<h3 id=\"&#x63D0;&#x4EA4;\"><a href=\"#&#x63D0;&#x4EA4;\" class=\"headerlink\" title=\"&#x63D0;&#x4EA4;\"></a>&#x63D0;&#x4EA4;</h3><p>&#x518D;&#x901A;&#x8FC7;git push &#x63D0;&#x4EA4;&#x5230;<strong>Github</strong>&#x4E0A;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"滑轮选择器","url":"https://idisfkj.github.io/2016/03/13/PickerView/","content":"<p>&#x539F;&#x6765;&#x505A;&#x9879;&#x76EE;&#x65F6;&#x7528;&#x5230;&#x4E86;&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x4E5F;&#x662F;&#x501F;&#x9274;&#x4E86;&#x522B;&#x4EBA;&#x7684;&#xFF0C;&#x4F46;&#x5F53;&#x65F6;&#x65F6;&#x95F4;&#x7D27;&#x4E5F;&#x5C31;&#x6CA1;&#x81EA;&#x5DF1;&#x600E;&#x4E48;&#x4F18;&#x5316;&#x4E0E;&#x5DE9;&#x56FA;&#xFF0C;&#x6700;&#x8FD1;&#x65F6;&#x95F4;&#x5145;&#x8DB3;&#x5C31;&#x91CD;&#x65B0;&#x5DE9;&#x56FA;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x8BB0;&#x4E0B;&#x81EA;&#x5DF1;&#x7684;&#x5FC3;&#x5F97;&#x4E0E;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x4EE5;&#x514D;&#x4EE5;&#x540E;&#x751F;&#x758F;&#xFF0C;&#x6709;&#x4E0D;&#x8DB3;&#x7684;&#x5730;&#x65B9;&#x6B22;&#x8FCE;&#x6307;&#x6559;&#x3002;</p>\n<hr>\n<h1 id=\"&#x5B9E;&#x73B0;&#x539F;&#x7406;\"><a href=\"#&#x5B9E;&#x73B0;&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;&#x539F;&#x7406;\"></a>&#x5B9E;&#x73B0;&#x539F;&#x7406;</h1><ul>\n<li>&#x9996;&#x5148;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;<font color=\"#FF0000\">PickerView</font>&#x7EE7;&#x627F;android&#x539F;&#x751F;&#x7684;<font color=\"#FF0000\">View</font></li>\n<li>&#x5B9E;&#x73B0;&#x6ED1;&#x52A8;&#x70B9;&#x51FB;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x89E6;&#x6478;&#x5224;&#x65AD;&#x5B9E;&#x73B0;&#x6ED1;&#x52A8;&#x6548;&#x679C;</li>\n<li>&#x5176;&#x6B21;<font color=\"#FF0000\">TextPicker</font>&#x7EE7;&#x627F;<font color=\"#FF0000\">PopupWindow</font>&#x88C5;&#x8F7D;&#x8FD9;&#x4E2A;<font color=\"#FF0000\">PickerView</font>&#x5B9E;&#x73B0;&#x5C55;&#x793A;</li>\n</ul>\n<blockquote>\n<p><em>&#x539F;&#x7406;&#x8FD8;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x4E3B;&#x8981;&#x7684;&#x5C31;&#x662F;&#x81EA;&#x5B9A;&#x4E49;&#x7684;PickerView</em></p>\n</blockquote>\n<h2 id=\"PickerView&#x7684;&#x5B9E;&#x73B0;\"><a href=\"#PickerView&#x7684;&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"PickerView&#x7684;&#x5B9E;&#x73B0;\"></a>PickerView&#x7684;&#x5B9E;&#x73B0;</h2><p>&#x5176;&#x4E2D;&#x4E3B;&#x8981;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x662F;<font color=\"#FF0000\">onDrawView()</font>&#x4E0E;<font color=\"#FF0000\">drawOtherView</font>&#x7ED8;&#x5236;&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x5668;&#x7684;&#x6587;&#x672C;&#x663E;&#x793A;,&#x7136;&#x540E;&#x5C31;&#x662F;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;<font color=\"#FF0000\">onTouchEvent()</font>&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x3002;</p>\n<h3 id=\"onDrawView&#x7684;&#x60F3;&#x6CD5;\"><a href=\"#onDrawView&#x7684;&#x60F3;&#x6CD5;\" class=\"headerlink\" title=\"onDrawView&#x7684;&#x60F3;&#x6CD5;\"></a>onDrawView&#x7684;&#x60F3;&#x6CD5;</h3><p>&#x6ED1;&#x8F6E;&#x7684;&#x6587;&#x672C;&#x6548;&#x679C;&#x662F;&#x8981;&#x4E2D;&#x95F4;&#x7684;&#x6587;&#x672C;&#x663E;&#x793A;&#x6B63;&#x5E38;&#x800C;&#x4E0A;&#x9762;&#x4E0E;&#x4E0B;&#x9762;&#x7684;&#x6587;&#x672C;&#x8981;&#x76F8;&#x5E94;&#x7684;&#x7F29;&#x5C0F;&#x5B57;&#x4F53;&#x5927;&#x5C0F;&#x8FBE;&#x5230;&#x8FDC;&#x79BB;&#x7684;&#x611F;&#x89C9;&#xFF0C;&#x6240;&#x7528;&#x9996;&#x5148;&#x7ED8;&#x5236;&#x597D;&#x4E2D;&#x95F4;&#x7684;&#x6587;&#x672C;&#xFF0C;&#x518D;&#x4EE5;&#x4E2D;&#x95F4;&#x7684;&#x6587;&#x672C;&#x4E3A;&#x4E2D;&#x5FC3;&#x7ED8;&#x5236;&#x4E0A;&#x4E0B;&#x7684;&#x6587;&#x672C;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x90E8;&#x5206;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void onDrawView(Canvas canvas) {</div><div class=\"line\">       float scal = getParabola((screenHeight / 4.0f), moveLength);</div><div class=\"line\">       //&#x5B57;&#x4F53;&#x5C45;&#x4E2D;&#x663E;&#x793A;</div><div class=\"line\">       float x = screenWidth / 2.0f;</div><div class=\"line\">       float y = screenHeight / 2.0f + moveLength;</div><div class=\"line\">       float size = (maxTextSize - minTextSize) * scal + minTextSize;</div><div class=\"line\">       //&#x83B7;&#x5F97;Paint&#x7684;&#x5C5E;&#x6027;&#x53C2;&#x6570;</div><div class=\"line\">       Paint.FontMetricsInt pfm = mPaint.getFontMetricsInt();</div><div class=\"line\">       //&#x5F97;&#x5230;&#x5C45;&#x4E2D;y</div><div class=\"line\">       float baseLine = y - (pfm.top + pfm.bottom) / 2;</div><div class=\"line\">       mPaint.setTextSize(size);</div><div class=\"line\">       mPaint.setAlpha((int) ((maxAlpha - minAlpha) * scal + minAlpha));</div><div class=\"line\">       //&#x753B;&#x4E2D;&#x95F4;&#x4F4D;&#x7F6E;</div><div class=\"line\">       canvas.drawText(dataList.get(position), x, baseLine, mPaint);</div><div class=\"line\">       //&#x753B;&#x4E0A;&#x9762;&#x4F4D;&#x7F6E;</div><div class=\"line\">       for (int i = 1; position - i &gt;= 0; i++) {</div><div class=\"line\">           drawOtherView(canvas, i, -1);</div><div class=\"line\">       }</div><div class=\"line\">       //&#x753B;&#x4E0B;&#x9762;&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">       for (int i = 1; position + i &lt; dataList.size(); i++) {</div><div class=\"line\">           drawOtherView(canvas, i, 1);</div><div class=\"line\">       }</div><div class=\"line\">   }  </div><div class=\"line\">   </div><div class=\"line\">   </div><div class=\"line\">private void drawOtherView(Canvas canvas, int i, int direction) {</div><div class=\"line\">       float offsetY = (MARGIN * minTextSize * i + moveLength * direction);</div><div class=\"line\">       float scal = getParabola(screenHeight / 4.0f, offsetY);</div><div class=\"line\">       float x = screenWidth / 2.0f;</div><div class=\"line\">       float y = screenHeight / 2.0f + direction * offsetY;</div><div class=\"line\">       float size = (maxTextSize - minTextSize) * scal + minTextSize;</div><div class=\"line\">       float alpha = (maxAlpha - minAlpha) * scal + minAlpha;</div><div class=\"line\">       Paint.FontMetricsInt pfm = mPaint.getFontMetricsInt();</div><div class=\"line\">       float baseLine = (float) (y - (pfm.top + pfm.bottom) / 2.0);</div><div class=\"line\">       mPaint.setTextSize(size);</div><div class=\"line\">       mPaint.setAlpha((int) alpha);</div><div class=\"line\">       canvas.drawText(dataList.get(position + direction * i), x, baseLine, mPaint);</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x5C31;&#x662F;&#x89E6;&#x6478;&#x6ED1;&#x52A8;&#x6548;&#x679C;&#xFF0C;&#x901A;&#x8FC7;<font color=\"#FF0000\">doDown()</font>,<font color=\"#FF0000\">doMove()</font>&#x4E0E;<font color=\"#FF0000\">doUp()</font>&#x6765;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void doMove(MotionEvent event) {</div><div class=\"line\">        moveLength += event.getY() - eventY;</div><div class=\"line\">        if (moveLength &gt; MARGIN * minTextSize / 2) {</div><div class=\"line\">            //&#x624B;&#x6307;&#x5411;&#x4E0B;&#x6ED1;&#x52A8;&#x6ED1;&#x51FA;&#x8FB9;&#x754C;</div><div class=\"line\">            moveFootTOHead();</div><div class=\"line\">            moveLength = moveLength - MARGIN * minTextSize;</div><div class=\"line\">        } else if (moveLength &lt; -MARGIN * minTextSize / 2) {</div><div class=\"line\">            //&#x624B;&#x6307;&#x5411;&#x4E0A;&#x6ED1;&#x52A8;&#x6ED1;&#x51FA;&#x8FB9;&#x754C;</div><div class=\"line\">            moveHeadToFoot();</div><div class=\"line\">            moveLength = moveLength + MARGIN * minTextSize;</div><div class=\"line\">        }</div><div class=\"line\">        eventY = event.getY();</div><div class=\"line\">        invalidate();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>PickerView&#x7684;&#x4E3B;&#x610F;&#x65B9;&#x6CD5;&#x5C31;&#x8FD9;&#x4E9B;&#x4E86;,&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x7B80;&#x5355;</em></p>\n</blockquote>\n<p>&#x5B9E;&#x73B0;&#x4E86;<font color=\"#FF0000\">PickerView</font>&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x5355;&#x72EC;&#x7684;&#x4E00;&#x4E2A;xml&#x4E2D;&#x5E03;&#x5C40;&#xFF0C;xml&#x7684;&#x4EE3;&#x7801;&#x5C31;&#x4E0D;&#x8D34;&#x4E86;</p>\n<h2 id=\"TextPicker\"><a href=\"#TextPicker\" class=\"headerlink\" title=\"TextPicker\"></a>TextPicker</h2><p>&#x5BF9;&#x4E8E;xml&#x4E2D;<font color=\"#FF0000\">PickerView</font>&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#xFF0C;&#x56E0;&#x4E3A;&#x53EF;&#x4EE5;&#x9879;&#x76EE;&#x4E2D;&#x8981;&#x7528;&#x5230;&#x591A;&#x6B21;&#xFF0C;&#x6240;&#x7528;&#x5199;&#x4E2A;&#x5C01;&#x88C5;&#x7C7B;&#x8FD8;&#x662F;&#x5FC5;&#x987B;&#x7684;</p>\n<h3 id=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\"><a href=\"#&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\"></a>&#x5BF9;&#x5916;&#x65B9;&#x6CD5;</h3><ul>\n<li>setPickerTitle(String text)    &#x8BBE;&#x7F6E;&#x6807;&#x9898;</li>\n<li>setData(List<string> dataList, int i) &#x586B;&#x5145;&#x6570;&#x636E;</string></li>\n<li>setMiddleText(int position, int i) &#x8BBE;&#x7F6E;&#x5C45;&#x4E2D;&#x6587;&#x672C;</li>\n<li>getText(int i) &#x83B7;&#x53D6;&#x6587;&#x672C;</li>\n<li>getOK() &#x83B7;&#x53D6;&#x786E;&#x5B9A;&#x63A7;&#x4EF6;</li>\n<li>setPrepare() &#x5F00;&#x542F;</li>\n</ul>\n<h2 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h2><p>&#x6700;&#x540E;&#x5C31;&#x662F;&#x5B9E;&#x4F8B;&#x5316;&#x4E2D;<font color=\"#FF0000\">TextPicker</font>&#x8C03;&#x7528;&#x5176;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">tp = new TextPicker(this);</div><div class=\"line\">        //&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;</div><div class=\"line\">        initData();</div><div class=\"line\">        //&#x52A0;&#x8F7D;&#x6570;&#x636E;</div><div class=\"line\">        tp.setData(leftList, 1);</div><div class=\"line\">        tp.setData(middleList, 2);</div><div class=\"line\">        tp.setData(rightList, 3);</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x6807;&#x9898;</div><div class=\"line\">        tp.setPickerTitle(&quot;&#x6807;&#x9898;&quot;);</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x5C45;&#x4E2D;&#x6587;&#x672C;</div><div class=\"line\">        tp.setMiddleText(5, 1);</div><div class=\"line\">        tp.setMiddleText(2, 2);</div><div class=\"line\">        tp.setMiddleText(25, 3);</div><div class=\"line\">        //&#x51C6;&#x5907;&#x5B8C;&#x6BD5;</div><div class=\"line\">        tp.setPrepare();</div><div class=\"line\">        ok = tp.getOK();</div><div class=\"line\">        ok.setOnClickListener(new View.OnClickListener(){</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onClick(View v) {</div><div class=\"line\">                leftText = tp.getText(1);</div><div class=\"line\">                middleText = tp.getText(2);</div><div class=\"line\">                rightText = tp.getText(3);</div><div class=\"line\">                tv.setText(leftText+&quot;-&quot;+middleText+&quot;-&quot;+rightText);</div><div class=\"line\">                tp.dismiss();</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">        //&#x5C55;&#x793A;</div><div class=\"line\">        tp.showAtLocation(this.findViewById(R.id.main), Gravity.CENTER, 0, 0);</div></pre></td></tr></table></figure>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/03/13/PickerView/pickerView.png\" alt=\"PickerView\"></p>\n<p>&#x66F4;&#x591A;&#x6E90;&#x4EE3;&#x7801;&#xFF1A;<a href=\"https://github.com/idisfkj/idisfkj.picker\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/idisfkj.picker</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Hexo的安装与配置","url":"https://idisfkj.github.io/2016/03/04/Hexo-install/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x6211;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x5F00;&#x59CB;&#x5199;&#x535A;&#x5BA2;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x662F;&#x6211;&#x4E0D;&#x4E45;&#x524D;&#x5728;<strong>stormzhang</strong>&#x7684;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x5E73;&#x53F0;&#x4E0A;&#x770B;&#x5230;&#x4ED6;&#x5199;&#x7684;&#x6210;&#x957F;&#x7ECF;&#x5386;&#xFF0C;&#x4ED6;&#x4E0A;&#x9762;&#x8BF4;&#x5199;&#x535A;&#x5BA2;&#x662F;&#x4ED6;&#x6210;&#x529F;&#x7684;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x90E8;&#x5206;&#x3002;&#x6240;&#x7528;&#x5BF9;&#x4E8E;&#x6211;&#x8FD9;&#x79CD;&#x5C0F;&#x767D;&#xFF0C;&#x4E5F;&#x60F3;&#x5C1D;&#x8BD5;&#x7684;&#x5199;&#x81EA;&#x5DF1;&#x7684;&#x535A;&#x5BA2;&#x3002;&#x4E8E;&#x662F;&#x6211;&#x5C31;&#x5F00;&#x59CB;&#x642D;&#x5EFA;<em>hexo</em>&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x3002;&#x597D;&#x4E86;&#x5E9F;&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x3002;</p>\n<hr>\n<h2 id=\"&#x73AF;&#x5883;&#x914D;&#x7F6E;\"><a href=\"#&#x73AF;&#x5883;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x73AF;&#x5883;&#x914D;&#x7F6E;\"></a>&#x73AF;&#x5883;&#x914D;&#x7F6E;</h2><h3 id=\"&#x5B89;&#x88C5;Node\"><a href=\"#&#x5B89;&#x88C5;Node\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Node\"></a>&#x5B89;&#x88C5;Node</h3><p>&#x53EA;&#x8981;&#x5230;<a href=\"https://nodejs.org/en/\" target=\"_blank\" rel=\"external\">Node.js</a>&#x7684;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7248;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x4E0B;&#x8F7D;&#x540E;&#x4E00;&#x8DEF;&#x5B89;&#x88C5;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x3002;</p>\n<h3 id=\"&#x5B89;&#x88C5;git\"><a href=\"#&#x5B89;&#x88C5;git\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;git\"></a>&#x5B89;&#x88C5;git</h3><p><a href=\"http://git-scm.com/\" target=\"_blank\" rel=\"external\">git</a>&#x7684;&#x5B89;&#x88C5;&#x4E5F;&#x4E0D;&#x590D;&#x6742;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x7ED9;&#x4E2A;<a href=\"http://git-scm.com/book/zh/v1\" target=\"_blank\" rel=\"external\">&#x6559;&#x7A0B;</a>&#x7ED9;&#x4F60;&#x4EEC;&#x5305;&#x62EC;&#x5B89;&#x88C5;&#x4E0E;&#x57FA;&#x672C;&#x7684;&#x4F7F;&#x7528;&#x3002;<br>&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5B89;&#x88C5;git&#x4E0B;&#x9762;&#x4F1A;&#x8BB2;&#x5230;&#x3002;</p>\n<h3 id=\"&#x5B89;&#x88C5;Sublime-Text\"><a href=\"#&#x5B89;&#x88C5;Sublime-Text\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Sublime Text\"></a>&#x5B89;&#x88C5;Sublime Text</h3><blockquote>\n<p><em>&#x4E2A;&#x4EBA;&#x63A8;&#x8350; &#x540E;&#x9762;&#x6587;&#x4EF6;&#x914D;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#x8FD9;&#x4E2A;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x8FD8;&#x662F;&#x5F88;&#x597D;&#x7528;&#x7684;,&#x57FA;&#x672C;&#x4E0A;&#x4EC0;&#x4E48;&#x683C;&#x5F0F;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x80FD;&#x6253;&#x5F00;&#x7F16;&#x8F91;&#x3002;</em></p>\n</blockquote>\n<p><a href=\"http://www.sublimetext.com/3\" target=\"_blank\" rel=\"external\">Sublime Text</a>&#x4E0B;&#x8F7D;</p>\n<h3 id=\"Github&#x8D26;&#x53F7;&#x6CE8;&#x518C;\"><a href=\"#Github&#x8D26;&#x53F7;&#x6CE8;&#x518C;\" class=\"headerlink\" title=\"Github&#x8D26;&#x53F7;&#x6CE8;&#x518C;\"></a>Github&#x8D26;&#x53F7;&#x6CE8;&#x518C;</h3><blockquote>\n<p><em>git&#x5B89;&#x88C5;&#x597D;&#x4E86;&#x540E; &#x5982;&#x679C;&#x6709;github&#x8D26;&#x53F7;&#x4E14;&#x914D;&#x7F6E;&#x4E86;SSH Key&#x8BF7;&#x8DF3;&#x8FC7;&#x8FD9;&#x91CC;</em></p>\n</blockquote>\n<ul>\n<li>&#x9996;&#x5148;&#x53BB;<a href=\"https://github.com/\" target=\"_blank\" rel=\"external\">Github</a>&#x6CE8;&#x518C;&#x8D26;&#x53F7;</li>\n<li>&#x521B;&#x5EFA;&#x4ED3;&#x5E93; New repository &#x5728;Repository name&#x4E2D;&#x5FC5;&#x987B;&#x4E3A;&#x4F60;&#x7684;[your_user_name].github.io <img src=\"/2016/03/04/Hexo-install/github.png\" alt=\"github\"></li>\n<li><p>&#x521B;&#x5EFA;SSH Key</p>\n<p>  &#x521B;&#x5EFA;&#x4F60;&#x7684;&#x7528;&#x6237;&#x540D;&#x4E0E;&#x5BC6;&#x7801;:</p>\n<pre><code>git config --global user.email &quot;your email&quot;\n git config --global user.name &quot;your name&quot;\n</code></pre><p>  &#x751F;&#x6210;&#x5BC6;&#x94A5;&#xFF1A;</p>\n<pre><code>ssh-keygen -t rsa -C &quot;your email&quot;\n</code></pre><p>  &#x6700;&#x540E;&#x6839;&#x636E;&#x63D0;&#x793A;&#x5C31;&#x80FD;&#x751F;&#x6210;SSH Key&#x4E86;<a href=\"https://help.github.com/articles/generating-an-ssh-key/\" target=\"_blank\" rel=\"external\">&#x6559;&#x7A0B;&#x53C2;&#x8003;</a></p>\n</li>\n<li><p>&#x8FDB;&#x5165;Settings&#x4E2D;&#x7684;SSH Keys &#x6DFB;&#x52A0;&#x5BC6;&#x5319;</p>\n</li>\n</ul>\n<h2 id=\"&#x5B89;&#x88C5;hexo\"><a href=\"#&#x5B89;&#x88C5;hexo\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;hexo\"></a>&#x5B89;&#x88C5;hexo</h2><ul>\n<li><p>&#x8FDB;&#x5165;&#x7EC8;&#x7AEF;&#x6267;&#x884C;</p>\n<pre><code>nmp install -g hexo\n</code></pre></li>\n<li><p>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4F8B;&#x5982;blog &#x8FDB;&#x5165;blog&#x76EE;&#x5F55;</p>\n<pre><code>init hexo \n</code></pre></li>\n</ul>\n<h2 id=\"hexo&#x914D;&#x7F6E;\"><a href=\"#hexo&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"hexo&#x914D;&#x7F6E;\"></a>hexo&#x914D;&#x7F6E;</h2><h3 id=\"&#x751F;&#x6210;&#x9759;&#x6001;&#x9875;&#x9762;\"><a href=\"#&#x751F;&#x6210;&#x9759;&#x6001;&#x9875;&#x9762;\" class=\"headerlink\" title=\"&#x751F;&#x6210;&#x9759;&#x6001;&#x9875;&#x9762;\"></a>&#x751F;&#x6210;&#x9759;&#x6001;&#x9875;&#x9762;</h3><p><code>hexo gengerate</code></p>\n<h3 id=\"&#x5F00;&#x542F;&#x672C;&#x5730;&#x670D;&#x52A1;\"><a href=\"#&#x5F00;&#x542F;&#x672C;&#x5730;&#x670D;&#x52A1;\" class=\"headerlink\" title=\"&#x5F00;&#x542F;&#x672C;&#x5730;&#x670D;&#x52A1;\"></a>&#x5F00;&#x542F;&#x672C;&#x5730;&#x670D;&#x52A1;</h3><p><code>hexo server</code></p>\n<blockquote>\n<p><em>&#x5F00;&#x542F;&#x540E;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668; &#x8F93;&#x5165;<a href=\"http://localhost:4000\" target=\"_blank\" rel=\"external\">http://localhost:4000</a> &#x5C31;&#x80FD;&#x770B;&#x5230;&#x6548;&#x679C;&#x3002;</em></p>\n</blockquote>\n<h3 id=\"&#x65B0;&#x5EFA;&#x6587;&#x7AE0;\"><a href=\"#&#x65B0;&#x5EFA;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x65B0;&#x5EFA;&#x6587;&#x7AE0;\"></a>&#x65B0;&#x5EFA;&#x6587;&#x7AE0;</h3><pre><code>hexo new &quot;PostName&quot;\n</code></pre><p>##&#x90E8;&#x7F72;&#x6B65;&#x9AA4;<br>&#x4E00;&#x822C;&#x90E8;&#x7F72;&#x6B65;&#x9AA4;&#xFF1A;</p>\n<p><code>hexo clean</code>              // &#x6E05;&#x7406;<br><code>hexo generate</code>            // &#x751F;&#x6210;<br><code>hexo deploy</code>            // &#x90E8;&#x7F72;</p>\n<p>&#x6216;&#x8005;&#x7B80;&#x5199;&#xFF1A;</p>\n<p><code>hexo c</code><br><code>hexo g</code><br><code>hexo d</code></p>\n<blockquote>\n<p><em>&#x90E8;&#x7F72;&#x5B8C;&#x6210;&#x540E;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165;<a href=\"http://[your_user_name].github.io\" target=\"_blank\" rel=\"external\">http://[your_user_name].github.io</a> &#x5C31;&#x662F;&#x524D;&#x9762;github&#x4E2D;&#x5EFA;&#x4ED3;&#x5E93;&#x7684;&#x540D;&#x5B57;&#x3002;<br>&#x5230;&#x6B64;&#x6240;&#x7528;&#x7684;&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;</em></p>\n</blockquote>\n<h2 id=\"&#x4E0B;&#x8F7D;&#x4E3B;&#x9898;\"><a href=\"#&#x4E0B;&#x8F7D;&#x4E3B;&#x9898;\" class=\"headerlink\" title=\"&#x4E0B;&#x8F7D;&#x4E3B;&#x9898;\"></a>&#x4E0B;&#x8F7D;&#x4E3B;&#x9898;</h2><p>&#x4E3B;&#x9898;&#x7684;&#x8BDD;&#x5C31;&#x8981;&#x770B;&#x4E2A;&#x4EBA;&#x7684;&#x7231;&#x597D;&#x4E86;&#xFF0C;&#x6211;&#x8FD9;&#x6709;&#x4E00;&#x7CFB;&#x5217;&#x7684;<a href=\"https://github.com/hexojs/hexo/wiki/Themes\" target=\"_blank\" rel=\"external\">&#x4E3B;&#x9898;</a> &#x559C;&#x6B22;&#x54EA;&#x4E2A;&#x5C31;&#x53BB;&#x91CC;&#x9762;&#x4E0B;&#x8F7D;&#x5C31;&#x884C;&#xFF0C;&#x81F3;&#x4E8E;&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x91CC;&#x9762;&#x90FD;&#x8981;&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;&#x3002;</p>\n<blockquote>\n<p><em>&#x6211;&#x7684;&#x4E3B;&#x9898;&#x662F;<a href=\"https://github.com/forsigner/fexo\" target=\"_blank\" rel=\"external\">Fexo</a>&#x5BF9;&#x6211;&#x8FD9;&#x4E2A;&#x4E3B;&#x9898;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x5C31;&#x4E0D;&#x7528;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x53BB;&#x67E5;&#x627E;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"&#x8BC4;&#x8BBA;&#x6846;\"><a href=\"#&#x8BC4;&#x8BBA;&#x6846;\" class=\"headerlink\" title=\"&#x8BC4;&#x8BBA;&#x6846;\"></a>&#x8BC4;&#x8BBA;&#x6846;</h2><p>&#x8BC4;&#x8BBA;&#x6709;Disqus&#x4E0E;&#x591A;&#x8BF4;&#xFF0C;&#x5728;&#x56FD;&#x5185;&#x63A8;&#x8350;&#x591A;&#x8BF4;&#xFF0C;Disqus&#x662F;&#x9762;&#x5411;&#x5168;&#x7403;&#x7684;</p>\n<h3 id=\"Disqus\"><a href=\"#Disqus\" class=\"headerlink\" title=\"Disqus\"></a>Disqus</h3><p><a href=\"https://disqus.com\" target=\"_blank\" rel=\"external\">Disqus</a>&#x6CE8;&#x518C;Disqus&#x5E10;&#x53F7;</p>\n<h3 id=\"&#x591A;&#x8BF4;\"><a href=\"#&#x591A;&#x8BF4;\" class=\"headerlink\" title=\"&#x591A;&#x8BF4;\"></a>&#x591A;&#x8BF4;</h3><p><a href=\"http://duoshuo.com\" target=\"_blank\" rel=\"external\">&#x591A;&#x8BF4;</a>&#x53EF;&#x4EE5;&#x652F;&#x6301;QQ &#x5FAE;&#x4FE1;&#x7B49;&#x767B;&#x5F55;&#xFF0C;&#x767B;&#x5F55;&#x540E;&#x6CE8;&#x518C;&#x57DF;&#x540D;<br>&#x8FDB;&#x5165;hexo&#x76EE;&#x5F55;&#x6253;&#x5F00;_config.yml&#x6587;&#x4EF6;&#x627E;&#x5230;</p>\n<pre><code>&#xFF03;disqus_shortname: [&#x57DF;&#x540D;]\n duoshuo_shortname: [&#x57DF;&#x540D;]\n</code></pre><blockquote>\n<p><em>Disqus&#x4E5F;&#x662F;&#x4E00;&#x6837;</em></p>\n</blockquote>\n<h2 id=\"&#x7EDF;&#x8BA1;\"><a href=\"#&#x7EDF;&#x8BA1;\" class=\"headerlink\" title=\"&#x7EDF;&#x8BA1;\"></a>&#x7EDF;&#x8BA1;</h2><blockquote>\n<p><em>&#x6211;&#x8FD9;&#x91CC;&#x53EA;&#x8BF4;&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;</em></p>\n</blockquote>\n<p>&#x8FDB;&#x5165;<a href=\"http://sitecenter.baidu.com/\" target=\"_blank\" rel=\"external\">&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;</a>&#x6CE8;&#x518C;&#x767B;&#x5F55;&#x5E10;&#x53F7;<br>&#x8FDB;&#x53BB;&#x7F51;&#x7AD9;&#x4E2D;&#x5FC3;&#x7684;&#x4EE3;&#x7801;&#x83B7;&#x53D6;    &#x628A;&#x83B7;&#x53D6;&#x7684;&#x4EE3;&#x7801;&#x653E;&#x5165; hexo/themes/fexo/layout/_partial&#x4E2D;baidu-analytics.ejs&#x6587;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;% if (theme.baidu_analytics){ %&gt;</div><div class=\"line\">  &lt;script type=&quot;text/javascript&quot;&gt;</div><div class=\"line\">  //&#x83B7;&#x53D6;&#x7684;&#x4EE3;&#x7801;</div><div class=\"line\">   &lt;/script&gt;</div><div class=\"line\">&lt;% } %&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"RSS\"><a href=\"#RSS\" class=\"headerlink\" title=\"RSS\"></a>RSS</h2><h3 id=\"feed&#x5B89;&#x88C5;\"><a href=\"#feed&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"feed&#x5B89;&#x88C5;\"></a>feed&#x5B89;&#x88C5;</h3><p><code>npm install hexo-generator-feed</code></p>\n<h3 id=\"&#x5F00;&#x542F;\"><a href=\"#&#x5F00;&#x542F;\" class=\"headerlink\" title=\"&#x5F00;&#x542F;\"></a>&#x5F00;&#x542F;</h3><p>&#x8FDB;&#x5165;hexo_config.yml&#x627E;&#x5230;Plugins</p>\n<pre><code>Plugins:\n - hexo-generator-feed\n</code></pre><p><code>feed:\n    type: atom\n    path: atom.xml\n    limit: 20</code></p>\n<h3 id=\"&#x8BBF;&#x95EE;\"><a href=\"#&#x8BBF;&#x95EE;\" class=\"headerlink\" title=\"&#x8BBF;&#x95EE;\"></a>&#x8BBF;&#x95EE;</h3><p> &#x8BBF;&#x95EE;<a href=\"http://localhost:4000/atom.xml&#x67E5;&#x770B;\" target=\"_blank\" rel=\"external\">http://localhost:4000/atom.xml&#x67E5;&#x770B;</a></p>\n<h3 id=\"&#x5347;&#x7EA7;&#x63D2;&#x4EF6;\"><a href=\"#&#x5347;&#x7EA7;&#x63D2;&#x4EF6;\" class=\"headerlink\" title=\"&#x5347;&#x7EA7;&#x63D2;&#x4EF6;\"></a>&#x5347;&#x7EA7;&#x63D2;&#x4EF6;</h3><pre><code>npm update\n</code></pre><h3 id=\"&#x5378;&#x8F7D;&#x63D2;&#x4EF6;\"><a href=\"#&#x5378;&#x8F7D;&#x63D2;&#x4EF6;\" class=\"headerlink\" title=\"&#x5378;&#x8F7D;&#x63D2;&#x4EF6;\"></a>&#x5378;&#x8F7D;&#x63D2;&#x4EF6;</h3><pre><code>nmp uninstall hexo-generator-feed\n</code></pre><h3 id=\"sitemap&#x5B89;&#x88C5;\"><a href=\"#sitemap&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"sitemap&#x5B89;&#x88C5;\"></a>sitemap&#x5B89;&#x88C5;</h3><p><code>npm install hexo-generator-sitemap</code></p>\n<h3 id=\"&#x5F00;&#x542F;-1\"><a href=\"#&#x5F00;&#x542F;-1\" class=\"headerlink\" title=\"&#x5F00;&#x542F;\"></a>&#x5F00;&#x542F;</h3><p>&#x8FDB;&#x5165;hexo_config.yml&#x627E;&#x5230;Plugins</p>\n<pre><code>Plugins:\n - hexo-generator-sitemap\n</code></pre><p><code>sitemap:\n    path: sitemap.xml</code></p>\n<blockquote>\n<p><em>&#x8BBF;&#x95EE; &#x5347;&#x7EA7; &#x5378;&#x8F7D;&#x4E0E;feed&#x4E00;&#x6837;</em> </p>\n</blockquote>\n<h3 id=\"&#x63D0;&#x9192;\"><a href=\"#&#x63D0;&#x9192;\" class=\"headerlink\" title=\"&#x63D0;&#x9192;\"></a>&#x63D0;&#x9192;</h3><p>&#x53EF;&#x80FD;&#x5B89;&#x88C5;&#x4E86;feed&#x4E0E;sitemap &#x8BBF;&#x95EE;<a href=\"http://localhost:4000/atom.xml\" target=\"_blank\" rel=\"external\">http://localhost:4000/atom.xml</a> &#x4F1A;&#x663E;&#x793A;&#x201C;Cannot GET atom.xml&#x201D;&#x4E0E;&#x201D;Cannot GET sitemap.xml&#x201D;&#x6253;&#x5F00;hexo&#xFF0F;package.jso &#x6DFB;&#x52A0;</p>\n<pre><code>&quot;hexo-generator-feed&quot;: &quot;1.1.0&quot;,\n&quot;hexo-generator-sitemap&quot;: &quot;1.1.2&quot;,\n</code></pre><blockquote>\n<p><em>&#x7248;&#x672C;&#x53F7;&#x5339;&#x914D;&#x81EA;&#x5DF1;&#x7684;</em></p>\n</blockquote>\n<p>&#x6DFB;&#x52A0;&#x5B8C;&#x540E; hexo g  &#x518D;&#x91CD;&#x65B0;&#x8BBF;&#x95EE;</p>\n<h2 id=\"&#x5199;&#x6587;&#x7AE0;\"><a href=\"#&#x5199;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x5199;&#x6587;&#x7AE0;\"></a>&#x5199;&#x6587;&#x7AE0;</h2><p>&#x8FDB;&#x5165;hexo&#xFF0F;source&#xFF0F;_posts &#x627E;&#x5230;&#x76F8;&#x5173;&#x6587;&#x7AE0;&#x7684;.md &#x8FDB;&#x884C;&#x7F16;&#x5199;<br>hexo&#x5199;&#x6587;&#x7AE0;&#x662F;&#x4F7F;&#x7528;Markdown&#x7F16;&#x5199;&#x6587;&#x7AE0; <a href=\"http://www.jianshu.com/p/1e402922ee32/\" target=\"_blank\" rel=\"external\">Markdown&#x2013;&#x5165;&#x95E8;&#x6307;&#x5357;</a></p>\n<blockquote>\n<p><em>&#x5220;&#x9664;&#x6587;&#x7AE0;&#x53EA;&#x8981;&#x5220;&#x9664;&#x5BF9;&#x5E94;&#x7684;.md&#x6587;&#x4EF6;&#x5C31;&#x884C;</em></p>\n</blockquote>\n<h2 id=\"&#x7ED3;&#x675F;\"><a href=\"#&#x7ED3;&#x675F;\" class=\"headerlink\" title=\"&#x7ED3;&#x675F;\"></a>&#x7ED3;&#x675F;</h2><p>&#x597D;&#x4E86;hexo&#x7684;&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x4E86;&#xFF0C;&#x4ECA;&#x5929;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#x4E86;&#xFF0C;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x591A;&#x591A;&#x652F;&#x6301;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904;idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"","url":"https://idisfkj.github.io/css/personal-style.css","content":"@font-face {\n    font-family: &quot;SentyPea&quot;;\n    src: url(&quot;/fonts/SentyPea.eot&quot;); /* IE9 */\n    src: url(&quot;/fonts/SentyPea.eot?#iefix&quot;) format(&quot;embedded-opentype&quot;),\n    url(&quot;/fonts/SentyPea.woff&quot;) format(&quot;woff&quot;),\n    url(&quot;/fonts/SentyPea.ttf&quot;) format(&quot;truetype&quot;),\n    url(&quot;/fonts/SentyPea.svg#SentyPea&quot;) format(&quot;svg&quot;); /* iOS 4.1- */\n    font-style: normal;\n    font-weight: normal;\n}\nhtml.page-home {\n   position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url(&apos;/images/bg.jpg&apos;);\n  background-color: transparent;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  /*background: linear-gradient( #1abc9c, transparent), linear-gradient( 90deg, skyblue, transparent), linear-gradient( -90deg, coral, transparent);*/\n/*  background-blend-mode: screen;\n  background: linear-gradient(to left, #5f2c82, #49a09d);*/\n}"},{"title":"about","url":"https://idisfkj.github.io/about/index.html","content":""},{"title":"category","url":"https://idisfkj.github.io/category/index.html","content":""},{"title":"link","url":"https://idisfkj.github.io/link/index.html","content":""},{"title":"search","url":"https://idisfkj.github.io/search/index.html","content":""},{"title":"tag","url":"https://idisfkj.github.io/tag/index.html","content":""}]