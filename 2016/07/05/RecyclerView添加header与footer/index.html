<!DOCTYPE html>


  <html class="light">


<head>
  <meta charset="utf-8">
  
  <title>RecyclerView添加header与footer | Idisfkj</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="RecyclerView," />
  

  <meta name="description" content="&amp;#x524D;&amp;#x8A00;&amp;#x8FD9;&amp;#x6B21;&amp;#x4E3B;&amp;#x8981;&amp;#x5173;&amp;#x4E8E;RecyclerView&amp;#x6DFB;&amp;#x52A0;header&amp;#x548C;footer&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x90FD;&amp;#x77E5;&amp;#x9053;">
<meta property="og:type" content="article">
<meta property="og:title" content="RecyclerView添加header与footer">
<meta property="og:url" content="https://idisfkj.github.io/2016/07/05/RecyclerView添加header与footer/index.html">
<meta property="og:site_name" content="Idisfkj">
<meta property="og:description" content="&amp;#x524D;&amp;#x8A00;&amp;#x8FD9;&amp;#x6B21;&amp;#x4E3B;&amp;#x8981;&amp;#x5173;&amp;#x4E8E;RecyclerView&amp;#x6DFB;&amp;#x52A0;header&amp;#x548C;footer&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x90FD;&amp;#x77E5;&amp;#x9053;">
<meta property="og:updated_time" content="2016-07-30T14:40:56.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RecyclerView添加header与footer">
<meta name="twitter:description" content="&amp;#x524D;&amp;#x8A00;&amp;#x8FD9;&amp;#x6B21;&amp;#x4E3B;&amp;#x8981;&amp;#x5173;&amp;#x4E8E;RecyclerView&amp;#x6DFB;&amp;#x52A0;header&amp;#x548C;footer&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x90FD;&amp;#x77E5;&amp;#x9053;">

  

  
  <!-- <link href="/favicon.ico" rel="icon" type="image/x-icon"> -->
    <link rel="icon" href="/favicon.ico">
    <!-- <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" /> -->
  
  
  <link href="/css/styles.css?v=5f7f1d39" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?ef89e68af5e136d5c22043f91cd139ea";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


</head>

<body>

  
    <a href="#modal-one" class="toolbox-mobile">盒子</a>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/atom.xml"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ListView源码"><span class="toc-text">ListView源码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EnhanceRecyclerView"><span class="toc-text">EnhanceRecyclerView</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#FixedViewInfo"><span class="toc-text">FixedViewInfo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#addHeaderView与addFooterView"><span class="toc-text">addHeaderView与addFooterView</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setAdapter"><span class="toc-text">setAdapter</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WrapperRecyclerViewAdapter"><span class="toc-text">WrapperRecyclerViewAdapter</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#getItemCount"><span class="toc-text">getItemCount</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#getItemViewType"><span class="toc-text">getItemViewType</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#onCreateViewHolder"><span class="toc-text">onCreateViewHolder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#onBindViewHolder"><span class="toc-text">onBindViewHolder</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#调整"><span class="toc-text">调整</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#adjustSpanSize"><span class="toc-text">adjustSpanSize</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setLayoutManager"><span class="toc-text">setLayoutManager</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-RecyclerView添加header与footer" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">RecyclerView添加header与footer</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2016.07.05</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>idisfkj</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/android/">android</a>
  </span>



      

    </div>
  </header>

  <div class="article-content">
    
      <h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><p>&#x8FD9;&#x6B21;&#x4E3B;&#x8981;&#x5173;&#x4E8E;<code>RecyclerView</code>&#x6DFB;&#x52A0;<code>header</code>&#x548C;<code>footer</code>&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x5728;&#x4F7F;&#x7528;<code>ListView</code>&#x7684;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x80FD;&#x81EA;&#x7531;&#x7684;&#x7ED9;&#x81EA;&#x5DF1;&#x7684;<code>ListView</code>&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x3002;&#x4F7F;&#x7528;<code>addHeaderView()</code>&#x4E0E;<code>addFooterView()</code>&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x3002;&#x53EA;&#x8981;&#x81EA;&#x5DF1;&#x81EA;&#x5B9A;&#x4E49;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#xFF0C;&#x6DFB;&#x52A0;&#x8FDB;&#x53BB;&#x5373;&#x53EF;&#x3002;&#x4F46;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x4FBF;&#x7684;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x4E86;&#x3002;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x65F6;&#x8981;&#x600E;&#x4E48;&#x529E;&#x5462;&#xFF1F;&#x4E0D;&#x6025;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x719F;&#x6089;&#x4E0B;<code>ListView</code>&#x7684;&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x3002;</p>
<h1 id="ListView&#x6E90;&#x7801;"><a href="#ListView&#x6E90;&#x7801;" class="headerlink" title="ListView&#x6E90;&#x7801;"></a>ListView&#x6E90;&#x7801;</h1><p>&#x65E2;&#x7136;<code>ListView</code>&#x5B9E;&#x73B0;&#x4E86;&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5148;&#x8FDB;&#x5165;<code>ListView</code>&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x67E5;&#x770B;&#x5176;&#x4E2D;&#x7684;<code>addHeaderView()</code>&#x65B9;&#x6CD5;&#x4E0E;<code>addFooterView()</code>&#x65B9;&#x6CD5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public void addHeaderView(View v, Object data, boolean isSelectable) {</span><br><span class="line">        final FixedViewInfo info = new FixedViewInfo();</span><br><span class="line">        info.view = v;</span><br><span class="line">        info.data = data;</span><br><span class="line">        info.isSelectable = isSelectable;</span><br><span class="line">        mHeaderViewInfos.add(info);</span><br><span class="line">        mAreAllItemsSelectable &amp;= isSelectable;</span><br><span class="line"></span><br><span class="line">        // Wrap the adapter if it wasn&apos;t already wrapped.</span><br><span class="line">        if (mAdapter != null) {</span><br><span class="line">            if (!(mAdapter instanceof HeaderViewListAdapter)) {</span><br><span class="line">                mAdapter = new HeaderViewListAdapter(mHeaderViewInfos, mFooterViewInfos, mAdapter);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            // In the case of re-adding a header view, or adding one later on,</span><br><span class="line">            // we need to notify the observer.</span><br><span class="line">            if (mDataSetObserver != null) {</span><br><span class="line">                mDataSetObserver.onChanged();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<blockquote>
<p><em>&#x8FD9;&#x91CC;&#x7701;&#x7565;addFooterView()&#x6E90;&#x7801;&#xFF0C;&#x5176;&#x5B9E;&#x8DDF;addHeaderView()&#x57FA;&#x672C;&#x4E00;&#x81F4;</em></p>
</blockquote>
<p>&#x901A;&#x8FC7;<code>addHeaderView()</code>&#x7684;&#x6E90;&#x7801;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x5B83;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;<code>FixedViewInfo</code>&#x7C7B;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class FixedViewInfo {</span><br><span class="line">        /** The view to add to the list */</span><br><span class="line">        public View view;</span><br><span class="line">        /** The data backing the view. This is returned from {@link ListAdapter#getItem(int)}. */</span><br><span class="line">        public Object data;</span><br><span class="line">        /** &lt;code&gt;true&lt;/code&gt; if the fixed view should be selectable in the list */</span><br><span class="line">        public boolean isSelectable;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x4E2D;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x4EE3;&#x7801;&#x5C31;&#x662F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (!(mAdapter instanceof HeaderViewListAdapter)) {</span><br><span class="line">               mAdapter = new HeaderViewListAdapter(mHeaderViewInfos, mFooterViewInfos, mAdapter);</span><br><span class="line">           }</span><br></pre></td></tr></table></figure>
<p>&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;<code>new</code>&#x4E86;&#x4E00;&#x4E2A;<code>HeaderViewListAdapter</code>&#x7C7B;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x518D;&#x8FDB;&#x5165;<code>HeaderViewListAdapter</code>&#x6E90;&#x7801;&#x4E2D;&#xFF0C;&#x53D1;&#x73B0;&#x4ED6;&#x5C31;&#x76F8;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>Adapter</code>&#x5BF9;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;&#x5C01;&#x88C5;&#x3002;</p>
<p>&#x4EE3;&#x7801;&#x90FD;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x601D;&#x60F3;&#xFF0C;&#x5176;&#x4E2D;&#x4E3B;&#x8981;&#x7684;&#x662F;&#x6709;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public int getCount() {</span><br><span class="line">        if (mAdapter != null) {</span><br><span class="line">            return getFootersCount() + getHeadersCount() + mAdapter.getCount();</span><br><span class="line">        } else {</span><br><span class="line">            return getFootersCount() + getHeadersCount();</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<p>&#x6839;&#x636E;<code>position</code>&#x6765;&#x8BBE;&#x7F6E;<code>ViewType</code>&#x7684;&#x503C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public int getItemViewType(int position) {</span><br><span class="line">       int numHeaders = getHeadersCount();</span><br><span class="line">       if (mAdapter != null &amp;&amp; position &gt;= numHeaders) {</span><br><span class="line">           int adjPosition = position - numHeaders;</span><br><span class="line">           int adapterCount = mAdapter.getCount();</span><br><span class="line">           if (adjPosition &lt; adapterCount) {</span><br><span class="line">               return mAdapter.getItemViewType(adjPosition);</span><br><span class="line">           }</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       return AdapterView.ITEM_VIEW_TYPE_HEADER_OR_FOOTER;</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>
<p>&#x518D;&#x770B;<code>getView()</code>&#x65B9;&#x6CD5;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public View getView(int position, View convertView, ViewGroup parent) {</span><br><span class="line">        // Header (negative positions will throw an IndexOutOfBoundsException)</span><br><span class="line">        int numHeaders = getHeadersCount();</span><br><span class="line">        if (position &lt; numHeaders) {</span><br><span class="line">            return mHeaderViewInfos.get(position).view;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // Adapter</span><br><span class="line">        final int adjPosition = position - numHeaders;</span><br><span class="line">        int adapterCount = 0;</span><br><span class="line">        if (mAdapter != null) {</span><br><span class="line">            adapterCount = mAdapter.getCount();</span><br><span class="line">            if (adjPosition &lt; adapterCount) {</span><br><span class="line">                return mAdapter.getView(adjPosition, convertView, parent);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // Footer (off-limits positions will throw an IndexOutOfBoundsException)</span><br><span class="line">        return mFooterViewInfos.get(adjPosition - adapterCount).view;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<p>&#x4E0E;<code>getItemViewType</code>&#x7C7B;&#x4F3C;&#xFF0C;&#x5F53;<code>position</code>&#x5C0F;&#x4E8E;<code>header</code>&#x7684;<code>count</code>&#x65F6;&#xFF0C;&#x6B64;&#x65F6;&#x8FD4;&#x56DE;&#x5934;&#x90E8;<code>View</code>,&#x5F53;<code>position</code>&#x51CF;&#x53BB;<code>headeer</code>&#x7684;<code>count</code>&#x65F6;&#x4F9D;&#x7136;&#x5C0F;&#x4E8E;&#x6B63;&#x5E38;&#x7684;<code>adapter</code>&#x7684;<code>count</code>,&#x6B64;&#x65F6;&#x8FD4;&#x56DE;&#x6B63;&#x5E38;&#x7684;<code>View</code>&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6709;&#xFF0C;&#x81EA;&#x7136;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;<code>footer</code>&#x4E86;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x6839;&#x636E;<code>ListView</code>&#x7684;&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6A21;&#x4EFF;&#x5B9E;&#x73B0;<code>RecyclerView</code>&#x7684;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
<h1 id="EnhanceRecyclerView"><a href="#EnhanceRecyclerView" class="headerlink" title="EnhanceRecyclerView"></a>EnhanceRecyclerView</h1><p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6839;&#x636E;<code>ListView</code>&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x80FD;&#x591F;&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;<code>RecyclerView</code>&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x5B9A;&#x4E49;&#x4E3A;<code>EnhanceRecyclerView</code></p>
<h2 id="FixedViewInfo"><a href="#FixedViewInfo" class="headerlink" title="FixedViewInfo"></a>FixedViewInfo</h2><p>&#x5728;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x770B;&#x5230;<code>ListView</code>&#x4E2D;&#x4F7F;&#x7528;&#x5230;&#x4E86;<code>FixedViewInfo</code>&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#xFF0C;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x505A;&#x9002;&#x5F53;&#x7684;&#x4FEE;&#x6539;&#x5982;&#x4E0B;&#xFF0C;<code>View</code>&#x8FD8;&#x662F;&#x4E0D;&#x53D8;&#xFF0C;&#x4F9D;&#x7136;&#x662F;&#x6DFB;&#x52A0;&#x7684;&#x89C6;&#x56FE;&#xFF0C;&#x5C06;&#x5176;&#x4F59;&#x7684;&#x5220;&#x6389;&#xFF0C;&#x6362;&#x6210;<code>viewType</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public class FixedViewInfo {</span><br><span class="line">        public View view;</span><br><span class="line">        public int viewType;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<h2 id="addHeaderView&#x4E0E;addFooterView"><a href="#addHeaderView&#x4E0E;addFooterView" class="headerlink" title="addHeaderView&#x4E0E;addFooterView"></a>addHeaderView&#x4E0E;addFooterView</h2><p>&#x505A;&#x76F8;&#x5E94;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x5176;&#x4E2D;<code>BASE_HEADER_VIEW_TYPE</code>&#x4E0E;<code>BASE_FOOTER_VIEW_TYPE</code>&#x662F;&#x4E00;&#x4E2A;<code>final</code>&#x7684;<code>int</code>&#x6570;&#x636E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public void addHeaderView(View view) {</span><br><span class="line">        FixedViewInfo info = new FixedViewInfo();</span><br><span class="line">        info.view = view;</span><br><span class="line">        info.viewType = BASE_HEADER_VIEW_TYPE + mHeaderViewInfos.size();</span><br><span class="line">        mHeaderViewInfos.add(info);</span><br><span class="line"></span><br><span class="line">        if (mAdapter != null) {</span><br><span class="line">            mAdapter.notifyDataSetChanged();</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public void addFooterView(View view) {</span><br><span class="line">    FixedViewInfo info = new FixedViewInfo();</span><br><span class="line">    info.view = view;</span><br><span class="line">    info.viewType = BASE_FOOTER_VIEW_TYPE + mFooterViewInfos.size();</span><br><span class="line">    mFooterViewInfos.add(info);</span><br><span class="line"></span><br><span class="line">    if (mAdapter != null) {</span><br><span class="line">        mAdapter.notifyDataSetChanged();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="setAdapter"><a href="#setAdapter" class="headerlink" title="setAdapter"></a>setAdapter</h2><p>&#x4E0B;&#x9762;&#x662F;<code>setAdapter()</code>&#xFF0C;&#x4F7F;&#x7528;&#x540E;&#x9762;&#x5C01;&#x88C5;&#x7684;<code>WrapperRecyclerViewAdapter</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    @Override</span><br><span class="line">    public void setAdapter(Adapter adapter) {</span><br><span class="line">        if (!(adapter instanceof WrapperRecyclerViewAdapter))</span><br><span class="line">            mAdapter = new WrapperRecyclerViewAdapter(mHeaderViewInfos, mFooterViewInfos, adapter);</span><br><span class="line">        super.setAdapter(mAdapter);</span><br><span class="line"></span><br><span class="line">//        if (isShouldSpan) {</span><br><span class="line">//            ((WrapperRecyclerViewAdapter) mAdapter).adjustSpanSize(this);</span><br><span class="line">//        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<h1 id="WrapperRecyclerViewAdapter"><a href="#WrapperRecyclerViewAdapter" class="headerlink" title="WrapperRecyclerViewAdapter"></a>WrapperRecyclerViewAdapter</h1><p>&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;<code>ListView</code>&#x7684;<code>HeaderViewListAdapter</code>&#x6765;&#x6A21;&#x4EFF;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5C01;&#x88C5;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;<code>adapter</code>&#x3002;&#x6211;&#x8FD9;&#x91CC;&#x5B9A;&#x4E49;&#x4E3A;<code>WrapperRecyclerViewAdapter</code>&#x7EE7;&#x627F;<code>RecyclerView.Adapter</code>&#x6839;&#x636E;&#x60C5;&#x51B5;&#x9002;&#x5F53;&#x4FEE;&#x6539;&#x3002;</p>
<h2 id="getItemCount"><a href="#getItemCount" class="headerlink" title="getItemCount"></a>getItemCount</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">    public int getItemCount() {</span><br><span class="line">        if (mAdapter != null) {</span><br><span class="line">            return getHeadersCount() + getFootersCount() + mAdapter.getItemCount();</span><br><span class="line">        } else {</span><br><span class="line">            return getHeadersCount() + getFootersCount();</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<h2 id="getItemViewType"><a href="#getItemViewType" class="headerlink" title="getItemViewType"></a>getItemViewType</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">    public int getItemViewType(int position) {</span><br><span class="line">        int numHeaders = getHeadersCount();</span><br><span class="line">        if (position &lt; numHeaders) {</span><br><span class="line">            return mHeaderViewInfos.get(position).viewType;</span><br><span class="line">        }</span><br><span class="line">        int adjPosition = position - numHeaders;</span><br><span class="line">        int adapterPosition = 0;</span><br><span class="line">        if (mAdapter != null) {</span><br><span class="line">            adapterPosition = mAdapter.getItemCount();</span><br><span class="line">            if (adjPosition &lt; adapterPosition) {</span><br><span class="line">                return mAdapter.getItemViewType(adjPosition);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        return mFooterViewInfos.get(position - adapterPosition - getHeadersCount()).viewType;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x91CC;&#x903B;&#x8F91;&#x4E0E;<code>ListView</code>&#x7684;&#x57FA;&#x672C;&#x4E00;&#x81F4;&#x3002;</p>
<h2 id="onCreateViewHolder"><a href="#onCreateViewHolder" class="headerlink" title="onCreateViewHolder"></a>onCreateViewHolder</h2><p>&#x8FD9;&#x91CC;&#x9700;&#x5C06;<code>HeaderViewListAdapter</code>&#x4E2D;&#x7684;<code>getView()</code>&#x65B9;&#x6CD5;&#x5206;&#x6210;&#x4E24;&#x90E8;&#x5206;&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {</span><br><span class="line">    if (viewType &gt;= EnhanceRecyclerView.BASE_HEADER_VIEW_TYPE &amp;&amp; viewType &lt; EnhanceRecyclerView.BASE_HEADER_VIEW_TYPE + getHeadersCount()) {</span><br><span class="line">        View view = mHeaderViewInfos.get(viewType - EnhanceRecyclerView.BASE_HEADER_VIEW_TYPE).view;</span><br><span class="line">        return viewHolder(view);</span><br><span class="line">    } else if (viewType &gt;= EnhanceRecyclerView.BASE_FOOTER_VIEW_TYPE &amp;&amp; viewType &lt; EnhanceRecyclerView.BASE_FOOTER_VIEW_TYPE + getFootersCount()) {</span><br><span class="line">        View view = mFooterViewInfos.get(viewType - EnhanceRecyclerView.BASE_FOOTER_VIEW_TYPE).view;</span><br><span class="line">        return viewHolder(view);</span><br><span class="line">    }</span><br><span class="line">    return mAdapter.onCreateViewHolder(parent, viewType);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;<code>viewType</code>&#x6765;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x7684;&#x5E03;&#x5C40;&#x6587;&#x4EF6;.&#x4E0D;&#x662F;<code>header</code>&#x4E0E;<code>footer</code>&#x5E03;&#x5C40;&#x65F6;&#x5219;&#x76F4;&#x63A5;&#x56DE;&#x8C03;&#x539F;&#x59CB;<code>adapter</code>&#x7684;<code>onCreateViewHolder()</code>&#x65B9;&#x6CD5;&#x3002;&#x5B9E;&#x73B0;&#x6B63;&#x5E38;&#x7684;&#x5E03;&#x5C40;&#x3002;</p>
<h2 id="onBindViewHolder"><a href="#onBindViewHolder" class="headerlink" title="onBindViewHolder"></a>onBindViewHolder</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {</span><br><span class="line">    int numHeaders = getHeadersCount();</span><br><span class="line">    if (position &lt; numHeaders) {</span><br><span class="line">        return;</span><br><span class="line">    }</span><br><span class="line">    int adjPosition = position - numHeaders;</span><br><span class="line">    int adapterCount = 0;</span><br><span class="line">    if (mAdapter != null) {</span><br><span class="line">        adapterCount = mAdapter.getItemCount();</span><br><span class="line">        if (adjPosition &lt; adapterCount) {</span><br><span class="line">            mAdapter.onBindViewHolder(holder, adjPosition);</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x6839;&#x636E;<code>position</code>&#x7684;&#x4F4D;&#x7F6E;&#x6765;&#x9009;&#x62E9;&#xFF0C;&#x5F53;<code>position</code>&#x5C5E;&#x4E8E;&#x6B63;&#x5E38;&#x7684;&#x4F4D;&#x7F6E;&#x8303;&#x56F4;&#x4E4B;&#x5185;&#x65F6;&#xFF0C;&#x5219;&#x56DE;&#x8C03;&#x539F;&#x59CB;&#x7684;<code>adapter</code>&#x7684;<code>onBindViewHolder()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x7ED1;&#x5B9A;&#xFF1B;&#x5BF9;&#x4E8E;&#x5176;&#x5B83;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x65E0;&#x9700;&#x505A;&#x5904;&#x7406;&#x3002;</p>
<blockquote>
<p><em>&#x4E3B;&#x8981;&#x7684;&#x6A21;&#x4EFF;&#x53D8;&#x52A8;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#xFF0C;&#x7136;&#x540E;&#x81EA;&#x5DF1;&#x5728;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x8FDB;&#x884C;&#x9002;&#x5F53;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x6700;&#x540E;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>EnhanceRecyclerView</code>&#x66FF;&#x4EE3;<code>RecyclerView</code></em></p>
</blockquote>
<h1 id="&#x8C03;&#x6574;"><a href="#&#x8C03;&#x6574;" class="headerlink" title="&#x8C03;&#x6574;"></a>&#x8C03;&#x6574;</h1><p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x5728;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;&#x65F6;&#x5019;&#x8981;&#x8BBE;&#x7F6E;<code>LayoutManager</code>&#xFF0C;&#x5982;&#x679C;&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5F53;<code>LayoutManager</code>&#x8BBE;&#x7F6E;&#x4E3A;<code>LinearLayout</code>&#x65F6;&#xFF0C;&#x81EA;&#x7136;&#x6CA1;&#x4E0A;&#x9762;&#x95EE;&#x9898;&#xFF0C;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x80FD;&#x6B63;&#x5E38;&#x6DFB;&#x52A0;&#xFF1B;&#x4F46;&#x5F53;&#x6211;&#x4EEC;&#x7684;<code>LayoutManager</code>&#x8BBE;&#x7F6E;&#x4E3A;<code>GridLayoutManager</code>&#x4E0E;<code>StaggeredGridLayoutManager</code>&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x6DFB;&#x52A0;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#xFF0C;&#x5C31;&#x662F;&#x4ED6;&#x4EEC;&#x4E0D;&#x80FD;&#x72EC;&#x81EA;&#x5360;&#x4E00;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x4F7F;&#x4ED6;&#x4EEC;&#x5728;&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x65F6;&#x5019;&#x72EC;&#x81EA;&#x5360;&#x4E00;&#x884C;&#x3002;</p>
<h2 id="adjustSpanSize"><a href="#adjustSpanSize" class="headerlink" title="adjustSpanSize"></a>adjustSpanSize</h2><p>&#x5728;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>WrapperRecyclerViewAdapter</code>&#x4E2D;&#x6DFB;&#x52A0;<code>adjustSpanSize()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x8C03;&#x6574;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public void adjustSpanSize(RecyclerView recyclerView) {</span><br><span class="line">        if (recyclerView.getLayoutManager() instanceof GridLayoutManager) {</span><br><span class="line">            final GridLayoutManager manager = (GridLayoutManager) recyclerView.getLayoutManager();</span><br><span class="line">            manager.setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() {</span><br><span class="line">                @Override</span><br><span class="line">                public int getSpanSize(int position) {</span><br><span class="line">                    int numHeaders = getHeadersCount();</span><br><span class="line">                    int adjPosition = position - numHeaders;</span><br><span class="line">                    if (position &lt; numHeaders || adjPosition &gt;= mAdapter.getItemCount())</span><br><span class="line">                        return manager.getSpanCount();</span><br><span class="line">                    return 1;</span><br><span class="line">                }</span><br><span class="line">            });</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        if (recyclerView.getLayoutManager() instanceof StaggeredGridLayoutManager) {</span><br><span class="line">            isStaggered = true;</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5F53;<code>LayoutManager</code>&#x4E3A;<code>GridLayoutManager</code>&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;<code>manager</code>&#x6765;&#x8BBE;&#x7F6E;<code>setSpanSizeLookup()</code>&#x5728;<code>getSpanSize()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6839;&#x636E;&#x5177;&#x4F53;&#x5224;&#x65AD;&#x6765;&#x8C03;&#x7528;<code>manager.getSpanCount()</code>&#x6765;&#x5B9E;&#x73B0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x5360;&#x4E00;&#x884C;&#x7684;&#x6548;&#x679C;&#xFF1B;&#x5BF9;&#x4E8E;<code>StaggeredGridLayoutManager</code>&#x56E0;&#x4E3A;&#x5176;&#x6CA1;&#x6709;<code>setSpanSizeLookup()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5148;&#x505A;&#x6807;&#x8BB0;&#xFF0C;&#x5728;<code>ViewHolder</code>&#x4E2D;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x7684;<code>ItemView</code>&#x6765;&#x8BBE;&#x7F6E;<code>params</code>&#xFF0C;<code>setFullSpa(true)</code>&#x65B9;&#x6CD5;&#x6765;&#x586B;&#x5145;&#x4E00;&#x884C;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private RecyclerView.ViewHolder viewHolder(View itemView) {</span><br><span class="line"></span><br><span class="line">    if (isStaggered) {</span><br><span class="line">        StaggeredGridLayoutManager.LayoutParams params = new StaggeredGridLayoutManager.LayoutParams(StaggeredGridLayoutManager.LayoutParams.MATCH_PARENT,</span><br><span class="line">                StaggeredGridLayoutManager.LayoutParams.WRAP_CONTENT);</span><br><span class="line">        params.setFullSpan(true);</span><br><span class="line">        itemView.setLayoutParams(params);</span><br><span class="line">    }</span><br><span class="line">    return new RecyclerView.ViewHolder(itemView) {</span><br><span class="line">    };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="setLayoutManager"><a href="#setLayoutManager" class="headerlink" title="setLayoutManager"></a>setLayoutManager</h2><p>&#x5728;<code>EnhanceRecyclerView</code>&#x4E2D;&#x91CD;&#x5199;<code>setLayoutManager()</code>&#x65B9;&#x6CD5;,&#x6DFB;&#x52A0;&#x6807;&#x8BB0;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">    public void setLayoutManager(LayoutManager layout) {</span><br><span class="line">        if (layout instanceof GridLayoutManager || layout instanceof StaggeredGridLayoutManager)</span><br><span class="line">            isShouldSpan = true;</span><br><span class="line">        super.setLayoutManager(layout);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<p>&#x6700;&#x540E;&#x518D; &#x5728;<code>EnhanceRecyclerView</code>&#x7684;<code>setAdapter()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6839;&#x636E;&#x6807;&#x8BB0;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x8C03;&#x7528;<code>adjustSpanSize()</code>&#x65B9;&#x6CD5;&#x6765;&#x8FDB;&#x884C;&#x8C03;&#x6574;<code>header</code>&#x4E0E;<code>footer</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (isShouldSpan) {</span><br><span class="line">            ((WrapperRecyclerViewAdapter) mAdapter).adjustSpanSize(this);</span><br><span class="line">        }</span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x524D;&#x9762;<code>setAdapter()</code>&#x4E2D;&#x6240;&#x6CE8;&#x91CA;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x6574;&#x4E2A;&#x8C03;&#x6574;&#x90E8;&#x5206;&#x5C31;&#x57FA;&#x672C;&#x5B8C;&#x6210;&#x3002;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;&#x6DFB;&#x52A0;&#x4E5F;&#x5C31;&#x57FA;&#x672C;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>
<h1 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h1><p>&#x901A;&#x8FC7;<code>RecyclerView</code>&#x7684;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x6DFB;&#x52A0;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x80FD;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x8FD0;&#x7528;&#x539F;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x6765;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;&#x529F;&#x80FD;&#x3002;&#x867D;&#x7136;&#x65B9;&#x6CD5;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x6700;&#x597D;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x4E5F;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982;&#x4E0D;&#x80FD;&#x5728;&#x521D;&#x59CB;&#x5316;&#xFF08;onCreate&#xFF09;&#x4E2D;&#x540C;&#x65F6;&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x5E03;&#x5C40;&#x6DF7;&#x4E71;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x73B0;&#x5728;&#x8FD8;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x4F55;&#x6709;&#x8FD9;&#x79CD;&#x7279;&#x4F8B;&#xFF0C;&#x5E0C;&#x671B;&#x77E5;&#x9053;&#x7684;&#x53EF;&#x4EE5;&#x544A;&#x77E5;&#x89E3;&#x51B3;&#x4E0B;&#xFF0C;&#x4F46;&#x8FD9;&#x79CD;&#x6A21;&#x4EFF;&#x7684;&#x601D;&#x60F3;&#x8FD8;&#x662F;&#x5F88;&#x503C;&#x5F97;&#x63A8;&#x8350;&#x7684;&#x3002;</p>
<blockquote>
<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href="https://idisfkj.github.io">https://idisfkj.github.io</a></em></p>
</blockquote>

    
  </div>
</article>

</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal-one" aria-hidden="true">
  <a href="#close" class="cover" aria-hidden="true"></a>
  <div class="modal-dialog">
    <div class="modal-header">
      <a href="#close" class="btn-close" aria-hidden="true">关闭</a>
    </div>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/atom.xml"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    
  <section class="duoshuo-comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="" data-title="RecyclerView添加header与footer" data-url="https://idisfkj.github.io/2016/07/05/RecyclerView添加header与footer/index.html"></div>
    <!-- 多说评论框 end -->
  </section>




  <script type="text/javascript">
  var duoshuoQuery = {short_name:"idisfkj"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>


  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?398', function() {
      // load success
    });
  }
</script>

</body>
</html>
